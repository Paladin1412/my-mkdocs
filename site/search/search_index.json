{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Tannh\u00e4user Gate \u00b6 I Love to Sail Forbidden seas. Education \u00b6 Graduate from \u897f\u571f\u57ce\u8def10\u53f7\u9662\u3002 Technology Stack \u00b6 Expert in Javascript. Skilled in Design Pattern, Algorithm. Adept at Vue/React, Webpack/Rollup/Lerna, etc. Also Familiar with Kubernetes/Serverless, Java, C/C++, etc. Looking Forward \u00b6 Front-End Architect From Cloud Native to Serverless Minor Characteristics \u00b6 Talented in Languages, Natural Languages & Computer Languages alike. Certificated in Englist & Japanese. Love Football & Travelling. Good at Skiing. No Bother \u00b6","title":"Home"},{"location":"#tannhauser-gate","text":"I Love to Sail Forbidden seas.","title":"Tannh\u00e4user Gate"},{"location":"#education","text":"Graduate from \u897f\u571f\u57ce\u8def10\u53f7\u9662\u3002","title":"Education"},{"location":"#technology-stack","text":"Expert in Javascript. Skilled in Design Pattern, Algorithm. Adept at Vue/React, Webpack/Rollup/Lerna, etc. Also Familiar with Kubernetes/Serverless, Java, C/C++, etc.","title":"Technology Stack"},{"location":"#looking-forward","text":"Front-End Architect From Cloud Native to Serverless","title":"Looking Forward"},{"location":"#minor-characteristics","text":"Talented in Languages, Natural Languages & Computer Languages alike. Certificated in Englist & Japanese. Love Football & Travelling. Good at Skiing.","title":"Minor Characteristics"},{"location":"#no-bother","text":"","title":"No Bother"},{"location":"about/","text":"\u59d1\u5984\u542c\u4e4b \u00b6 \u4ee5\u4e0b\u7eaf\u5c5e\u80e1\u8bf4\u516b\u9053\uff0c\u59d1\u5984\u8a00\u4e4b\uff0c\u59d1\u5984\u542c\u4e4b\u3002 -- 2020-04-04 2020-04-04 \u8fd9\u4e9b\u5e74\uff0c\u6211\u5b66\u4e60\u6280\u672f\u7684\u8def\u7ebf\u8d70\u4e86\u4e0d\u5c11\u5f2f\u8def\uff0c\u53ef\u4ee5\u7528\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u6765\u5f62\u5bb9\u3002 \u6211\u7684\u5927\u5b66 \u00b6 \u5728\u8bfb\u7814\u9636\u6bb5\uff0c\u8003\u8fdb\u4e86\u6211\u4eec\u5b66\u6821\u6700\u96be\u8fdb\u7684\u5b9e\u9a8c\u5ba4\u4e4b\u4e00\uff0c\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5b9e\u9a8c\u5ba4\uff1b\u7136\u9e45\uff0c\u6bd5\u4e1a\u5f55\u6587\u5374\u662f\u5927\u6570\u636e\u6316\u6398\u7b97\u6cd5\u4f18\u5316\uff0c\u7b80\u76f4\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u3002\u6574\u4e2a\u5b9e\u9a8c\u5ba4\u5c31\u6211\u4e00\u4eba\u505a\u8fd9\u4e2a\u7814\u7a76\uff0c\u4ece\u96f6\u5f00\u59cb\uff0c\u987e\u76fc\u65e0\u4eba\uff0c\u5bfc\u5e08\u4e5f\u4e0d\u600e\u4e48\u80fd\u5e2e\u4e0a\u5fd9\uff1b\u5176\u96be\u5ea6\u53ef\u60f3\u800c\u77e5\uff0c\u5730\u72f1\u6a21\u5f0f\u6bd5\u4e1a\u3002 \u90ae\u50a8\u751f\u6daf \u00b6 \u6bd5\u4e1a\u540e\u7b2c\u4e00\u4efd\u5de5\u4f5c\uff0c\u53bb\u4e86\u67d0\u884c\u6570\u636e\u4e2d\u5fc3\u3002\u6570\u636e\u4e2d\u5fc3\u561b\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5f53\u7136\u662f\u5927\u6570\u636e\u76f8\u5173\u7814\u53d1\u5566\uff0c\u521d\u51fa\u8305\u5e90\u7684\u6211\u53ef\u4ee5\u5728\u6b64\u5927\u5c55\u5b8f\u56fe\uff0c\u6c72\u53d6\u4e0d\u5c11\u5b9e\u6218\u7ecf\u9a8c\uff1b\u9762\u8bd5\u65f6\uff0c\u6211\u4f83\u4f83\u800c\u8c08\u5927\u6570\u636e\uff0c\u4e00\u6392\u9762\u8bd5\u5b98\u542c\u5f97\u9762\u5e26\u559c\u8272\uff0c\u9891\u9891\u70b9\u5934\uff1b\u4ed6\u4eec\u4e0d\u53d1\u8a00\uff0c\u6211\u4e5f\u4e0d\u77e5\u6df1\u6d45\uff0c\u53cd\u6b63\u90a3\u53cd\u9988\u554a\uff0c\u8ba9\u6211\u89c9\u5f97\u826f\u79bd\u62e9\u6728\uff0c\u6240\u6258\u975e\u4eba\u3002 \u7136\u9e45\uff0c\u8fdb\u53bb\u4e4b\u540e\uff0c\u6211\u5f00\u59cb\u81ea\u95ed\u3002\u54ea\u91cc\u662f\u4ec0\u4e48\u5927\u6570\u636e\u7814\u53d1\uff0c\u7cfb\u7edf\u53ca\u6570\u636e\u5e93\u8fd0\u7ef4\uff0c\u7b80\u76f4\u50cf\u96ea\u56fd\u5217\u8f66\u4e0a\u7684\u9505\u7089\u623f\u3002 \u6709\u70b9\u62b5\u89e6\u65e5\u5e38\u7410\u4e8b\uff0c\u6240\u4ee5\u6bcf\u5929\u5de5\u4f5c\u4e4b\u4f59\uff0c\u81ea\u5b66\u5f00\u53d1\uff0c\u8eac\u8015\u4e0d\u8f8d\uff0c\u8fd9\u5c31\u6240\u8c13\u7684\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u3002Javascript \u8bed\u6cd5\u7280\u725b\u4e66\u770b\u4e86\u4e24\u7248\uff0c\u8bed\u8a00\u7cbe\u7cb9\uff0c\u8bbe\u8ba1\u6a21\u5f0f\u770b\u4e86\u4e0d\u5c11\uff0c\u4e34\u8d70\u524d\u8fd8\u7559\u4e0b\u4e86\u4e00\u4e2aDevOps\u7cfb\u7edf\u3002 \u8c08\u5230\u60f3\u8df3\u69fd\uff0c\u5468\u56f4\u7684\u58f0\u97f3\u5927\u591a\u90fd\u662f\uff0c\u8fd9\u91cc\u5de5\u4f5c\u8212\u670d\uff0c\u5f85\u9047\u8fd8\u4e0d\u9519\uff0c\u800c\u4e14\u4f60\u6280\u672f\u4e5f\u5e9f\u4e86\uff0c\u51fa\u53bb\u4e5f\u62ff\u4e0d\u5230\u597d\u7684offer\u3002 \u540e\u6765\u6211\u53bb\u4e86\u7231\u5947\u827a\uff0c\u58f0\u97f3\u53d8\u6210\uff0c\u4f60\u6709\u79cd\uff0c\u662f\u6570\u636e\u4e2d\u5fc3\u81ea\u6210\u7acb\u4ee5\u6765\u7b2c\u4e00\u4e2a\u4ece\u8fd9\u91cc\u8d70\u51fa\u505a\u5f00\u53d1\u7684\u3002\u6211\u8c26\u865a\u56de\u7b54\uff0c\u6211\u4e0d\u662f\u6709\u79cd\uff0c\u662f\u6709\u5b9e\u529b\u3002 \u7231\u5947\u827a \u00b6 \u5728\u7231\u5947\u827a\u5de5\u4f5c\u4f0a\u59cb\uff0c\u80fd\u5b66\u5230\u4e92\u8054\u7f51\u8fd0\u884c\u65b9\u5f0f\u53ca\u56e2\u961f\u5408\u4f5c\u6a21\u5f0f\uff0c\u786e\u5b9e\u9ad8\u6548\uff0c\u90a3\u4f1a\u513f\u6211\u4e5f\u5feb\u901f\u6210\u957f\uff0c\u6df1\u8c19\u6211\u5fc3\u3002\u5f85\u5230\u4e1a\u52a1\u719f\u6089\u4e4b\u540e\uff0c\u4efb\u52a1\u5c31\u591a\u4e86\uff0c\u6bcf\u5929\u52a0\u73ed\u5230\u5f88\u665a\uff0c\u90fd\u662f\u6bcf\u5929\u91cd\u590d\uff0c\u6ca1\u65f6\u95f4\u5145\u7535\uff0c\u89c9\u5f97\u67d0\u4e9b\u7406\u8bba\u77e5\u8bc6\u65b9\u9762\u7684\u6280\u672f\u751a\u81f3\u6709\u4e9b\u5012\u9000\u3002 \u67d0\u4e2a\u9879\u76ee \u00b6 \u540e\u6765\u63a5\u4e86\u4e00\u4e2a\u9879\u76ee\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\uff08IVP\uff09\u3002\u9886\u5bfc\u95ee\u6211\u60f3\u4e0d\u60f3\u505a\uff0c\u6211\u5174\u8da3\u6602\u7136\uff0c\u56e0\u4e3a\u5b83\u7684\u521b\u65b0\u6027\u548c\u6311\u6218\u6027\uff0c\u53ef\u4ee5\u628a\u6211\u4ece\u5faa\u89c4\u8e48\u77e9\u7684\u65e5\u5e38\u642c\u7816\u4e2d\u89e3\u653e\u51fa\u6765\uff1b\u4f46\u540e\u6765\u8ba9\u6211\u840c\u751f\u9000\u610f\u7684\u662f\uff0c\u6574\u4e2a\u4ea7\u54c1\u7684\u89c4\u5212\u53ca\u529f\u80fd\u8fed\u4ee3\uff0c\u6ca1\u8fdb\u5165\u4e00\u4e2a\u826f\u6027\u5faa\u73af\u3002 \u8fd9\u4e2a\u5e73\u53f0\uff0c\u662f\u6211\u548c\u540c\u684c\u4e00\u8d77\u5c01\u95ed\u5f00\u53d1\u4e86\u5927\u534a\u5e74\uff0c\u6bcf\u5929\u52a0\u73ed\u7684\u6210\u679c\u3002\u7b2c\u4e00\u7248\u4e0a\u7ebf\u4e4b\u540e\uff0c\u4ed6\u8bf4\u5165\u804c\u4ee5\u6765\u4ece\u6765\u6ca1\u8fd9\u4e48\u7d2f\u8fc7\uff0c\u4ee5\u81f4\u4e8e\u9a8c\u6536\u901a\u8fc7\u540e\uff0c\u6709\u79cd\u4ea7\u540e\u6291\u90c1\u75c7\u7684\u611f\u89c9\u3002 \u53ef\u4ee5\u591a\u804a\u804a\u8fd9\u4e2a\u4ea7\u54c1\uff0c\u6bd5\u7adf\u4e0d\u5c11\u5fc3\u8840\u6295\u5165\u5176\u4e2d\u3002\u6211\u5006\u7684\u5206\u5de5\u662f\uff0c\u4ed6\u8d1f\u8d23\u7528\u6237\u9274\u6743\uff0c\u9879\u76ee\u8349\u7a3f\u4fdd\u5b58\u56de\u663e\uff0c\u7d20\u6750\u4e0a\u4f20\u53ca\u7ba1\u7406\uff0c\u4ee5\u53ca\u540e\u53f0\u63a5\u53e3\u8c03\u7528\u7b49\uff1b\u6211\u8d1f\u8d23\u6d41\u7a0b\u56fe\u7684\u5efa\u6a21\u53ca\u6838\u5fc3\u7b97\u6cd5\u5b9e\u73b0\uff0c\u6d41\u7a0b\u56fe\u4ea4\u4e92\uff0c\u914d\u7f6e\u533a\u57df\u903b\u8f91\uff0c\u53ca\u64ad\u653e\u811a\u672c\u751f\u6210\u3002 \u5982\u6b64\u5206\u5de5\uff0c\u662f\u4e3a\u4e86\u8282\u7701\u65f6\u95f4\uff1a\u4ed6\u5165\u804c\u8f83\u65e9\uff0c\u5bf9\u516c\u53f8\u4e1a\u52a1\u63a5\u53e3\u719f\u6089\uff1b\u800c\u6211\uff0c\u8ba1\u7b97\u673a\u4e13\u4e1a\u79d1\u73ed\u51fa\u8eab\uff0c\u7b97\u6cd5\u57fa\u7840\u4e0d\u8d56\u3002 \u6d41\u7a0b\u56fe\u5462\uff0c\u662f\u6574\u4e2a\u5e73\u53f0\u7684\u6838\u5fc3\u3002\u5176\u804c\u8d23\u5f88\u7b80\u5355\uff0c\u5c31\u5982\u56fe\u7075\u6240\u8bf4\uff0c\u8f93\u5165\u5904\u7406\u8f93\u51fa\u3002\u8f93\u5165\uff0c\u7528\u6237\u7684\u4ea4\u4e92\u884c\u4e3a\u53ca\u914d\u7f6e\u7684\u6570\u636e\uff1b\u5904\u7406\uff0c\u628a\u8fd9\u4e9b\u884c\u4e3a\u548c\u6570\u636e\u8fdb\u884c\u62bd\u8c61\uff0c\u5efa\u6a21\uff0c\u53d8\u6210\u8ba1\u7b97\u673a\u7406\u89e3\u7684\u4ee3\u7801\uff1b\u8f93\u51fa\uff0c\u64ad\u653e\u811a\u672c\u3002 \u6700\u5f00\u59cb\u6211\u4eec\u505a\u8fc7\u4e00\u4e2a\u5bf9\u5185\u7248\uff0c\u4f9b\u7f16\u8f91\u5236\u4f5c\u4e92\u52a8\u89c6\u9891\u4f7f\u7528\u3002\u80fd\u5904\u7406\u7b80\u5355\u7684\u4ea4\u4e92\uff0c\u80fd\u53ef\u89c6\u5316\u6d41\u7a0b\uff0c\u80fd\u751f\u4ea7\u811a\u672c\uff0c\u529f\u80fd\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u6709\u4e2a\u6700\u5927\u7684\u786c\u4f24\uff0c\u6d41\u7a0b\u56fe\u8282\u70b9\u7684\u6392\u5217\u4e0d\u7075\u6d3b\u3002 \u91cd\u6784 \u00b6 \u540e\u6765\u8981\u505a\u5bf9\u5916\u7248\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u7684\u4e92\u52a8\u89c6\u9891\u5e73\u53f0\uff0c\u663e\u7136\u6cbf\u7528\u4e4b\u524d\u7684\u7248\u672c\uff0c\u65e0\u6cd5\u6ee1\u8db3\u7528\u6237\u66f4\u591a\u4e2a\u6027\u5316\u7684\u9700\u6c42\u3002\u7ecf\u8fc7\u4e24\u5929\u7684\u8c03\u7814\uff0c\u6211\u53d1\u73b0\u5e76\u6ca1\u7279\u522b\u597d\u7684\u5de5\u5177\u5b8c\u7f8e\u5951\u5408\u76ee\u524d\u4ea7\u54c1\u63d0\u51fa\u7684\u9700\u6c42\uff0c\u679c\u65ad\u51b3\u5b9a\u81ea\u5df1\u6765\u5b9e\u73b0\u6838\u5fc3\u7684\u7b97\u6cd5\u3002 \u7b97\u6cd5\u6838\u5fc3\u601d\u60f3\u53ca\u4e3b\u8981\u6570\u636e\u7ed3\u6784\uff1a \u4e00\u5f20\u590d\u6742\u7684\u6709\u5411\u56fe\uff0c\u627f\u8f7d\u6d41\u7a0b\u56fe\u6240\u6709\u7684\u914d\u7f6e\u4fe1\u606f \u4e00\u68f5\u6811\uff0c\u6807\u8bb0\u6d41\u7a0b\u56fe\u4e2d\u8282\u70b9\u7684\u5c42\u6b21\u548c\u8ba1\u7b97\u8282\u70b9\u4f4d\u7f6e \u628a\u56fe\u8f6c\u5316\u4e3a\u6811 \u4ece\u6811\u4e0a\u83b7\u53d6\u7ed8\u5236\u56fe\u7684\u6570\u636e \u751f\u6210\u7ed8\u5236\u56fe\uff0c\u5b9e\u73b0\u53ef\u89c6\u5316\u53ca\u4ea4\u4e92 \u5927\u9053\u81f3\u7b80\uff0c\u8ba1\u7b97\u673a\u7684\u672c\u8d28\u4e0d\u5916\u5982\u662f\uff1a\u8f93\u5165\u5904\u7406\u8f93\u51fa\u3002 \u600e\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u5229\u7528\u4e86\u4f55\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5982\u4f55\u5de5\u7a0b\u5316\uff0c\u6211\u5728\u5f00\u53d1\u6587\u6863\u91ccWiki\u91cc\u6709\u8be6\u7ec6\u8bf4\u660e\u3002 \u6280\u672f\u5c42\u9762\u6709\u8fc7\u4ec0\u4e48\u95ee\u9898\u5462\uff0c\u65f6\u95f4\u7d27\u8feb\uff0c\u6211\u529b\u6392\u4f17\u8bae\uff0c\u8fdb\u884c\u8fc7\u4e00\u6b21\u5927\u9762\u79ef\u7684\u91cd\u6784\u3002\u90a3\u6bb5\u65f6\u95f4\u6211\u538b\u529b\u5f88\u5927\uff0c\u4ea7\u54c1\u7ecf\u7406\uff0c\u9879\u76ee\u7ecf\u7406\uff0c\u8fd8\u6709\u5927\u9886\u5bfc\u7ed9\u6211\u65bd\u538b\uff0c\u8bf4\u628a\u91cd\u6784\u653e\u5728\u5de5\u4f5c\u4e4b\u4f59\uff0c\u9650\u4e00\u6b21\u9700\u6c42\u4e0a\u7ebf\u65f6\u518d\u4f7f\u7528\u91cd\u6784\u4e4b\u540e\u7684\u7248\u672c\u3002\u53ea\u6709\u5c0f\u9886\u5bfc\u652f\u6301\u6211\uff0c\u7ed9\u4e86\u6211\u4fe1\u4efb\uff0c\u5e2e\u6211\u5206\u62c5\u4e86\u4e00\u90e8\u5206\u538b\u529b\uff0c\u8ba9\u6211\u5ef6\u671f\u4e24\u5929\u4e0a\u7ebf\u4e86\u91cd\u6784\u4e4b\u540e\u7684\u7248\u672c\u3002 \u540e\u6765\u56de\u60f3\u603b\u7ed3\uff0c\u6839\u636e\u654f\u6377\u5f00\u53d1\u91cc\u7684 XP\u7f16\u7a0b\u6cd5\u5219\uff0c\u5173\u4e8e\u91cd\u6784\u8fd9\u4e00\u6761\uff0c\u628a\u6bcf\u6b21\u4e00\u589e\u52a0\u9700\u6c42\uff0c\u5f53\u4f5c\u4e00\u6b21\u91cd\u6784\u7684\u673a\u4f1a\u3002 \u81ea\u6211\u603b\u7ed3 \u00b6 \u672b\u4e86\uff0c\u600e\u4e48\u8bc4\u4ef7\u5b83\u5462\uff0c\u6211\u60f3\u4e86\u60f3\uff1a\u5b83\u662f\u4e00\u4e2a\u597d\u7684\u4f5c\u54c1\uff0c\u4f46\u975e\u4e00\u4e2a\u597d\u7684\u4ea7\u54c1\u3002 \u201c\u8fd9\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u4f5c\u54c1\u201d\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bf4\u5462\u3002\u56e0\u4e3a\u6211\u9760\u5b83\u62ff\u5230\u4e86\u4e00\u4e2a\u201c\u5927\u795e\u201d\u7684\u79f0\u53f7\uff0c \u4e0d\u662f\u6709\u4e2a\u5c0f\u8ff7\u5f1f\u6216\u5c0f\u8ff7\u59b9\u5938\u4f60\u5c31\u80fd\u62ff\u7684\uff0c\u53ea\u6709\u62ffA++ \u7ee9\u6548\u7684\u4eba\uff0c\u624d\u6709\u6b64\u79f0\u53f7\u3002\u5f53\u524d\u8fd9\u4e2a\u56e2\u961f\u91cc\u6211\u5165\u804c\u6700\u665a\uff0c\u6709\u6b64\u79f0\u53f7\u7684\u72ec\u6211\u4e00\u4eba\u3002\u8fd9\u662f\u6211\u7684\u6536\u83b7\u3002 \u201c\u5e76\u975e\u4e00\u4e2a\u597d\u7684\u4ea7\u54c1\u201d\uff0c\u8fd9\u53c8\u662f\u5565\u610f\u601d\u3002\u56e0\u4e3a\u6211\u6700\u521d\u63a5\u624b\u8fd9\u4e2a\u4ea7\u54c1\u65f6\uff0c\u91ce\u5fc3\u8fdc\u4e0d\u6b62\u5982\u6b64\uff0c\u662f\u62b1\u7740\u4e00\u9897\u6253\u9020\u884c\u4e1a\u9876\u5c16\u7684\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\u7684\u5fc3\u53bb\u505a\u3002\u7ed3\u679c\uff0c\u5728\u5f00\u53d1\u4e2d\u5f97\u5230\u652f\u6301\uff0c\u4ea7\u54c1\u7684\u63a8\u5e7f\u53ca\u516c\u53f8\u5bf9\u5176\u5b9a\u4f4d\uff0c\u5e76\u4e0d\u5c3d\u5982\u4eba\u610f\u3002\u7a76\u5176\u539f\u56e0\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u4f60\u4f5c\u4e3a\u4e00\u4e2a\u7684\u7801\u519c\uff0c\u5e76\u6ca1\u90a3\u4e48\u5927\u7684\u8bdd\u8bed\u6743\u3002\u8fd9\u662f\u6211\u7684\u65e0\u5948\u3002 I Love to Sail Forbidden Seas. \u00b6 \u6709\u4e00\u6b21\u9886\u5bfc\u627e\u6211\u5355\u804a\u5b66\u4e60\u66f2\u7ebf\u804a\u6280\u672f\u6808\uff0c\u95ee\u6211\u5de5\u4f5c\u611f\u53d7\u53ca\u804c\u4e1a\u89c4\u5212\u3002\u6211\u8bf4\uff0c\u611f\u89c9\u6bcf\u5929\u90fd\u5728\u5fd9\u4e0d\u8fed\u7684\u62fc\u88c5\u529f\u80fd\u548c\u8054\u8c03\u63a5\u53e3\uff1b\u800c\u8ba1\u7b97\u673a\u662f\u4e00\u9897\u53c2\u5929\u5927\u6811\uff0c\u6211\u53ea\u5728\u67d0\u4e00\u679d\u6860\u3002 \u6211\u60f3\u77e5\u9053\uff0c\u8fd9\u68f5\u6811\u957f\u5565\u6837\u3002 \u6240\u4ee5\uff0c\u5c31\u7b97\u65e5\u5e38\u5de5\u4f5c\u7e41\u5fd9\u5982\u65af\uff0c\u6211\u4f9d\u65e7\u6324\u51fa\u65f6\u95f4\"\u4e0d\u52a1\u6b63\u4e1a\"\u3002 Why another job. \u00b6 \u4f46\u662f\uff0c\u6211\u7684\u4eba\u751f\u4e2d\u603b\u6709\u8fd9\u4e2a\u4e48\u4e00\u4e2a\u4f46\u662f\u3002 \u611f\u89c9\u53c2\u52a0\u5de5\u4f5c\u5c31\u662f\u6211\u4eba\u751f\u7684\u6ed1\u94c1\u5362\uff0c\u4e0a\u5b66\u90a3\u4f1a\u513f\u54c1\u5b66\u517c\u4f18\uff0c\u5e94\u5bf9\u81ea\u5982\uff0c\u8f7b\u677e\u968f\u610f\uff0ceverything seems Very Promising. \u4f46\u5de5\u4f5c\u4e4b\u540e\uff0c\u5341\u591a\u5e74\u7684\u8ba1\u7b97\u673a\u5b66\u4e60\u53ca\u5b9e\u6218\u7ecf\u9a8c\uff0c\u7adf\u7136\u5435\u67b6\u8fd8\u5435\u4e0d\u8fc7\u4e00\u4e2a\u5f85\u6bd5\u4e1a\u7684\u4ea7\u54c1\u5b9e\u4e60\u751f\u59b9\u7eb8\u3002 \u6709\u4e2a\u540c\u5b66\u8bf4\uff1a\u9762\u8bd5\u5c31\u662f\u522b\u4eba\u8ba4\u53ef\u81ea\u5df1\u7684\u81ea\u5706\u5176\u8bf4\u3002 \u5c31\u8fd9\u4e48\u7b80\u5355\u3002 \u5c31\u8fd9\u4e48\u7b80\u5355\uff1f \u5c31\u50cf\u4e0a\u5b66\u90a3\u4f1a\u513f\uff0c\u56fe\u7075\u544a\u8bc9\u6211\uff1a \u8ba1\u7b97\u673a\u7684\u672c\u8d28\u5c31\u662f\uff0c\u8f93\u5165\u5904\u7406\u8f93\u51fa \u3002 \u540c\u6837\uff0c\u5c31\u8fd9\u4e48\u7b80\u5355\u3002\u7136\u540e\u9a97\u6211\u5165\u5751\uff0c\u5f53\u4e86\u7a0b\u5e8f\u733f\u3002 \u9b3c\u77e5\u9053\uff0c\u8fd9\u4e9b\u5e74\uff0c\u6211\u8fd8\u6709\u5927\u591a\u6570\u7a0b\u5e8f\u5458\u5728 \u201c\u5904\u7406\u201d \u8fd9\u4e2a\u9636\u6bb5\uff0c\u7ecf\u5386\u4e86\u4ec0\u4e48\u3002","title":"About"},{"location":"about/#_1","text":"\u4ee5\u4e0b\u7eaf\u5c5e\u80e1\u8bf4\u516b\u9053\uff0c\u59d1\u5984\u8a00\u4e4b\uff0c\u59d1\u5984\u542c\u4e4b\u3002 -- 2020-04-04 2020-04-04 \u8fd9\u4e9b\u5e74\uff0c\u6211\u5b66\u4e60\u6280\u672f\u7684\u8def\u7ebf\u8d70\u4e86\u4e0d\u5c11\u5f2f\u8def\uff0c\u53ef\u4ee5\u7528\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u6765\u5f62\u5bb9\u3002","title":"\u59d1\u5984\u542c\u4e4b"},{"location":"about/#_2","text":"\u5728\u8bfb\u7814\u9636\u6bb5\uff0c\u8003\u8fdb\u4e86\u6211\u4eec\u5b66\u6821\u6700\u96be\u8fdb\u7684\u5b9e\u9a8c\u5ba4\u4e4b\u4e00\uff0c\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5b9e\u9a8c\u5ba4\uff1b\u7136\u9e45\uff0c\u6bd5\u4e1a\u5f55\u6587\u5374\u662f\u5927\u6570\u636e\u6316\u6398\u7b97\u6cd5\u4f18\u5316\uff0c\u7b80\u76f4\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u3002\u6574\u4e2a\u5b9e\u9a8c\u5ba4\u5c31\u6211\u4e00\u4eba\u505a\u8fd9\u4e2a\u7814\u7a76\uff0c\u4ece\u96f6\u5f00\u59cb\uff0c\u987e\u76fc\u65e0\u4eba\uff0c\u5bfc\u5e08\u4e5f\u4e0d\u600e\u4e48\u80fd\u5e2e\u4e0a\u5fd9\uff1b\u5176\u96be\u5ea6\u53ef\u60f3\u800c\u77e5\uff0c\u5730\u72f1\u6a21\u5f0f\u6bd5\u4e1a\u3002","title":"\u6211\u7684\u5927\u5b66"},{"location":"about/#_3","text":"\u6bd5\u4e1a\u540e\u7b2c\u4e00\u4efd\u5de5\u4f5c\uff0c\u53bb\u4e86\u67d0\u884c\u6570\u636e\u4e2d\u5fc3\u3002\u6570\u636e\u4e2d\u5fc3\u561b\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5f53\u7136\u662f\u5927\u6570\u636e\u76f8\u5173\u7814\u53d1\u5566\uff0c\u521d\u51fa\u8305\u5e90\u7684\u6211\u53ef\u4ee5\u5728\u6b64\u5927\u5c55\u5b8f\u56fe\uff0c\u6c72\u53d6\u4e0d\u5c11\u5b9e\u6218\u7ecf\u9a8c\uff1b\u9762\u8bd5\u65f6\uff0c\u6211\u4f83\u4f83\u800c\u8c08\u5927\u6570\u636e\uff0c\u4e00\u6392\u9762\u8bd5\u5b98\u542c\u5f97\u9762\u5e26\u559c\u8272\uff0c\u9891\u9891\u70b9\u5934\uff1b\u4ed6\u4eec\u4e0d\u53d1\u8a00\uff0c\u6211\u4e5f\u4e0d\u77e5\u6df1\u6d45\uff0c\u53cd\u6b63\u90a3\u53cd\u9988\u554a\uff0c\u8ba9\u6211\u89c9\u5f97\u826f\u79bd\u62e9\u6728\uff0c\u6240\u6258\u975e\u4eba\u3002 \u7136\u9e45\uff0c\u8fdb\u53bb\u4e4b\u540e\uff0c\u6211\u5f00\u59cb\u81ea\u95ed\u3002\u54ea\u91cc\u662f\u4ec0\u4e48\u5927\u6570\u636e\u7814\u53d1\uff0c\u7cfb\u7edf\u53ca\u6570\u636e\u5e93\u8fd0\u7ef4\uff0c\u7b80\u76f4\u50cf\u96ea\u56fd\u5217\u8f66\u4e0a\u7684\u9505\u7089\u623f\u3002 \u6709\u70b9\u62b5\u89e6\u65e5\u5e38\u7410\u4e8b\uff0c\u6240\u4ee5\u6bcf\u5929\u5de5\u4f5c\u4e4b\u4f59\uff0c\u81ea\u5b66\u5f00\u53d1\uff0c\u8eac\u8015\u4e0d\u8f8d\uff0c\u8fd9\u5c31\u6240\u8c13\u7684\u201c\u4e0d\u52a1\u6b63\u4e1a\u201d\u3002Javascript \u8bed\u6cd5\u7280\u725b\u4e66\u770b\u4e86\u4e24\u7248\uff0c\u8bed\u8a00\u7cbe\u7cb9\uff0c\u8bbe\u8ba1\u6a21\u5f0f\u770b\u4e86\u4e0d\u5c11\uff0c\u4e34\u8d70\u524d\u8fd8\u7559\u4e0b\u4e86\u4e00\u4e2aDevOps\u7cfb\u7edf\u3002 \u8c08\u5230\u60f3\u8df3\u69fd\uff0c\u5468\u56f4\u7684\u58f0\u97f3\u5927\u591a\u90fd\u662f\uff0c\u8fd9\u91cc\u5de5\u4f5c\u8212\u670d\uff0c\u5f85\u9047\u8fd8\u4e0d\u9519\uff0c\u800c\u4e14\u4f60\u6280\u672f\u4e5f\u5e9f\u4e86\uff0c\u51fa\u53bb\u4e5f\u62ff\u4e0d\u5230\u597d\u7684offer\u3002 \u540e\u6765\u6211\u53bb\u4e86\u7231\u5947\u827a\uff0c\u58f0\u97f3\u53d8\u6210\uff0c\u4f60\u6709\u79cd\uff0c\u662f\u6570\u636e\u4e2d\u5fc3\u81ea\u6210\u7acb\u4ee5\u6765\u7b2c\u4e00\u4e2a\u4ece\u8fd9\u91cc\u8d70\u51fa\u505a\u5f00\u53d1\u7684\u3002\u6211\u8c26\u865a\u56de\u7b54\uff0c\u6211\u4e0d\u662f\u6709\u79cd\uff0c\u662f\u6709\u5b9e\u529b\u3002","title":"\u90ae\u50a8\u751f\u6daf"},{"location":"about/#_4","text":"\u5728\u7231\u5947\u827a\u5de5\u4f5c\u4f0a\u59cb\uff0c\u80fd\u5b66\u5230\u4e92\u8054\u7f51\u8fd0\u884c\u65b9\u5f0f\u53ca\u56e2\u961f\u5408\u4f5c\u6a21\u5f0f\uff0c\u786e\u5b9e\u9ad8\u6548\uff0c\u90a3\u4f1a\u513f\u6211\u4e5f\u5feb\u901f\u6210\u957f\uff0c\u6df1\u8c19\u6211\u5fc3\u3002\u5f85\u5230\u4e1a\u52a1\u719f\u6089\u4e4b\u540e\uff0c\u4efb\u52a1\u5c31\u591a\u4e86\uff0c\u6bcf\u5929\u52a0\u73ed\u5230\u5f88\u665a\uff0c\u90fd\u662f\u6bcf\u5929\u91cd\u590d\uff0c\u6ca1\u65f6\u95f4\u5145\u7535\uff0c\u89c9\u5f97\u67d0\u4e9b\u7406\u8bba\u77e5\u8bc6\u65b9\u9762\u7684\u6280\u672f\u751a\u81f3\u6709\u4e9b\u5012\u9000\u3002","title":"\u7231\u5947\u827a"},{"location":"about/#_5","text":"\u540e\u6765\u63a5\u4e86\u4e00\u4e2a\u9879\u76ee\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\uff08IVP\uff09\u3002\u9886\u5bfc\u95ee\u6211\u60f3\u4e0d\u60f3\u505a\uff0c\u6211\u5174\u8da3\u6602\u7136\uff0c\u56e0\u4e3a\u5b83\u7684\u521b\u65b0\u6027\u548c\u6311\u6218\u6027\uff0c\u53ef\u4ee5\u628a\u6211\u4ece\u5faa\u89c4\u8e48\u77e9\u7684\u65e5\u5e38\u642c\u7816\u4e2d\u89e3\u653e\u51fa\u6765\uff1b\u4f46\u540e\u6765\u8ba9\u6211\u840c\u751f\u9000\u610f\u7684\u662f\uff0c\u6574\u4e2a\u4ea7\u54c1\u7684\u89c4\u5212\u53ca\u529f\u80fd\u8fed\u4ee3\uff0c\u6ca1\u8fdb\u5165\u4e00\u4e2a\u826f\u6027\u5faa\u73af\u3002 \u8fd9\u4e2a\u5e73\u53f0\uff0c\u662f\u6211\u548c\u540c\u684c\u4e00\u8d77\u5c01\u95ed\u5f00\u53d1\u4e86\u5927\u534a\u5e74\uff0c\u6bcf\u5929\u52a0\u73ed\u7684\u6210\u679c\u3002\u7b2c\u4e00\u7248\u4e0a\u7ebf\u4e4b\u540e\uff0c\u4ed6\u8bf4\u5165\u804c\u4ee5\u6765\u4ece\u6765\u6ca1\u8fd9\u4e48\u7d2f\u8fc7\uff0c\u4ee5\u81f4\u4e8e\u9a8c\u6536\u901a\u8fc7\u540e\uff0c\u6709\u79cd\u4ea7\u540e\u6291\u90c1\u75c7\u7684\u611f\u89c9\u3002 \u53ef\u4ee5\u591a\u804a\u804a\u8fd9\u4e2a\u4ea7\u54c1\uff0c\u6bd5\u7adf\u4e0d\u5c11\u5fc3\u8840\u6295\u5165\u5176\u4e2d\u3002\u6211\u5006\u7684\u5206\u5de5\u662f\uff0c\u4ed6\u8d1f\u8d23\u7528\u6237\u9274\u6743\uff0c\u9879\u76ee\u8349\u7a3f\u4fdd\u5b58\u56de\u663e\uff0c\u7d20\u6750\u4e0a\u4f20\u53ca\u7ba1\u7406\uff0c\u4ee5\u53ca\u540e\u53f0\u63a5\u53e3\u8c03\u7528\u7b49\uff1b\u6211\u8d1f\u8d23\u6d41\u7a0b\u56fe\u7684\u5efa\u6a21\u53ca\u6838\u5fc3\u7b97\u6cd5\u5b9e\u73b0\uff0c\u6d41\u7a0b\u56fe\u4ea4\u4e92\uff0c\u914d\u7f6e\u533a\u57df\u903b\u8f91\uff0c\u53ca\u64ad\u653e\u811a\u672c\u751f\u6210\u3002 \u5982\u6b64\u5206\u5de5\uff0c\u662f\u4e3a\u4e86\u8282\u7701\u65f6\u95f4\uff1a\u4ed6\u5165\u804c\u8f83\u65e9\uff0c\u5bf9\u516c\u53f8\u4e1a\u52a1\u63a5\u53e3\u719f\u6089\uff1b\u800c\u6211\uff0c\u8ba1\u7b97\u673a\u4e13\u4e1a\u79d1\u73ed\u51fa\u8eab\uff0c\u7b97\u6cd5\u57fa\u7840\u4e0d\u8d56\u3002 \u6d41\u7a0b\u56fe\u5462\uff0c\u662f\u6574\u4e2a\u5e73\u53f0\u7684\u6838\u5fc3\u3002\u5176\u804c\u8d23\u5f88\u7b80\u5355\uff0c\u5c31\u5982\u56fe\u7075\u6240\u8bf4\uff0c\u8f93\u5165\u5904\u7406\u8f93\u51fa\u3002\u8f93\u5165\uff0c\u7528\u6237\u7684\u4ea4\u4e92\u884c\u4e3a\u53ca\u914d\u7f6e\u7684\u6570\u636e\uff1b\u5904\u7406\uff0c\u628a\u8fd9\u4e9b\u884c\u4e3a\u548c\u6570\u636e\u8fdb\u884c\u62bd\u8c61\uff0c\u5efa\u6a21\uff0c\u53d8\u6210\u8ba1\u7b97\u673a\u7406\u89e3\u7684\u4ee3\u7801\uff1b\u8f93\u51fa\uff0c\u64ad\u653e\u811a\u672c\u3002 \u6700\u5f00\u59cb\u6211\u4eec\u505a\u8fc7\u4e00\u4e2a\u5bf9\u5185\u7248\uff0c\u4f9b\u7f16\u8f91\u5236\u4f5c\u4e92\u52a8\u89c6\u9891\u4f7f\u7528\u3002\u80fd\u5904\u7406\u7b80\u5355\u7684\u4ea4\u4e92\uff0c\u80fd\u53ef\u89c6\u5316\u6d41\u7a0b\uff0c\u80fd\u751f\u4ea7\u811a\u672c\uff0c\u529f\u80fd\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u6709\u4e2a\u6700\u5927\u7684\u786c\u4f24\uff0c\u6d41\u7a0b\u56fe\u8282\u70b9\u7684\u6392\u5217\u4e0d\u7075\u6d3b\u3002","title":"\u67d0\u4e2a\u9879\u76ee"},{"location":"about/#_6","text":"\u540e\u6765\u8981\u505a\u5bf9\u5916\u7248\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u7684\u4e92\u52a8\u89c6\u9891\u5e73\u53f0\uff0c\u663e\u7136\u6cbf\u7528\u4e4b\u524d\u7684\u7248\u672c\uff0c\u65e0\u6cd5\u6ee1\u8db3\u7528\u6237\u66f4\u591a\u4e2a\u6027\u5316\u7684\u9700\u6c42\u3002\u7ecf\u8fc7\u4e24\u5929\u7684\u8c03\u7814\uff0c\u6211\u53d1\u73b0\u5e76\u6ca1\u7279\u522b\u597d\u7684\u5de5\u5177\u5b8c\u7f8e\u5951\u5408\u76ee\u524d\u4ea7\u54c1\u63d0\u51fa\u7684\u9700\u6c42\uff0c\u679c\u65ad\u51b3\u5b9a\u81ea\u5df1\u6765\u5b9e\u73b0\u6838\u5fc3\u7684\u7b97\u6cd5\u3002 \u7b97\u6cd5\u6838\u5fc3\u601d\u60f3\u53ca\u4e3b\u8981\u6570\u636e\u7ed3\u6784\uff1a \u4e00\u5f20\u590d\u6742\u7684\u6709\u5411\u56fe\uff0c\u627f\u8f7d\u6d41\u7a0b\u56fe\u6240\u6709\u7684\u914d\u7f6e\u4fe1\u606f \u4e00\u68f5\u6811\uff0c\u6807\u8bb0\u6d41\u7a0b\u56fe\u4e2d\u8282\u70b9\u7684\u5c42\u6b21\u548c\u8ba1\u7b97\u8282\u70b9\u4f4d\u7f6e \u628a\u56fe\u8f6c\u5316\u4e3a\u6811 \u4ece\u6811\u4e0a\u83b7\u53d6\u7ed8\u5236\u56fe\u7684\u6570\u636e \u751f\u6210\u7ed8\u5236\u56fe\uff0c\u5b9e\u73b0\u53ef\u89c6\u5316\u53ca\u4ea4\u4e92 \u5927\u9053\u81f3\u7b80\uff0c\u8ba1\u7b97\u673a\u7684\u672c\u8d28\u4e0d\u5916\u5982\u662f\uff1a\u8f93\u5165\u5904\u7406\u8f93\u51fa\u3002 \u600e\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u5229\u7528\u4e86\u4f55\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5982\u4f55\u5de5\u7a0b\u5316\uff0c\u6211\u5728\u5f00\u53d1\u6587\u6863\u91ccWiki\u91cc\u6709\u8be6\u7ec6\u8bf4\u660e\u3002 \u6280\u672f\u5c42\u9762\u6709\u8fc7\u4ec0\u4e48\u95ee\u9898\u5462\uff0c\u65f6\u95f4\u7d27\u8feb\uff0c\u6211\u529b\u6392\u4f17\u8bae\uff0c\u8fdb\u884c\u8fc7\u4e00\u6b21\u5927\u9762\u79ef\u7684\u91cd\u6784\u3002\u90a3\u6bb5\u65f6\u95f4\u6211\u538b\u529b\u5f88\u5927\uff0c\u4ea7\u54c1\u7ecf\u7406\uff0c\u9879\u76ee\u7ecf\u7406\uff0c\u8fd8\u6709\u5927\u9886\u5bfc\u7ed9\u6211\u65bd\u538b\uff0c\u8bf4\u628a\u91cd\u6784\u653e\u5728\u5de5\u4f5c\u4e4b\u4f59\uff0c\u9650\u4e00\u6b21\u9700\u6c42\u4e0a\u7ebf\u65f6\u518d\u4f7f\u7528\u91cd\u6784\u4e4b\u540e\u7684\u7248\u672c\u3002\u53ea\u6709\u5c0f\u9886\u5bfc\u652f\u6301\u6211\uff0c\u7ed9\u4e86\u6211\u4fe1\u4efb\uff0c\u5e2e\u6211\u5206\u62c5\u4e86\u4e00\u90e8\u5206\u538b\u529b\uff0c\u8ba9\u6211\u5ef6\u671f\u4e24\u5929\u4e0a\u7ebf\u4e86\u91cd\u6784\u4e4b\u540e\u7684\u7248\u672c\u3002 \u540e\u6765\u56de\u60f3\u603b\u7ed3\uff0c\u6839\u636e\u654f\u6377\u5f00\u53d1\u91cc\u7684 XP\u7f16\u7a0b\u6cd5\u5219\uff0c\u5173\u4e8e\u91cd\u6784\u8fd9\u4e00\u6761\uff0c\u628a\u6bcf\u6b21\u4e00\u589e\u52a0\u9700\u6c42\uff0c\u5f53\u4f5c\u4e00\u6b21\u91cd\u6784\u7684\u673a\u4f1a\u3002","title":"\u91cd\u6784"},{"location":"about/#_7","text":"\u672b\u4e86\uff0c\u600e\u4e48\u8bc4\u4ef7\u5b83\u5462\uff0c\u6211\u60f3\u4e86\u60f3\uff1a\u5b83\u662f\u4e00\u4e2a\u597d\u7684\u4f5c\u54c1\uff0c\u4f46\u975e\u4e00\u4e2a\u597d\u7684\u4ea7\u54c1\u3002 \u201c\u8fd9\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u4f5c\u54c1\u201d\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bf4\u5462\u3002\u56e0\u4e3a\u6211\u9760\u5b83\u62ff\u5230\u4e86\u4e00\u4e2a\u201c\u5927\u795e\u201d\u7684\u79f0\u53f7\uff0c \u4e0d\u662f\u6709\u4e2a\u5c0f\u8ff7\u5f1f\u6216\u5c0f\u8ff7\u59b9\u5938\u4f60\u5c31\u80fd\u62ff\u7684\uff0c\u53ea\u6709\u62ffA++ \u7ee9\u6548\u7684\u4eba\uff0c\u624d\u6709\u6b64\u79f0\u53f7\u3002\u5f53\u524d\u8fd9\u4e2a\u56e2\u961f\u91cc\u6211\u5165\u804c\u6700\u665a\uff0c\u6709\u6b64\u79f0\u53f7\u7684\u72ec\u6211\u4e00\u4eba\u3002\u8fd9\u662f\u6211\u7684\u6536\u83b7\u3002 \u201c\u5e76\u975e\u4e00\u4e2a\u597d\u7684\u4ea7\u54c1\u201d\uff0c\u8fd9\u53c8\u662f\u5565\u610f\u601d\u3002\u56e0\u4e3a\u6211\u6700\u521d\u63a5\u624b\u8fd9\u4e2a\u4ea7\u54c1\u65f6\uff0c\u91ce\u5fc3\u8fdc\u4e0d\u6b62\u5982\u6b64\uff0c\u662f\u62b1\u7740\u4e00\u9897\u6253\u9020\u884c\u4e1a\u9876\u5c16\u7684\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\u7684\u5fc3\u53bb\u505a\u3002\u7ed3\u679c\uff0c\u5728\u5f00\u53d1\u4e2d\u5f97\u5230\u652f\u6301\uff0c\u4ea7\u54c1\u7684\u63a8\u5e7f\u53ca\u516c\u53f8\u5bf9\u5176\u5b9a\u4f4d\uff0c\u5e76\u4e0d\u5c3d\u5982\u4eba\u610f\u3002\u7a76\u5176\u539f\u56e0\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u4f60\u4f5c\u4e3a\u4e00\u4e2a\u7684\u7801\u519c\uff0c\u5e76\u6ca1\u90a3\u4e48\u5927\u7684\u8bdd\u8bed\u6743\u3002\u8fd9\u662f\u6211\u7684\u65e0\u5948\u3002","title":"\u81ea\u6211\u603b\u7ed3"},{"location":"about/#i-love-to-sail-forbidden-seas","text":"\u6709\u4e00\u6b21\u9886\u5bfc\u627e\u6211\u5355\u804a\u5b66\u4e60\u66f2\u7ebf\u804a\u6280\u672f\u6808\uff0c\u95ee\u6211\u5de5\u4f5c\u611f\u53d7\u53ca\u804c\u4e1a\u89c4\u5212\u3002\u6211\u8bf4\uff0c\u611f\u89c9\u6bcf\u5929\u90fd\u5728\u5fd9\u4e0d\u8fed\u7684\u62fc\u88c5\u529f\u80fd\u548c\u8054\u8c03\u63a5\u53e3\uff1b\u800c\u8ba1\u7b97\u673a\u662f\u4e00\u9897\u53c2\u5929\u5927\u6811\uff0c\u6211\u53ea\u5728\u67d0\u4e00\u679d\u6860\u3002 \u6211\u60f3\u77e5\u9053\uff0c\u8fd9\u68f5\u6811\u957f\u5565\u6837\u3002 \u6240\u4ee5\uff0c\u5c31\u7b97\u65e5\u5e38\u5de5\u4f5c\u7e41\u5fd9\u5982\u65af\uff0c\u6211\u4f9d\u65e7\u6324\u51fa\u65f6\u95f4\"\u4e0d\u52a1\u6b63\u4e1a\"\u3002","title":"I Love to Sail Forbidden Seas."},{"location":"about/#why-another-job","text":"\u4f46\u662f\uff0c\u6211\u7684\u4eba\u751f\u4e2d\u603b\u6709\u8fd9\u4e2a\u4e48\u4e00\u4e2a\u4f46\u662f\u3002 \u611f\u89c9\u53c2\u52a0\u5de5\u4f5c\u5c31\u662f\u6211\u4eba\u751f\u7684\u6ed1\u94c1\u5362\uff0c\u4e0a\u5b66\u90a3\u4f1a\u513f\u54c1\u5b66\u517c\u4f18\uff0c\u5e94\u5bf9\u81ea\u5982\uff0c\u8f7b\u677e\u968f\u610f\uff0ceverything seems Very Promising. \u4f46\u5de5\u4f5c\u4e4b\u540e\uff0c\u5341\u591a\u5e74\u7684\u8ba1\u7b97\u673a\u5b66\u4e60\u53ca\u5b9e\u6218\u7ecf\u9a8c\uff0c\u7adf\u7136\u5435\u67b6\u8fd8\u5435\u4e0d\u8fc7\u4e00\u4e2a\u5f85\u6bd5\u4e1a\u7684\u4ea7\u54c1\u5b9e\u4e60\u751f\u59b9\u7eb8\u3002 \u6709\u4e2a\u540c\u5b66\u8bf4\uff1a\u9762\u8bd5\u5c31\u662f\u522b\u4eba\u8ba4\u53ef\u81ea\u5df1\u7684\u81ea\u5706\u5176\u8bf4\u3002 \u5c31\u8fd9\u4e48\u7b80\u5355\u3002 \u5c31\u8fd9\u4e48\u7b80\u5355\uff1f \u5c31\u50cf\u4e0a\u5b66\u90a3\u4f1a\u513f\uff0c\u56fe\u7075\u544a\u8bc9\u6211\uff1a \u8ba1\u7b97\u673a\u7684\u672c\u8d28\u5c31\u662f\uff0c\u8f93\u5165\u5904\u7406\u8f93\u51fa \u3002 \u540c\u6837\uff0c\u5c31\u8fd9\u4e48\u7b80\u5355\u3002\u7136\u540e\u9a97\u6211\u5165\u5751\uff0c\u5f53\u4e86\u7a0b\u5e8f\u733f\u3002 \u9b3c\u77e5\u9053\uff0c\u8fd9\u4e9b\u5e74\uff0c\u6211\u8fd8\u6709\u5927\u591a\u6570\u7a0b\u5e8f\u5458\u5728 \u201c\u5904\u7406\u201d \u8fd9\u4e2a\u9636\u6bb5\uff0c\u7ecf\u5386\u4e86\u4ec0\u4e48\u3002","title":"Why another job."},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","text":"1.Docker\u6982\u5ff5 \u00b6 Docker\u7684\u601d\u60f3\u6765\u81ea\u4e8e\u96c6\u88c5\u7bb1\uff0c\u96c6\u88c5\u7bb1\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f\u5728\u4e00\u8258\u5927\u8239\u4e0a\uff0c\u53ef\u4ee5\u628a\u8d27\u7269\u89c4\u6574\u7684\u6446\u653e\u8d77\u6765\u3002\u5e76\u4e14\u5404\u79cd\u5404\u6837\u7684\u8d27\u7269\u88ab\u96c6\u88c5\u7bb1\u6807\u51c6\u5316\u4e86\uff0c\u96c6\u88c5\u7bb1\u548c\u96c6\u88c5\u7bb1\u4e4b\u95f4\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd\u3002 1.1 Docker\u601d\u60f3 \u00b6 \u955c\u50cf\uff08\u96c6\u88c5\u7bb1\uff09\u3001\u4ed3\u5e93\uff08\u8d85\u7ea7\u7801\u5934\uff09\u3001\u5bb9\u5668\uff08\u8fd0\u884c\u7a0b\u5e8f\u7684\u5730\u65b9\uff09 \u6807\u51c6\u5316\uff08\u8fd0\u8f93\u65b9\u5f0f\u3001\u5b58\u50a8\u65b9\u5f0f\u3001API\u63a5\u53e3\uff09 1.2 Docker\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898 \u00b6 \u8fd0\u884c\u73af\u5883\u4e0d\u4e00\u81f4 \u5e94\u7528\u4e4b\u95f4\u5f71\u54cd\u5185\u5b58 2. Docker\u6838\u5fc3\u6280\u672f \u00b6 2.1 \u67e5\u770b\u547d\u4ee4 \u00b6 $ docker info $ docker version 2.2 \u955c\u50cfimage\u547d\u4ee4 \u00b6 $ docker images $ docker pull imgPath $ docker push imgPath #\u521b\u5efa\u955c\u50cf $ docker build -t img-name:version . #\u5220\u9664\u955c\u50cf(\u52a1\u5fc5\u5148\u505c\u6389\u8be5\u955c\u50cf\u4e0b\u7684\u6240\u6709\u5bb9\u5668) $ docker rmi [options] imgId 2.3 \u5bb9\u5668container\u64cd\u4f5c\u547d\u4ee4 \u00b6 #\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff08create-start\uff09 $ docker run -d -p [port] imgId #\u6620\u5c04\u5230\u6307\u5b9a\u7aef\u53e3 $ docker run -d -P imgId #\u6620\u5c04\u5230\u968f\u673a\u7aef\u53e3 #\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668 $ docker create (\u7528\u6cd5\u540crun\uff0c\u53ea\u4e0d\u8fc7create\u53ea\u521b\u5efa\u5e76\u4e0d\u4f1a\u542f\u52a8) #\u542f\u52a8/\u505c\u6b62/\u91cd\u542f\u5bb9\u5668 $ docker start/stop/restart #\u6740\u6389\u4e00\u4e2a\u5bb9\u5668 $ docker kill conId #\u5220\u9664\u5bb9\u5668\uff08\u5220\u9664\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff09 $ docker rm conId #\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4 $ docker exec -it conId bash #\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u5bb9\u5668 $ docker ps [OPTIONS] #\u5217\u51fa\u6240\u6709\u5bb9\u5668 $ docker ps -a 2.4 \u79c1\u6709\u4ed3\u5e93docker-registry \u00b6 # \u5b89\u88c5\u5e76\u542f\u52a8docker registry $ docker run -d -p 5000:5000 registry #\u4f7f\u7528tag \u8ba9\u79c1\u6709\u4ed3\u5e93\u7684\u6307\u5411\u672c\u5730\u955c\u50cf $ docker tag img-name localhost:5000/new-img-name:latest #push\u5230\u4f60\u7684\u79c1\u6709\u4ed3\u5e93 $ docker push localhost:5000/new-img-name #\u5c06\u955c\u50cf\u4ece\u4ed3\u5e93\u4e2d\u53d6\u51fa\uff0c\u5e76\u67e5\u770b $ docker pull localhost:5000/new-img-name $ docker images 2.5 docker\u7f51\u7edc \u00b6 Bridge Host None 3. Docker-compose \u00b6 3.1\u914d\u7f6e\u6587\u4ef6 \u00b6 Compose\u7684\u914d\u7f6e\u6587\u4ef6\u662f docker-compose.yml version: '2.0' services: db: image: mongo volumes: - ./db-data/mongodb:/data/db ports: - \"27018:27017\" networks: - app_net web: build: sb-server-koa volumes: - ./web-data/upload:/home/sb-webserver/public/upload ports: - \"3031:3030\" links: - db networks: - app_net networks: app_net: driver: bridge \u4ee5\u4e0a\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\uff1a \u5b9a\u4e49\u4e86\u4e24\u4e2a\u670d\u52a1\u5206\u522b\u53eb\u505a db \u548c web . db\u670d\u52a1\u4f7f\u7528dockerhub\u5b98\u65b9\u7684 mongo image \u5b9a\u4e49\u670d\u52a1\u955c\u50cf\uff0cweb\u670d\u52a1\u884csb-server-koa\u4e0b\u7684 Dockerfile \u6765\u521b\u5efa\u955c volumes \u6307\u5b9adocker\u5bb9\u5668\u4e2d\u7684\u6587\u4ef6\u5b58\u5728\u672c\u673a\u4e0a\u7684\u8def\u5f84 web\u5bb9\u5668\u4f7f\u7528 links \u548cdb\u5bb9\u5668\u94fe\u63a5 \u4f7f\u7528 ports \u6307\u5b9adocker\u5bb9\u5668\u5728\u672c\u673a\u4e0a\u7684\u5bf9\u5e94\u7aef\u53e3 networks \u5b9a\u4e49\u4e24\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\u4e3a\u6865\u63a5 bridge 3.2 \u5e38\u7528\u547d\u4ee4 \u00b6 \u542f\u52a8\u670d\u52a1\uff0c-d \u4e3adetached\u540e\u53f0\u8fd0\u884c\u6a21\u5f0f docker-compose up -d \u67e5\u770b\u8fd0\u884c\u7684\u5b9e\u4f8b docker-compose ps \u67e5\u770b\u8fd0\u884c\u65e5\u5fd7 docker-compose logs \u505c\u6b62\u670d\u52a1 docker-compose stop 4. \u672c\u5730\u79c1\u6709\u4ed3\u5e93 Harbor \u00b6 4.1 \u5b89\u88c5\u914d\u7f6e \u00b6 1. \u79bb\u7ebf\u4e0b\u8f7d\u89e3\u538b 2. \u66f4\u6539\u914d\u7f6e/\u6743\u9650 3. ./install.sh 4. docker ps -a # \u67e5\u770b harbor \u670d\u52a1\u7ec4\u4ef6\u8fd0\u884c\u60c5\u51b5 4.2 \u63a8\u9001\u955c\u50cf \u00b6 # 1. docker \u767b\u9646 docker login hub.chenleilei.com:18080 # silverbulllet/Harbor12345 # 2. \u6253tag docker tag silverbulllet/forsimba hub.chenleilei.com:18080/my-works/forsimba # 3. \u63a8\u9001 docker push hub.chenleilei.com:18080/my-works/forsimba","title":"1.Docker\u6982\u5ff5"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#1docker","text":"Docker\u7684\u601d\u60f3\u6765\u81ea\u4e8e\u96c6\u88c5\u7bb1\uff0c\u96c6\u88c5\u7bb1\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f\u5728\u4e00\u8258\u5927\u8239\u4e0a\uff0c\u53ef\u4ee5\u628a\u8d27\u7269\u89c4\u6574\u7684\u6446\u653e\u8d77\u6765\u3002\u5e76\u4e14\u5404\u79cd\u5404\u6837\u7684\u8d27\u7269\u88ab\u96c6\u88c5\u7bb1\u6807\u51c6\u5316\u4e86\uff0c\u96c6\u88c5\u7bb1\u548c\u96c6\u88c5\u7bb1\u4e4b\u95f4\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd\u3002","title":"1.Docker\u6982\u5ff5"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#11-docker","text":"\u955c\u50cf\uff08\u96c6\u88c5\u7bb1\uff09\u3001\u4ed3\u5e93\uff08\u8d85\u7ea7\u7801\u5934\uff09\u3001\u5bb9\u5668\uff08\u8fd0\u884c\u7a0b\u5e8f\u7684\u5730\u65b9\uff09 \u6807\u51c6\u5316\uff08\u8fd0\u8f93\u65b9\u5f0f\u3001\u5b58\u50a8\u65b9\u5f0f\u3001API\u63a5\u53e3\uff09","title":"1.1 Docker\u601d\u60f3"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#12-docker","text":"\u8fd0\u884c\u73af\u5883\u4e0d\u4e00\u81f4 \u5e94\u7528\u4e4b\u95f4\u5f71\u54cd\u5185\u5b58","title":"1.2 Docker\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#2-docker","text":"","title":"2. Docker\u6838\u5fc3\u6280\u672f"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#21","text":"$ docker info $ docker version","title":"2.1 \u67e5\u770b\u547d\u4ee4"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#22-image","text":"$ docker images $ docker pull imgPath $ docker push imgPath #\u521b\u5efa\u955c\u50cf $ docker build -t img-name:version . #\u5220\u9664\u955c\u50cf(\u52a1\u5fc5\u5148\u505c\u6389\u8be5\u955c\u50cf\u4e0b\u7684\u6240\u6709\u5bb9\u5668) $ docker rmi [options] imgId","title":"2.2 \u955c\u50cfimage\u547d\u4ee4"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#23-container","text":"#\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff08create-start\uff09 $ docker run -d -p [port] imgId #\u6620\u5c04\u5230\u6307\u5b9a\u7aef\u53e3 $ docker run -d -P imgId #\u6620\u5c04\u5230\u968f\u673a\u7aef\u53e3 #\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668 $ docker create (\u7528\u6cd5\u540crun\uff0c\u53ea\u4e0d\u8fc7create\u53ea\u521b\u5efa\u5e76\u4e0d\u4f1a\u542f\u52a8) #\u542f\u52a8/\u505c\u6b62/\u91cd\u542f\u5bb9\u5668 $ docker start/stop/restart #\u6740\u6389\u4e00\u4e2a\u5bb9\u5668 $ docker kill conId #\u5220\u9664\u5bb9\u5668\uff08\u5220\u9664\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff09 $ docker rm conId #\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4 $ docker exec -it conId bash #\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u5bb9\u5668 $ docker ps [OPTIONS] #\u5217\u51fa\u6240\u6709\u5bb9\u5668 $ docker ps -a","title":"2.3 \u5bb9\u5668container\u64cd\u4f5c\u547d\u4ee4"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#24-docker-registry","text":"# \u5b89\u88c5\u5e76\u542f\u52a8docker registry $ docker run -d -p 5000:5000 registry #\u4f7f\u7528tag \u8ba9\u79c1\u6709\u4ed3\u5e93\u7684\u6307\u5411\u672c\u5730\u955c\u50cf $ docker tag img-name localhost:5000/new-img-name:latest #push\u5230\u4f60\u7684\u79c1\u6709\u4ed3\u5e93 $ docker push localhost:5000/new-img-name #\u5c06\u955c\u50cf\u4ece\u4ed3\u5e93\u4e2d\u53d6\u51fa\uff0c\u5e76\u67e5\u770b $ docker pull localhost:5000/new-img-name $ docker images","title":"2.4 \u79c1\u6709\u4ed3\u5e93docker-registry"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#25-docker","text":"Bridge Host None","title":"2.5 docker\u7f51\u7edc"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#3-docker-compose","text":"","title":"3. Docker-compose"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#31","text":"Compose\u7684\u914d\u7f6e\u6587\u4ef6\u662f docker-compose.yml version: '2.0' services: db: image: mongo volumes: - ./db-data/mongodb:/data/db ports: - \"27018:27017\" networks: - app_net web: build: sb-server-koa volumes: - ./web-data/upload:/home/sb-webserver/public/upload ports: - \"3031:3030\" links: - db networks: - app_net networks: app_net: driver: bridge \u4ee5\u4e0a\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\uff1a \u5b9a\u4e49\u4e86\u4e24\u4e2a\u670d\u52a1\u5206\u522b\u53eb\u505a db \u548c web . db\u670d\u52a1\u4f7f\u7528dockerhub\u5b98\u65b9\u7684 mongo image \u5b9a\u4e49\u670d\u52a1\u955c\u50cf\uff0cweb\u670d\u52a1\u884csb-server-koa\u4e0b\u7684 Dockerfile \u6765\u521b\u5efa\u955c volumes \u6307\u5b9adocker\u5bb9\u5668\u4e2d\u7684\u6587\u4ef6\u5b58\u5728\u672c\u673a\u4e0a\u7684\u8def\u5f84 web\u5bb9\u5668\u4f7f\u7528 links \u548cdb\u5bb9\u5668\u94fe\u63a5 \u4f7f\u7528 ports \u6307\u5b9adocker\u5bb9\u5668\u5728\u672c\u673a\u4e0a\u7684\u5bf9\u5e94\u7aef\u53e3 networks \u5b9a\u4e49\u4e24\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\u4e3a\u6865\u63a5 bridge","title":"3.1\u914d\u7f6e\u6587\u4ef6"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#32","text":"\u542f\u52a8\u670d\u52a1\uff0c-d \u4e3adetached\u540e\u53f0\u8fd0\u884c\u6a21\u5f0f docker-compose up -d \u67e5\u770b\u8fd0\u884c\u7684\u5b9e\u4f8b docker-compose ps \u67e5\u770b\u8fd0\u884c\u65e5\u5fd7 docker-compose logs \u505c\u6b62\u670d\u52a1 docker-compose stop","title":"3.2 \u5e38\u7528\u547d\u4ee4"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#4-harbor","text":"","title":"4. \u672c\u5730\u79c1\u6709\u4ed3\u5e93 Harbor"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#41","text":"1. \u79bb\u7ebf\u4e0b\u8f7d\u89e3\u538b 2. \u66f4\u6539\u914d\u7f6e/\u6743\u9650 3. ./install.sh 4. docker ps -a # \u67e5\u770b harbor \u670d\u52a1\u7ec4\u4ef6\u8fd0\u884c\u60c5\u51b5","title":"4.1 \u5b89\u88c5\u914d\u7f6e"},{"location":"history/Docker%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#42","text":"# 1. docker \u767b\u9646 docker login hub.chenleilei.com:18080 # silverbulllet/Harbor12345 # 2. \u6253tag docker tag silverbulllet/forsimba hub.chenleilei.com:18080/my-works/forsimba # 3. \u63a8\u9001 docker push hub.chenleilei.com:18080/my-works/forsimba","title":"4.2 \u63a8\u9001\u955c\u50cf"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","text":"0. Electron\u4ecb\u7ecd \u00b6 Electron \u662f\u57fa\u4e8eHTML\u3001CSS\u3001JavaScript\u7684**\u684c\u9762\u5f00\u53d1**\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8de8\u5e73\u53f0\u3002\u7528\u8fc7\u7684\u8f6f\u4ef6\u91ccVSCode\u3001Atom\u7b49\u662f\u7528Electron\u5f00\u53d1\u7684\u3002 1. \u5feb\u901f\u5165\u95e8 \u00b6 \u53c2\u7167\u4ee5\u4e0b\u4f8b\u5b50\u5c31\u80fd\u8fd0\u884c\u4e00\u4e2a\u5165\u95e8\u7ea7\u7684Electron demo # \u514b\u9686\u8fd9\u4ed3\u5e93 $ git clone https://github.com/electron/electron-quick-start # \u8fdb\u5165\u4ed3\u5e93 $ cd electron-quick-start # \u5b89\u88c5\u4f9d\u8d56\u5e93\u5e76\u8fd0\u884c\u5e94\u7528 $ npm install && npm start \u6587\u6863\u76ee\u5f55\u5982\u4e0b\uff0c\u4e14\u53ea\u9700\u8981\u4e00\u4e2a electron \u4f9d\u8d56\u5305\uff0c your-app/ \u251c\u2500\u2500 package.json \u251c\u2500\u2500 main.js \u2514\u2500\u2500 index.html electron\u7684\u5b66\u4e60\u8d44\u6e90\uff0c\u5982\u4e0b\u6240\u5217\uff0c \u53ef\u4ee5\u4e0b\u8f7d\u5e76\u8fd0\u884c Electron API Demos app \uff0c\u7528\u6765\u67e5\u770b Electron \u7684\u4e00\u4e9bAPI\u3002 \u8be6\u7ec6\u4e2d\u6587\u6587\u6863\u53ef\u53c2\u9605 Electron \u4e2d\u6587\u6587\u6863 \u3002 \u5176\u5b83\u8d44\u6e90\uff0c electron\u5185\u90e8\u7ed3\u6784 awesome-electron electron-sample-apps 2. \u4e3b\u8981\u6982\u5ff5 \u00b6 \u4e3b\u8fdb\u7a0b \u00b6 **\u4e3b\u8fdb\u7a0b**\u8fd0\u884c\u4e8e package.json \u91cc main \u811a\u672c\uff0c\u7528\u6765\u521b\u5efa GUI\u3002 \u6e32\u67d3\u8fdb\u7a0b \u00b6 \u6bcf\u4e2a\u9875\u9762\u90fd\u5728\u8fd0\u884c\u7740\u4e00\u4e2a**\u6e32\u67d3\u8fdb\u7a0b**\uff0c\u6bcf\u4e2a\u6e32\u67d3\u8fdb\u7a0b\u53ea\u5173\u5fc3\u81ea\u5df1\u7684\u7f51\u9875\u3002 **\u6e32\u67d3\u8fdb\u7a0b**\u82e5\u662f\u60f3\u8bbf\u95eeGUI\u64cd\u4f5c\uff0c\u9700\u8981\u5411**\u4e3b\u8fdb\u7a0b**\u53d1\u51fa\u8bf7\u6c42\uff0c\u4e24\u79cd\u8fdb\u7a0b\u4e4b\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f\u6709\uff1a\u901a\u8fc7 ipcRenderer \u548c ipcMain \u6765\u53d1\u9001messages\uff0c\u901a\u8fc7 remote \u6a21\u5757\u8fdb\u884cRPC \u65b9\u5f0f\u901a\u8baf \u3002 \u4e3b\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u7684\u533a\u522b \u00b6 \u4e3b\u8fdb\u7a0b\u4f7f\u7528 BrowserWindow \u5b9e\u4f8b\u521b\u5efa\u9875\u9762\u3002\u6bcf\u4e2a BrowserWindow \u5b9e\u4f8b\u90fd\u5728\u81ea\u5df1\u7684\u6e32\u67d3\u8fdb\u7a0b\u91cc\u8fd0\u884c\u9875\u9762\u3002\u5f53\u4e00\u4e2a BrowserWindow \u5b9e\u4f8b\u88ab\u9500\u6bc1\u540e\uff0c\u76f8\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002 \u4e3b\u8fdb\u7a0b\u7ba1\u7406\u6240\u6709\u9875\u9762\u548c\u4e0e\u4e4b\u5bf9\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u3002 Electron\u63d0\u4f9b\u4e00\u4e9b\u5185\u7f6e\u7ec4\u4ef6\u7528\u4e8e\u5f00\u53d1\uff0c\u4e00\u4e9b\u7ec4\u4ef6\u53ea\u53ef\u4ee5\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528\uff0c\u4e00\u4e9b\u53ea\u53ef\u4ee5\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u4f7f\u7528\uff0c\u4f46\u662f\u4e5f\u6709\u90e8\u5206\u53ef\u4ee5\u5728\u8fd9\u4e24\u79cd\u8fdb\u7a0b\u4e2d\u90fd\u53ef\u4f7f\u7528\u3002 \u7531\u4e8e\u5728\u9875\u9762\u91cc\u7ba1\u7406\u539f\u751f GUI \u8d44\u6e90\u975e\u5e38\u5371\u9669\u4e14\u5bb9\u6613\u9020\u6210\u8d44\u6e90\u6cc4\u9732\uff0c\u6240\u4ee5\u5728\u9875\u9762\u8c03\u7528 GUI \u76f8\u5173\u7684 APIs \u662f\u4e0d\u88ab\u5141\u8bb8\u7684\u3002\u82e5\u60f3\u5728\u7f51\u9875\u91cc\u4f7f\u7528 GUI \u64cd\u4f5c\uff0c\u5176\u5bf9\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u5fc5\u987b\u4e0e\u4e3b\u8fdb\u7a0b\u8fdb\u884c\u901a\u8baf\uff0c\u8bf7\u6c42\u4e3b\u8fdb\u7a0b\u8fdb\u884c\u76f8\u5173\u7684 GUI \u64cd\u4f5c\u3002 \u57fa\u672c\u89c4\u5219 \uff1aGUI\u6a21\u5757\u6216\u7cfb\u7edf\u5e95\u5c42\u6a21\u5757\u53ea\u53ef\u5728**\u4e3b\u8fdb\u7a0b**\u4e2d\u4f7f\u7528\u3002 3. \u6253\u5305\u53d1\u5e03 \u00b6 \u91c7\u7528\u7b2c\u4e09\u65b9\u6253\u5305\u5de5\u5177 electron-builder \uff0c\u53ef\u4ee5\u751f\u6210\u591a\u79cdtarget formats: All platforms: 7z , zip , tar.xz , tar.lz , tar.gz , tar.bz2 , dir (unpacked directory). macOS : dmg , pkg , mas . Linux : AppImage , snap , debian package ( deb ), rpm , freebsd , pacman , p5p , apk . Windows : nsis (Installer), nsis-web (Web installer), portable (portable app without installation), AppX (Windows Store), Squirrel.Windows $ yarn add electron-builder --dev \u4f7f\u7528yarn\u5b89\u88c5\u4e3adevDependencies\uff0c\u5426\u5219\u53ef\u80fd\u62a5\u9519\u3002 \u5173\u4e8escript\u7684\u914d\u7f6e\u5982\u4e0b\uff0c \"scripts\": { \"start\": \"electron .\", \"pack:mac\": \"ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ electron-builder --mac\", \"pack:win\": \"ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ electron-builder --win --ia32\" }, \"build\": { \"appId\": \"your.id\", \"mac\": { \"category\": \"your.app.category.type\" } } \u5176\u4e2d\uff0c\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf ELECTRON_MIRROR\uff0c\u91c7\u7528\u6dd8\u5b9delectron \u955c\u50cf \uff0c\u53ef\u4ee5\u5927\u5927\u63d0\u901f\u3002 $ yarn run pack:mac \u6267\u884c\u4ee5\u4e0a\u547d\u4ee4\u4e4b\u540e\uff0c\u751f\u6210 /dist \u76ee\u5f55\uff0c\u5b58\u653e\u76f8\u5e94\u7684target\u3002","title":"Electron \u5b66\u4e60\u7b14\u8bb0"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#0-electron","text":"Electron \u662f\u57fa\u4e8eHTML\u3001CSS\u3001JavaScript\u7684**\u684c\u9762\u5f00\u53d1**\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8de8\u5e73\u53f0\u3002\u7528\u8fc7\u7684\u8f6f\u4ef6\u91ccVSCode\u3001Atom\u7b49\u662f\u7528Electron\u5f00\u53d1\u7684\u3002","title":"0. Electron\u4ecb\u7ecd"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#1","text":"\u53c2\u7167\u4ee5\u4e0b\u4f8b\u5b50\u5c31\u80fd\u8fd0\u884c\u4e00\u4e2a\u5165\u95e8\u7ea7\u7684Electron demo # \u514b\u9686\u8fd9\u4ed3\u5e93 $ git clone https://github.com/electron/electron-quick-start # \u8fdb\u5165\u4ed3\u5e93 $ cd electron-quick-start # \u5b89\u88c5\u4f9d\u8d56\u5e93\u5e76\u8fd0\u884c\u5e94\u7528 $ npm install && npm start \u6587\u6863\u76ee\u5f55\u5982\u4e0b\uff0c\u4e14\u53ea\u9700\u8981\u4e00\u4e2a electron \u4f9d\u8d56\u5305\uff0c your-app/ \u251c\u2500\u2500 package.json \u251c\u2500\u2500 main.js \u2514\u2500\u2500 index.html electron\u7684\u5b66\u4e60\u8d44\u6e90\uff0c\u5982\u4e0b\u6240\u5217\uff0c \u53ef\u4ee5\u4e0b\u8f7d\u5e76\u8fd0\u884c Electron API Demos app \uff0c\u7528\u6765\u67e5\u770b Electron \u7684\u4e00\u4e9bAPI\u3002 \u8be6\u7ec6\u4e2d\u6587\u6587\u6863\u53ef\u53c2\u9605 Electron \u4e2d\u6587\u6587\u6863 \u3002 \u5176\u5b83\u8d44\u6e90\uff0c electron\u5185\u90e8\u7ed3\u6784 awesome-electron electron-sample-apps","title":"1. \u5feb\u901f\u5165\u95e8"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#2","text":"","title":"2. \u4e3b\u8981\u6982\u5ff5"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_1","text":"**\u4e3b\u8fdb\u7a0b**\u8fd0\u884c\u4e8e package.json \u91cc main \u811a\u672c\uff0c\u7528\u6765\u521b\u5efa GUI\u3002","title":"\u4e3b\u8fdb\u7a0b"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_2","text":"\u6bcf\u4e2a\u9875\u9762\u90fd\u5728\u8fd0\u884c\u7740\u4e00\u4e2a**\u6e32\u67d3\u8fdb\u7a0b**\uff0c\u6bcf\u4e2a\u6e32\u67d3\u8fdb\u7a0b\u53ea\u5173\u5fc3\u81ea\u5df1\u7684\u7f51\u9875\u3002 **\u6e32\u67d3\u8fdb\u7a0b**\u82e5\u662f\u60f3\u8bbf\u95eeGUI\u64cd\u4f5c\uff0c\u9700\u8981\u5411**\u4e3b\u8fdb\u7a0b**\u53d1\u51fa\u8bf7\u6c42\uff0c\u4e24\u79cd\u8fdb\u7a0b\u4e4b\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f\u6709\uff1a\u901a\u8fc7 ipcRenderer \u548c ipcMain \u6765\u53d1\u9001messages\uff0c\u901a\u8fc7 remote \u6a21\u5757\u8fdb\u884cRPC \u65b9\u5f0f\u901a\u8baf \u3002","title":"\u6e32\u67d3\u8fdb\u7a0b"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_3","text":"\u4e3b\u8fdb\u7a0b\u4f7f\u7528 BrowserWindow \u5b9e\u4f8b\u521b\u5efa\u9875\u9762\u3002\u6bcf\u4e2a BrowserWindow \u5b9e\u4f8b\u90fd\u5728\u81ea\u5df1\u7684\u6e32\u67d3\u8fdb\u7a0b\u91cc\u8fd0\u884c\u9875\u9762\u3002\u5f53\u4e00\u4e2a BrowserWindow \u5b9e\u4f8b\u88ab\u9500\u6bc1\u540e\uff0c\u76f8\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002 \u4e3b\u8fdb\u7a0b\u7ba1\u7406\u6240\u6709\u9875\u9762\u548c\u4e0e\u4e4b\u5bf9\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u3002 Electron\u63d0\u4f9b\u4e00\u4e9b\u5185\u7f6e\u7ec4\u4ef6\u7528\u4e8e\u5f00\u53d1\uff0c\u4e00\u4e9b\u7ec4\u4ef6\u53ea\u53ef\u4ee5\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528\uff0c\u4e00\u4e9b\u53ea\u53ef\u4ee5\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u4f7f\u7528\uff0c\u4f46\u662f\u4e5f\u6709\u90e8\u5206\u53ef\u4ee5\u5728\u8fd9\u4e24\u79cd\u8fdb\u7a0b\u4e2d\u90fd\u53ef\u4f7f\u7528\u3002 \u7531\u4e8e\u5728\u9875\u9762\u91cc\u7ba1\u7406\u539f\u751f GUI \u8d44\u6e90\u975e\u5e38\u5371\u9669\u4e14\u5bb9\u6613\u9020\u6210\u8d44\u6e90\u6cc4\u9732\uff0c\u6240\u4ee5\u5728\u9875\u9762\u8c03\u7528 GUI \u76f8\u5173\u7684 APIs \u662f\u4e0d\u88ab\u5141\u8bb8\u7684\u3002\u82e5\u60f3\u5728\u7f51\u9875\u91cc\u4f7f\u7528 GUI \u64cd\u4f5c\uff0c\u5176\u5bf9\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u5fc5\u987b\u4e0e\u4e3b\u8fdb\u7a0b\u8fdb\u884c\u901a\u8baf\uff0c\u8bf7\u6c42\u4e3b\u8fdb\u7a0b\u8fdb\u884c\u76f8\u5173\u7684 GUI \u64cd\u4f5c\u3002 \u57fa\u672c\u89c4\u5219 \uff1aGUI\u6a21\u5757\u6216\u7cfb\u7edf\u5e95\u5c42\u6a21\u5757\u53ea\u53ef\u5728**\u4e3b\u8fdb\u7a0b**\u4e2d\u4f7f\u7528\u3002","title":"\u4e3b\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u7684\u533a\u522b"},{"location":"history/Electron%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#3","text":"\u91c7\u7528\u7b2c\u4e09\u65b9\u6253\u5305\u5de5\u5177 electron-builder \uff0c\u53ef\u4ee5\u751f\u6210\u591a\u79cdtarget formats: All platforms: 7z , zip , tar.xz , tar.lz , tar.gz , tar.bz2 , dir (unpacked directory). macOS : dmg , pkg , mas . Linux : AppImage , snap , debian package ( deb ), rpm , freebsd , pacman , p5p , apk . Windows : nsis (Installer), nsis-web (Web installer), portable (portable app without installation), AppX (Windows Store), Squirrel.Windows $ yarn add electron-builder --dev \u4f7f\u7528yarn\u5b89\u88c5\u4e3adevDependencies\uff0c\u5426\u5219\u53ef\u80fd\u62a5\u9519\u3002 \u5173\u4e8escript\u7684\u914d\u7f6e\u5982\u4e0b\uff0c \"scripts\": { \"start\": \"electron .\", \"pack:mac\": \"ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ electron-builder --mac\", \"pack:win\": \"ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ electron-builder --win --ia32\" }, \"build\": { \"appId\": \"your.id\", \"mac\": { \"category\": \"your.app.category.type\" } } \u5176\u4e2d\uff0c\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf ELECTRON_MIRROR\uff0c\u91c7\u7528\u6dd8\u5b9delectron \u955c\u50cf \uff0c\u53ef\u4ee5\u5927\u5927\u63d0\u901f\u3002 $ yarn run pack:mac \u6267\u884c\u4ee5\u4e0a\u547d\u4ee4\u4e4b\u540e\uff0c\u751f\u6210 /dist \u76ee\u5f55\uff0c\u5b58\u653e\u76f8\u5e94\u7684target\u3002","title":"3. \u6253\u5305\u53d1\u5e03"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/","text":"\u672c\u6587\u4e3b\u8981\u8ba8\u8bba\u4e24\u4e2a\u7ecf\u5178\u95ee\u9898\uff1a \u52a8\u6001\u89c4\u5212 (Dynamic Programming) \u548c**\u8d2a\u5fc3\u7b97\u6cd5 (Greedy Algorithm)**\u3002\u5ff5\u4e66\u65f6\u4e5f\u66fe\u63a5\u89e6\u8fc7\u8fd9\u4fe9\u6982\u5ff5\uff0c\u5982\u4eca\u53c8\u770b\u5230\uff0c\u91cd\u65b0\u6574\u7406\u603b\u7ed3\u4e00\u756a\u3002 1. \u52a8\u6001\u89c4\u5212 \u00b6 \u201cDynamic programming is a technique that is sometimes considered the opposite of recursion.\u201d \u9012\u5f52**\u81ea\u9876\u5411\u4e0b\uff0c\u5047\u8bbe\u6574\u4e2a\u95ee\u9898\u5df2\u89e3\u51b3\uff0c\u518d\u89e3\u51b3\u5c0f\u95ee\u9898\uff1b**\u52a8\u6001\u89c4\u5212 (Dynamic Programming) \u53cd\u4e4b\uff0c\u81ea\u5e95\u5411\u4e0a\uff0c\u89e3\u51b3\u5c0f\u95ee\u9898\uff0c\u7136\u540e\u628a\u5b83\u4eec\u7ec4\u5408\u8d77\u6765\uff0c\u6210\u4e3a\u6574\u4e2a\u95ee\u9898\u7684\u89e3\u3002 1.1 Fibonacci\u6570\u5217 \u00b6 // \u9012\u5f52\u89e3\u6cd5 function recurFib(n) { if (n < 2) return n; else return recurFib(n-1) + recurFib(n-2); } \u9012\u5f52\u51fd\u6570\u591a\u6b21\u88ab\u8c03\u7528\uff0c\u5f62\u6210\u4e00\u4e2a\u9012\u5f52\u6811\uff0c\u4e8b\u5b9e\u4e0a\u5728\u5185\u5b58\u4e2d\u8fd0\u884c\u6548\u7387\u6781\u5176\u4f4e\u4e0b\u3002 \u52a8\u6001\u89c4\u5212\u4f7f\u7528 val \u6570\u7ec4\u6765\u5b58\u50a8\u4e2d\u95f4\u7ed3\u679c\uff1a // \u52a8\u6001\u89c4\u5212\u89e3\u6cd5 function dynFib (){ var val = []; for ( var i = 0 ; i <= n ; ++ i ) { val [ i ] = 0 ; } if ( n == 1 || n == 2 ) { return 1 ; } else { val [ 1 ] = 1 ; val [ 2 ] = 2 ; for ( var i = 3 ; i <= n ; ++ i ) { val [ i ] = val [ i - 1 ] + val [ i - 2 ]; } return val [ n - 1 ]; } } 1.2 \u6700\u957f\u516c\u5171\u5b50\u4e32 \u00b6 \u5bfb\u627e\u4e24\u4e2a\u5b57\u7b26\u4e32\u4e2d\u6700\u957f\u516c\u5171\u5b50\u4e32 ( Longest Common Substring ) \u662f\u52a8\u6001\u89c4\u5212\u7684\u7ecf\u5178\u95ee\u9898\u3002 \u7b97\u6cd5\u601d\u60f3\uff1a \u7528\u4e8c\u7ef4\u6570\u7ec4\u8bb0\u5f55\u4e24\u4e2a\u5b57\u7b26\u4e32\u5728\u76f8\u540c\u4f4d\u7f6e\u7684\u5b57\u6bcd\u7684\u6bd4\u8f83\u7ed3\u679c\u3002 \u4e8c\u7ef4\u6570\u7ec4\u521d\u59cb\u5316\u4e3a\u51680\uff1b \u6bcf\u6b21\u4e24\u4e2a\u5b57\u7b26\u4e32\u76f8\u540c\u4f4d\u7f6e\u5339\u914d\u65f6\uff0c\u4e8c\u7ef4\u6570\u7ec4\u76f8\u5e94\u4f4d\u7f6e\u52a01\uff0c\u5426\u5219\u7f6e0\u3002 function lcs(word1, word2){ var max = 0; // \u516c\u5171\u5b50\u4e32\u6700\u5927\u957f\u5ea6 var index = 0; // \u6807\u8bb0\u516c\u5171\u5b50\u4e32\u4f4d\u7f6e var lcsarr = new Array(word1.length); // \u58f0\u660e lcsarr \u77e9\u9635\uff0c\u5e76\u521d\u59cb\u5316 for(var i = 0; i < word1.length; i++){ lcsarr[i] = new Array(word2.length); for(var j = 0; j < word2.length; j++){ lcsarr[i][j] = 0; } } for(var i = 0; i < word1.length; i++){ for(var j = 0; j < word2.length; j++){ if(word1[i] == word2[j]){ if(i == 0 || j == 0){ lcsarr[i][j] = 1; }else{ lcsarr[i][j] = lcsarr[i-1][j-1] + 1; } if(max < lcsarr[i][j]){ max = lcsarr[i][j]; index = i; } } } } //console.log(lcsarr) return word1.substr(index-max+1, max); } 1.3 \u80cc\u5305\u95ee\u9898 \u00b6 \u80cc\u5305\u95ee\u9898 (Knapsack Problem)\uff1a\u4e00\u5806\u7269\u54c1\uff0c\u5404\u6709 value \u548c size \u4e24\u4e2a\u5c5e\u6027\uff0c\u80cc\u5305\u9650\u5b9a\u6293\u53d6\u7269\u54c1 size \u7684\u603b\u5927\u5c0f\uff0c\u5982\u4f55\u8ba9\u6240\u9009\u4e4b\u7269\u603b\u503c value \u6700\u5927\u3002 \u5047\u8bbe\u6709\u5982\u4e0b\u7269\u54c1\uff1a var capacity = 16; // \u80cc\u5305\u5927\u5c0f var n = 5; // \u7269\u54c1\u6570\u91cf var value = [4,5,10,11,13]; // \u7269\u54c1\u4ef7\u503c var size = [3,4,7,8,9]; // \u7269\u54c1\u5927\u5c0f 1.3.1 \u9012\u5f52\u89e3\u51b3\u80cc\u5305\u95ee\u9898 \u00b6 // \u8fd4\u56de\u503c\u4e3a\u80cc\u5305\u5185\u7269\u54c1\u4ef7\u503c\u603b\u548c function knapsack(capacity, n, size, value){ if(capacity == 0 || n == 0) // \u9012\u5f52\u7ec8\u6b62\u6761\u4ef6 return 0; if(size[n-1] > capacity) // \u82e5\u88c5\u4e0d\u4e0b\uff0c\u5219\u5f03\u4e4b return knapsack(capacity, n-1, size, value) var a = knapsack(capacity, n-1, size, value), b = knapsack(capacity - size[n-1], n-1, size, value) + value[n-1]; return a > b ? a : b; } 1.3.2 \u52a8\u6001\u89c4\u5212\u89e3\u51b3\u80cc\u5305\u95ee\u9898 \u00b6 \u7b97\u6cd5\u601d\u60f3\uff1a\u7528\u4e8c\u7ef4\u77e9\u9635\u8bb0\u5f55\u80cc\u5305\u548c\u7269\u54c1\u5728\u6269\u5f20\u8fc7\u7a0b\u4e2d\u7684\u6700\u4f18\u89e3\u3002 \u77e9\u9635\u7528\u4e8c\u7ef4\u6570\u7ec4 K[i][j] \u8868\u793a\uff0ci \u2208 [0, \u2026, n]\uff0cj \u2208 [0, \u2026, capacity]\u3002 function dKnapsack(capacity, n, size, value){ var K = []; // \u58f0\u660e\u77e9\u9635\u5e76\u521d\u59cb\u5316 for(var i = 0; i <= n; i++) K[i] = []; for(var i = 0; i <= n; i++){ for(var j = 0; j <= capacity; j++){ if(i == 0 || j == 0){ K[i][j] = 0; }else if(j < size[i-1]){ K[i][j] = K[i-1][j] }else{ var a = K[i-1][j], b = K[i-1][j-size[i-1]]+value[i-1]; K[i][j] = a > b ? a : b; } } } //console.log(K) return K[n][capacity] } 2. \u8d2a\u5fc3\u7b97\u6cd5 \u00b6 \u201cA greedy algorithm looks for \u201cgood solutions\u201d, called local optima , which will hopefully lead to the correct final solution, called the global optimum . \u201d \u601d\u60f3 \uff1a\u8d2a\u5fc3\u7b97\u6cd5\u4e0d\u4ece\u6574\u4f53\u6700\u4f18\u8003\u8651\uff0c\u5b83\u53ea\u4f5c\u51fa**\u5c40\u90e8\u6700\u4f18**\u9009\u62e9\u3002\u5373\u4f7f\u8d2a\u5fc3\u7b97\u6cd5\u4e0d\u80fd\u5f97\u5230\u6574\u4f53\u6700\u4f18\u89e3\uff0c\u5176\u6700\u7ec8\u7ed3\u679c\u5374\u662f\u6700\u4f18\u89e3\u7684\u5f88\u597d\u8fd1\u4f3c\u3002 **\u8d2a\u5fc3\u7b97\u6cd5**\u4e0e**\u52a8\u6001\u89c4\u5212\u7b97\u6cd5**\u7684\u533a\u522b\uff1a**\u52a8\u6001\u89c4\u5212\u7b97\u6cd5**\u901a\u5e38\u81ea\u5e95\u5411\u4e0a\u7684\u6c42\u89e3\u5404\u5b50\u95ee\u9898\uff1b\u800c**\u8d2a\u5fc3\u7b97\u6cd5**\u5219\u901a\u5e38\u81ea\u9876\u5411\u4e0b\u8fdb\u884c\uff0c\u8fed\u4ee3\u7684\u4f5c\u51fa\u8d2a\u5fc3\u9009\u62e9\uff0c\u6bcf\u6b21\u8d2a\u5fc3\u9009\u62e9\u5c31\u5c06\u6240\u6c42\u95ee\u9898\u7b80\u5316\u4e3a\u89c4\u6a21\u66f4\u5c0f\u7684\u5b50\u95ee\u9898\u3002 2.1 \u786c\u5e01\u95ee\u9898 \u00b6 \u786c\u5e01\u95ee\u9898 (Coin-changing Problem)\uff1a \u73b0\u6709\u9762\u503c25\u7f8e\u5206\u300110\u7f8e\u5206\u548c1\u7f8e\u5206\u4e09\u79cd\u9762\u503c\u786c\u5e01\uff0c\u8981\u5c0663\u7f8e\u5206\u6362\u6210\u96f6\u94b1\uff0c\u6309\u7167\u8d2a\u5fc3\u7b97\u6cd5\u8be5\u600e\u4e48\u6362\uff1f function makeChange(origAmt){ var remainAmt = 0; if (origAmt % 25 < origAmt) { console.log(\"25-cent coins: \", parseInt(origAmt / 25)); origAmt = origAmt % 25 } if (origAmt % 10 < origAmt) { console.log(\"10-cent coins: \", parseInt(origAmt / 10)); origAmt = origAmt % 10 } console.log(\"1-cent coins: \", parseInt(origAmt / 1)); } 2.2 \u90e8\u5206\u80cc\u5305\u95ee\u9898 \u00b6 \u90e8\u5206\u80cc\u5305\u95ee\u9898 (Fractional Knapsack Problem)\uff1a\u6309\u7167\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u6bcf\u6b21\u9009**\u6027\u4ef7\u6bd4\u6700\u9ad8**\u7684\u7269\u54c1\u653e\u5165\u80cc\u5305\u3002 \u7b97\u6cd5\u6b65\u9aa4\uff1a \u80cc\u5305\u62e5\u6709\u5bb9\u91cf capacity \uff0c \u7269\u54c1\u62e5\u6709\u4ef7\u503c value \u548c\u5927\u5c0f size \u3002 Rank items by value/size ratio. Consider items in terms of decreasing ratio. Take as much of each item as possible. function ksack(capacity, n, size, value){ // \u5192\u6ce1\u6392\u5e8f, value/size\u9012\u51cf for(var i = 0; i < n; i++){ for(var j = 0; j < n-i-1; j++){ if(value[j]/size[j] < value[j+1]/size[j+1]){ var tmp = value[j]; value[j] = value[j+1]; value[j+1] = tmp; tmp = size[j]; size[j] = size[j+1]; size[j+1] = tmp; } } } //console.log({value, size}) var load = 0, result = 0; i = 0; while(load < capacity && i < n){ if(size[i] <= capacity - load){ load += size[i]; result += value[i]; } i++; } return result; }","title":"JavaScript \u4e4b Advanced Algorithms"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#1","text":"\u201cDynamic programming is a technique that is sometimes considered the opposite of recursion.\u201d \u9012\u5f52**\u81ea\u9876\u5411\u4e0b\uff0c\u5047\u8bbe\u6574\u4e2a\u95ee\u9898\u5df2\u89e3\u51b3\uff0c\u518d\u89e3\u51b3\u5c0f\u95ee\u9898\uff1b**\u52a8\u6001\u89c4\u5212 (Dynamic Programming) \u53cd\u4e4b\uff0c\u81ea\u5e95\u5411\u4e0a\uff0c\u89e3\u51b3\u5c0f\u95ee\u9898\uff0c\u7136\u540e\u628a\u5b83\u4eec\u7ec4\u5408\u8d77\u6765\uff0c\u6210\u4e3a\u6574\u4e2a\u95ee\u9898\u7684\u89e3\u3002","title":"1. \u52a8\u6001\u89c4\u5212"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#11-fibonacci","text":"// \u9012\u5f52\u89e3\u6cd5 function recurFib(n) { if (n < 2) return n; else return recurFib(n-1) + recurFib(n-2); } \u9012\u5f52\u51fd\u6570\u591a\u6b21\u88ab\u8c03\u7528\uff0c\u5f62\u6210\u4e00\u4e2a\u9012\u5f52\u6811\uff0c\u4e8b\u5b9e\u4e0a\u5728\u5185\u5b58\u4e2d\u8fd0\u884c\u6548\u7387\u6781\u5176\u4f4e\u4e0b\u3002 \u52a8\u6001\u89c4\u5212\u4f7f\u7528 val \u6570\u7ec4\u6765\u5b58\u50a8\u4e2d\u95f4\u7ed3\u679c\uff1a // \u52a8\u6001\u89c4\u5212\u89e3\u6cd5 function dynFib (){ var val = []; for ( var i = 0 ; i <= n ; ++ i ) { val [ i ] = 0 ; } if ( n == 1 || n == 2 ) { return 1 ; } else { val [ 1 ] = 1 ; val [ 2 ] = 2 ; for ( var i = 3 ; i <= n ; ++ i ) { val [ i ] = val [ i - 1 ] + val [ i - 2 ]; } return val [ n - 1 ]; } }","title":"1.1 Fibonacci\u6570\u5217"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#12","text":"\u5bfb\u627e\u4e24\u4e2a\u5b57\u7b26\u4e32\u4e2d\u6700\u957f\u516c\u5171\u5b50\u4e32 ( Longest Common Substring ) \u662f\u52a8\u6001\u89c4\u5212\u7684\u7ecf\u5178\u95ee\u9898\u3002 \u7b97\u6cd5\u601d\u60f3\uff1a \u7528\u4e8c\u7ef4\u6570\u7ec4\u8bb0\u5f55\u4e24\u4e2a\u5b57\u7b26\u4e32\u5728\u76f8\u540c\u4f4d\u7f6e\u7684\u5b57\u6bcd\u7684\u6bd4\u8f83\u7ed3\u679c\u3002 \u4e8c\u7ef4\u6570\u7ec4\u521d\u59cb\u5316\u4e3a\u51680\uff1b \u6bcf\u6b21\u4e24\u4e2a\u5b57\u7b26\u4e32\u76f8\u540c\u4f4d\u7f6e\u5339\u914d\u65f6\uff0c\u4e8c\u7ef4\u6570\u7ec4\u76f8\u5e94\u4f4d\u7f6e\u52a01\uff0c\u5426\u5219\u7f6e0\u3002 function lcs(word1, word2){ var max = 0; // \u516c\u5171\u5b50\u4e32\u6700\u5927\u957f\u5ea6 var index = 0; // \u6807\u8bb0\u516c\u5171\u5b50\u4e32\u4f4d\u7f6e var lcsarr = new Array(word1.length); // \u58f0\u660e lcsarr \u77e9\u9635\uff0c\u5e76\u521d\u59cb\u5316 for(var i = 0; i < word1.length; i++){ lcsarr[i] = new Array(word2.length); for(var j = 0; j < word2.length; j++){ lcsarr[i][j] = 0; } } for(var i = 0; i < word1.length; i++){ for(var j = 0; j < word2.length; j++){ if(word1[i] == word2[j]){ if(i == 0 || j == 0){ lcsarr[i][j] = 1; }else{ lcsarr[i][j] = lcsarr[i-1][j-1] + 1; } if(max < lcsarr[i][j]){ max = lcsarr[i][j]; index = i; } } } } //console.log(lcsarr) return word1.substr(index-max+1, max); }","title":"1.2 \u6700\u957f\u516c\u5171\u5b50\u4e32"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#13","text":"\u80cc\u5305\u95ee\u9898 (Knapsack Problem)\uff1a\u4e00\u5806\u7269\u54c1\uff0c\u5404\u6709 value \u548c size \u4e24\u4e2a\u5c5e\u6027\uff0c\u80cc\u5305\u9650\u5b9a\u6293\u53d6\u7269\u54c1 size \u7684\u603b\u5927\u5c0f\uff0c\u5982\u4f55\u8ba9\u6240\u9009\u4e4b\u7269\u603b\u503c value \u6700\u5927\u3002 \u5047\u8bbe\u6709\u5982\u4e0b\u7269\u54c1\uff1a var capacity = 16; // \u80cc\u5305\u5927\u5c0f var n = 5; // \u7269\u54c1\u6570\u91cf var value = [4,5,10,11,13]; // \u7269\u54c1\u4ef7\u503c var size = [3,4,7,8,9]; // \u7269\u54c1\u5927\u5c0f","title":"1.3 \u80cc\u5305\u95ee\u9898"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#131","text":"// \u8fd4\u56de\u503c\u4e3a\u80cc\u5305\u5185\u7269\u54c1\u4ef7\u503c\u603b\u548c function knapsack(capacity, n, size, value){ if(capacity == 0 || n == 0) // \u9012\u5f52\u7ec8\u6b62\u6761\u4ef6 return 0; if(size[n-1] > capacity) // \u82e5\u88c5\u4e0d\u4e0b\uff0c\u5219\u5f03\u4e4b return knapsack(capacity, n-1, size, value) var a = knapsack(capacity, n-1, size, value), b = knapsack(capacity - size[n-1], n-1, size, value) + value[n-1]; return a > b ? a : b; }","title":"1.3.1 \u9012\u5f52\u89e3\u51b3\u80cc\u5305\u95ee\u9898"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#132","text":"\u7b97\u6cd5\u601d\u60f3\uff1a\u7528\u4e8c\u7ef4\u77e9\u9635\u8bb0\u5f55\u80cc\u5305\u548c\u7269\u54c1\u5728\u6269\u5f20\u8fc7\u7a0b\u4e2d\u7684\u6700\u4f18\u89e3\u3002 \u77e9\u9635\u7528\u4e8c\u7ef4\u6570\u7ec4 K[i][j] \u8868\u793a\uff0ci \u2208 [0, \u2026, n]\uff0cj \u2208 [0, \u2026, capacity]\u3002 function dKnapsack(capacity, n, size, value){ var K = []; // \u58f0\u660e\u77e9\u9635\u5e76\u521d\u59cb\u5316 for(var i = 0; i <= n; i++) K[i] = []; for(var i = 0; i <= n; i++){ for(var j = 0; j <= capacity; j++){ if(i == 0 || j == 0){ K[i][j] = 0; }else if(j < size[i-1]){ K[i][j] = K[i-1][j] }else{ var a = K[i-1][j], b = K[i-1][j-size[i-1]]+value[i-1]; K[i][j] = a > b ? a : b; } } } //console.log(K) return K[n][capacity] }","title":"1.3.2 \u52a8\u6001\u89c4\u5212\u89e3\u51b3\u80cc\u5305\u95ee\u9898"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#2","text":"\u201cA greedy algorithm looks for \u201cgood solutions\u201d, called local optima , which will hopefully lead to the correct final solution, called the global optimum . \u201d \u601d\u60f3 \uff1a\u8d2a\u5fc3\u7b97\u6cd5\u4e0d\u4ece\u6574\u4f53\u6700\u4f18\u8003\u8651\uff0c\u5b83\u53ea\u4f5c\u51fa**\u5c40\u90e8\u6700\u4f18**\u9009\u62e9\u3002\u5373\u4f7f\u8d2a\u5fc3\u7b97\u6cd5\u4e0d\u80fd\u5f97\u5230\u6574\u4f53\u6700\u4f18\u89e3\uff0c\u5176\u6700\u7ec8\u7ed3\u679c\u5374\u662f\u6700\u4f18\u89e3\u7684\u5f88\u597d\u8fd1\u4f3c\u3002 **\u8d2a\u5fc3\u7b97\u6cd5**\u4e0e**\u52a8\u6001\u89c4\u5212\u7b97\u6cd5**\u7684\u533a\u522b\uff1a**\u52a8\u6001\u89c4\u5212\u7b97\u6cd5**\u901a\u5e38\u81ea\u5e95\u5411\u4e0a\u7684\u6c42\u89e3\u5404\u5b50\u95ee\u9898\uff1b\u800c**\u8d2a\u5fc3\u7b97\u6cd5**\u5219\u901a\u5e38\u81ea\u9876\u5411\u4e0b\u8fdb\u884c\uff0c\u8fed\u4ee3\u7684\u4f5c\u51fa\u8d2a\u5fc3\u9009\u62e9\uff0c\u6bcf\u6b21\u8d2a\u5fc3\u9009\u62e9\u5c31\u5c06\u6240\u6c42\u95ee\u9898\u7b80\u5316\u4e3a\u89c4\u6a21\u66f4\u5c0f\u7684\u5b50\u95ee\u9898\u3002","title":"2. \u8d2a\u5fc3\u7b97\u6cd5"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#21","text":"\u786c\u5e01\u95ee\u9898 (Coin-changing Problem)\uff1a \u73b0\u6709\u9762\u503c25\u7f8e\u5206\u300110\u7f8e\u5206\u548c1\u7f8e\u5206\u4e09\u79cd\u9762\u503c\u786c\u5e01\uff0c\u8981\u5c0663\u7f8e\u5206\u6362\u6210\u96f6\u94b1\uff0c\u6309\u7167\u8d2a\u5fc3\u7b97\u6cd5\u8be5\u600e\u4e48\u6362\uff1f function makeChange(origAmt){ var remainAmt = 0; if (origAmt % 25 < origAmt) { console.log(\"25-cent coins: \", parseInt(origAmt / 25)); origAmt = origAmt % 25 } if (origAmt % 10 < origAmt) { console.log(\"10-cent coins: \", parseInt(origAmt / 10)); origAmt = origAmt % 10 } console.log(\"1-cent coins: \", parseInt(origAmt / 1)); }","title":"2.1 \u786c\u5e01\u95ee\u9898"},{"location":"history/JavaScript%20%E4%B9%8B%20Advanced%20Algorithms/#22","text":"\u90e8\u5206\u80cc\u5305\u95ee\u9898 (Fractional Knapsack Problem)\uff1a\u6309\u7167\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u6bcf\u6b21\u9009**\u6027\u4ef7\u6bd4\u6700\u9ad8**\u7684\u7269\u54c1\u653e\u5165\u80cc\u5305\u3002 \u7b97\u6cd5\u6b65\u9aa4\uff1a \u80cc\u5305\u62e5\u6709\u5bb9\u91cf capacity \uff0c \u7269\u54c1\u62e5\u6709\u4ef7\u503c value \u548c\u5927\u5c0f size \u3002 Rank items by value/size ratio. Consider items in terms of decreasing ratio. Take as much of each item as possible. function ksack(capacity, n, size, value){ // \u5192\u6ce1\u6392\u5e8f, value/size\u9012\u51cf for(var i = 0; i < n; i++){ for(var j = 0; j < n-i-1; j++){ if(value[j]/size[j] < value[j+1]/size[j+1]){ var tmp = value[j]; value[j] = value[j+1]; value[j+1] = tmp; tmp = size[j]; size[j] = size[j+1]; size[j+1] = tmp; } } } //console.log({value, size}) var load = 0, result = 0; i = 0; while(load < capacity && i < n){ if(size[i] <= capacity - load){ load += size[i]; result += value[i]; } i++; } return result; }","title":"2.2 \u90e8\u5206\u80cc\u5305\u95ee\u9898"},{"location":"history/JavaScript%20%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91/","text":"\u6811\u662f\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e8c\u53c9\u6811\uff08Binary Trees\uff09\u548c\u4e8c\u53c9\u641c\u7d22\u6811\uff08Binary Search Trees\uff09\u5e38\u4f18\u4e8e\u5176\u5b83\u6570\u636e\u7ed3\u6784\uff0c\u65b9\u4fbf\u5feb\u901f\u67e5\u627e\u548c\u589e\u5220\u6570\u636e\u7b49\u64cd\u4f5c\u3002 0. \u6982\u5ff5 \u00b6 \u6811 \uff1a \u201c A tree is made up of a set of nodes connected by edges.\u201d \u4e8c\u53c9\u6811 \uff1a \u201c Binary trees restrict the number of child nodes to no more than two.\u201d \u4e8c\u53c9\u67e5\u627e\u6811\uff08BST\uff09 \uff1a\u201c A binary search tree is a binary tree in which data with lesser values are stored in left nodes and data with greater values are stored in right nodes.\u201d 1. \u521b\u5efa BST \u00b6 // define Binary Tree Nodes function Node(data, left, right) { this.data = data; this.left = left; this.right = right; this.show = show; } function show() { return this.data; } // build BST function BST(){ this.root = null; this.insert = insert; this.inOrder = inOrder; } function insert(data){ var n = new Node(data, null, null); if(this.root == null){ this.root = n; }else{ var current = this.root; var parent; while(true){ parent = current; if(data < current.data){ current = parent.left; if(current == null){ parent.left = n; break; } }else{ current = parent.right; if(current == null){ parent.right = n; break; } } } } } 2. \u904d\u5386 BST \u00b6 \u904d\u5386BST\u65b9\u6cd5\u6709\u4e09\uff1a \u4e2d\u5e8f\u904d\u5386\uff0c\u5148\u5e8f\u904d\u5386\u548c\u540e\u5e8f\u904d\u5386\u3002 \u4e2d\u5e8f\u904d\u5386\uff08inorder\uff09 \uff1a \u201cAn inorder traversal visits all of the nodes of a BST in ascending order of the node key values. \u201d \u5373 left -> root -> right \u5148\u5e8f\u904d\u5386\uff08preorder\uff09 :\u201c A preorder traversal visits the root node first, followed by the nodes in the subtrees under the left child of the root node, followed by the nodes in the subtrees under the right child of the root node.\u201d \u5373 root -> left -> right \u540e\u5e8f\u904d\u5386\uff08postorder\uff09 :\u201cA postorder traversal visits all of the child nodes of the left subtree up to the root node, and then visits all of the child nodes of the right subtree up to the root node.\u201d \u5373 left -> right -> root // \u4e2d\u5e8f\u904d\u5386 function inOder(node){ if(node !== null){ inOder(node.left); console.log(node.show()); inOder(node.right); } } // \u5148\u5e8f\u904d\u5386 function preOrder(){ if(node !== null){ console.log(node.show()); preOrder(node.left); preOrder(node.right); } } // \u540e\u5e8f\u904d\u5386 function postOrder(){ if(node !== null){ postOrder(node.left); postOrder(node.right); console.log(node.show()); } } 3. \u4ece BST \u4e2d\u5220\u9664\u8282\u70b9 \u00b6 \u7b97\u6cd5\u601d\u60f3\uff1a \u82e5\u4e3a\u53f6\u8282\u70b9\uff0c\u5373\u65e0\u5b69\u5b50\uff0c\u5176\u7236\u6307\u5411\u5b83\u7684\u6307\u9488\u8bbe\u4e3a null\uff1b \u82e5\u4e00\u4e2a\u5b69\u5b50\uff0c\u5176\u7236\u6307\u5411\u5b83\u7684\u6307\u9488\u6539\u6307\u5411\u5176\u5b69\u5b50\uff1b \u82e5\u4fe9\u5b69\u5b50\uff0c\u9996\u5148\uff0c\u8981\u4e48\u627e\u5230\u5176\u5de6\u5b50\u6811\u7684\u6700\u5927\u503c\uff0c\u8981\u4e48\u627e\u5230\u5176\u53f3\u5b50\u6811\u7684\u6700\u5c0f\u503c\u3002\u672c\u6587\u91c7\u7528\u540e\u8005\uff0c\u540e\u7eed\u6b65\u9aa4\u8f6c\u52304\uff1b \u5c06\u8be5\u8282\u70b9\u503c\u66ff\u6362\u4e3a\u6700\u5c0f\u503c\uff0c**\u9012\u5f52**\u5730\u5220\u9664\u53f3\u5b50\u6811\u4e2d\u6700\u5c0f\u503c\u8282\u70b9\u3002 // \u53c2\u6570\u4e3a\u88ab\u5220\u8282\u70b9\u7684value function remove(data) { root = removeNode(this.root, data); } function removeNode(node, data){ if(node == null) return null; if(data == node.data){ // \u65e0\u5b69\u5b50 if(node.left == null && node.right == null) return null; // \u65e0\u5de6\u5b69\u5b50 if(node.left == null) return node.right; // \u65e0\u53f3\u5b69\u5b50 if(node.right == null) return node.left; // \u6709\u4fe9\u5b69\u5b50 var tmp = getSmallestValue(node.right); //\u81ea\u5b9a\u4e49\uff1a\u53f3\u5b50\u6811\u6700\u5c0f\u503c node.data = tmp; node.right = removeNode(node.right, tmp); return node; }else if(data < node.data){ node.left = removeNode(node.left, data); return node; }else{ node.right = removeNode(node.right, data); return node; } }","title":"JavaScript \u4e4b\u4e8c\u53c9\u6811"},{"location":"history/JavaScript%20%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91/#0","text":"\u6811 \uff1a \u201c A tree is made up of a set of nodes connected by edges.\u201d \u4e8c\u53c9\u6811 \uff1a \u201c Binary trees restrict the number of child nodes to no more than two.\u201d \u4e8c\u53c9\u67e5\u627e\u6811\uff08BST\uff09 \uff1a\u201c A binary search tree is a binary tree in which data with lesser values are stored in left nodes and data with greater values are stored in right nodes.\u201d","title":"0. \u6982\u5ff5"},{"location":"history/JavaScript%20%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91/#1-bst","text":"// define Binary Tree Nodes function Node(data, left, right) { this.data = data; this.left = left; this.right = right; this.show = show; } function show() { return this.data; } // build BST function BST(){ this.root = null; this.insert = insert; this.inOrder = inOrder; } function insert(data){ var n = new Node(data, null, null); if(this.root == null){ this.root = n; }else{ var current = this.root; var parent; while(true){ parent = current; if(data < current.data){ current = parent.left; if(current == null){ parent.left = n; break; } }else{ current = parent.right; if(current == null){ parent.right = n; break; } } } } }","title":"1. \u521b\u5efa BST"},{"location":"history/JavaScript%20%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91/#2-bst","text":"\u904d\u5386BST\u65b9\u6cd5\u6709\u4e09\uff1a \u4e2d\u5e8f\u904d\u5386\uff0c\u5148\u5e8f\u904d\u5386\u548c\u540e\u5e8f\u904d\u5386\u3002 \u4e2d\u5e8f\u904d\u5386\uff08inorder\uff09 \uff1a \u201cAn inorder traversal visits all of the nodes of a BST in ascending order of the node key values. \u201d \u5373 left -> root -> right \u5148\u5e8f\u904d\u5386\uff08preorder\uff09 :\u201c A preorder traversal visits the root node first, followed by the nodes in the subtrees under the left child of the root node, followed by the nodes in the subtrees under the right child of the root node.\u201d \u5373 root -> left -> right \u540e\u5e8f\u904d\u5386\uff08postorder\uff09 :\u201cA postorder traversal visits all of the child nodes of the left subtree up to the root node, and then visits all of the child nodes of the right subtree up to the root node.\u201d \u5373 left -> right -> root // \u4e2d\u5e8f\u904d\u5386 function inOder(node){ if(node !== null){ inOder(node.left); console.log(node.show()); inOder(node.right); } } // \u5148\u5e8f\u904d\u5386 function preOrder(){ if(node !== null){ console.log(node.show()); preOrder(node.left); preOrder(node.right); } } // \u540e\u5e8f\u904d\u5386 function postOrder(){ if(node !== null){ postOrder(node.left); postOrder(node.right); console.log(node.show()); } }","title":"2. \u904d\u5386 BST"},{"location":"history/JavaScript%20%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91/#3-bst","text":"\u7b97\u6cd5\u601d\u60f3\uff1a \u82e5\u4e3a\u53f6\u8282\u70b9\uff0c\u5373\u65e0\u5b69\u5b50\uff0c\u5176\u7236\u6307\u5411\u5b83\u7684\u6307\u9488\u8bbe\u4e3a null\uff1b \u82e5\u4e00\u4e2a\u5b69\u5b50\uff0c\u5176\u7236\u6307\u5411\u5b83\u7684\u6307\u9488\u6539\u6307\u5411\u5176\u5b69\u5b50\uff1b \u82e5\u4fe9\u5b69\u5b50\uff0c\u9996\u5148\uff0c\u8981\u4e48\u627e\u5230\u5176\u5de6\u5b50\u6811\u7684\u6700\u5927\u503c\uff0c\u8981\u4e48\u627e\u5230\u5176\u53f3\u5b50\u6811\u7684\u6700\u5c0f\u503c\u3002\u672c\u6587\u91c7\u7528\u540e\u8005\uff0c\u540e\u7eed\u6b65\u9aa4\u8f6c\u52304\uff1b \u5c06\u8be5\u8282\u70b9\u503c\u66ff\u6362\u4e3a\u6700\u5c0f\u503c\uff0c**\u9012\u5f52**\u5730\u5220\u9664\u53f3\u5b50\u6811\u4e2d\u6700\u5c0f\u503c\u8282\u70b9\u3002 // \u53c2\u6570\u4e3a\u88ab\u5220\u8282\u70b9\u7684value function remove(data) { root = removeNode(this.root, data); } function removeNode(node, data){ if(node == null) return null; if(data == node.data){ // \u65e0\u5b69\u5b50 if(node.left == null && node.right == null) return null; // \u65e0\u5de6\u5b69\u5b50 if(node.left == null) return node.right; // \u65e0\u53f3\u5b69\u5b50 if(node.right == null) return node.left; // \u6709\u4fe9\u5b69\u5b50 var tmp = getSmallestValue(node.right); //\u81ea\u5b9a\u4e49\uff1a\u53f3\u5b50\u6811\u6700\u5c0f\u503c node.data = tmp; node.right = removeNode(node.right, tmp); return node; }else if(data < node.data){ node.left = removeNode(node.left, data); return node; }else{ node.right = removeNode(node.right, data); return node; } }","title":"3. \u4ece BST \u4e2d\u5220\u9664\u8282\u70b9"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/","text":"0.\u6982\u5ff5 \u00b6 \u5341\u5927\u6392\u5e8f\u7b97\u6cd5\u901a\u5e38\u662f\u6307**\u5185\u90e8\u6392\u5e8f**\uff0c\u5373\u6240\u6709\u6570\u636e\u8bb0\u5f55\u90fd\u662f\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u6392\u5e8f\u3002\u5e38\u89c1\u7684\u5185\u90e8\u6392\u5e8f\u7b97\u6cd5\u6709\uff1a\u63d2\u5165\u6392\u5e8f\u3001\u5e0c\u5c14\u6392\u5e8f\u3001\u9009\u62e9\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u3001\u5f52\u5e76\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u3001\u5806\u6392\u5e8f\u3001\u57fa\u6570\u6392\u5e8f\u7b49\u3002 \u5176\u4e2d\uff0c In-place sort\uff08\u4e0d\u5360\u7528\u989d\u5916\u5185\u5b58\u6216\u5360\u7528\u5e38\u6570\u7684\u5185\u5b58\uff09\uff1a\u63d2\u5165\u6392\u5e8f\u3001\u9009\u62e9\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u3001\u5806\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u3002 Out-place sort\uff1a\u5f52\u5e76\u6392\u5e8f\u3001\u8ba1\u6570\u6392\u5e8f\u3001\u57fa\u6570\u6392\u5e8f\u3001\u6876\u6392\u5e8f\u3002 1.\u5192\u6ce1\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u6bd4\u8f83\u76f8\u90bb\u4e24\u4e2a\u5143\u7d20\uff0c\u5982\u679c\u5b83\u4eec\u7684\u987a\u5e8f\u9519\u8bef\u5c31\u628a\u5b83\u4eec\u4ea4\u6362\u8fc7\u6765\u3002 function bubbleSort( arr ){ let len = arr.length; for( let i = 0; i < len-1; i++ ){ for( let j = 0; j < len-1-i; j++){ if(arr[j] > arr[j+1]){ let tmp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = tmp; } } } return arr } 2.\u9009\u62e9\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u6bcf\u6b21\u627e\u4e00\u4e2a\u6700\u5c0f\u503c\u3002 function selectionSort( arr ){ let len = arr.length; for( let i = 0; i < len; i++ ){ let minIdx = i; for( let j = i+1; j < len; j++ ){ if(arr[j] < arr[minIdx]){ minIdx = j; } } //swap let tmp = arr[i]; arr[i] = arr[minIdx]; arr[minIdx] = tmp; } return arr; } 3.\u63d2\u5165\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u5bf9\u672a\u6392\u5e8f\u7684\u6570\u636e\uff0c\u5728\u5df2\u6392\u5e8f\u7684\u5e8f\u5217\u4e2d\u4ece\u540e\u5411\u524d\u626b\u63cf\uff0c\u627e\u5230\u76f8\u5e94\u7684\u4f4d\u7f6e\u5e76\u63d2\u5165\u3002 function insertionSort( arr ){ let len = arr.length; for(let i = 1; i < len; i++ ){ let key = arr[i]; for( var j = i-1; j >= 0 && key < arr[j]; j--){ arr[j+1] = arr[j]; } arr[j+1] = key; //console.log(i, key, j, arr) } return arr; } //var x = [7,6,5,4,3,2,1] //console.log(insertionSort(x)) 4. \u5e0c\u5c14\u6392\u5e8f\uff08Shell Sort\uff09 \u00b6 \u6982\u5ff5\uff1a\u5e0c\u5c14\u6392\u5e8f\u662f**\u63d2\u5165\u6392\u5e8f**\u7684\u4e00\u79cd\u66f4\u9ad8\u6548\u7387\u7684\u5b9e\u73b0\uff0c\u6838\u5fc3\u5728\u4e8e**\u589e\u91cf**\u7684\u8bbe\u7f6e\u3002 \u601d\u60f3\uff1a \u5e0c\u5c14\u6392\u5e8f\u662f\u628a\u8bb0\u5f55\u6309\u4e0b\u6807\u7684\u4e00\u5b9a\u589e\u91cf\u5206\u7ec4\uff0c\u5bf9\u6bcf\u7ec4\u4f7f\u7528\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u7b97\u6cd5\u6392\u5e8f\uff1b\u968f\u7740\u589e\u91cf\u9010\u6e10\u51cf\u5c11\uff0c\u5f53\u589e\u91cf\u51cf\u81f31\u65f6\uff0c\u6240\u6709\u8bb0\u5f55\u88ab\u5206\u6210\u4e00\u7ec4\uff0c\u7b97\u6cd5\u7ec8\u6b62\u3002 \u5b9e\u73b0\uff1a\u793a\u4f8b\u91c7\u7528**\u5e0c\u5c14\u589e\u91cf**\uff0c\u9009\u62e9\u589e\u91cfgap=length/2\uff0c\u7ee7\u7eed\u7f29\u5c0f\u589e\u91cfgap = gap/2\uff0c\u8fd9\u79cd\u589e\u91cf\u9009\u62e9\u53ef\u4ee5\u7528\u4e00\u4e2a\u5e8f\u5217\u6765\u8868\u793a\uff0c{n/2, (n/2)/2\u20261}\uff0c\u79f0\u4e3a**\u589e\u91cf\u5e8f\u5217**\u3002 function shellSort( arr ){ let len = arr.length, gap = Math.floor(len/2); for(; gap > 0; gap = Math.floor(gap/2)){ //\u5faa\u73af\u5185\u662f\u4e00\u4e2a\u63d2\u5165\u6392\u5e8f for(let i = gap; i < len; i++){ let key = arr[i]; for( var j=i-gap; j>=0 && key<arr[j]; j-=gap){ arr[j+gap] = arr[j]; } arr[j+gap] = key; //console.log(gap, i, key, j, arr) } } return arr; } //var x = [7,6,5,4,3,2,1] //console.log(shellSort(x)) 5. \u5f52\u5e76\u6392\u5e8f\uff08Merge Sort\uff09 \u00b6 \u601d\u60f3\uff1a\u5c06\u5df2\u6709\u5e8f\u7684\u5b50\u5e8f\u5217\u5408\u5e76\uff0c\u5f97\u5230\u4e00\u4e2a\u5b8c\u5168\u6709\u5e8f\u7684\u5e8f\u5217\u3002 \u5b9e\u73b0\uff1a\u793a\u4f8b\u4e3a**\u4e8c\u8def\u5f52\u5e76\u6392\u5e8f**\u3002 function mergeSort( arr ){ //console.log('1...',arr); let len = arr.length; if(len < 2) return arr; let middle = Math.floor(len/2), left = arr.slice(0, middle), right = arr.slice(middle); return merge(mergeSort(left), mergeSort(right));; } //\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4 function merge( left, right ){ let result = []; let i=0, j=0; while( i<left.length && j<right.length){ if(left[i] < right[j]) result.push(left[i++]); else result.push(right[j++]); } while(i<left.length) result.push(left[i++]); while(j<right.length) result.push(right[j++]); //console.log('2...',result); return result } var x = [7,6,5,4,3,2,1] console.log(mergeSort(x)) 6.\u5feb\u901f\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u6311\u51fa\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a \u201c \u57fa\u51c6 \u201d\uff08pivot\uff09\uff0c\u4e00\u6b21\u6392\u5e8f\u8fdb\u884c**\u5206\u533a**\uff0c\u6240\u6709\u5c0f\u4e8e\u57fa\u51c6\u7684\u5143\u7d20\u5c45\u5de6\uff0c\u6240\u6709\u5927\u4e8e\u57fa\u51c6\u7684\u5143\u7d20\u5c45\u53f3\uff0c\u5bf9\u5206\u533a\u8fdb\u884c**\u9012\u5f52**\u3002 /* arguments \u4f9d\u6b21\u662f arr, left, right */ function quickSort( arr ){ let left = arguments[1] || 0, right = isNaN(arguments[2])? arr.length - 1 : arguments[2]; if(right-left < 1) return arr; let pivotIdx = left, pivot = arr[left]; for(let i = left+1; i <= right; i++){ if(arr[i] < pivot){ let tmp = arr[++pivotIdx]; arr[pivotIdx] = arr[i]; arr[i] = tmp; } } arr[left] = arr[pivotIdx]; arr[pivotIdx] = pivot; quickSort(arr, left, pivotIdx-1); quickSort(arr, pivotIdx+1, right) return arr; } 7.\u5806\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a \u521b\u5efa**\u5927\u6839\u5806**\uff0c\u5373\u6bcf\u4e2a\u8282\u70b9\u7684\u503c\u90fd\u5927\u4e8e\u5176\u5b50\u8282\u70b9\uff0c\u7528\u4e8e\u5347\u5e8f\u6392\u5217\u3002\u6392\u5e8f\u65f6\u53d6\u51fa\u5806\u9876(\u6700\u5927\u503c)\uff0c\u653e\u5728\u961f\u5c3e\uff0c\u5269\u4e0b\u7684\u5143\u7d20\u8c03\u6574\u4e3a\u5927\u6839\u5806\u3002 function heapSort( arr ){ for(let len = arr.length; len > 0; len--){ heap(arr, 0, len) let tmp = arr[0]; arr[0] = arr[len-1]; arr[len-1] = tmp; //console.warn(arr); } return arr; } //\u5efa\u7acb\u5927\u6839\u5806\uff0ci\u4e3a\u5806\u9876\u4f4d\u7f6e\uff0c length\u4e3a\u5143\u7d20\u4e2a\u6570 function heap( arr, i, length){ var left = i*2+1, right = i*2+2, max = i; if(left < length){ heap( arr, left, length); if(arr[left] > arr[max]) max = left; } if(right < length){ heap( arr, right, length); if(arr[right] > arr[max] ) max = right; } if(max !== i){ let tmp = arr[i]; arr[i] = arr[max]; arr[max] = tmp; heap( arr, max, length) //console.log( arr, i, length ) } } 8. \u8ba1\u6570\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u5c06\u5143\u7d20value\u8f6c\u5316\u4e3akey\uff0c\u5b58\u5728\u65b0\u6570\u7ec4key\u5bf9\u5e94\u4f4d\u7f6e\u3002\u56e0\u6b64\u524d\u63d0\uff0c\u6570\u503c\u6709\u8303\u56f4\uff0c\u4e14\u4e3a\u6574\u6570\u3002 function countingSort( arr ){ let len = arr.length, max = 0, tmpArr=[]; for(let i = 0; i < len; i++ ){ if(arr[i] > max) max = arr[i]; if(!tmpArr[arr[i]]) tmpArr[arr[i]] = 1; else tmpArr[arr[i]]++; } console.log(tmpArr); let k = 0; for(let i = 0; i <= max; i++){ while(tmpArr[i] > 0){ arr[k++] = i; tmpArr[i]--; } console.log(arr); } return arr; } var x = [7,6,5,4,3,2,1] console.log(countingSort(x)) 9. \u6876\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a\u8ba1\u6570\u6392\u5e8f\u7684\u5347\u7ea7\u7248\uff0c\u5c06\u8f93\u5165\u7684N\u4e2a\u6570\u636e\u5747\u5300\u7684\u5206\u914d\u5230K\u4e2a\u6876\u4e2d\u3002 ``` function bucketSort( arr ){ const BUCKET_SIZE = 5; //default set to 5 let min, max; for(let i = 0; i min ? min : arr[i]; max = arr[i] < max ? max : arr[i]; } let bucketCount = Math.floor((max - min) / BUCKET_SIZE) + 1; let buckets = []; //\u4e8c\u7ef4\u6570\u7ec4\u6876\u7684\u521d\u59cb\u5316 for (let i = 0; i < bucketCount; i++) buckets[i] = []; //console.log({min, max, buckets, bucketCount}); //\u5229\u7528\u6620\u5c04\u51fd\u6570\u5c06\u6570\u636e\u5206\u914d\u5230\u5404\u4e2a\u6876\u4e2d for(i = 0; i < arr.length; i++){ var bucketIdx = Math.floor((arr[i] - min) / BUCKET_SIZE); //\u6620\u5c04\u51fd\u6570 buckets[bucketIdx].push(arr[i]); for(let j = buckets[bucketIdx].length-1; j > 0;j--){ if(buckets[bucketIdx][j]<buckets[bucketIdx][j-1]){ let tmp = buckets[bucketIdx][j]; buckets[bucketIdx][j] = buckets[bucketIdx][j-1]; buckets[bucketIdx][j-1] = tmp; } } } arr = []; for( let i = 0; i<bucketCount; i++){ arr = arr.concat(buckets[i]); } return arr; } ``` 10. \u57fa\u6570\u6392\u5e8f \u00b6 \u601d\u60f3\uff1a \u5229\u7528\u4e86\u6876\u7684\u6982\u5ff5\uff0c\u6839\u636e\u952e\u503c\u7684\u6bcf\u4f4d\u6570\u5b57\u6765\u5206\u914d\u6876\u3002 \u5b9e\u73b0\uff1a\u57fa\u6570\u6392\u5e8fLSD\u662f\u6309\u7167\u4f4e\u4f4d\u5148\u6392\u5e8f\uff0c\u7136\u540e\u6536\u96c6\uff1b\u518d\u6309\u7167\u9ad8\u4f4d\u6392\u5e8f\uff0c\u7136\u540e\u518d\u6536\u96c6\uff1b\u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u5230\u6700\u9ad8\u4f4d\u3002 function radixSort(arr) { let max, maxDigit, mod = 1; for(let i = 0; i<arr.length; i++){ max = arr[i] < max ? max : arr[i]; } maxDigit = max.toString().length; for (let i = 0; i < maxDigit; i++, mod *= 10) { let buckets = []; for(let j = 0; j < arr.length; j++) { let bucketIdx = parseInt(arr[j]/mod)%10; if(!buckets[bucketIdx]) buckets[bucketIdx] = []; buckets[bucketIdx].push(arr[j]); } arr = []; for( let j = 0; j<buckets.length; j++){ arr = arr.concat(buckets[j]); arr = arr.filter(item => item!==undefined) } //console.log({ maxDigit, buckets, arr }) } return arr; } //var x = [7,6,5,3,2,1] //console.log(radixSort(x))","title":"JavaScript \u4e4b\u5341\u5927\u7ecf\u5178\u6392\u5e8f\u7b97\u6cd5"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#0","text":"\u5341\u5927\u6392\u5e8f\u7b97\u6cd5\u901a\u5e38\u662f\u6307**\u5185\u90e8\u6392\u5e8f**\uff0c\u5373\u6240\u6709\u6570\u636e\u8bb0\u5f55\u90fd\u662f\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u6392\u5e8f\u3002\u5e38\u89c1\u7684\u5185\u90e8\u6392\u5e8f\u7b97\u6cd5\u6709\uff1a\u63d2\u5165\u6392\u5e8f\u3001\u5e0c\u5c14\u6392\u5e8f\u3001\u9009\u62e9\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u3001\u5f52\u5e76\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u3001\u5806\u6392\u5e8f\u3001\u57fa\u6570\u6392\u5e8f\u7b49\u3002 \u5176\u4e2d\uff0c In-place sort\uff08\u4e0d\u5360\u7528\u989d\u5916\u5185\u5b58\u6216\u5360\u7528\u5e38\u6570\u7684\u5185\u5b58\uff09\uff1a\u63d2\u5165\u6392\u5e8f\u3001\u9009\u62e9\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u3001\u5806\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u3002 Out-place sort\uff1a\u5f52\u5e76\u6392\u5e8f\u3001\u8ba1\u6570\u6392\u5e8f\u3001\u57fa\u6570\u6392\u5e8f\u3001\u6876\u6392\u5e8f\u3002","title":"0.\u6982\u5ff5"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#1","text":"\u601d\u60f3\uff1a\u6bd4\u8f83\u76f8\u90bb\u4e24\u4e2a\u5143\u7d20\uff0c\u5982\u679c\u5b83\u4eec\u7684\u987a\u5e8f\u9519\u8bef\u5c31\u628a\u5b83\u4eec\u4ea4\u6362\u8fc7\u6765\u3002 function bubbleSort( arr ){ let len = arr.length; for( let i = 0; i < len-1; i++ ){ for( let j = 0; j < len-1-i; j++){ if(arr[j] > arr[j+1]){ let tmp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = tmp; } } } return arr }","title":"1.\u5192\u6ce1\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#2","text":"\u601d\u60f3\uff1a\u6bcf\u6b21\u627e\u4e00\u4e2a\u6700\u5c0f\u503c\u3002 function selectionSort( arr ){ let len = arr.length; for( let i = 0; i < len; i++ ){ let minIdx = i; for( let j = i+1; j < len; j++ ){ if(arr[j] < arr[minIdx]){ minIdx = j; } } //swap let tmp = arr[i]; arr[i] = arr[minIdx]; arr[minIdx] = tmp; } return arr; }","title":"2.\u9009\u62e9\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#3","text":"\u601d\u60f3\uff1a\u5bf9\u672a\u6392\u5e8f\u7684\u6570\u636e\uff0c\u5728\u5df2\u6392\u5e8f\u7684\u5e8f\u5217\u4e2d\u4ece\u540e\u5411\u524d\u626b\u63cf\uff0c\u627e\u5230\u76f8\u5e94\u7684\u4f4d\u7f6e\u5e76\u63d2\u5165\u3002 function insertionSort( arr ){ let len = arr.length; for(let i = 1; i < len; i++ ){ let key = arr[i]; for( var j = i-1; j >= 0 && key < arr[j]; j--){ arr[j+1] = arr[j]; } arr[j+1] = key; //console.log(i, key, j, arr) } return arr; } //var x = [7,6,5,4,3,2,1] //console.log(insertionSort(x))","title":"3.\u63d2\u5165\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#4-shell-sort","text":"\u6982\u5ff5\uff1a\u5e0c\u5c14\u6392\u5e8f\u662f**\u63d2\u5165\u6392\u5e8f**\u7684\u4e00\u79cd\u66f4\u9ad8\u6548\u7387\u7684\u5b9e\u73b0\uff0c\u6838\u5fc3\u5728\u4e8e**\u589e\u91cf**\u7684\u8bbe\u7f6e\u3002 \u601d\u60f3\uff1a \u5e0c\u5c14\u6392\u5e8f\u662f\u628a\u8bb0\u5f55\u6309\u4e0b\u6807\u7684\u4e00\u5b9a\u589e\u91cf\u5206\u7ec4\uff0c\u5bf9\u6bcf\u7ec4\u4f7f\u7528\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u7b97\u6cd5\u6392\u5e8f\uff1b\u968f\u7740\u589e\u91cf\u9010\u6e10\u51cf\u5c11\uff0c\u5f53\u589e\u91cf\u51cf\u81f31\u65f6\uff0c\u6240\u6709\u8bb0\u5f55\u88ab\u5206\u6210\u4e00\u7ec4\uff0c\u7b97\u6cd5\u7ec8\u6b62\u3002 \u5b9e\u73b0\uff1a\u793a\u4f8b\u91c7\u7528**\u5e0c\u5c14\u589e\u91cf**\uff0c\u9009\u62e9\u589e\u91cfgap=length/2\uff0c\u7ee7\u7eed\u7f29\u5c0f\u589e\u91cfgap = gap/2\uff0c\u8fd9\u79cd\u589e\u91cf\u9009\u62e9\u53ef\u4ee5\u7528\u4e00\u4e2a\u5e8f\u5217\u6765\u8868\u793a\uff0c{n/2, (n/2)/2\u20261}\uff0c\u79f0\u4e3a**\u589e\u91cf\u5e8f\u5217**\u3002 function shellSort( arr ){ let len = arr.length, gap = Math.floor(len/2); for(; gap > 0; gap = Math.floor(gap/2)){ //\u5faa\u73af\u5185\u662f\u4e00\u4e2a\u63d2\u5165\u6392\u5e8f for(let i = gap; i < len; i++){ let key = arr[i]; for( var j=i-gap; j>=0 && key<arr[j]; j-=gap){ arr[j+gap] = arr[j]; } arr[j+gap] = key; //console.log(gap, i, key, j, arr) } } return arr; } //var x = [7,6,5,4,3,2,1] //console.log(shellSort(x))","title":"4. \u5e0c\u5c14\u6392\u5e8f\uff08Shell Sort\uff09"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#5-merge-sort","text":"\u601d\u60f3\uff1a\u5c06\u5df2\u6709\u5e8f\u7684\u5b50\u5e8f\u5217\u5408\u5e76\uff0c\u5f97\u5230\u4e00\u4e2a\u5b8c\u5168\u6709\u5e8f\u7684\u5e8f\u5217\u3002 \u5b9e\u73b0\uff1a\u793a\u4f8b\u4e3a**\u4e8c\u8def\u5f52\u5e76\u6392\u5e8f**\u3002 function mergeSort( arr ){ //console.log('1...',arr); let len = arr.length; if(len < 2) return arr; let middle = Math.floor(len/2), left = arr.slice(0, middle), right = arr.slice(middle); return merge(mergeSort(left), mergeSort(right));; } //\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4 function merge( left, right ){ let result = []; let i=0, j=0; while( i<left.length && j<right.length){ if(left[i] < right[j]) result.push(left[i++]); else result.push(right[j++]); } while(i<left.length) result.push(left[i++]); while(j<right.length) result.push(right[j++]); //console.log('2...',result); return result } var x = [7,6,5,4,3,2,1] console.log(mergeSort(x))","title":"5. \u5f52\u5e76\u6392\u5e8f\uff08Merge Sort\uff09"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#6","text":"\u601d\u60f3\uff1a\u6311\u51fa\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a \u201c \u57fa\u51c6 \u201d\uff08pivot\uff09\uff0c\u4e00\u6b21\u6392\u5e8f\u8fdb\u884c**\u5206\u533a**\uff0c\u6240\u6709\u5c0f\u4e8e\u57fa\u51c6\u7684\u5143\u7d20\u5c45\u5de6\uff0c\u6240\u6709\u5927\u4e8e\u57fa\u51c6\u7684\u5143\u7d20\u5c45\u53f3\uff0c\u5bf9\u5206\u533a\u8fdb\u884c**\u9012\u5f52**\u3002 /* arguments \u4f9d\u6b21\u662f arr, left, right */ function quickSort( arr ){ let left = arguments[1] || 0, right = isNaN(arguments[2])? arr.length - 1 : arguments[2]; if(right-left < 1) return arr; let pivotIdx = left, pivot = arr[left]; for(let i = left+1; i <= right; i++){ if(arr[i] < pivot){ let tmp = arr[++pivotIdx]; arr[pivotIdx] = arr[i]; arr[i] = tmp; } } arr[left] = arr[pivotIdx]; arr[pivotIdx] = pivot; quickSort(arr, left, pivotIdx-1); quickSort(arr, pivotIdx+1, right) return arr; }","title":"6.\u5feb\u901f\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#7","text":"\u601d\u60f3\uff1a \u521b\u5efa**\u5927\u6839\u5806**\uff0c\u5373\u6bcf\u4e2a\u8282\u70b9\u7684\u503c\u90fd\u5927\u4e8e\u5176\u5b50\u8282\u70b9\uff0c\u7528\u4e8e\u5347\u5e8f\u6392\u5217\u3002\u6392\u5e8f\u65f6\u53d6\u51fa\u5806\u9876(\u6700\u5927\u503c)\uff0c\u653e\u5728\u961f\u5c3e\uff0c\u5269\u4e0b\u7684\u5143\u7d20\u8c03\u6574\u4e3a\u5927\u6839\u5806\u3002 function heapSort( arr ){ for(let len = arr.length; len > 0; len--){ heap(arr, 0, len) let tmp = arr[0]; arr[0] = arr[len-1]; arr[len-1] = tmp; //console.warn(arr); } return arr; } //\u5efa\u7acb\u5927\u6839\u5806\uff0ci\u4e3a\u5806\u9876\u4f4d\u7f6e\uff0c length\u4e3a\u5143\u7d20\u4e2a\u6570 function heap( arr, i, length){ var left = i*2+1, right = i*2+2, max = i; if(left < length){ heap( arr, left, length); if(arr[left] > arr[max]) max = left; } if(right < length){ heap( arr, right, length); if(arr[right] > arr[max] ) max = right; } if(max !== i){ let tmp = arr[i]; arr[i] = arr[max]; arr[max] = tmp; heap( arr, max, length) //console.log( arr, i, length ) } }","title":"7.\u5806\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#8","text":"\u601d\u60f3\uff1a\u5c06\u5143\u7d20value\u8f6c\u5316\u4e3akey\uff0c\u5b58\u5728\u65b0\u6570\u7ec4key\u5bf9\u5e94\u4f4d\u7f6e\u3002\u56e0\u6b64\u524d\u63d0\uff0c\u6570\u503c\u6709\u8303\u56f4\uff0c\u4e14\u4e3a\u6574\u6570\u3002 function countingSort( arr ){ let len = arr.length, max = 0, tmpArr=[]; for(let i = 0; i < len; i++ ){ if(arr[i] > max) max = arr[i]; if(!tmpArr[arr[i]]) tmpArr[arr[i]] = 1; else tmpArr[arr[i]]++; } console.log(tmpArr); let k = 0; for(let i = 0; i <= max; i++){ while(tmpArr[i] > 0){ arr[k++] = i; tmpArr[i]--; } console.log(arr); } return arr; } var x = [7,6,5,4,3,2,1] console.log(countingSort(x))","title":"8. \u8ba1\u6570\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#9","text":"\u601d\u60f3\uff1a\u8ba1\u6570\u6392\u5e8f\u7684\u5347\u7ea7\u7248\uff0c\u5c06\u8f93\u5165\u7684N\u4e2a\u6570\u636e\u5747\u5300\u7684\u5206\u914d\u5230K\u4e2a\u6876\u4e2d\u3002 ``` function bucketSort( arr ){ const BUCKET_SIZE = 5; //default set to 5 let min, max; for(let i = 0; i min ? min : arr[i]; max = arr[i] < max ? max : arr[i]; } let bucketCount = Math.floor((max - min) / BUCKET_SIZE) + 1; let buckets = []; //\u4e8c\u7ef4\u6570\u7ec4\u6876\u7684\u521d\u59cb\u5316 for (let i = 0; i < bucketCount; i++) buckets[i] = []; //console.log({min, max, buckets, bucketCount}); //\u5229\u7528\u6620\u5c04\u51fd\u6570\u5c06\u6570\u636e\u5206\u914d\u5230\u5404\u4e2a\u6876\u4e2d for(i = 0; i < arr.length; i++){ var bucketIdx = Math.floor((arr[i] - min) / BUCKET_SIZE); //\u6620\u5c04\u51fd\u6570 buckets[bucketIdx].push(arr[i]); for(let j = buckets[bucketIdx].length-1; j > 0;j--){ if(buckets[bucketIdx][j]<buckets[bucketIdx][j-1]){ let tmp = buckets[bucketIdx][j]; buckets[bucketIdx][j] = buckets[bucketIdx][j-1]; buckets[bucketIdx][j-1] = tmp; } } } arr = []; for( let i = 0; i<bucketCount; i++){ arr = arr.concat(buckets[i]); } return arr; } ```","title":"9. \u6876\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%8D%81%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/#10","text":"\u601d\u60f3\uff1a \u5229\u7528\u4e86\u6876\u7684\u6982\u5ff5\uff0c\u6839\u636e\u952e\u503c\u7684\u6bcf\u4f4d\u6570\u5b57\u6765\u5206\u914d\u6876\u3002 \u5b9e\u73b0\uff1a\u57fa\u6570\u6392\u5e8fLSD\u662f\u6309\u7167\u4f4e\u4f4d\u5148\u6392\u5e8f\uff0c\u7136\u540e\u6536\u96c6\uff1b\u518d\u6309\u7167\u9ad8\u4f4d\u6392\u5e8f\uff0c\u7136\u540e\u518d\u6536\u96c6\uff1b\u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u5230\u6700\u9ad8\u4f4d\u3002 function radixSort(arr) { let max, maxDigit, mod = 1; for(let i = 0; i<arr.length; i++){ max = arr[i] < max ? max : arr[i]; } maxDigit = max.toString().length; for (let i = 0; i < maxDigit; i++, mod *= 10) { let buckets = []; for(let j = 0; j < arr.length; j++) { let bucketIdx = parseInt(arr[j]/mod)%10; if(!buckets[bucketIdx]) buckets[bucketIdx] = []; buckets[bucketIdx].push(arr[j]); } arr = []; for( let j = 0; j<buckets.length; j++){ arr = arr.concat(buckets[j]); arr = arr.filter(item => item!==undefined) } //console.log({ maxDigit, buckets, arr }) } return arr; } //var x = [7,6,5,3,2,1] //console.log(radixSort(x))","title":"10. \u57fa\u6570\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/","text":"\u590d\u4e60\u4e00\u4e0b\u56fe\u7684\u6982\u5ff5\u548c\u57fa\u7840\u7684\u7b97\u6cd5\u601d\u60f3\uff0c\u4ee5\u53ca\u5982\u4f55\u7528 JavaScript \u6765\u5c55\u793a\u56fe\u548c\u5b9e\u73b0\u56fe\u7684\u7b80\u5355\u7b97\u6cd5\u3002 0. \u6982\u5ff5 \u00b6 \u56fe (Graph) \uff1aG = ( V, E), \u5176\u4e2dV\u4ee3\u8868\u9876\u70b9Vertex\uff0cE\u4ee3\u8868\u8fb9Edge\uff0c\u4e00\u6761\u8fb9\u5c31\u662f\u4e00\u4e2a\u9876\u70b9\u5bf9 (u, v)\u3002\u56fe\u5206\u4e3a***\u65e0\u5411\u56fe (Unordered Graph)*** \u548c***\u6709\u5411\u56fe (Directed Graph)***\u3002 // \u5b9a\u4e49\u9876\u70b9 function Vertex(label) { this.label = label; this.wasVisited = false; } // \u672c\u6587\u53ea\u4ecb\u7ecd\u56fe\u7684\u7b97\u6cd5\u601d\u60f3\uff0c\u7528\u7b80\u5355\u6570\u7ec4\u8868\u793a\u9876\u70b9\u96c6\u5408\uff0c\u6240\u4ee5\u6b64\u5904\u9876\u70b9\u5b9a\u4e49\u7528\u4e0d\u7740\u3002 \u6743\u503c \uff1a \u4e00\u4e2a\u9876\u70b9\u5230\u53e6\u4e00\u4e2a\u9876\u70b9\u7684\u201c\u4ee3\u4ef7\u201d\u3002\u82e5\u4e0d\u8054\u901a\uff0c\u5219\u8ba4\u4e3a\u65e0\u9650\u5927\u3002 \u56fe\u7684\u6570\u636e\u7ed3\u6784\u53ef\u7528**\u90bb\u63a5\u8868 (Adjacency List) **\u6216**\u90bb\u63a5\u77e9\u9635 (Adjacency Matrix) **\u8868\u793a\u3002 \u90bb\u63a5\u8868 \uff0c\u53ef\u8868\u793a\u4e3a\u4ee5\u9876\u70b9\u4e3akey\u503c\u7684\u4e8c\u7ef4\u6570\u7ec4 // adjacency list 0 -> [1, 2] 1 -> [0, 3] 2 -> [0, 4] 3 -> [1] 4 -> [2] \u90bb\u63a5\u77e9\u9635 \uff0c\u53ef\u8868\u793a\u4e3a|V|*|V|\u7684\u77e9\u9635 Matrix\u3002\u82e5(u, v)\u8054\u901a\uff0c\u5219 Matrix[u][v] = 1\uff1b\u82e5\u8fb9\u6709\u52a0\u6743\uff0c\u5219 Matrix[u][v] = \u6743\u503c\u3002 1. \u521b\u5efa\u56fe \u00b6 function Graph(v){ this.vertices = v; this.edges = 0; this.adj = []; for(var i = 0; i < this.vertices; i++){ this.adj[i] = []; } this.addEdge = addEdge; this.showGraph = showGraph; } function addEdge(u, v){ this.adj[u].push(v); this.adj[v].push(u); this.edges++; } function showGraph(){ for(var i = 0; i < this.vertices; i++){ var str = i + \" -> \"; for (var j = 0; j < this.vertices; j++) { if(this.adj[i][j] != undefined) str += this.adj[i][j] + ' '; } console.log(str); } } 2. \u56fe\u904d\u5386 \u00b6 \u56fe\u7684\u904d\u5386\u7b97\u6cd5\u6709\u4e24\u79cd\uff1a \u6df1\u5ea6\u4f18\u5148\u904d\u5386 (Depth-First Search) \u548c**\u5e7f\u5ea6\u4f18\u5148\u904d\u5386 (Breadth-First Search)** \u3002 \u56fe\u904d\u5386\u4e2d\u6709\u4e00\u4e2a**\u5df2\u8bbf\u95ee\u9876\u70b9**\u7684\u6982\u5ff5\uff0c\u56e0\u6b64\u91cd\u65b0\u5b9a\u4e49\u4e00\u4e0b\u56fe\u7684\u6570\u636e\u7ed3\u6784\uff1a function Graph(v) { this.vertices = v; this.edges = 0; this.adj = []; for (var i = 0; i < this.vertices; ++i) { this.adj[i] = []; } this.addEdge = addEdge; // \u4e0d\u8d58\u8ff0 this.showGraph = showGraph; // \u4e0d\u8d58\u8ff0 this.dfs = dfs; this.marked = []; // \u8bb0\u5f55\u5df2\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9 for (var i = 0; i < this.vertices; ++i) { this.marked[i] = false; } } \u6df1\u5ea6\u4f18\u5148\u904d\u5386\u7b97\u6cd5 \uff1a \u4ece\u5f00\u59cb\u9876\u70b9\u641c\u7d22\u4e00\u6761\u8def\u5f84\uff0c\u76f4\u5230\u65e0\u8def\u53ef\u8d70\uff1b \u56de\u9000\u5230\u4e0a\u4e00\u9876\u70b9\uff0c\u5f80\u4e0b\u7ee7\u7eed\u904d\u5386\u672a\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9\uff1b \u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u5230\u6240\u6709\u7684\u9876\u70b9\u90fd\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u3002 // \u6df1\u5ea6\u4f18\u5148\u904d\u5386, \u53c2\u6570v\u4e3a\u5f00\u59cb\u9876\u70b9 function dfs(v){ this.marked[v] = true; if(this.adj[v]){ console.log(\"Visited vertext: \"+v) } this.adj[v].forEach(w => { if(!this.marked[w]) this.dfs(w) }) } \u5e7f\u5ea6\u4f18\u5148\u904d\u5386\u7b97\u6cd5 \uff1a \u53d6\u5f53\u524d\u8282\u70b9\u7684\u4e00\u4e2a\u672a\u88ab\u8bbf\u95ee\u7684\u90bb\u8282\u70b9\uff0c\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee\uff0c\u52a0\u5165\u961f\u5217\uff1b \u53d6\u4e0b\u4e00\u4e2a\u8282\u70b9 v\uff0c\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee\uff1b \u5c06 v \u90bb\u8282\u70b9\u4e2d\u6240\u6709\u672a\u8bbf\u95ee\u7684\u8282\u70b9\u52a0\u5165\u961f\u5217\u3002 // \u5e7f\u5ea6\u4f18\u5148\u904d\u5386, \u53c2\u6570v\u4e3a\u5f00\u59cb\u9876\u70b9 function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.marked[w] = true; queue.push(w) } }) } } 3. \u56fe\u7684\u6700\u77ed\u8def\u5f84 \u00b6 3.1 \u5e7f\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u83b7\u53d6\u65e0\u6743\u6700\u77ed\u8def\u5f84 \u00b6 \u4e3a\u4ec0\u4e48\u8bf4**\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22**\u53ef\u4ee5\u7528\u6765\u6c42**\u65e0\u6743\u6700\u77ed\u8def\u5f84**\u5462\uff1f \u56e0\u4e3a\uff0c\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u6bcf\u6b21\u90fd\u4f1a\u5148\u53d1\u73b0\u8ddd\u79bbs\u4e3ak\u7684\u6240\u6709\u9876\u70b9\uff0c\u7136\u540e\u624d\u4f1a\u53d1\u73b0\u8ddd\u79bbs\u4e3ak+1\u7684\u6240\u6709\u9876\u70b9\u3002 s\u4e3a\u8d77\u59cb\u70b9\u3002 // \u4fee\u6539 Graph \u7c7b this.edgeTo = []; //\u8bb0\u5f55\u4ece\u4e00\u4e2a\u5230\u53e6\u4e00\u4e2a\u9876\u70b9\u7684\u8fb9 // \u4fee\u6539 bfs \u51fd\u6570 function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.edgeTo[w] = v; // \u589e\u52a0\u8fd9\u4e2a\u6b65\u9aa4 this.marked[w] = true; queue.push(w) } }) } } \u6267\u884c this.dfs(0) \u540e\uff0c\u9876\u70b90\u5230\u5176\u5b83\u5404\u9876\u70b9\u7684\u8def\u5f84\u5df2\u7ecf\u8bb0\u5f55\u5728 this.edgeTo \u5185\u3002 // \u5047\u8bbe\u8d77\u70b9\u4e3a0\uff0cv\u4e3a\u76ee\u6807\u9876\u70b9 function pathTo(v) { var source = 0; if(!this.marked[v]) // \u82e5v\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u5219\u8bf4\u660e\u4ece0\u5230v\u65e0\u8def\u53ef\u8d70 return undefined; var path = []; for(var i = v; i != source; i = this.edgeTo[i]) path.unshift(i); path.unshift(source); return path; } 3.2 Dijkstra\u7b97\u6cd5 \u00b6 Dijkstra\u7b97\u6cd5\u662f\u5178\u578b\u7684\u5355\u6e90\u6700\u77ed\u8def\u5f84\u7b97\u6cd5\uff0c\u7528\u4e8e\u8ba1\u7b97**\u5e26\u6743\u6709\u5411\u56fe**\u4e00\u4e2a\u8282\u70b9\u5230\u5176\u4ed6\u6240\u6709\u8282\u70b9\u7684\u6700\u77ed\u8def\u5f84\u3002 \u7b97\u6cd5\u6b65\u9aa4\uff1a G = (V,E) \u662f\u4e00\u4e2a\u5e26\u6743\u6709\u5411\u56fe\uff0c\u56fe\u4e2d\u9876\u70b9\u4e24\u7ec4\uff0cS \u548c U\u3002 \u521d\u59cb\uff0cS \u53ea\u5305\u542b\u6e90\u70b9\uff0c\u5373S\uff1d{ v }\uff0cv \u7684\u8ddd\u79bb\u4e3a0\uff1bU \u5305\u542b\u9664v\u5916\u5176\u4ed6\u9876\u70b9\u3002\u82e5v\u4e0eU\u4e2d\u9876\u70b9u\u6709\u8fb9\uff0c\u5219 \u6b63\u5e38\u6709\u6743\u503c\uff0c\u82e5u\u4e0d\u662fv\u7684\u51fa\u8fb9\u90bb\u63a5\u70b9\uff0c\u5219 \u6743\u503c\u4e3a\u221e\u3002 \u4ece U \u4e2d\u9009\u53d6\u4e00\u4e2a\u8ddd\u79bb v \u6700\u5c0f\u7684\u9876\u70b9 k\uff0c\u628a k \u52a0\u5165 S \uff08\u8be5\u8ddd\u79bb\u5c31\u662f v \u5230 k \u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\uff09\u3002 \u4ee5 k \u4e3a\u4e2d\u95f4\u70b9\uff0c\u4fee\u6539 U \u4e2d\u5404\u9876\u70b9\u7684\u8ddd\u79bb\u3002\u82e5\u4ece\u6e90\u70b9v\u5230\u9876\u70b9u\u7684\u8ddd\u79bb\uff08\u7ecf\u8fc7k\uff09\u6bd4\u539f\u6765\u8ddd\u79bb\uff08\u4e0d\u7ecf\u8fc7k\uff09\u77ed\uff0c\u5219\u4fee\u6539\u9876\u70b9 u \u7684\u8ddd\u79bb\u503c\u3002 \u91cd\u590d\u6b65\u9aa4 3 \u548c 4 \uff0c\u76f4\u5230\u6240\u6709\u9876\u70b9\u90fd\u5305\u542b\u5728S\u4e2d\u3002 4. \u62d3\u6251\u6392\u5e8f \u00b6 \u5b9a\u4e49\uff1a\u5c06**\u6709\u5411\u65e0\u73af\u56fe**\u7684\u9876\u70b9\u4ee5\u7ebf\u6027\u65b9\u5f0f\u6392\u5e8f\u3002\u5373\u5bf9\u4e8e\u4efb\u4f55\u8fde\u63a5\u81ea\u9876\u70b9u\u5230\u9876\u70b9v\u7684\u6709\u5411\u8fb9uv\uff0c\u5728\u6700\u540e\u7684\u6392\u5e8f\u7ed3\u679c\u4e2d\uff0c\u9876\u70b9u\u603b\u662f\u5728\u9876\u70b9v\u7684\u524d\u9762\u3002 \u201cThe algorithm for topological sorting is similar to the algorithm for depth-first search .\u201d function topSort() { var stack = []; var visited = []; for (var i = 0; i < this.vertices; i++) visited[i] = false; for (var i = 0; i < this.vertices; i++) { if (visited[i] == false) { this.topSortHelper(i, visited, stack); } } console.log({ stack }) // \u8bb0\u5f55\u4e86top\u6392\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c } function topSortHelper(v, visited, stack) { visited[v] = true; this.adj[v].forEach(w => { if (!visited[w]) { this.topSortHelper(w, visited, stack); } }) stack.unshift(v); } 5. \u9644\u5f55 \u00b6 \u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a function Graph(v) { this.vertices = v; this.edges = 0; this.adj = []; this.edgeTo = []; for (var i = 0; i < this.vertices; ++i) { this.adj[i] = []; } this.addEdge = addEdge; // \u4e0d\u8d58\u8ff0 this.showGraph = showGraph; // \u4e0d\u8d58\u8ff0 this.dfs = dfs; this.bfs = bfs; this.pathTo = pathTo; this.marked = []; // \u8bb0\u5f55\u5df2\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9 for (var i = 0; i < this.vertices; ++i) { this.marked[i] = false; } this.topSort = topSort; this.topSortHelper = topSortHelper; } function addEdge(u, v){ this.adj[u].push(v); this.adj[v].push(u); this.edges++; } function showGraph(){ for(var i = 0; i < this.vertices; i++){ var str = i + \" -> \"; for (var j = 0; j < this.vertices; j++) { if(this.adj[i][j] != undefined) str += this.adj[i][j] + ' '; } console.log(str); } } function dfs(v){ this.marked[v] = true; if(this.adj[v]){ console.log(\"Visited vertext: \"+v) } this.adj[v].forEach(w => { if(!this.marked[w]) this.dfs(w) }) } function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.edgeTo[w] = v; this.marked[w] = true; queue.push(w) } }) } } function pathTo(v) { var source = 0; if(!this.marked[v]) // \u82e5v\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u5219\u8bf4\u660e\u4ece0\u5230v\u65e0\u8def\u53ef\u8d70 return undefined; var path = []; for(var i = v; i != source; i = this.edgeTo[i]) path.unshift(i); path.unshift(source); console.log({ path }) return path; } function topSort() { var stack = []; var visited = []; for (var i = 0; i < this.vertices; i++) { visited[i] = false; } for (var i = 0; i < this.vertices; i++) { if (visited[i] == false) { this.topSortHelper(i, visited, stack); } } console.log({ stack }) } function topSortHelper(v, visited, stack) { visited[v] = true; this.adj[v].forEach(w => { if (!visited[w]) { this.topSortHelper(w, visited, stack); } }) stack.unshift(v); } g = new Graph(6); g.addEdge(1,2); g.addEdge(2,5); g.addEdge(1,3); g.addEdge(1,4); g.addEdge(0,1); g.showGraph(); // g.dfs(0); g.bfs(0); g.pathTo(5) g.topSort();","title":"JavaScript \u4e4b\u56fe\u548c\u56fe\u7c7b\u7b97\u6cd5"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#0","text":"\u56fe (Graph) \uff1aG = ( V, E), \u5176\u4e2dV\u4ee3\u8868\u9876\u70b9Vertex\uff0cE\u4ee3\u8868\u8fb9Edge\uff0c\u4e00\u6761\u8fb9\u5c31\u662f\u4e00\u4e2a\u9876\u70b9\u5bf9 (u, v)\u3002\u56fe\u5206\u4e3a***\u65e0\u5411\u56fe (Unordered Graph)*** \u548c***\u6709\u5411\u56fe (Directed Graph)***\u3002 // \u5b9a\u4e49\u9876\u70b9 function Vertex(label) { this.label = label; this.wasVisited = false; } // \u672c\u6587\u53ea\u4ecb\u7ecd\u56fe\u7684\u7b97\u6cd5\u601d\u60f3\uff0c\u7528\u7b80\u5355\u6570\u7ec4\u8868\u793a\u9876\u70b9\u96c6\u5408\uff0c\u6240\u4ee5\u6b64\u5904\u9876\u70b9\u5b9a\u4e49\u7528\u4e0d\u7740\u3002 \u6743\u503c \uff1a \u4e00\u4e2a\u9876\u70b9\u5230\u53e6\u4e00\u4e2a\u9876\u70b9\u7684\u201c\u4ee3\u4ef7\u201d\u3002\u82e5\u4e0d\u8054\u901a\uff0c\u5219\u8ba4\u4e3a\u65e0\u9650\u5927\u3002 \u56fe\u7684\u6570\u636e\u7ed3\u6784\u53ef\u7528**\u90bb\u63a5\u8868 (Adjacency List) **\u6216**\u90bb\u63a5\u77e9\u9635 (Adjacency Matrix) **\u8868\u793a\u3002 \u90bb\u63a5\u8868 \uff0c\u53ef\u8868\u793a\u4e3a\u4ee5\u9876\u70b9\u4e3akey\u503c\u7684\u4e8c\u7ef4\u6570\u7ec4 // adjacency list 0 -> [1, 2] 1 -> [0, 3] 2 -> [0, 4] 3 -> [1] 4 -> [2] \u90bb\u63a5\u77e9\u9635 \uff0c\u53ef\u8868\u793a\u4e3a|V|*|V|\u7684\u77e9\u9635 Matrix\u3002\u82e5(u, v)\u8054\u901a\uff0c\u5219 Matrix[u][v] = 1\uff1b\u82e5\u8fb9\u6709\u52a0\u6743\uff0c\u5219 Matrix[u][v] = \u6743\u503c\u3002","title":"0. \u6982\u5ff5"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#1","text":"function Graph(v){ this.vertices = v; this.edges = 0; this.adj = []; for(var i = 0; i < this.vertices; i++){ this.adj[i] = []; } this.addEdge = addEdge; this.showGraph = showGraph; } function addEdge(u, v){ this.adj[u].push(v); this.adj[v].push(u); this.edges++; } function showGraph(){ for(var i = 0; i < this.vertices; i++){ var str = i + \" -> \"; for (var j = 0; j < this.vertices; j++) { if(this.adj[i][j] != undefined) str += this.adj[i][j] + ' '; } console.log(str); } }","title":"1. \u521b\u5efa\u56fe"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#2","text":"\u56fe\u7684\u904d\u5386\u7b97\u6cd5\u6709\u4e24\u79cd\uff1a \u6df1\u5ea6\u4f18\u5148\u904d\u5386 (Depth-First Search) \u548c**\u5e7f\u5ea6\u4f18\u5148\u904d\u5386 (Breadth-First Search)** \u3002 \u56fe\u904d\u5386\u4e2d\u6709\u4e00\u4e2a**\u5df2\u8bbf\u95ee\u9876\u70b9**\u7684\u6982\u5ff5\uff0c\u56e0\u6b64\u91cd\u65b0\u5b9a\u4e49\u4e00\u4e0b\u56fe\u7684\u6570\u636e\u7ed3\u6784\uff1a function Graph(v) { this.vertices = v; this.edges = 0; this.adj = []; for (var i = 0; i < this.vertices; ++i) { this.adj[i] = []; } this.addEdge = addEdge; // \u4e0d\u8d58\u8ff0 this.showGraph = showGraph; // \u4e0d\u8d58\u8ff0 this.dfs = dfs; this.marked = []; // \u8bb0\u5f55\u5df2\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9 for (var i = 0; i < this.vertices; ++i) { this.marked[i] = false; } } \u6df1\u5ea6\u4f18\u5148\u904d\u5386\u7b97\u6cd5 \uff1a \u4ece\u5f00\u59cb\u9876\u70b9\u641c\u7d22\u4e00\u6761\u8def\u5f84\uff0c\u76f4\u5230\u65e0\u8def\u53ef\u8d70\uff1b \u56de\u9000\u5230\u4e0a\u4e00\u9876\u70b9\uff0c\u5f80\u4e0b\u7ee7\u7eed\u904d\u5386\u672a\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9\uff1b \u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u5230\u6240\u6709\u7684\u9876\u70b9\u90fd\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u3002 // \u6df1\u5ea6\u4f18\u5148\u904d\u5386, \u53c2\u6570v\u4e3a\u5f00\u59cb\u9876\u70b9 function dfs(v){ this.marked[v] = true; if(this.adj[v]){ console.log(\"Visited vertext: \"+v) } this.adj[v].forEach(w => { if(!this.marked[w]) this.dfs(w) }) } \u5e7f\u5ea6\u4f18\u5148\u904d\u5386\u7b97\u6cd5 \uff1a \u53d6\u5f53\u524d\u8282\u70b9\u7684\u4e00\u4e2a\u672a\u88ab\u8bbf\u95ee\u7684\u90bb\u8282\u70b9\uff0c\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee\uff0c\u52a0\u5165\u961f\u5217\uff1b \u53d6\u4e0b\u4e00\u4e2a\u8282\u70b9 v\uff0c\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee\uff1b \u5c06 v \u90bb\u8282\u70b9\u4e2d\u6240\u6709\u672a\u8bbf\u95ee\u7684\u8282\u70b9\u52a0\u5165\u961f\u5217\u3002 // \u5e7f\u5ea6\u4f18\u5148\u904d\u5386, \u53c2\u6570v\u4e3a\u5f00\u59cb\u9876\u70b9 function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.marked[w] = true; queue.push(w) } }) } }","title":"2. \u56fe\u904d\u5386"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#3","text":"","title":"3. \u56fe\u7684\u6700\u77ed\u8def\u5f84"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#31","text":"\u4e3a\u4ec0\u4e48\u8bf4**\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22**\u53ef\u4ee5\u7528\u6765\u6c42**\u65e0\u6743\u6700\u77ed\u8def\u5f84**\u5462\uff1f \u56e0\u4e3a\uff0c\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u6bcf\u6b21\u90fd\u4f1a\u5148\u53d1\u73b0\u8ddd\u79bbs\u4e3ak\u7684\u6240\u6709\u9876\u70b9\uff0c\u7136\u540e\u624d\u4f1a\u53d1\u73b0\u8ddd\u79bbs\u4e3ak+1\u7684\u6240\u6709\u9876\u70b9\u3002 s\u4e3a\u8d77\u59cb\u70b9\u3002 // \u4fee\u6539 Graph \u7c7b this.edgeTo = []; //\u8bb0\u5f55\u4ece\u4e00\u4e2a\u5230\u53e6\u4e00\u4e2a\u9876\u70b9\u7684\u8fb9 // \u4fee\u6539 bfs \u51fd\u6570 function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.edgeTo[w] = v; // \u589e\u52a0\u8fd9\u4e2a\u6b65\u9aa4 this.marked[w] = true; queue.push(w) } }) } } \u6267\u884c this.dfs(0) \u540e\uff0c\u9876\u70b90\u5230\u5176\u5b83\u5404\u9876\u70b9\u7684\u8def\u5f84\u5df2\u7ecf\u8bb0\u5f55\u5728 this.edgeTo \u5185\u3002 // \u5047\u8bbe\u8d77\u70b9\u4e3a0\uff0cv\u4e3a\u76ee\u6807\u9876\u70b9 function pathTo(v) { var source = 0; if(!this.marked[v]) // \u82e5v\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u5219\u8bf4\u660e\u4ece0\u5230v\u65e0\u8def\u53ef\u8d70 return undefined; var path = []; for(var i = v; i != source; i = this.edgeTo[i]) path.unshift(i); path.unshift(source); return path; }","title":"3.1 \u5e7f\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u83b7\u53d6\u65e0\u6743\u6700\u77ed\u8def\u5f84"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#32-dijkstra","text":"Dijkstra\u7b97\u6cd5\u662f\u5178\u578b\u7684\u5355\u6e90\u6700\u77ed\u8def\u5f84\u7b97\u6cd5\uff0c\u7528\u4e8e\u8ba1\u7b97**\u5e26\u6743\u6709\u5411\u56fe**\u4e00\u4e2a\u8282\u70b9\u5230\u5176\u4ed6\u6240\u6709\u8282\u70b9\u7684\u6700\u77ed\u8def\u5f84\u3002 \u7b97\u6cd5\u6b65\u9aa4\uff1a G = (V,E) \u662f\u4e00\u4e2a\u5e26\u6743\u6709\u5411\u56fe\uff0c\u56fe\u4e2d\u9876\u70b9\u4e24\u7ec4\uff0cS \u548c U\u3002 \u521d\u59cb\uff0cS \u53ea\u5305\u542b\u6e90\u70b9\uff0c\u5373S\uff1d{ v }\uff0cv \u7684\u8ddd\u79bb\u4e3a0\uff1bU \u5305\u542b\u9664v\u5916\u5176\u4ed6\u9876\u70b9\u3002\u82e5v\u4e0eU\u4e2d\u9876\u70b9u\u6709\u8fb9\uff0c\u5219 \u6b63\u5e38\u6709\u6743\u503c\uff0c\u82e5u\u4e0d\u662fv\u7684\u51fa\u8fb9\u90bb\u63a5\u70b9\uff0c\u5219 \u6743\u503c\u4e3a\u221e\u3002 \u4ece U \u4e2d\u9009\u53d6\u4e00\u4e2a\u8ddd\u79bb v \u6700\u5c0f\u7684\u9876\u70b9 k\uff0c\u628a k \u52a0\u5165 S \uff08\u8be5\u8ddd\u79bb\u5c31\u662f v \u5230 k \u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\uff09\u3002 \u4ee5 k \u4e3a\u4e2d\u95f4\u70b9\uff0c\u4fee\u6539 U \u4e2d\u5404\u9876\u70b9\u7684\u8ddd\u79bb\u3002\u82e5\u4ece\u6e90\u70b9v\u5230\u9876\u70b9u\u7684\u8ddd\u79bb\uff08\u7ecf\u8fc7k\uff09\u6bd4\u539f\u6765\u8ddd\u79bb\uff08\u4e0d\u7ecf\u8fc7k\uff09\u77ed\uff0c\u5219\u4fee\u6539\u9876\u70b9 u \u7684\u8ddd\u79bb\u503c\u3002 \u91cd\u590d\u6b65\u9aa4 3 \u548c 4 \uff0c\u76f4\u5230\u6240\u6709\u9876\u70b9\u90fd\u5305\u542b\u5728S\u4e2d\u3002","title":"3.2 Dijkstra\u7b97\u6cd5"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#4","text":"\u5b9a\u4e49\uff1a\u5c06**\u6709\u5411\u65e0\u73af\u56fe**\u7684\u9876\u70b9\u4ee5\u7ebf\u6027\u65b9\u5f0f\u6392\u5e8f\u3002\u5373\u5bf9\u4e8e\u4efb\u4f55\u8fde\u63a5\u81ea\u9876\u70b9u\u5230\u9876\u70b9v\u7684\u6709\u5411\u8fb9uv\uff0c\u5728\u6700\u540e\u7684\u6392\u5e8f\u7ed3\u679c\u4e2d\uff0c\u9876\u70b9u\u603b\u662f\u5728\u9876\u70b9v\u7684\u524d\u9762\u3002 \u201cThe algorithm for topological sorting is similar to the algorithm for depth-first search .\u201d function topSort() { var stack = []; var visited = []; for (var i = 0; i < this.vertices; i++) visited[i] = false; for (var i = 0; i < this.vertices; i++) { if (visited[i] == false) { this.topSortHelper(i, visited, stack); } } console.log({ stack }) // \u8bb0\u5f55\u4e86top\u6392\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c } function topSortHelper(v, visited, stack) { visited[v] = true; this.adj[v].forEach(w => { if (!visited[w]) { this.topSortHelper(w, visited, stack); } }) stack.unshift(v); }","title":"4. \u62d3\u6251\u6392\u5e8f"},{"location":"history/JavaScript%20%E4%B9%8B%E5%9B%BE%E5%92%8C%E5%9B%BE%E7%B1%BB%E7%AE%97%E6%B3%95/#5","text":"\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a function Graph(v) { this.vertices = v; this.edges = 0; this.adj = []; this.edgeTo = []; for (var i = 0; i < this.vertices; ++i) { this.adj[i] = []; } this.addEdge = addEdge; // \u4e0d\u8d58\u8ff0 this.showGraph = showGraph; // \u4e0d\u8d58\u8ff0 this.dfs = dfs; this.bfs = bfs; this.pathTo = pathTo; this.marked = []; // \u8bb0\u5f55\u5df2\u8bbf\u95ee\u8fc7\u7684\u9876\u70b9 for (var i = 0; i < this.vertices; ++i) { this.marked[i] = false; } this.topSort = topSort; this.topSortHelper = topSortHelper; } function addEdge(u, v){ this.adj[u].push(v); this.adj[v].push(u); this.edges++; } function showGraph(){ for(var i = 0; i < this.vertices; i++){ var str = i + \" -> \"; for (var j = 0; j < this.vertices; j++) { if(this.adj[i][j] != undefined) str += this.adj[i][j] + ' '; } console.log(str); } } function dfs(v){ this.marked[v] = true; if(this.adj[v]){ console.log(\"Visited vertext: \"+v) } this.adj[v].forEach(w => { if(!this.marked[w]) this.dfs(w) }) } function bfs(s){ var queue = []; this.marked[s] = true; queue.push(s); while(queue.length > 0){ var v = queue.shift(); console.log(\"Visited vertext: \"+v) this.adj[v].forEach(w => { if(!this.marked[w]){ this.edgeTo[w] = v; this.marked[w] = true; queue.push(w) } }) } } function pathTo(v) { var source = 0; if(!this.marked[v]) // \u82e5v\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u5219\u8bf4\u660e\u4ece0\u5230v\u65e0\u8def\u53ef\u8d70 return undefined; var path = []; for(var i = v; i != source; i = this.edgeTo[i]) path.unshift(i); path.unshift(source); console.log({ path }) return path; } function topSort() { var stack = []; var visited = []; for (var i = 0; i < this.vertices; i++) { visited[i] = false; } for (var i = 0; i < this.vertices; i++) { if (visited[i] == false) { this.topSortHelper(i, visited, stack); } } console.log({ stack }) } function topSortHelper(v, visited, stack) { visited[v] = true; this.adj[v].forEach(w => { if (!visited[w]) { this.topSortHelper(w, visited, stack); } }) stack.unshift(v); } g = new Graph(6); g.addEdge(1,2); g.addEdge(2,5); g.addEdge(1,3); g.addEdge(1,4); g.addEdge(0,1); g.showGraph(); // g.dfs(0); g.bfs(0); g.pathTo(5) g.topSort();","title":"5. \u9644\u5f55"},{"location":"history/JavaScript%20%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/","text":"1.\u5192\u6ce1\u578b\u548c\u6355\u83b7\u578b \u00b6 addEventListener(event, fn, useCapture) //useCapture\uff1a \u5e03\u5c14\u503c\uff0c\u9ed8\u8ba4false \u5192\u6ce1\u578b\u4e8b\u4ef6 (useCapture \u4e3a false)\uff1a \u4e8b\u4ef6\u6309\u7167\u4ece\u6700\u7279\u5b9a\u7684\u4e8b\u4ef6\u76ee\u6807\u5230\u6700\u4e0d\u7279\u5b9a\u7684\u4e8b\u4ef6\u76ee\u6807(document\u5bf9\u8c61)\u7684\u987a\u5e8f\u89e6\u53d1\uff0c\u5373\u4ece\u8be5\u8282\u70b9\u5230\u5404\u4e2a\u7236\u4eb2\u8282\u70b9\u4f9d\u6b21\u5411\u4e0a\u4f20\u64ad\u3002 IE 5.5: div -> body -> document IE 6.0: div -> body -> html -> document \u200bMozilla 1.0: div -> body -> html -> document -> window \u6355\u83b7\u578b\u4e8b\u4ef6 (useCapture \u4e3a true)\uff1a\u4e8b\u4ef6\u4ece\u6700\u4e0d\u7cbe\u786e\u7684\u5bf9\u8c61(document \u5bf9\u8c61)\u5f00\u59cb\u89e6\u53d1\uff0c\u7136\u540e\u5230\u6700\u7cbe\u786e(\u88ab\u6307\u5b9a\u7684\u8282\u70b9)\u3002 \u4f20\u7edf\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u91c7\u7528\u7684\u662f**\u5192\u6ce1**\u65b9\u5f0f\u3002 elem.onclick = doSomething \u963b\u6b62\u4f20\u64ad \uff0c e.stopPropagation() \uff0c\u963b\u6b62\u4e8b\u4ef6\u4f20\u64ad\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002 \u200b 2. \u4e3e\u4e2a\u6817\u5b50 \u00b6 <div id='one'> <div id='two'> <div id='three'> <div id='four'></div> </div> </div> </div> <script> var one = document.getElementById('one'); var two = document.getElementById('two'); var three = document.getElementById('three'); var four = document.getElementById('four'); //false\u4e3a\u5192\u6ce1\u83b7\u53d6[\u76ee\u6807\u5143\u7d20\u5148\u89e6\u53d1], //true\u4e3a\u6355\u83b7\u83b7\u53d6[\u7236\u7ea7\u5143\u7d20\u5148\u89e6\u53d1] var useCapture = true; one.addEventListener('click', function() { console.log('one'); }, useCapture); two.addEventListener('click', function(e) { // e.stopPropagation(); console.log('two'); }, useCapture); three.addEventListener('click', function() { console.log('three'); }, useCapture); four.addEventListener('click', function(e) { console.log('four'); }, useCapture); </script> \u8bbe\u7f6e\u4e0d\u540c\u7684useCapture\u503c\uff0c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a 1. false //\u5192\u6ce1 \u70b9\u51fbfour div \u8f93\u51fa\u7ed3\u679c\uff1afour three two one 2. true //\u6355\u83b7 \u70b9\u51fbfour div \u8f93\u51fa\u7ed3\u679c\uff1a one two three four","title":"JavaScript \u4e8b\u4ef6\u6a21\u578b"},{"location":"history/JavaScript%20%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/#1","text":"addEventListener(event, fn, useCapture) //useCapture\uff1a \u5e03\u5c14\u503c\uff0c\u9ed8\u8ba4false \u5192\u6ce1\u578b\u4e8b\u4ef6 (useCapture \u4e3a false)\uff1a \u4e8b\u4ef6\u6309\u7167\u4ece\u6700\u7279\u5b9a\u7684\u4e8b\u4ef6\u76ee\u6807\u5230\u6700\u4e0d\u7279\u5b9a\u7684\u4e8b\u4ef6\u76ee\u6807(document\u5bf9\u8c61)\u7684\u987a\u5e8f\u89e6\u53d1\uff0c\u5373\u4ece\u8be5\u8282\u70b9\u5230\u5404\u4e2a\u7236\u4eb2\u8282\u70b9\u4f9d\u6b21\u5411\u4e0a\u4f20\u64ad\u3002 IE 5.5: div -> body -> document IE 6.0: div -> body -> html -> document \u200bMozilla 1.0: div -> body -> html -> document -> window \u6355\u83b7\u578b\u4e8b\u4ef6 (useCapture \u4e3a true)\uff1a\u4e8b\u4ef6\u4ece\u6700\u4e0d\u7cbe\u786e\u7684\u5bf9\u8c61(document \u5bf9\u8c61)\u5f00\u59cb\u89e6\u53d1\uff0c\u7136\u540e\u5230\u6700\u7cbe\u786e(\u88ab\u6307\u5b9a\u7684\u8282\u70b9)\u3002 \u4f20\u7edf\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u91c7\u7528\u7684\u662f**\u5192\u6ce1**\u65b9\u5f0f\u3002 elem.onclick = doSomething \u963b\u6b62\u4f20\u64ad \uff0c e.stopPropagation() \uff0c\u963b\u6b62\u4e8b\u4ef6\u4f20\u64ad\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002 \u200b","title":"1.\u5192\u6ce1\u578b\u548c\u6355\u83b7\u578b"},{"location":"history/JavaScript%20%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/#2","text":"<div id='one'> <div id='two'> <div id='three'> <div id='four'></div> </div> </div> </div> <script> var one = document.getElementById('one'); var two = document.getElementById('two'); var three = document.getElementById('three'); var four = document.getElementById('four'); //false\u4e3a\u5192\u6ce1\u83b7\u53d6[\u76ee\u6807\u5143\u7d20\u5148\u89e6\u53d1], //true\u4e3a\u6355\u83b7\u83b7\u53d6[\u7236\u7ea7\u5143\u7d20\u5148\u89e6\u53d1] var useCapture = true; one.addEventListener('click', function() { console.log('one'); }, useCapture); two.addEventListener('click', function(e) { // e.stopPropagation(); console.log('two'); }, useCapture); three.addEventListener('click', function() { console.log('three'); }, useCapture); four.addEventListener('click', function(e) { console.log('four'); }, useCapture); </script> \u8bbe\u7f6e\u4e0d\u540c\u7684useCapture\u503c\uff0c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a 1. false //\u5192\u6ce1 \u70b9\u51fbfour div \u8f93\u51fa\u7ed3\u679c\uff1afour three two one 2. true //\u6355\u83b7 \u70b9\u51fbfour div \u8f93\u51fa\u7ed3\u679c\uff1a one two three four","title":"2. \u4e3e\u4e2a\u6817\u5b50"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/","text":"0. Question \u00b6 \u7f16\u5199\u4e00\u4e2a\u51fd\u6570repeat( str, n )\uff0c \u5c06\u5b57\u7b26\u4e32str\u91cd\u590dn\u6b21\u5e76\u8f93\u51fa\u3002 1. Answer 1 \u00b6 \u521b\u5efa\u957f\u5ea6\u4e3an+1\u7684\u7a7a\u6570\u7ec4\uff0c\u5e76\u4ee5str\u4e3a\u95f4\u9694\u6765 join \u3002 function repeat( str, n ){ return Array(n+1).join(str); } 2. Answer 2 \u00b6 \u57fa\u4e8e Answer 1 \u7684\u6539\u8fdb\uff0c\u4f7f\u7528 call \u65b9\u6cd5\u3002 function repeat( str, n ){ return Array.prototype.join.call( { length: n+1 }, str) } 3. Answer 3 \u00b6 \u5bf9 Answer 2 \u4f7f\u7528\u95ed\u5305\u3002 var repeat = (function(){ //\u5229\u7528\u95ed\u5305, \u7f13\u5b58\u6570\u7ec4\u539f\u578bjoin\u65b9\u6cd5, \u7701\u5f97\u6bcf\u6b21\u90fd\u91cd\u590d\u521b\u5efa let join = Array.prototype.join, obj = {}; return function( str, n ){ obj.length = n+1; return join.call( obj, str) } })() 4. Answer 4 \u00b6 \u4f7f\u7528\u4e8c\u5206\u6cd5\uff0c\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\u5230o(logn)\u3002 function repeat( str, n ){ let result = []; for(; n > 0; n >>= 1){ if(n%2) result.push(str); if(n == 1) break; str += str; } return result.join(''); } 5. Answer 5 \u00b6 \u66f4\u52a0\u76f4\u89c2\u7684\u4e8c\u5206\u6cd5\u3002 function repeat( str, n ){ let c = n * str.length, s = str; for(; n > 0; n >>= 1){ s += s; } return s.substring( 0, c ); } 6. Answer 6 \u00b6 \u9012\u5f52\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3ao(logn)\u3002 function repeat( str, n ){ if(n == 1) return str; let s = repeat(str, n>>1); s += s; if(n%2) s += str; return s; }","title":"Javascript \u4e4b\u91cd\u590d\u4e00\u4e2a\u5b57\u7b26\u4e32n\u6b21"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#0-question","text":"\u7f16\u5199\u4e00\u4e2a\u51fd\u6570repeat( str, n )\uff0c \u5c06\u5b57\u7b26\u4e32str\u91cd\u590dn\u6b21\u5e76\u8f93\u51fa\u3002","title":"0. Question"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#1-answer-1","text":"\u521b\u5efa\u957f\u5ea6\u4e3an+1\u7684\u7a7a\u6570\u7ec4\uff0c\u5e76\u4ee5str\u4e3a\u95f4\u9694\u6765 join \u3002 function repeat( str, n ){ return Array(n+1).join(str); }","title":"1. Answer 1"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#2-answer-2","text":"\u57fa\u4e8e Answer 1 \u7684\u6539\u8fdb\uff0c\u4f7f\u7528 call \u65b9\u6cd5\u3002 function repeat( str, n ){ return Array.prototype.join.call( { length: n+1 }, str) }","title":"2. Answer 2"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#3-answer-3","text":"\u5bf9 Answer 2 \u4f7f\u7528\u95ed\u5305\u3002 var repeat = (function(){ //\u5229\u7528\u95ed\u5305, \u7f13\u5b58\u6570\u7ec4\u539f\u578bjoin\u65b9\u6cd5, \u7701\u5f97\u6bcf\u6b21\u90fd\u91cd\u590d\u521b\u5efa let join = Array.prototype.join, obj = {}; return function( str, n ){ obj.length = n+1; return join.call( obj, str) } })()","title":"3. Answer 3"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#4-answer-4","text":"\u4f7f\u7528\u4e8c\u5206\u6cd5\uff0c\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\u5230o(logn)\u3002 function repeat( str, n ){ let result = []; for(; n > 0; n >>= 1){ if(n%2) result.push(str); if(n == 1) break; str += str; } return result.join(''); }","title":"4. Answer 4"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#5-answer-5","text":"\u66f4\u52a0\u76f4\u89c2\u7684\u4e8c\u5206\u6cd5\u3002 function repeat( str, n ){ let c = n * str.length, s = str; for(; n > 0; n >>= 1){ s += s; } return s.substring( 0, c ); }","title":"5. Answer 5"},{"location":"history/Javascript%20%E4%B9%8B%E9%87%8D%E5%A4%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2n%E6%AC%A1/#6-answer-6","text":"\u9012\u5f52\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3ao(logn)\u3002 function repeat( str, n ){ if(n == 1) return str; let s = repeat(str, n>>1); s += s; if(n%2) s += str; return s; }","title":"6. Answer 6"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20Object.defineProperty%28%29/","text":"1. \u6982\u5ff5 \u00b6 The Object.defineProperty() method defines a new property directly on an object, or modifies an existing property on an object, and returns the object. 2. \u53c2\u6570 \u00b6 Object.defineProperty(obj, prop, descriptor) obj \uff1a\u76ee\u6807\u5bf9\u8c61 prop \uff1a\u88ab\u5b9a\u4e49\u6216\u6539\u53d8\u7684\u5c5e\u6027\u540d descriptor \uff1a\u76ee\u6807\u5c5e\u6027\u7684\u7279\u6027 3. descriptor \u53c2\u6570 \u00b6 value \uff1a Defaults to undefined. \u5c5e\u6027\u7684\u503c\u3002 writable \uff1a Defaults to false. \u82e5\u4e3afalse\uff0c\u5c5e\u6027\u7684\u503c\u53ea\u8bfb\u3002 configurable \uff1a Defaults to false. \u82e5\u4e3afalse\uff0c\u5c31\u4e0d\u80fd\u518d\u8bbe\u7f6e\u6216\u5220\u9664\u5176value\uff0cwritable\uff0cenumerable\uff0c\u4ee5\u53caconfigurable\u3002 enumerable \uff1a Defaults to false. \u662f\u5426\u80fd\u5728for...in\u5faa\u73af\u4e2d\u904d\u5386\u51fa\u6765\u6216\u5728Object.keys\u4e2d\u5217\u4e3e\u51fa\u6765\u3002 get \uff1a Defaults to undefined. set \uff1a Defaults to undefined. var o={}, bValue = 38; Object.defineProperty(o, 'b', { get: function() { console.log('get\u8bfb\u53d6b\u7684value\u65f6\u89e6\u53d1') return bValue; }, set: function(newValue) { console.log('set\u8bbe\u7f6eb\u7684value\u65f6\u89e6\u53d1') bValue = newValue; }, enumerable: true, configurable: true }); o.b; // get\u8bfb\u53d6b\u7684value\u65f6\u89e6\u53d1 38","title":"Javascript \u5b66\u4e60\u4e4b Object.defineProperty()"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20Object.defineProperty%28%29/#1","text":"The Object.defineProperty() method defines a new property directly on an object, or modifies an existing property on an object, and returns the object.","title":"1. \u6982\u5ff5"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20Object.defineProperty%28%29/#2","text":"Object.defineProperty(obj, prop, descriptor) obj \uff1a\u76ee\u6807\u5bf9\u8c61 prop \uff1a\u88ab\u5b9a\u4e49\u6216\u6539\u53d8\u7684\u5c5e\u6027\u540d descriptor \uff1a\u76ee\u6807\u5c5e\u6027\u7684\u7279\u6027","title":"2. \u53c2\u6570"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20Object.defineProperty%28%29/#3-descriptor","text":"value \uff1a Defaults to undefined. \u5c5e\u6027\u7684\u503c\u3002 writable \uff1a Defaults to false. \u82e5\u4e3afalse\uff0c\u5c5e\u6027\u7684\u503c\u53ea\u8bfb\u3002 configurable \uff1a Defaults to false. \u82e5\u4e3afalse\uff0c\u5c31\u4e0d\u80fd\u518d\u8bbe\u7f6e\u6216\u5220\u9664\u5176value\uff0cwritable\uff0cenumerable\uff0c\u4ee5\u53caconfigurable\u3002 enumerable \uff1a Defaults to false. \u662f\u5426\u80fd\u5728for...in\u5faa\u73af\u4e2d\u904d\u5386\u51fa\u6765\u6216\u5728Object.keys\u4e2d\u5217\u4e3e\u51fa\u6765\u3002 get \uff1a Defaults to undefined. set \uff1a Defaults to undefined. var o={}, bValue = 38; Object.defineProperty(o, 'b', { get: function() { console.log('get\u8bfb\u53d6b\u7684value\u65f6\u89e6\u53d1') return bValue; }, set: function(newValue) { console.log('set\u8bbe\u7f6eb\u7684value\u65f6\u89e6\u53d1') bValue = newValue; }, enumerable: true, configurable: true }); o.b; // get\u8bfb\u53d6b\u7684value\u65f6\u89e6\u53d1 38","title":"3. descriptor\u53c2\u6570"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/","text":"1. this\u3001\u4f5c\u7528\u57df\u3001\u95ed\u5305\u3001\u5bf9\u8c61 \u00b6 QUESTION 1 \u00b6 var name = 'window'; var person1 = { name: 'person1', show1: function () { console.log(this.name) }, show2: () => console.log(this.name), show3: function () { return function () { console.log(this.name) } }, show4: function () { return () => console.log(this.name) } }; var person2 = { name: 'person2' }; // list outputs of functions below person1.show1() person1.show1.call(person2) person1.show2() person1.show2.call(person2) person1.show3()() person1.show3().call(person2) person1.show3.call(person2)() person1.show4()() person1.show4().call(person2) person1.show4.call(person2)() \u6b63\u786e\u7b54\u6848\u9009\u4e0b\uff1a person1.show1() // person1 person1.show1.call(person2) // person2 person1.show2() // window person1.show2.call(person2) // window person1.show3()() // window person1.show3().call(person2) // person2 person1.show3.call(person2)() // window person1.show4()() // person1 person1.show4().call(person2) // person1 person1.show4.call(person2)() // person2 \u6240\u4ee5\uff0cthis\u603b\u662f\u6307\u5411\u8c03\u7528\u8be5\u51fd\u6570\u7684\u5bf9\u8c61\u3002\u5176\u4e2d\uff0c\u5728\u5168\u5c40\u51fd\u6570\u4e2d\uff0cthis\u7b49\u4e8ewindow\u3002 QUESTION 2 \u00b6 var name = 'window' function Person (name) { this.name = name; this.show1 = function () { console.log(this.name) } this.show2 = () => console.log(this.name) this.show3 = function () { return function () { console.log(this.name) } } this.show4 = function () { return () => console.log(this.name) } } // list outputs of functions below var personA = new Person('personA') var personB = new Person('personB') personA.show1() personA.show1.call(personB) personA.show2() personA.show2.call(personB) personA.show3()() personA.show3().call(personB) personA.show3.call(personB)() personA.show4()() personA.show4().call(personB) personA.show4.call(personB)() \u6b63\u786e\u7b54\u6848\u9009\u4e0b\uff1a personA.show1() // personA personA.show1.call(personB) // personB personA.show2() // personA personA.show2.call(personB) // personA personA.show3()() // window personA.show3().call(personB) // personB personA.show3.call(personB)() // window personA.show4()() // personA personA.show4().call(personB) // personA personA.show4.call(personB)() // personB \u7b54\u6848\u4e0eQUESTION1\u7684\u7b54\u6848\u5343\u5dee\u4e07\u522b\u3002\u90a3\u4e48\uff0c\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\uff0c\u5177\u4f53\u505a\u4e86\u4ec0\u4e48\u4e8b\u5462\uff1f \u4f7f\u7528 new \u64cd\u4f5c\u7b26\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u5b9e\u9645\u4e0a\u4f1a\u7ecf\u5386\u4e00\u4e0b4\u4e2a\u6b65\u9aa4\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff1b \u5c06\u6784\u9020\u51fd\u6570\u7684\u4f5c\u7528\u57df\u8d4b\u7ed9\u65b0\u5bf9\u8c61\uff08\u56e0\u6b64this\u5c31\u6307\u5411\u4e86\u8fd9\u4e2a\u65b0\u5bf9\u8c61\uff09\uff1b \u6267\u884c\u6784\u9020\u51fd\u6570\u4e2d\u7684\u4ee3\u7801\uff08\u4e3a\u8fd9\u4e2a\u65b0\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027\uff09\uff1b \u8fd4\u56de\u65b0\u5bf9\u8c61\u3002 personA\u7684\u51fd\u6570\u7684\u4f5c\u7528\u57df\u94fe\u4ece\u6784\u9020\u51fd\u6570\u4ea7\u751f\u7684\u95ed\u5305\u5f00\u59cb\uff0c\u800cperson1\u7684\u51fd\u6570\u4f5c\u7528\u57df\u4ec5\u662fglobal\uff0c\u4e8e\u662f\u5bfc\u81f4this\u6307\u5411\u7684\u4e0d\u540c\u3002 2.\u6982\u5ff5\u53ca\u7406\u89e3 \u00b6 \u5173\u4e8e\u95ed\u5305 \u00b6 ...\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709\u81ea\u5df1\u7684\u6267\u884c\u73af\u5883\uff08execution context\uff0c\u4e5f\u53eb\u6267\u884c\u4e0a\u4e0b\u6587\uff09\uff0c\u6bcf\u4e2a\u6267\u884c\u73af\u5883\u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684\u53d8\u91cf\u5bf9\u8c61\uff0c\u73af\u5883\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u4fdd\u5b58\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e2d\u3002 ...\u5f53\u6267\u884c\u6d41\u8fdb\u5165\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u51fd\u6570\u7684\u73af\u5883\u5c31\u4f1a\u88ab\u63a8\u5165\u4e00\u4e2a\u73af\u5883\u6808\u4e2d\u3002\u5f53\u4ee3\u7801\u5728\u73af\u5883\u4e2d\u6267\u884c\u65f6\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u4f5c\u7528\u57df\u94fe\uff0c\u6765\u4fdd\u8bc1\u5bf9\u6267\u884c\u73af\u5883\u4e2d\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u7684\u6709\u5e8f\u8bbf\u95ee\u3002\u51fd\u6570\u6267\u884c\u4e4b\u540e\uff0c\u6808\u5c06\u73af\u5883\u5f39\u51fa\u3002 ...\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u7684\u51fd\u6570\u4f1a\u5c06\u5305\u542b\u51fd\u6570\u7684\u6d3b\u52a8\u5bf9\u8c61\u6dfb\u52a0\u5230\u5b83\u7684\u4f5c\u7528\u57df\u94fe\u4e2d\u3002 ...\u6bcf\u4e2a\u51fd\u6570\u88ab\u8c03\u7528\u65f6\u90fd\u4f1a\u81ea\u52a8\u83b7\u53d6\u4e24\u4e2a\u7279\u6b8a\u53d8\u91cf\uff1athis\u548carguments\u3002 \u5173\u4e8e\u7bad\u5934\u51fd\u6570 \u00b6 \u4e00\u4e2a\u7bad\u5934\u51fd\u6570\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u6bd4\u4e00\u4e2a\u51fd\u6570\u8868\u8fbe\u5f0f\u66f4\u77ed\uff0c\u5e76\u4e14\u4e0d\u7ed1\u5b9a\u81ea\u5df1\u7684 this\uff0carguments\uff0csuper\u6216 new.target\u3002...\u7bad\u5934\u51fd\u6570\u4f1a\u6355\u83b7\u5176\u6240\u5728\u4e0a\u4e0b\u6587\u7684 this \u503c\uff0c\u4f5c\u4e3a\u81ea\u5df1\u7684 this \u503c\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u8eab\u7684this\uff0c\u6240\u4ee5this\u53ea\u80fd\u6839\u636e\u4f5c\u7528\u57df\u94fe\u5f80\u4e0a\u5c42\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u7ed1\u5b9a\u4e86this\u7684\u51fd\u6570\u4f5c\u7528\u57df\u3002","title":"Javascript \u5b66\u4e60\u4e4b this"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#1-this","text":"","title":"1. this\u3001\u4f5c\u7528\u57df\u3001\u95ed\u5305\u3001\u5bf9\u8c61"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#question-1","text":"var name = 'window'; var person1 = { name: 'person1', show1: function () { console.log(this.name) }, show2: () => console.log(this.name), show3: function () { return function () { console.log(this.name) } }, show4: function () { return () => console.log(this.name) } }; var person2 = { name: 'person2' }; // list outputs of functions below person1.show1() person1.show1.call(person2) person1.show2() person1.show2.call(person2) person1.show3()() person1.show3().call(person2) person1.show3.call(person2)() person1.show4()() person1.show4().call(person2) person1.show4.call(person2)() \u6b63\u786e\u7b54\u6848\u9009\u4e0b\uff1a person1.show1() // person1 person1.show1.call(person2) // person2 person1.show2() // window person1.show2.call(person2) // window person1.show3()() // window person1.show3().call(person2) // person2 person1.show3.call(person2)() // window person1.show4()() // person1 person1.show4().call(person2) // person1 person1.show4.call(person2)() // person2 \u6240\u4ee5\uff0cthis\u603b\u662f\u6307\u5411\u8c03\u7528\u8be5\u51fd\u6570\u7684\u5bf9\u8c61\u3002\u5176\u4e2d\uff0c\u5728\u5168\u5c40\u51fd\u6570\u4e2d\uff0cthis\u7b49\u4e8ewindow\u3002","title":"QUESTION 1"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#question-2","text":"var name = 'window' function Person (name) { this.name = name; this.show1 = function () { console.log(this.name) } this.show2 = () => console.log(this.name) this.show3 = function () { return function () { console.log(this.name) } } this.show4 = function () { return () => console.log(this.name) } } // list outputs of functions below var personA = new Person('personA') var personB = new Person('personB') personA.show1() personA.show1.call(personB) personA.show2() personA.show2.call(personB) personA.show3()() personA.show3().call(personB) personA.show3.call(personB)() personA.show4()() personA.show4().call(personB) personA.show4.call(personB)() \u6b63\u786e\u7b54\u6848\u9009\u4e0b\uff1a personA.show1() // personA personA.show1.call(personB) // personB personA.show2() // personA personA.show2.call(personB) // personA personA.show3()() // window personA.show3().call(personB) // personB personA.show3.call(personB)() // window personA.show4()() // personA personA.show4().call(personB) // personA personA.show4.call(personB)() // personB \u7b54\u6848\u4e0eQUESTION1\u7684\u7b54\u6848\u5343\u5dee\u4e07\u522b\u3002\u90a3\u4e48\uff0c\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\uff0c\u5177\u4f53\u505a\u4e86\u4ec0\u4e48\u4e8b\u5462\uff1f \u4f7f\u7528 new \u64cd\u4f5c\u7b26\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u5b9e\u9645\u4e0a\u4f1a\u7ecf\u5386\u4e00\u4e0b4\u4e2a\u6b65\u9aa4\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff1b \u5c06\u6784\u9020\u51fd\u6570\u7684\u4f5c\u7528\u57df\u8d4b\u7ed9\u65b0\u5bf9\u8c61\uff08\u56e0\u6b64this\u5c31\u6307\u5411\u4e86\u8fd9\u4e2a\u65b0\u5bf9\u8c61\uff09\uff1b \u6267\u884c\u6784\u9020\u51fd\u6570\u4e2d\u7684\u4ee3\u7801\uff08\u4e3a\u8fd9\u4e2a\u65b0\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027\uff09\uff1b \u8fd4\u56de\u65b0\u5bf9\u8c61\u3002 personA\u7684\u51fd\u6570\u7684\u4f5c\u7528\u57df\u94fe\u4ece\u6784\u9020\u51fd\u6570\u4ea7\u751f\u7684\u95ed\u5305\u5f00\u59cb\uff0c\u800cperson1\u7684\u51fd\u6570\u4f5c\u7528\u57df\u4ec5\u662fglobal\uff0c\u4e8e\u662f\u5bfc\u81f4this\u6307\u5411\u7684\u4e0d\u540c\u3002","title":"QUESTION 2"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#2","text":"","title":"2.\u6982\u5ff5\u53ca\u7406\u89e3"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#_1","text":"...\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709\u81ea\u5df1\u7684\u6267\u884c\u73af\u5883\uff08execution context\uff0c\u4e5f\u53eb\u6267\u884c\u4e0a\u4e0b\u6587\uff09\uff0c\u6bcf\u4e2a\u6267\u884c\u73af\u5883\u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684\u53d8\u91cf\u5bf9\u8c61\uff0c\u73af\u5883\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u4fdd\u5b58\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e2d\u3002 ...\u5f53\u6267\u884c\u6d41\u8fdb\u5165\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u51fd\u6570\u7684\u73af\u5883\u5c31\u4f1a\u88ab\u63a8\u5165\u4e00\u4e2a\u73af\u5883\u6808\u4e2d\u3002\u5f53\u4ee3\u7801\u5728\u73af\u5883\u4e2d\u6267\u884c\u65f6\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u4f5c\u7528\u57df\u94fe\uff0c\u6765\u4fdd\u8bc1\u5bf9\u6267\u884c\u73af\u5883\u4e2d\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u7684\u6709\u5e8f\u8bbf\u95ee\u3002\u51fd\u6570\u6267\u884c\u4e4b\u540e\uff0c\u6808\u5c06\u73af\u5883\u5f39\u51fa\u3002 ...\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u7684\u51fd\u6570\u4f1a\u5c06\u5305\u542b\u51fd\u6570\u7684\u6d3b\u52a8\u5bf9\u8c61\u6dfb\u52a0\u5230\u5b83\u7684\u4f5c\u7528\u57df\u94fe\u4e2d\u3002 ...\u6bcf\u4e2a\u51fd\u6570\u88ab\u8c03\u7528\u65f6\u90fd\u4f1a\u81ea\u52a8\u83b7\u53d6\u4e24\u4e2a\u7279\u6b8a\u53d8\u91cf\uff1athis\u548carguments\u3002","title":"\u5173\u4e8e\u95ed\u5305"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%20this/#_2","text":"\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u6bd4\u4e00\u4e2a\u51fd\u6570\u8868\u8fbe\u5f0f\u66f4\u77ed\uff0c\u5e76\u4e14\u4e0d\u7ed1\u5b9a\u81ea\u5df1\u7684 this\uff0carguments\uff0csuper\u6216 new.target\u3002...\u7bad\u5934\u51fd\u6570\u4f1a\u6355\u83b7\u5176\u6240\u5728\u4e0a\u4e0b\u6587\u7684 this \u503c\uff0c\u4f5c\u4e3a\u81ea\u5df1\u7684 this \u503c\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u8eab\u7684this\uff0c\u6240\u4ee5this\u53ea\u80fd\u6839\u636e\u4f5c\u7528\u57df\u94fe\u5f80\u4e0a\u5c42\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u7ed1\u5b9a\u4e86this\u7684\u51fd\u6570\u4f5c\u7528\u57df\u3002","title":"\u5173\u4e8e\u7bad\u5934\u51fd\u6570"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/","text":"\u8001\u8bdd\u9898\uff0c\u8001\u662f\u8001\uff0c\u8bdd\u4e5f\u591f\u591a\uff0c\u9898\u8fd8\u662f\u9898\u3002 1. \u6982\u5ff5 \u00b6 \u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d\u662f\u9488\u5bf9Object\u548cArray\u8fd9\u6837\u7684\u590d\u6742\u5bf9\u8c61\u63d0\u51fa\u7684\uff0c\u6d45\u62f7\u8d1d\u4e4b\u62f7\u8d1d\u4e00\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u800c\u6df1\u62f7\u8d1d\u9012\u5f52\u590d\u5236\u6240\u6709\u5c42\u7ea7\u3002 2. \u6d45\u62f7\u8d1d \u00b6 \u770b\u4ee5\u4e0b\u4ee3\u7801\uff1a var obj = { a:1, arr: [2,3] }; var shallowObj = shallowCopy(obj); function shallowCopy(src) { var dst = {}; for (var prop in src) { if (src.hasOwnProperty(prop)) { dst[prop] = src[prop]; } } return dst; } //\u4ee5\u4e0a\u5df2\u5b8c\u6210\u6d45\u62f7\u8d1d shallowObj.a = 100; shallowObj.arr[0] = 200; console.log(obj, shallowObj); \u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a{a: 1, arr: [200, 3]} , {a: 100, arr: [200, 3]} \u89e3\u6790\uff1a JavaScript \u5b58\u50a8 Object \u548c Array \u8fd9\u79cd\u7c7b\u590d\u6742\u5bf9\u8c61\u90fd\u662f\u5b58\u5730\u5740\u7684\uff0c\u6240\u4ee5\u6d45\u62f7\u8d1d\u4f1a\u5bfc\u81f4 obj.arr \u548c shallowObj.arr \u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\u5730\u5740\u3002 3. \u6df1\u62f7\u8d1d \u00b6 \u9488\u5bf9\u4ee5\u4e0a\u95ee\u9898\uff0c\u770b\u4ee5\u4e0b\u4ee3\u7801\uff1a function deepCopy(src){ if(typeof src !== 'object') //\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6 return src; var dst = src.constructor === Array ? [] : {}; if(window.JSON){ dst = JSON.stringify(src); //\u7cfb\u5217\u5316\u5bf9\u8c61 dst = JSON.parse(dst); //\u8fd8\u539f } else { for(var i in obj){ dst[i] = typeof src[i] === 'object' ? deepCopy(src[i]) : src[i]; } } return dst; }; 4. \u5173\u4e8eObject.assign() \u00b6 Object.assign() \u53ea\u662f\u4e00\u7ea7\u5c5e\u6027\u590d\u5236\uff0c\u4ece\u67d0\u79cd\u610f\u4e49\u4e0a\u6765\u8bb2\uff0c\u4e5f\u7b97\u4f5c\u6d45\u62f7\u8d1d\u3002 \u67e5\u770b Object.assign() \u7684\u5b98\u65b9 Polyfill \uff0c\u5982\u4e0b\uff1a if (!Object.assign) { Object.defineProperty(Object, 'assign', { enumerable: false, configurable: true, writable: true, value: function(target) { 'use strict'; // assign\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u7a7a\uff0c\u5219\u629b\u9519 if (target === undefined || target === null) { throw new TypeError('Cannot convert first argument to object'); } var to = Object(target); // \u904d\u5386\u5269\u4f59\u53c2\u6570 for (var i = 1; i < arguments.length; i++) { var nextSource = arguments[i]; // \u53c2\u6570\u4e3a\u7a7a\uff0c\u5219continue if (nextSource === undefined || nextSource === null) { continue; } nextSource = Object(nextSource); // \u83b7\u53d6\u53c2\u6570\u7684\u6240\u6709key\u503c\uff0c\u5e76\u904d\u5386 var keysArray = Object.keys(nextSource); for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) { var nextKey = keysArray[nextIndex]; var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey); // \u5982\u679c\u4e0d\u4e3a\u7a7a\u4e14\u53ef\u679a\u4e3e\uff0c\u5219\u76f4\u63a5\u6d45\u62f7\u8d1d\u8d4b\u503c if (desc !== undefined && desc.enumerable) { to[nextKey] = nextSource[nextKey]; } } } return to; } }); } \u7531\u6b64\u53ef\u89c1\uff0c Object.assign() \u53ea\u5bf9\u9876\u5c42\u5c5e\u6027\u505a\u4e86\u8d4b\u503c\uff0c\u6ca1\u6709\u7ee7\u7eed\u9012\u5f52\u800c\u628a\u6240\u6709\u4e0b\u4e00\u5c42\u7684\u5c5e\u6027\u505a\u6df1\u62f7\u8d1d\u3002","title":"Javascript \u5b66\u4e60\u4e4b\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/#1","text":"\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d\u662f\u9488\u5bf9Object\u548cArray\u8fd9\u6837\u7684\u590d\u6742\u5bf9\u8c61\u63d0\u51fa\u7684\uff0c\u6d45\u62f7\u8d1d\u4e4b\u62f7\u8d1d\u4e00\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u800c\u6df1\u62f7\u8d1d\u9012\u5f52\u590d\u5236\u6240\u6709\u5c42\u7ea7\u3002","title":"1. \u6982\u5ff5"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/#2","text":"\u770b\u4ee5\u4e0b\u4ee3\u7801\uff1a var obj = { a:1, arr: [2,3] }; var shallowObj = shallowCopy(obj); function shallowCopy(src) { var dst = {}; for (var prop in src) { if (src.hasOwnProperty(prop)) { dst[prop] = src[prop]; } } return dst; } //\u4ee5\u4e0a\u5df2\u5b8c\u6210\u6d45\u62f7\u8d1d shallowObj.a = 100; shallowObj.arr[0] = 200; console.log(obj, shallowObj); \u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a{a: 1, arr: [200, 3]} , {a: 100, arr: [200, 3]} \u89e3\u6790\uff1a JavaScript \u5b58\u50a8 Object \u548c Array \u8fd9\u79cd\u7c7b\u590d\u6742\u5bf9\u8c61\u90fd\u662f\u5b58\u5730\u5740\u7684\uff0c\u6240\u4ee5\u6d45\u62f7\u8d1d\u4f1a\u5bfc\u81f4 obj.arr \u548c shallowObj.arr \u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\u5730\u5740\u3002","title":"2. \u6d45\u62f7\u8d1d"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/#3","text":"\u9488\u5bf9\u4ee5\u4e0a\u95ee\u9898\uff0c\u770b\u4ee5\u4e0b\u4ee3\u7801\uff1a function deepCopy(src){ if(typeof src !== 'object') //\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6 return src; var dst = src.constructor === Array ? [] : {}; if(window.JSON){ dst = JSON.stringify(src); //\u7cfb\u5217\u5316\u5bf9\u8c61 dst = JSON.parse(dst); //\u8fd8\u539f } else { for(var i in obj){ dst[i] = typeof src[i] === 'object' ? deepCopy(src[i]) : src[i]; } } return dst; };","title":"3. \u6df1\u62f7\u8d1d"},{"location":"history/Javascript%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/#4-objectassign","text":"Object.assign() \u53ea\u662f\u4e00\u7ea7\u5c5e\u6027\u590d\u5236\uff0c\u4ece\u67d0\u79cd\u610f\u4e49\u4e0a\u6765\u8bb2\uff0c\u4e5f\u7b97\u4f5c\u6d45\u62f7\u8d1d\u3002 \u67e5\u770b Object.assign() \u7684\u5b98\u65b9 Polyfill \uff0c\u5982\u4e0b\uff1a if (!Object.assign) { Object.defineProperty(Object, 'assign', { enumerable: false, configurable: true, writable: true, value: function(target) { 'use strict'; // assign\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u7a7a\uff0c\u5219\u629b\u9519 if (target === undefined || target === null) { throw new TypeError('Cannot convert first argument to object'); } var to = Object(target); // \u904d\u5386\u5269\u4f59\u53c2\u6570 for (var i = 1; i < arguments.length; i++) { var nextSource = arguments[i]; // \u53c2\u6570\u4e3a\u7a7a\uff0c\u5219continue if (nextSource === undefined || nextSource === null) { continue; } nextSource = Object(nextSource); // \u83b7\u53d6\u53c2\u6570\u7684\u6240\u6709key\u503c\uff0c\u5e76\u904d\u5386 var keysArray = Object.keys(nextSource); for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) { var nextKey = keysArray[nextIndex]; var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey); // \u5982\u679c\u4e0d\u4e3a\u7a7a\u4e14\u53ef\u679a\u4e3e\uff0c\u5219\u76f4\u63a5\u6d45\u62f7\u8d1d\u8d4b\u503c if (desc !== undefined && desc.enumerable) { to[nextKey] = nextSource[nextKey]; } } } return to; } }); } \u7531\u6b64\u53ef\u89c1\uff0c Object.assign() \u53ea\u5bf9\u9876\u5c42\u5c5e\u6027\u505a\u4e86\u8d4b\u503c\uff0c\u6ca1\u6709\u7ee7\u7eed\u9012\u5f52\u800c\u628a\u6240\u6709\u4e0b\u4e00\u5c42\u7684\u5c5e\u6027\u505a\u6df1\u62f7\u8d1d\u3002","title":"4. \u5173\u4e8eObject.assign()"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/","text":"\u60f3\u6362\u5de5\u4f5c\u4e86\uff0c\u518d\u4e0d\u6362\u611f\u89c9\u5c31\u8981\u5e9f\u4e86\uff1b\u505a\u4ec0\u4e48\u90fd\u53ef\u4ee5\uff0c\u53ea\u8981\u80fd\u8ba9\u6280\u80fd\u63d0\u5347\uff0c\u4f46\u6c42\u65e5\u540e\u80fd\u6709\u7897\u996d\u5403\u3002\u80e1\u4e71\u5237\u5237\u9898\uff0c\u8bf4\u4e0d\u5b9a\u5bf9\u9762\u8bd5\u6709\u7528\u3002 Q1. \u4e8c\u6b21\u5c01\u88c5\u51fd\u6570 \u00b6 \u5df2\u77e5\u51fd\u6570 fn \u6267\u884c\u9700\u8981 3 \u4e2a\u53c2\u6570\u3002\u8bf7\u5b9e\u73b0\u51fd\u6570 partial\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 result\uff0c\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570 2\u3001\u6267\u884c result(str3) \uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e fn(str1, str2, str3) \u4e00\u81f4 function partial(fn, str1, str2) { return function(str3){ return fn.call(null, str1, str2, str3) } } Q2. \u4f7f\u7528 apply \u8c03\u7528\u51fd\u6570 \u00b6 \u5b9e\u73b0\u51fd\u6570 callIt\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6 1\u3001\u8fd4\u56de\u7684\u7ed3\u679c\u4e3a\u8c03\u7528 fn \u4e4b\u540e\u7684\u7ed3\u679c 2\u3001fn \u7684\u8c03\u7528\u53c2\u6570\u4e3a callIt \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e4b\u540e\u7684\u5168\u90e8\u53c2\u6570 function callIt(fn) { var args = Array.prototype.slice.call(arguments); return fn.apply(null, args.slice(1)) } Q3. \u4e8c\u6b21\u5c01\u88c5\u51fd\u6570 \u00b6 \u5b9e\u73b0\u51fd\u6570 partialUsingArguments\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 result 2\u3001\u8c03\u7528 result \u4e4b\u540e\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e\u8c03\u7528\u51fd\u6570 fn \u7684\u7ed3\u679c\u4e00\u81f4 3\u3001fn \u7684\u8c03\u7528\u53c2\u6570\u4e3a partialUsingArguments \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e4b\u540e\u7684\u5168\u90e8\u53c2\u6570\u4ee5\u53ca result \u7684\u8c03\u7528\u53c2\u6570 function partialUsingArguments(fn) { var args = Array.prototype.slice.call(arguments); return function(){ var args1 = Array.prototype.slice.call(arguments); return fn.apply(null, args.slice(1).concat(args1)) } } Q4. \u67ef\u91cc\u5316 \u00b6 \u5df2\u77e5 fn \u4e3a\u4e00\u4e2a\u9884\u5b9a\u4e49\u51fd\u6570\uff0c\u5b9e\u73b0\u51fd\u6570 curryIt\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 a\uff0ca \u7684 length \u5c5e\u6027\u503c\u4e3a 1\uff08\u5373\u663e\u5f0f\u58f0\u660e a \u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff09 2\u3001\u8c03\u7528 a \u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 b, b \u7684 length \u5c5e\u6027\u503c\u4e3a 1 3\u3001\u8c03\u7528 b \u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 c, c \u7684 length \u5c5e\u6027\u503c\u4e3a 1 4\u3001\u8c03\u7528 c \u4e4b\u540e\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e\u8c03\u7528 fn \u7684\u8fd4\u56de\u503c\u4e00\u81f4 5\u3001fn \u7684\u53c2\u6570\u4f9d\u6b21\u4e3a\u51fd\u6570 a, b, c \u7684\u8c03\u7528\u53c2\u6570 function curryIt(fn) { var args = [], l = fn.length; //\u51fd\u6570\u7684 length \u4e3a\u5f62\u53c2\u4e2a\u6570 var tmpFunc = function(arg){ args.push(arg); //\u9012\u5f52\u505c\u6b62\u6761\u4ef6\uff0c\u5f53\u53c2fn\u53c2\u6570\u6536\u96c6\u5b8c\u6bd5 if(args.length >= fn.length) return fn.apply(null, args) return tmpFunc } return tmpFunc; } var fn = function (a, b, c) {return a + b + c}; curryIt(fn)(1)(2)(3); //output: 6 Q5. \u68c0\u67e5\u91cd\u590d\u5b57\u7b26\u4e32 \u00b6 \u7ed9\u5b9a\u5b57\u7b26\u4e32 str\uff0c\u68c0\u67e5\u5176\u662f\u5426\u5305\u542b\u8fde\u7eed\u91cd\u590d\u7684\u5b57\u6bcd\uff08a-zA-Z\uff09\uff0c\u5305\u542b\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false function containsRepeatingLetter(str) { var reg = new RegExp(/([a-zA-Z])\\1/); return reg.test(str) } \u89e3\u6790 \uff1a\u7528\u5230\u6b63\u5219\u8868\u8868\u8fbe\u5f0f**\u5206\u7ec4\u548c\u5f15\u7528**\u7684\u6982\u5ff5\uff0c\u5229\u7528()\u8fdb\u884c\u5206\u7ec4\uff0c\u4f7f\u7528\u659c\u6760\u52a0\u6570\u5b57\u8868\u793a\u5f15\u7528\u3002 \u6ce8\u610f\uff1a\u5f15\u7528\u7684\u5c31\u662f\u5339\u914d\u6210\u529f\u540e\u7684\u6587\u672c\u5185\u5bb9\uff0c\u5f15\u7528\u7684\u662f\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u8868\u8fbe\u5f0f\u3002 Q6. Array.reduce \u00b6 \u7528 ES6 \u7684 Array.reduce() \u65b9\u6cd5\u8ba1\u7b97\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002 var str = 'aabbccabbccc'; Array.from(str).reduce((res, c) => { res[c] ? res[c]++ : res[c] = 1; return res; },{}); Q7. Thunk \u00b6 thunk \u51fd\u6570\u5b9a\u4e49\uff1a\u628a\u4e00\u4e2a\u51fd\u6570\u7684**\u6267\u884c\u53c2\u6570**\uff0c \u56de\u8c03\u51fd\u6570 \u4ee5\u53ca**\u51fd\u6570\u672c\u8eab**\u8fdb\u884c\u5305\u88c5\uff0c\u53d8\u6210\u5355\u6570\u7684\u5f62\u5f0f\u3002 fn( args, callback ) ==> thunk( fn )( args )( callback ) function thunk(fn){ return function(){ var args = Array.from(arguments); return function(callback){ args.push(callback); return fn.apply(null, args); } } } // \u6d4b\u8bd5\u7528\u4f8b add function add(x,y,z,cb){ cb(); return x+y+z; //setTimeout(() => cb(x+y+z), 3000); } // \u76f4\u63a5\u8c03\u7528 add \u51fd\u6570 add(1,2,3, () => console.log('add completed!')) // thunkify add \u51fd\u6570 thunk(add)(1,2,3)(() => console.log('thunk add completed!')); Q8. \u5355\u94fe\u8868\u53cd\u8f6c \u00b6 Tips \u00b6 \u6301\u7eed\u66f4\u65b0\u4e2d\u3002","title":"Javascript \u80fd\u529b\u6d4b\u8bc4\u7ecf\u5178\u9898"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q1","text":"\u5df2\u77e5\u51fd\u6570 fn \u6267\u884c\u9700\u8981 3 \u4e2a\u53c2\u6570\u3002\u8bf7\u5b9e\u73b0\u51fd\u6570 partial\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 result\uff0c\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570 2\u3001\u6267\u884c result(str3) \uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e fn(str1, str2, str3) \u4e00\u81f4 function partial(fn, str1, str2) { return function(str3){ return fn.call(null, str1, str2, str3) } }","title":"Q1. \u4e8c\u6b21\u5c01\u88c5\u51fd\u6570"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q2-apply","text":"\u5b9e\u73b0\u51fd\u6570 callIt\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6 1\u3001\u8fd4\u56de\u7684\u7ed3\u679c\u4e3a\u8c03\u7528 fn \u4e4b\u540e\u7684\u7ed3\u679c 2\u3001fn \u7684\u8c03\u7528\u53c2\u6570\u4e3a callIt \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e4b\u540e\u7684\u5168\u90e8\u53c2\u6570 function callIt(fn) { var args = Array.prototype.slice.call(arguments); return fn.apply(null, args.slice(1)) }","title":"Q2. \u4f7f\u7528 apply \u8c03\u7528\u51fd\u6570"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q3","text":"\u5b9e\u73b0\u51fd\u6570 partialUsingArguments\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 result 2\u3001\u8c03\u7528 result \u4e4b\u540e\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e\u8c03\u7528\u51fd\u6570 fn \u7684\u7ed3\u679c\u4e00\u81f4 3\u3001fn \u7684\u8c03\u7528\u53c2\u6570\u4e3a partialUsingArguments \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e4b\u540e\u7684\u5168\u90e8\u53c2\u6570\u4ee5\u53ca result \u7684\u8c03\u7528\u53c2\u6570 function partialUsingArguments(fn) { var args = Array.prototype.slice.call(arguments); return function(){ var args1 = Array.prototype.slice.call(arguments); return fn.apply(null, args.slice(1).concat(args1)) } }","title":"Q3. \u4e8c\u6b21\u5c01\u88c5\u51fd\u6570"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q4","text":"\u5df2\u77e5 fn \u4e3a\u4e00\u4e2a\u9884\u5b9a\u4e49\u51fd\u6570\uff0c\u5b9e\u73b0\u51fd\u6570 curryIt\uff0c\u8c03\u7528\u4e4b\u540e\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 a\uff0ca \u7684 length \u5c5e\u6027\u503c\u4e3a 1\uff08\u5373\u663e\u5f0f\u58f0\u660e a \u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff09 2\u3001\u8c03\u7528 a \u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 b, b \u7684 length \u5c5e\u6027\u503c\u4e3a 1 3\u3001\u8c03\u7528 b \u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570 c, c \u7684 length \u5c5e\u6027\u503c\u4e3a 1 4\u3001\u8c03\u7528 c \u4e4b\u540e\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e\u8c03\u7528 fn \u7684\u8fd4\u56de\u503c\u4e00\u81f4 5\u3001fn \u7684\u53c2\u6570\u4f9d\u6b21\u4e3a\u51fd\u6570 a, b, c \u7684\u8c03\u7528\u53c2\u6570 function curryIt(fn) { var args = [], l = fn.length; //\u51fd\u6570\u7684 length \u4e3a\u5f62\u53c2\u4e2a\u6570 var tmpFunc = function(arg){ args.push(arg); //\u9012\u5f52\u505c\u6b62\u6761\u4ef6\uff0c\u5f53\u53c2fn\u53c2\u6570\u6536\u96c6\u5b8c\u6bd5 if(args.length >= fn.length) return fn.apply(null, args) return tmpFunc } return tmpFunc; } var fn = function (a, b, c) {return a + b + c}; curryIt(fn)(1)(2)(3); //output: 6","title":"Q4. \u67ef\u91cc\u5316"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q5","text":"\u7ed9\u5b9a\u5b57\u7b26\u4e32 str\uff0c\u68c0\u67e5\u5176\u662f\u5426\u5305\u542b\u8fde\u7eed\u91cd\u590d\u7684\u5b57\u6bcd\uff08a-zA-Z\uff09\uff0c\u5305\u542b\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false function containsRepeatingLetter(str) { var reg = new RegExp(/([a-zA-Z])\\1/); return reg.test(str) } \u89e3\u6790 \uff1a\u7528\u5230\u6b63\u5219\u8868\u8868\u8fbe\u5f0f**\u5206\u7ec4\u548c\u5f15\u7528**\u7684\u6982\u5ff5\uff0c\u5229\u7528()\u8fdb\u884c\u5206\u7ec4\uff0c\u4f7f\u7528\u659c\u6760\u52a0\u6570\u5b57\u8868\u793a\u5f15\u7528\u3002 \u6ce8\u610f\uff1a\u5f15\u7528\u7684\u5c31\u662f\u5339\u914d\u6210\u529f\u540e\u7684\u6587\u672c\u5185\u5bb9\uff0c\u5f15\u7528\u7684\u662f\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u8868\u8fbe\u5f0f\u3002","title":"Q5. \u68c0\u67e5\u91cd\u590d\u5b57\u7b26\u4e32"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q6-arrayreduce","text":"\u7528 ES6 \u7684 Array.reduce() \u65b9\u6cd5\u8ba1\u7b97\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002 var str = 'aabbccabbccc'; Array.from(str).reduce((res, c) => { res[c] ? res[c]++ : res[c] = 1; return res; },{});","title":"Q6. Array.reduce"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q7-thunk","text":"thunk \u51fd\u6570\u5b9a\u4e49\uff1a\u628a\u4e00\u4e2a\u51fd\u6570\u7684**\u6267\u884c\u53c2\u6570**\uff0c \u56de\u8c03\u51fd\u6570 \u4ee5\u53ca**\u51fd\u6570\u672c\u8eab**\u8fdb\u884c\u5305\u88c5\uff0c\u53d8\u6210\u5355\u6570\u7684\u5f62\u5f0f\u3002 fn( args, callback ) ==> thunk( fn )( args )( callback ) function thunk(fn){ return function(){ var args = Array.from(arguments); return function(callback){ args.push(callback); return fn.apply(null, args); } } } // \u6d4b\u8bd5\u7528\u4f8b add function add(x,y,z,cb){ cb(); return x+y+z; //setTimeout(() => cb(x+y+z), 3000); } // \u76f4\u63a5\u8c03\u7528 add \u51fd\u6570 add(1,2,3, () => console.log('add completed!')) // thunkify add \u51fd\u6570 thunk(add)(1,2,3)(() => console.log('thunk add completed!'));","title":"Q7. Thunk"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#q8","text":"","title":"Q8. \u5355\u94fe\u8868\u53cd\u8f6c"},{"location":"history/Javascript%20%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%84%E7%BB%8F%E5%85%B8%E9%A2%98/#tips","text":"\u6301\u7eed\u66f4\u65b0\u4e2d\u3002","title":"Tips"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/","text":"Nodejs\u98ce\u9761\u4ee5\u6765\uff0c\u5168\u6808\u3001\u524d\u540e\u7aef\u5206\u79bb\u3001\u8de8\u5e73\u53f0\u7b49\u5173\u952e\u8bcd\uff0c\u65e9\u5df2\u8ba9\u524d\u7aef\u5de5\u7a0b\u5e08\u8033\u6735\u8d77\u8327\u3002\u4e0d\u4f1a\u5b8c\u6574\u72ec\u7acb\u7684\u5f00\u53d1\u4e00\u4e2a\u7cfb\u7edf\u7684\u524d\u7aef\uff0c\u5df2\u7ecf\u4e0d\u80fd\u79f0\u5176\u4e3a\u5408\u683c\u3002 0. \u524d\u8a00 \u00b6 \u4e8b\u5b9e\u4e0a\uff0c\u672c\u535a\u5ba2\u57fa\u4e8eNodejs\u91c7\u7528\u524d\u540e\u7aef\u5206\u79bb\u67b6\u6784\uff0c\u5206\u4e3a\u4e09\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u3002 \u524d\u7aef\uff1a Dva+antd\uff0c\u535a\u5ba2\u5c55\u793a\uff1b \u7ba1\u7406\u7aef\uff1aDva+antd\uff0c\u535a\u5ba2\uff0c\u6807\u7b7e\uff0c\u56fe\u5e93\uff0c\u7528\u6237\u6743\u9650\u7b49\u6570\u636e\u7684CRUD\u64cd\u4f5c\uff1b \u540e\u7aef\uff1a Koa2+MongoDB\u63d0\u4f9brestful api\u4f9b\u524d\u7aef\u8bbf\u95ee\u3002 \u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u7b2c\u4e09\u90e8\u5206\uff0c\u540e\u7aef\u7684\u67b6\u6784\u601d\u8def\u548c\u5b9e\u73b0\u6280\u672f\u3002 Koa2 \u7b80\u4ecb \u00b6 Koa\u662f\u4e00\u4e2a\u6781\u7b80\u7684Web\u6846\u67b6\uff0c\u8f83\u4e4bExpress\u66f4\u8f7b\u3001\u66f4\u4f18\u96c5\u3001\u66f4\u5065\u58ee\u3002 Koa\u901a\u8fc7\u7ec4\u5408\u4e0d\u540c\u7684 generator \uff0c\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u7684\u56de\u8c03\u51fd\u6570\u5d4c\u5957\uff0c\u5e76\u6781\u5927\u5730\u63d0\u5347\u9519\u8bef\u5904\u7406\u7684\u6548\u7387\u3002 Koa2\u53c8\u589e\u52a0\u4e86 async / await \u8bed\u6cd5\u7684\u652f\u6301\u3002 MongoDB \u4ecb\u7ecd \u00b6 MongoDB \u662f\u4e00\u4e2a\u4ecb\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea7\u54c1\uff0c\u662f\u975e\u5173\u7cfb\u6570\u636e\u5e93\u5f53\u4e2d\u529f\u80fd\u6700\u4e30\u5bcc\u3001\u6700\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u7684\u3002\u529f\u80fd\u5f3a\u5927\uff0c\u4fbf\u4e8e\u6269\u5c55\u3002 # db.js const mongoose = require('mongoose'); mongoose.connect(''mongodb://db:27017/sb_db'', { useMongoClient: true }); // \u8fde\u63a5\u6210\u529f mongoose.connection.on('connected', () => { console.log('Mongoose connection open to 27017'); }); 1. \u9879\u76ee\u6587\u4ef6\u53ca\u8fd0\u884c \u00b6 1.1 \u6587\u4ef6\u76ee\u5f55 \u00b6 1.2 \u5b89\u88c5 \u00b6 \u5b89\u88c5koa\u4f9d\u8d56\u5305\uff0c\u67b6\u8bbeHTTP\u670d\u52a1\u5e76\u8fd0\u884c\u3002 $ npm start \u5176\u4e2d\uff0c package.json \uff0c app.js \uff0c www \uff0c\u6587\u4ef6\u5982\u4e0b\u6240\u5217\u3002 /* package.json */ { \"name\": \"koa-demo-1\", \"version\": \"0.0.1\", \"scripts\": { \"start\": \"node ./bin/www\" }, \"dependencies\": { \"koa\": \"^2.2.0\", \"koa-router\": \"^7.2.0\", \"mongoose\": \"^4.10.2\", } } // # app.js const Koa = require('koa'); const app = new Koa(); module.exports = app; // # /bin/www const http = require('http'); const app = require('../app'); // Create HTTP Server const server = http.createServer(app.callback()); // Listen on this port server.listen(3030); server.on('listening', () => { console.log(\"Listening on 3030\"); }); 2. \u6838\u5fc3\u67b6\u6784 \u00b6 2.1 \u6a21\u578b \u00b6 \u6570\u636e\u6a21\u578bModel\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u62bd\u8c61\uff0c\u4f7f\u7528 mongoose \u8fdb\u884c\u5efa\u6a21\u3002 Schema \uff1a \u4e00\u79cd\u4ee5\u6587\u4ef6\u5f62\u5f0f\u5b58\u50a8\u7684\u6570\u636e\u5e93\u6a21\u578b\u9aa8\u67b6\uff0c\u4e0d\u5177\u5907\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u80fd\u529b Model \uff1a \u7531Schema\u53d1\u5e03\u751f\u6210\u7684\u6a21\u578b\uff0c\u5177\u6709\u62bd\u8c61\u5c5e\u6027\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u5bf9 Document \uff1a \u7531Model\u521b\u5efa\u7684\u5b9e\u4f53\uff0c\u5b83\u7684\u64cd\u4f5c\u4e5f\u4f1a\u5f71\u54cd\u6570\u636e\u5e93 // PostMoel.js var mongoose = require('mongoose'); var Schema = mongoose.Schema; var postSchema = new Schema({ title: { type: String, require: true } }); postSchema.add({ author: { type: Schema.Types.ObjectId, ref: 'User' }, state: { type: String, default: 'draft' }, tags: [{ type: Schema.Types.ObjectId, ref : 'PostTag'}], brief: { type: String }, content: { type: String }, created_at: { type: String }, picture: { type: Schema.Types.ObjectId, ref: 'Image' }, }); var Post = mongoose.model(\"Post\", postSchema); module.exports = Post; 2.2 \u63a7\u5236\u5668 \u00b6 \u540e\u7aef\u7684\u903b\u8f91\u5c42Controller\uff0c\u4e3a\u62bd\u8c61\u51fa\u6765\u7684\u7c7b\u5b9a\u4e49\u65b9\u6cd5\uff0c\u5b8c\u6210\u5bf9\u6570\u636e\u5e93\u5185\u6761\u76ee\u7684CRUD\u64cd\u4f5c\u3002 // PostCtrl.js const { PostModel } = require('../models'); class PostCtrl { static async articles(ctx){ const {_page, _limit} = ctx.query; let limit = parseInt(_limit)||10; let skip = (parseInt(_page)-1)*limit||0; const total = await PostModel.count(); const list = await PostModel.find().populate(\"tags picture\").sort({'created_at':-1}).skip(skip).limit(limit); if(!list) return ctx.error({ msg: 'not found' }) return ctx.success({ data : { list, total } }); } /* ... */ static async delete(ctx){ const { _id } = ctx.request.body; const result = await PostModel.findByIdAndRemove(_id); if(result) return ctx.success({ data: result}) else return ctx.error({ message: 'delete fail' }) } } module.exports = PostCtrl; 2.3 \u8def\u7531 \u00b6 \u8def\u7531Routes\uff0cKoa\u7684\u6838\u5fc3\u4e2d\u95f4\u4ef6\uff0c\u91c7\u7528\u5b98\u65b9\u63d0\u4f9b\u7684 koa-router \u6a21\u5757\u3002\u5bf9\u5916\u5f00\u653e\u7684API\uff0c\u63a5\u6536GET\uff0cPUT\uff0cpost\uff0cPATCH\u7b49HTTP\u8bf7\u6c42\uff0c\u5e76\u8c03\u7528controllers\u91cc\u5b9a\u4e49\u7684\u5404\u79cd\u65b9\u6cd5\u3002 // app.js const apiRouter = require('./rest/routes'); const app = new Koa(); app .use(apiRouter.routes()) .use(apiRouter.allowedMethods()); /* routes/ \u2514\u2500\u2500 index.js */ const { PostCtrl } = require('../controllers'); const router = require('koa-router'); const route = new router(); route .get('/api/articles',PostCtrl.articles) /* ... */ .del('/api/articles',isBearerAuthenticated, PostCtrl.delete) module.exports = route; 3. \u4e2d\u95f4\u4ef6 \u00b6 3.1 passport\u7b56\u7565 \u00b6 passport\u662f\u4e00\u4e2a\u57fa\u4e8eNodejs\u7684\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\uff0c\u5e72\u51c0\uff0c\u6613\u7ef4\u62a4\uff0c\u4e5f\u65b9\u4fbf\u96c6\u6210\u5230\u5176\u4ed6\u7684\u5e94\u7528\u4e2d\u3002 \u672c\u9879\u76ee\u91c7\u7528\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u7b56\u7565\uff0cLocalStrategy \u548c BearerStrategy\u3002LocalStrategy\u7b56\u7565\uff0c\u7528\u4e8e\u5339\u914d\u672c\u5730\u73af\u5883\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u53ef\u4ee5\u6269\u5c55\u8fd9\u4e2a\u7b56\u7565\uff0c\u901a\u8fc7\u6570\u636e\u5e93\u7684\u65b9\u5f0f\u8fdb\u884c\u5339\u914d\u3002BearerStrategy\u7b56\u7565\uff0c\u901a\u8fc7\u4e00\u4e2abearer token\u6765\u8ba4\u8bc1\u7528\u6237\u7684http\u8bf7\u6c42\uff0c\u5339\u914d\u8bf7\u6c42header\u91cc\u7684authorization\u3002 \u6587\u4ef6\u76ee\u5f55\u5982\u4e0b\u6240\u793a\u3002 auth/ \u251c\u2500\u2500 strategies \u251c \u251c\u2500\u2500 bearer.js \u251c \u2514\u2500\u2500 local.js \u2514\u2500\u2500 index.js /** local.js ** * \u914d\u7f6elocal\u672c\u5730\u7b56\u7565\u4e3aLocalStrategy,\u901a\u8fc7 username\uff0cpassword \u6765\u9a8c\u8bc1\u7528\u6237 */ const LocalStrategy = require('passport-local').Strategy; const { UserModel } = require('../../models'); const registerLocal = (passport) => { passport.use('local', new LocalStrategy({ usernameField: 'username', // 'username' \u4e3a ctx.request.body\u4e2d\u63d0\u4ea4\u7684\u540d\u79f0 passportField: 'password' // 'password' \u4e3a ctx.request.body\u4e2d\u63d0\u4ea4\u7684\u540d\u79f0 }, async(username, password, done)=>{ const user = await UserModel.findOne({name: username}); if(!user) return done(null, false, { message: '\u7528\u6237\u4e0d\u5b58\u5728' }); if(password !== user.password) return done(null, false, { message: '\u5bc6\u7801\u4e0d\u5339\u914d' }); return done(null, user); })); } module.exports = registerLocal; /** bearer.js ** * \u914d\u7f6epassport\u7b56\u7565\u4e3abearer Strategy, \u901a\u8fc7 access token \u6765\u9a8c\u8bc1\u7528\u6237\u8bbf\u95ee\u6743\u9650 */ const BearerStrategy = require('passport-http-bearer').Strategy; const { AccessTokenModel } = require('../../models'); const registerBearer = (passport) => { passport.use('bearer', new BearerStrategy( async(token, done) => { const accessToken = await AccessTokenModel.findOne({ token }).populate('user'); if(!accessToken) return done(null, false); const { name, role, password } = accessToken.user; return done(null, { name, role, password }, {scope: '*'}) })) } module.exports = registerBearer; //index.js const passport = require('koa-passport'); const registerLocal = require('./strategies/local') const registerBearer = require('./strategies/bearer') const { UserModel } = require('../models'); //\u5c06user.name\u5e8f\u5217\u5316\u4e3aSESSIONID\uff0c\u5b58\u50a8\u4e8ecookie, \u89c1ctx.session.passport.user passport.serializeUser((user,done) => done(null, user)); //session\u53cd\u5e8f\u5217\u5316\uff0c\u53c2\u6570\u4e3a\u63d0\u4ea4\u7684SESSIONID\uff0c\u4ece\u6570\u636e\u5e93\u67e5\u8be2user\uff0c\u5b58\u50a8\u4e8ectx.request.user passport.deserializeUser(async (user, done) => done(null, await UserModel.findOne({_id: user._id}))); //\u4f7f\u7528local\u7b56\u7565\uff0c\u4e00\u822c\u7528\u4e8e\u672c\u5730login,logout\u7b49\u64cd\u4f5c registerLocal(passport); //\u4f7f\u7528bearer\u7b56\u7565\uff0c\u4e00\u822c\u7528\u4e8eclient\u901a\u8fc7token\u83b7\u53d6\u670d\u52a1\u5668\u6570\u636e registerBearer(passport); const isLocalAuthenticated = async(ctx, next) => { if(ctx.isAuthenticated()){ //authenticate via session.passport await next(); else await ctx.redirect('/server/login'); } //\u5e26bearer tokens\u7684\u8bf7\u6c42\u4e0d\u9700\u8981session support, \u56e0\u6b64session option\u53ef\u88abset to false. const isBearerAuthenticated = passport.authenticate('bearer', {session: false}) module.exports = { passport, isLocalAuthenticated, isBearerAuthenticated }; // app.js const { passport } = require('./rest/auth'); const app = new Koa(); app.use(passport.initialize()); //\u521d\u59cb\u5316 app.use(passport.session()); //\u4f7f\u7528session 3.2 \u5176\u5b83\u4e2d\u95f4\u4ef6 \u00b6 format_response.js \u7528\u6765\u683c\u5f0f\u5316\u4ece\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u7684\u8d44\u6e90 const format_response = async (ctx, next) => { ctx.error = ({ data, message, error }) => { ctx.body = { code: -200, message, data, error }; } ctx.success = ({ data, message }) => { ctx.body = { code: 200, message, data }; } await next(); } module.exports = format_response; upload.js\uff0c\u4f7f\u7528busboy\u6765\u5904\u7406form data\u7c7b\u578b\u7684post\u8bf7\u6c42\uff0c\u5305\u62ec\u56fe\u7247\u7b49\u7c7b\u578b\u7684\u6587\u4ef6 const path = require('path'); const fs = require('fs'); const Busboy = require('busboy'); /* {FormData} \u4e0a\u4f20\u6587\u4ef6 * @param {object} ctx: koa\u4e0a\u4e0b\u6587 * @param {object} options: \u6587\u4ef6\u4e0a\u4f20\u53c2\u6570\uff0c path\u6587\u4ef6\u5b58\u653e\u8def\u5f84 * @return {promise} */ const upload = (ctx, options) => { let req = ctx.req let busboy = new Busboy({ headers: req.headers }) let _filePath = path.join(__dirname, '../../public/upload', options&&options.path||'/'); if(!fs.existsSync(_filePath)) fs.mkdirSync(_filePath); return new Promise((resolve, reject) => { let result = { fields: {}, files: {} } //form\u7684\u666e\u901a\u5b57\u6bb5\u548c\u503c busboy.on('field',function(fieldname, val, fieldnameTruncated, valTruncated, encoding, mimetype){ if(!result.fields[fieldname]){ result.fields[fieldname] = val }else if(result.fields[fieldname] instanceof Array){ result.fields[fieldname].push(val) }else{ result.fields[fieldname] = [].concat(result.fields[fieldname], val) } }); //form\u7684\u6587\u4ef6 busboy.on('file', function(fieldname, file, filename, encoding, mimetype) { //\u8fc7\u6ee4octet-stream\u7c7b\u578b\u7684\u672a\u77e5\u6587\u4ef6 var name, url, size = 0; if(!mimetype.includes(\"application/octet-stream\")){ name = Math.random().toString(16).substr(2)+'.'+filename.split('.')[1]; // \u6587\u4ef6\u4fdd\u5b58\u5230\u6307\u5b9a\u8def\u5f84 file.pipe(fs.createWriteStream(path.join(_filePath, name))); } file.on('data', (data) => { size = data.length;} ); file.on('end', function(data) { if(name){ url = path.join('/upload/', options&&options.path, name); if(!result.files[fieldname]){ result.files[fieldname] = { name, url, size, mimetype } }else if(result.files[fieldname] instanceof Array){ result.files[fieldname].push({ name, url, size, mimetype }) }else{ result.files[fieldname] = [].concat(result.files[fieldname], { name, url, size, mimetype }) } } }); }) busboy.on('finish', () => resolve(result) ); return req.pipe(busboy); }) } module.exports = upload;","title":"Koa2+MongoDB \u6784\u5efa Restful \u540e\u7aef"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#0","text":"\u4e8b\u5b9e\u4e0a\uff0c\u672c\u535a\u5ba2\u57fa\u4e8eNodejs\u91c7\u7528\u524d\u540e\u7aef\u5206\u79bb\u67b6\u6784\uff0c\u5206\u4e3a\u4e09\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u3002 \u524d\u7aef\uff1a Dva+antd\uff0c\u535a\u5ba2\u5c55\u793a\uff1b \u7ba1\u7406\u7aef\uff1aDva+antd\uff0c\u535a\u5ba2\uff0c\u6807\u7b7e\uff0c\u56fe\u5e93\uff0c\u7528\u6237\u6743\u9650\u7b49\u6570\u636e\u7684CRUD\u64cd\u4f5c\uff1b \u540e\u7aef\uff1a Koa2+MongoDB\u63d0\u4f9brestful api\u4f9b\u524d\u7aef\u8bbf\u95ee\u3002 \u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u7b2c\u4e09\u90e8\u5206\uff0c\u540e\u7aef\u7684\u67b6\u6784\u601d\u8def\u548c\u5b9e\u73b0\u6280\u672f\u3002","title":"0. \u524d\u8a00"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#koa2","text":"Koa\u662f\u4e00\u4e2a\u6781\u7b80\u7684Web\u6846\u67b6\uff0c\u8f83\u4e4bExpress\u66f4\u8f7b\u3001\u66f4\u4f18\u96c5\u3001\u66f4\u5065\u58ee\u3002 Koa\u901a\u8fc7\u7ec4\u5408\u4e0d\u540c\u7684 generator \uff0c\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u7684\u56de\u8c03\u51fd\u6570\u5d4c\u5957\uff0c\u5e76\u6781\u5927\u5730\u63d0\u5347\u9519\u8bef\u5904\u7406\u7684\u6548\u7387\u3002 Koa2\u53c8\u589e\u52a0\u4e86 async / await \u8bed\u6cd5\u7684\u652f\u6301\u3002","title":"Koa2 \u7b80\u4ecb"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#mongodb","text":"MongoDB \u662f\u4e00\u4e2a\u4ecb\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea7\u54c1\uff0c\u662f\u975e\u5173\u7cfb\u6570\u636e\u5e93\u5f53\u4e2d\u529f\u80fd\u6700\u4e30\u5bcc\u3001\u6700\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u7684\u3002\u529f\u80fd\u5f3a\u5927\uff0c\u4fbf\u4e8e\u6269\u5c55\u3002 # db.js const mongoose = require('mongoose'); mongoose.connect(''mongodb://db:27017/sb_db'', { useMongoClient: true }); // \u8fde\u63a5\u6210\u529f mongoose.connection.on('connected', () => { console.log('Mongoose connection open to 27017'); });","title":"MongoDB \u4ecb\u7ecd"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#1","text":"","title":"1. \u9879\u76ee\u6587\u4ef6\u53ca\u8fd0\u884c"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#11","text":"","title":"1.1 \u6587\u4ef6\u76ee\u5f55"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#12","text":"\u5b89\u88c5koa\u4f9d\u8d56\u5305\uff0c\u67b6\u8bbeHTTP\u670d\u52a1\u5e76\u8fd0\u884c\u3002 $ npm start \u5176\u4e2d\uff0c package.json \uff0c app.js \uff0c www \uff0c\u6587\u4ef6\u5982\u4e0b\u6240\u5217\u3002 /* package.json */ { \"name\": \"koa-demo-1\", \"version\": \"0.0.1\", \"scripts\": { \"start\": \"node ./bin/www\" }, \"dependencies\": { \"koa\": \"^2.2.0\", \"koa-router\": \"^7.2.0\", \"mongoose\": \"^4.10.2\", } } // # app.js const Koa = require('koa'); const app = new Koa(); module.exports = app; // # /bin/www const http = require('http'); const app = require('../app'); // Create HTTP Server const server = http.createServer(app.callback()); // Listen on this port server.listen(3030); server.on('listening', () => { console.log(\"Listening on 3030\"); });","title":"1.2 \u5b89\u88c5"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#2","text":"","title":"2. \u6838\u5fc3\u67b6\u6784"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#21","text":"\u6570\u636e\u6a21\u578bModel\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u62bd\u8c61\uff0c\u4f7f\u7528 mongoose \u8fdb\u884c\u5efa\u6a21\u3002 Schema \uff1a \u4e00\u79cd\u4ee5\u6587\u4ef6\u5f62\u5f0f\u5b58\u50a8\u7684\u6570\u636e\u5e93\u6a21\u578b\u9aa8\u67b6\uff0c\u4e0d\u5177\u5907\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u80fd\u529b Model \uff1a \u7531Schema\u53d1\u5e03\u751f\u6210\u7684\u6a21\u578b\uff0c\u5177\u6709\u62bd\u8c61\u5c5e\u6027\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u5bf9 Document \uff1a \u7531Model\u521b\u5efa\u7684\u5b9e\u4f53\uff0c\u5b83\u7684\u64cd\u4f5c\u4e5f\u4f1a\u5f71\u54cd\u6570\u636e\u5e93 // PostMoel.js var mongoose = require('mongoose'); var Schema = mongoose.Schema; var postSchema = new Schema({ title: { type: String, require: true } }); postSchema.add({ author: { type: Schema.Types.ObjectId, ref: 'User' }, state: { type: String, default: 'draft' }, tags: [{ type: Schema.Types.ObjectId, ref : 'PostTag'}], brief: { type: String }, content: { type: String }, created_at: { type: String }, picture: { type: Schema.Types.ObjectId, ref: 'Image' }, }); var Post = mongoose.model(\"Post\", postSchema); module.exports = Post;","title":"2.1 \u6a21\u578b"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#22","text":"\u540e\u7aef\u7684\u903b\u8f91\u5c42Controller\uff0c\u4e3a\u62bd\u8c61\u51fa\u6765\u7684\u7c7b\u5b9a\u4e49\u65b9\u6cd5\uff0c\u5b8c\u6210\u5bf9\u6570\u636e\u5e93\u5185\u6761\u76ee\u7684CRUD\u64cd\u4f5c\u3002 // PostCtrl.js const { PostModel } = require('../models'); class PostCtrl { static async articles(ctx){ const {_page, _limit} = ctx.query; let limit = parseInt(_limit)||10; let skip = (parseInt(_page)-1)*limit||0; const total = await PostModel.count(); const list = await PostModel.find().populate(\"tags picture\").sort({'created_at':-1}).skip(skip).limit(limit); if(!list) return ctx.error({ msg: 'not found' }) return ctx.success({ data : { list, total } }); } /* ... */ static async delete(ctx){ const { _id } = ctx.request.body; const result = await PostModel.findByIdAndRemove(_id); if(result) return ctx.success({ data: result}) else return ctx.error({ message: 'delete fail' }) } } module.exports = PostCtrl;","title":"2.2 \u63a7\u5236\u5668"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#23","text":"\u8def\u7531Routes\uff0cKoa\u7684\u6838\u5fc3\u4e2d\u95f4\u4ef6\uff0c\u91c7\u7528\u5b98\u65b9\u63d0\u4f9b\u7684 koa-router \u6a21\u5757\u3002\u5bf9\u5916\u5f00\u653e\u7684API\uff0c\u63a5\u6536GET\uff0cPUT\uff0cpost\uff0cPATCH\u7b49HTTP\u8bf7\u6c42\uff0c\u5e76\u8c03\u7528controllers\u91cc\u5b9a\u4e49\u7684\u5404\u79cd\u65b9\u6cd5\u3002 // app.js const apiRouter = require('./rest/routes'); const app = new Koa(); app .use(apiRouter.routes()) .use(apiRouter.allowedMethods()); /* routes/ \u2514\u2500\u2500 index.js */ const { PostCtrl } = require('../controllers'); const router = require('koa-router'); const route = new router(); route .get('/api/articles',PostCtrl.articles) /* ... */ .del('/api/articles',isBearerAuthenticated, PostCtrl.delete) module.exports = route;","title":"2.3 \u8def\u7531"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#3","text":"","title":"3. \u4e2d\u95f4\u4ef6"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#31-passport","text":"passport\u662f\u4e00\u4e2a\u57fa\u4e8eNodejs\u7684\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\uff0c\u5e72\u51c0\uff0c\u6613\u7ef4\u62a4\uff0c\u4e5f\u65b9\u4fbf\u96c6\u6210\u5230\u5176\u4ed6\u7684\u5e94\u7528\u4e2d\u3002 \u672c\u9879\u76ee\u91c7\u7528\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u7b56\u7565\uff0cLocalStrategy \u548c BearerStrategy\u3002LocalStrategy\u7b56\u7565\uff0c\u7528\u4e8e\u5339\u914d\u672c\u5730\u73af\u5883\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u53ef\u4ee5\u6269\u5c55\u8fd9\u4e2a\u7b56\u7565\uff0c\u901a\u8fc7\u6570\u636e\u5e93\u7684\u65b9\u5f0f\u8fdb\u884c\u5339\u914d\u3002BearerStrategy\u7b56\u7565\uff0c\u901a\u8fc7\u4e00\u4e2abearer token\u6765\u8ba4\u8bc1\u7528\u6237\u7684http\u8bf7\u6c42\uff0c\u5339\u914d\u8bf7\u6c42header\u91cc\u7684authorization\u3002 \u6587\u4ef6\u76ee\u5f55\u5982\u4e0b\u6240\u793a\u3002 auth/ \u251c\u2500\u2500 strategies \u251c \u251c\u2500\u2500 bearer.js \u251c \u2514\u2500\u2500 local.js \u2514\u2500\u2500 index.js /** local.js ** * \u914d\u7f6elocal\u672c\u5730\u7b56\u7565\u4e3aLocalStrategy,\u901a\u8fc7 username\uff0cpassword \u6765\u9a8c\u8bc1\u7528\u6237 */ const LocalStrategy = require('passport-local').Strategy; const { UserModel } = require('../../models'); const registerLocal = (passport) => { passport.use('local', new LocalStrategy({ usernameField: 'username', // 'username' \u4e3a ctx.request.body\u4e2d\u63d0\u4ea4\u7684\u540d\u79f0 passportField: 'password' // 'password' \u4e3a ctx.request.body\u4e2d\u63d0\u4ea4\u7684\u540d\u79f0 }, async(username, password, done)=>{ const user = await UserModel.findOne({name: username}); if(!user) return done(null, false, { message: '\u7528\u6237\u4e0d\u5b58\u5728' }); if(password !== user.password) return done(null, false, { message: '\u5bc6\u7801\u4e0d\u5339\u914d' }); return done(null, user); })); } module.exports = registerLocal; /** bearer.js ** * \u914d\u7f6epassport\u7b56\u7565\u4e3abearer Strategy, \u901a\u8fc7 access token \u6765\u9a8c\u8bc1\u7528\u6237\u8bbf\u95ee\u6743\u9650 */ const BearerStrategy = require('passport-http-bearer').Strategy; const { AccessTokenModel } = require('../../models'); const registerBearer = (passport) => { passport.use('bearer', new BearerStrategy( async(token, done) => { const accessToken = await AccessTokenModel.findOne({ token }).populate('user'); if(!accessToken) return done(null, false); const { name, role, password } = accessToken.user; return done(null, { name, role, password }, {scope: '*'}) })) } module.exports = registerBearer; //index.js const passport = require('koa-passport'); const registerLocal = require('./strategies/local') const registerBearer = require('./strategies/bearer') const { UserModel } = require('../models'); //\u5c06user.name\u5e8f\u5217\u5316\u4e3aSESSIONID\uff0c\u5b58\u50a8\u4e8ecookie, \u89c1ctx.session.passport.user passport.serializeUser((user,done) => done(null, user)); //session\u53cd\u5e8f\u5217\u5316\uff0c\u53c2\u6570\u4e3a\u63d0\u4ea4\u7684SESSIONID\uff0c\u4ece\u6570\u636e\u5e93\u67e5\u8be2user\uff0c\u5b58\u50a8\u4e8ectx.request.user passport.deserializeUser(async (user, done) => done(null, await UserModel.findOne({_id: user._id}))); //\u4f7f\u7528local\u7b56\u7565\uff0c\u4e00\u822c\u7528\u4e8e\u672c\u5730login,logout\u7b49\u64cd\u4f5c registerLocal(passport); //\u4f7f\u7528bearer\u7b56\u7565\uff0c\u4e00\u822c\u7528\u4e8eclient\u901a\u8fc7token\u83b7\u53d6\u670d\u52a1\u5668\u6570\u636e registerBearer(passport); const isLocalAuthenticated = async(ctx, next) => { if(ctx.isAuthenticated()){ //authenticate via session.passport await next(); else await ctx.redirect('/server/login'); } //\u5e26bearer tokens\u7684\u8bf7\u6c42\u4e0d\u9700\u8981session support, \u56e0\u6b64session option\u53ef\u88abset to false. const isBearerAuthenticated = passport.authenticate('bearer', {session: false}) module.exports = { passport, isLocalAuthenticated, isBearerAuthenticated }; // app.js const { passport } = require('./rest/auth'); const app = new Koa(); app.use(passport.initialize()); //\u521d\u59cb\u5316 app.use(passport.session()); //\u4f7f\u7528session","title":"3.1 passport\u7b56\u7565"},{"location":"history/Koa2%2BMongoDB%20%E6%9E%84%E5%BB%BA%20Restful%20%E5%90%8E%E7%AB%AF/#32","text":"format_response.js \u7528\u6765\u683c\u5f0f\u5316\u4ece\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u7684\u8d44\u6e90 const format_response = async (ctx, next) => { ctx.error = ({ data, message, error }) => { ctx.body = { code: -200, message, data, error }; } ctx.success = ({ data, message }) => { ctx.body = { code: 200, message, data }; } await next(); } module.exports = format_response; upload.js\uff0c\u4f7f\u7528busboy\u6765\u5904\u7406form data\u7c7b\u578b\u7684post\u8bf7\u6c42\uff0c\u5305\u62ec\u56fe\u7247\u7b49\u7c7b\u578b\u7684\u6587\u4ef6 const path = require('path'); const fs = require('fs'); const Busboy = require('busboy'); /* {FormData} \u4e0a\u4f20\u6587\u4ef6 * @param {object} ctx: koa\u4e0a\u4e0b\u6587 * @param {object} options: \u6587\u4ef6\u4e0a\u4f20\u53c2\u6570\uff0c path\u6587\u4ef6\u5b58\u653e\u8def\u5f84 * @return {promise} */ const upload = (ctx, options) => { let req = ctx.req let busboy = new Busboy({ headers: req.headers }) let _filePath = path.join(__dirname, '../../public/upload', options&&options.path||'/'); if(!fs.existsSync(_filePath)) fs.mkdirSync(_filePath); return new Promise((resolve, reject) => { let result = { fields: {}, files: {} } //form\u7684\u666e\u901a\u5b57\u6bb5\u548c\u503c busboy.on('field',function(fieldname, val, fieldnameTruncated, valTruncated, encoding, mimetype){ if(!result.fields[fieldname]){ result.fields[fieldname] = val }else if(result.fields[fieldname] instanceof Array){ result.fields[fieldname].push(val) }else{ result.fields[fieldname] = [].concat(result.fields[fieldname], val) } }); //form\u7684\u6587\u4ef6 busboy.on('file', function(fieldname, file, filename, encoding, mimetype) { //\u8fc7\u6ee4octet-stream\u7c7b\u578b\u7684\u672a\u77e5\u6587\u4ef6 var name, url, size = 0; if(!mimetype.includes(\"application/octet-stream\")){ name = Math.random().toString(16).substr(2)+'.'+filename.split('.')[1]; // \u6587\u4ef6\u4fdd\u5b58\u5230\u6307\u5b9a\u8def\u5f84 file.pipe(fs.createWriteStream(path.join(_filePath, name))); } file.on('data', (data) => { size = data.length;} ); file.on('end', function(data) { if(name){ url = path.join('/upload/', options&&options.path, name); if(!result.files[fieldname]){ result.files[fieldname] = { name, url, size, mimetype } }else if(result.files[fieldname] instanceof Array){ result.files[fieldname].push({ name, url, size, mimetype }) }else{ result.files[fieldname] = [].concat(result.files[fieldname], { name, url, size, mimetype }) } } }); }) busboy.on('finish', () => resolve(result) ); return req.pipe(busboy); }) } module.exports = upload;","title":"3.2 \u5176\u5b83\u4e2d\u95f4\u4ef6"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/","text":"1. forever \u00b6 \u529f\u80fd\uff1a \u8ba9node\u670d\u52a1\u540e\u53f0\u6267\u884c\u3002 $ sudo npm install forever -g #\u5b89\u88c5 $ forever start app.js #\u542f\u52a8 $ forever stop app.js #\u5173\u95ed $ forever start -l forever.log -o out.log -e err.log app.js #\u8f93\u51fa\u65e5\u5fd7\u548c\u9519\u8bef 2. yarn \u00b6 \u529f\u80fd\uff1a \u540cnpm\uff0c\u53ef\u53d6\u800c\u4ee3\u4e4b\u3002 \u5b89\u88c5 \u00b6 $ npm install -g yarn \u914d\u7f6e \u00b6 # \u67e5\u770b\u9ed8\u8ba4\u7684\u5305\u5b89\u88c5\u6e90 $ yarn config get registry # \u8bbe\u7f6e\u4e3acnpm\u7684\u5b89\u88c5\u6e90\uff0c\u63d0\u9ad8\u901f\u5ea6 $ yarn config set registry 'https://registry.npm.taobao.org' \u4f7f\u7528 \u00b6 # 1. \u5b89\u88c5\u4f9d\u8d56\u5305\uff0c\u5e76\u9ed8\u8ba4\u4fdd\u5b58\u5230package.json $ npm install pkg-name \u2014save $ yarn add pkg-name $ npm install --save-dev pkg-name $ yarn add pkg-name \u2014dev $ npm install -g pkg-name $ yarn global add pkg-name # 2. \u5378\u8f7d\u4f9d\u8d56\u5305 $ npm uninstall pkg-name \u2014save $ yarn remove pkg-name # 3. \u66f4\u65b0\u4f9d\u8d56\u5305 $ npm update --save pkg-name $ yarn upgrade pkg-name # 4. \u8fd0\u884c\u547d\u4ee4 $ npm run/test $ yarn run/test 3. react-lazyload \u00b6 \u529f\u80fd\uff1a \u61d2\u52a0\u8f7d\u3002","title":"NodeJS \u5e38\u7528\u5305\u53ca\u529f\u80fd"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#1-forever","text":"\u529f\u80fd\uff1a \u8ba9node\u670d\u52a1\u540e\u53f0\u6267\u884c\u3002 $ sudo npm install forever -g #\u5b89\u88c5 $ forever start app.js #\u542f\u52a8 $ forever stop app.js #\u5173\u95ed $ forever start -l forever.log -o out.log -e err.log app.js #\u8f93\u51fa\u65e5\u5fd7\u548c\u9519\u8bef","title":"1. forever"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#2-yarn","text":"\u529f\u80fd\uff1a \u540cnpm\uff0c\u53ef\u53d6\u800c\u4ee3\u4e4b\u3002","title":"2. yarn"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#_1","text":"$ npm install -g yarn","title":"\u5b89\u88c5"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#_2","text":"# \u67e5\u770b\u9ed8\u8ba4\u7684\u5305\u5b89\u88c5\u6e90 $ yarn config get registry # \u8bbe\u7f6e\u4e3acnpm\u7684\u5b89\u88c5\u6e90\uff0c\u63d0\u9ad8\u901f\u5ea6 $ yarn config set registry 'https://registry.npm.taobao.org'","title":"\u914d\u7f6e"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#_3","text":"# 1. \u5b89\u88c5\u4f9d\u8d56\u5305\uff0c\u5e76\u9ed8\u8ba4\u4fdd\u5b58\u5230package.json $ npm install pkg-name \u2014save $ yarn add pkg-name $ npm install --save-dev pkg-name $ yarn add pkg-name \u2014dev $ npm install -g pkg-name $ yarn global add pkg-name # 2. \u5378\u8f7d\u4f9d\u8d56\u5305 $ npm uninstall pkg-name \u2014save $ yarn remove pkg-name # 3. \u66f4\u65b0\u4f9d\u8d56\u5305 $ npm update --save pkg-name $ yarn upgrade pkg-name # 4. \u8fd0\u884c\u547d\u4ee4 $ npm run/test $ yarn run/test","title":"\u4f7f\u7528"},{"location":"history/NodeJS%20%E5%B8%B8%E7%94%A8%E5%8C%85%E5%8F%8A%E5%8A%9F%E8%83%BD/#3-react-lazyload","text":"\u529f\u80fd\uff1a \u61d2\u52a0\u8f7d\u3002","title":"3. react-lazyload"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/","text":"Progressive Web Apps \uff0c\u7b80\u79f0 PWA\uff0c \u53f7\u79f0\u4e0b\u4e00\u4ee3 Web \u5e94\u7528\u6a21\u578b\uff0c\u5140\u81ea\u98ce\u9761\u3002\u4f5c\u4e3a\u524d\u7aef\u7231\u597d\u8005\uff0c\u4e5f\u60f3\u4e00\u7aa5\u7a76\u7adf\u3002\u8bf4\u8d77 PWA \uff0c\u5fc5\u7ed5\u4e0d\u5f00 Service Worker \u548c\u79bb\u7ebf Cache \uff0c\u672c\u6587\u7b80\u8ff0\u5176\u539f\u7406\uff0c\u5e76\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355 DEMO \u9a8c\u8bc1\u4e00\u4e0b\u3002 1. \u6982\u5ff5 \u00b6 Service Worker \u662f\u4e00\u6bb5**\u72ec\u7acb\u4e8e\u5f53\u524d\u9875\u9762\uff0c\u8fd0\u884c\u4e8e\u6d4f\u89c8\u5668\u540e\u53f0\u8fdb\u7a0b**\u7684\u811a\u672c\u3002 \u6ce8\u610f \uff1a Service Worker \u5f02\u6b65\u8fd0\u884c\uff0c\u4e14\u72ec\u7acb\u4e8e\u5168\u5c40\u4e0a\u4e0b\u6587\u3002 Service Worker \u6ca1\u6709\u64cd\u4f5cDOM\u7684\u6743\u9650\u3002\u4f46\u53ef\u901a\u8fc7 postMessage \u65b9\u6cd5\u4e0eWeb\u9875\u9762\u901a\u4fe1\uff0c\u8ba9\u9875\u9762\u64cd\u4f5cDOM\u3002 Service Worker \u662f\u4e8b\u4ef6\u9a71\u52a8\u3002\u5904\u4e8e Idle \u72b6\u6001\u65f6\uff0c\u968f\u65f6\u4f1a\u88ab\u6d4f\u89c8\u5668\u56de\u6536\uff0c\u4ee5\u8282\u7701\u5185\u5b58\u3002 2. \u751f\u547d\u5468\u671f \u00b6 \u7531\u56fe\u53ef\u89c1\uff0c\u4e00\u4e2a Service Worker \u4e00\u751f\u80fd\u7ecf\u5386\u5982\u4e0b\u8fc7\u7a0b\uff1a \u5b89\u88c5\uff1b \u6fc0\u6d3b\uff0c\u53ef\u901a\u8fc7 chrome://inspect/#service-workers \u67e5\u770b\u5230\u5f53\u524d\u8fd0\u884c\u7684service worker\uff1b \u7a7a\u95f2\uff0c\u76d1\u542c fetch \u548c message \u4e8b\u4ef6\uff1b \u9500\u6bc1\uff0c\u82e5\u957f\u671f\u4e0d\u4f7f\u7528\u6216\u5185\u5b58\u6709\u9650\uff0c\u6d4f\u89c8\u5668\u4f1a\u9500\u6bc1\u4e4b\uff0c\u4ee5\u56de\u6536\u5185\u5b58\u3002 fetch \u4e8b\u4ef6 \u00b6 \u5411\u9875\u9762\u53d1\u9001 http \u8bf7\u6c42\u65f6\uff0cService Worker \u53ef\u4ee5\u901a\u8fc7 fetch \u4e8b\u4ef6\u62e6\u622a\u8bf7\u6c42\uff0c\u5e76\u4e14\u7ed9\u51fa\u81ea\u5df1\u7684\u54cd\u5e94\u3002 message \u4e8b\u4ef6 \u00b6 \u9875\u9762\u548c serviceWorker \u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7 postMessage() \u65b9\u6cd5\u53d1\u9001\u6d88\u606f\uff0c\u53d1\u9001\u7684\u6d88\u606f\u53ef\u4ee5\u901a\u8fc7 message \u4e8b\u4ef6\u63a5\u6536\u5230\u3002 3. \u73af\u5883\u548c\u8c03\u8bd5 \u00b6 3.1 HTTPS \u00b6 \u670d\u52a1\u5668\u9700\u8981\u652f\u6301 HTTPS\u3002\u56e0\u4e3a\u901a\u8fc7 Service Worker \u53ef\u4ee5\u52ab\u6301\u8fde\u63a5\uff0c\u4f2a\u9020\u548c\u8fc7\u6ee4\u54cd\u5e94\uff1b\u53ea\u80fd\u5728 HTTPS \u7684\u7f51\u9875\u4e0a\u6ce8\u518c Service Workers\uff0c\u9632\u6b62\u4ee5\u4e0a\u6076\u610f\u7be1\u6539\u884c\u4e3a\u3002 3.2 \u8c03\u8bd5\u5de5\u5177 \u00b6 chrome://inspect/#service-workers : \u67e5\u770b Service workers \u5217\u8868\u3002 chrome://serviceworker-internals/ : \u67e5\u770b Service Worker \u8be6\u7ec6\u4fe1\u606f\u548c\u72b6\u6001\uff0c\u4e14\u8c03\u8bd5\u65f6\u53ef\u6267\u884c unregister\u3001stop\u3001start \u7b49\u64cd\u4f5c\u3002 ChromeDevTools : \u9009\u62e9 Application \u9009\u9879\u5361 > Service Workers, \u53ef\u67e5\u770b Service Worker \u811a\u672c\uff0c\u8bbe\u7f6e\u7f51\u7edc\u72b6\u6001\uff0c\u5305\u62ec offline\uff0c update on reload \u7b49\u3002 3.3 \u79bb\u7ebf\u5b58\u50a8\u6570\u636e\u5efa\u8bae \u00b6 \u5bf9 URL\u5bfb\u5740\u8d44\u6e90 (URL addressable resources)\uff0c\u4f7f\u7528 Cache API \uff08\u8fd9\u662f Service Worker \u7684\u4e00\u90e8\u5206\uff09\u3002\u5bf9\u5176\u4ed6\u6570\u636e\uff0c\u4f7f\u7528 IndexedDB \uff08\u5305\u88f9\u8fdb Promises \uff09\u3002 4. Service Worker \u539f\u7406 \u00b6 \u4ee5\u4e0b\u662f\u901a\u8fc7 Service Worker \u548c Cache API \u5b9e\u73b0\u7684\u4e00\u4e2aURL\u5bfb\u5740\u8d44\u6e90\u7f13\u5b58\u7684 DEMO\u3002\u539f\u6587\u53c2\u9605 service-workers \u3002 4.1 Register a service worker \u00b6 \u9996\u5148\u5728\u9875\u9762\u91cc\u6ce8\u518c service worker \uff0c\u8fd9\u5c31\u544a\u8bc9\u4e86\u6d4f\u89c8\u5668\u4f60\u7684 service worker JavaScript file \u5728\u54ea\u513f\u3002 if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { // Registration was successful console.log('ServiceWorker registration successful with scope: ', registration.scope); }, function(err) { // registration failed :( console.log('ServiceWorker registration failed: ', err); }); }); } You can call register() every time a page loads without concern; the browser will figure out if the service worker is already registered or not and handle it accordingly. \u6ce8\u610f \uff1a service worker file \u5728\u57df\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u8868\u793a the service worker's scope will be the entire origin. \u82e5\u6ce8\u518c\u4e3a /example/sw.js \uff0c\u5219\u8868\u793a service worker \u53ea\u53ef\u89c1 fetch events for pages whose URL starts with /example/ \u3002 4.2 Install a service worker \u00b6 \u6ce8\u518c\u5b8c\u6210\u4e4b\u540e\uff0c\u5728 service worker script \u91cc\u5904\u7406 install \u4e8b\u4ef6\u3002\u5728 install \u4e8b\u4ef6\u7684 callback \u91cc\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a Open a cache. Cache our files. Confirm whether all the required assets are cached or not. var CACHE_NAME = 'my-site-cache-v1'; var urlsToCache = [ '/', '/styles/main.css', '/script/main.js' ]; self.addEventListener('install', function(event) { // Perform install steps event.waitUntil( caches.open(CACHE_NAME) .then(function(cache) { console.log('Opened cache'); return cache.addAll(urlsToCache); }) ); }); event.waitUntil() method \u7684\u53c2\u6570\u4e3a a chain of promises ( caches.open() and cache.addAll() ). \u6253\u5f00\u540d\u4e3a CACHE_NAME \u7684 cache \uff0c\u7136\u540e\u7f13\u5b58 urlsToCache \u6570\u7ec4\u4e2d\u6240\u5217\u7684\u6587\u4ef6\u3002 \u6ce8\u610f \uff1a If any of the files fail to download, then the install step will fail. This allows you to rely on having all the assets that you defined, but does mean you need to be careful with the list of files you decide to cache in the install step. 4.3 Cache and return requests \u00b6 \u5b89\u88c5\u6210\u529f\u4e4b\u540e\uff0c\u5f53\u5237\u65b0\u6216\u8bbf\u95ee\u53e6\u4e00\u4e2a\u9875\u9762\u65f6\uff0cservice worker \u5c06\u5f00\u59cb\u63a5\u6536 fetch \u4e8b\u4ef6\u3002 \u62e6\u622a\u7f51\u7edc\u8bf7\u6c42\uff0c event.respondWith() method \u7684\u53c2\u6570\u4e3a caches.match() \uff0c \u7528\u6765\u5339\u914d\u8bf7\u6c42\u3002\u82e5\u7f13\u5b58\u547d\u4e2d\uff0c\u5219\u8fd4\u56de\u7f13\u5b58\u8d44\u6e90\uff0c\u5426\u5219\uff0c\u8fd4\u56de\u7f51\u7edc\u8bf7\u6c42 fetch \u7684\u7ed3\u679c\u3002 self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } return fetch(event.request); } ) ); }); \u82e5\u60f3\u8981 cache new requests cumulatively\uff0c \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7f13\u5b58 response of the fetch request \u6765\u5b9e\u73b0\u3002 \u6b65\u9aa4\u5982\u4e0b\uff1a Add a callback to .then() on the fetch request. Once we get a response, we perform the following checks: Ensure the response is valid. Check the status is 200 on the response. Make sure the response type is basic , which indicates that it's a request from our origin. This means that requests to third party assets aren't cached as well. If we pass the checks, we clone the response. \u6ce8\u610f \uff1a request \u548c response \u90fd\u662f stream, \u53ea\u80fd\u6d88\u8d39\u4e00\u6b21\u3002\u56e0\u6b64\u5c06\u5b83\u4eec\u514b\u9686\uff0c\u4e00\u4efd\u4f20\u7ed9 cache\uff0c \u4e00\u4efd\u4f20\u7ed9 browser\u3002 self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } // IMPORTANT: Clone the request. A request is a stream and // can only be consumed once. Since we are consuming this // once by cache and once by the browser for fetch, we need // to clone the response. var fetchRequest = event.request.clone(); return fetch(fetchRequest).then( function(response) { // Check if we received a valid response if(!response || response.status !== 200 || response.type !== 'basic') { return response; } // IMPORTANT: Clone the response. A response is a stream // and because we want the browser to consume the response // as well as the cache consuming the response, we need // to clone it so we have two streams. var responseToCache = response.clone(); caches.open(CACHE_NAME) .then(function(cache) { cache.put(event.request, responseToCache); }); return response; } ); }) ); }); 4.4 Update a service worker \u00b6 service worker \u4f55\u65f6\u66f4\u65b0\uff0c\u66f4\u65b0\u6b65\u9aa4\u53c8\u5982\u4f55\uff1f \u8df3\u8f6c\u81f3\u672c\u9875\u65f6\uff0c\u6d4f\u89c8\u5668\u5c1d\u8bd5\u91cd\u65b0\u4e0b\u8f7d service worker JavaScript file\uff0c\u82e5\u4e0e\u5f53\u524d\u4e0d\u540c\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u65b0\u7684\u3002 \u65b0 service worker \u542f\u52a8\uff0c install event \u88ab\u89e6\u53d1\u3002 \u6b64\u65f6\uff0c\u8001 service worker \u4f9d\u65e7\u63a7\u5236\u9875\u9762\uff0c\u65b0 service worker \u8fdb\u5165 waiting \u72b6\u6001\u3002 \u6b64\u9875\u9762\u5173\u95ed\u65f6\uff0c\u8001 service worker \u88ab\u6740\u6b7b\uff0c\u65b0 service worker \u624d\u638c\u63e1\u63a7\u5236\u6743\u3002 \u65b0 service worker \u7684 activate event \u88ab\u89e6\u53d1\u3002 activate \u4e8b\u4ef6\u4f7f\u7528\u7684\u4e00\u4e2a\u573a\u666f\u5c31\u662f\uff0c if you were to wipe out any old caches in the install step\u3002 \u4e3e\u4e2a\u6817\u5b50\uff0c\u6bd4\u5982\u6211\u4eec\u60f3\u5c06 cache \u4e00\u5206\u4e3a\u4e8c 'pages-cache-v1' \u548c 'blog-posts-cache-v1' \u3002\u610f\u5473\u7740\uff0c\u6211\u4eec\u5728 install step \u521b\u5efa\u8fd9\u4e24\u4e2a cache\uff0c \u5728 activate step \u5220\u9664 'my-site-cache-v1' \u3002 self.addEventListener('activate', function(event) { var cacheWhitelist = ['pages-cache-v1', 'blog-posts-cache-v1']; event.waitUntil( caches.keys().then(function(cacheNames) { return Promise.all( cacheNames.map(function(cacheName) { if (cacheWhitelist.indexOf(cacheName) === -1) { return caches.delete(cacheName); } }) ); }) ); }); 4.5 \u9a8c\u8bc1\u6b65\u9aa4 \u00b6 ChromeDevTools \u4e2d Application \u9009\u9879\u5361 > Cache Storage \u67e5\u770b\u7f13\u5b58\u6210\u529f\u4e0e\u5426\u3002 \u82e5\u7f13\u5b58\u6210\u529f\uff0cApplication \u9009\u9879\u5361 > Service Workers \u5c06\u7f51\u7edc\u7f6e\u4e3a offline\u3002 \u91cd\u65b0\u8bbf\u95ee\u9875\u9762\uff0cserver worker \u62e6\u622a\u8bf7\u6c42\uff0c\u7f13\u5b58\u547d\u4e2d\u3002 \u200b DEMO \u5730\u5740\uff0c\u89c1 https://silverbulllet.github.io/ 5. My First Progressive Web App \u00b6 \u4e0b\u8f7d The sample code , \u5305\u542b WeatherApp \u7684\u4ee3\u7801\uff0c\u4e0d\u7528\u8d58\u8ff0\u3002 5.1 Cache the site assets \u00b6 service worker \u6ce8\u518c\u540e\uff0cinstall event \u89e6\u53d1\uff0c \u5728 callback \u5185 cache \u5e94\u7528\u9700\u8981\u7684\u6240\u6709\u8d44\u6e90\u3002 var cacheName = 'my-first-pwapp-assets-v1'; var filesToCache = [ '/my-first-pwapp/', '/my-first-pwapp/index.html', '/my-first-pwapp/scripts/app.js', '/my-first-pwapp/styles/inline.css', '/my-first-pwapp/images/clear.png', '/my-first-pwapp/images/cloudy-scattered-showers.png', '/my-first-pwapp/images/cloudy.png', '/my-first-pwapp/images/fog.png', '/my-first-pwapp/images/ic_add_white_24px.svg', '/my-first-pwapp/images/ic_refresh_white_24px.svg', '/my-first-pwapp/images/partly-cloudy.png', '/my-first-pwapp/images/rain.png', '/my-first-pwapp/images/scattered-showers.png', '/my-first-pwapp/images/sleet.png', '/my-first-pwapp/images/snow.png', '/my-first-pwapp/images/thunderstorm.png', '/my-first-pwapp/images/wind.png' ]; self.addEventListener('install', function(e) { console.log('[ServiceWorker] Install'); e.waitUntil( caches.open(cacheName).then(function(cache) { console.log('[ServiceWorker] Caching app shell'); return cache.addAll(filesToCache); }) ); }); 5.2 Serve the app shell from the cache \u00b6 Service workers \u53ef\u62e6\u622a\u7f51\u7edc\u8bf7\u6c42\uff0c\u5e76\u5728 service worker \u5185\u90e8\u5904\u7406\u3002 self.addEventListener('fetch', function(e) { console.log('[ServiceWorker] Fetch', e.request.url); e.respondWith( caches.match(e.request).then(function(response) { return response || fetch(e.request); }) ); }); 5.3 Use service workers to cache the forecast data \u00b6 \u4f7f\u7528 service worker \u6765 cache \u5929\u6c14\u9884\u62a5\u7684\u6570\u636e\u3002 \u9009\u62e9\u6b63\u786e\u7684**\u7f13\u5b58\u7b56\u7565**\u5f88\u91cd\u8981\uff0cThe cache-first-then-network strategy is ideal for our app. \u8fd9\u6837\u80fd\u5c3d\u53ef\u80fd\u5feb\u7684\u663e\u793a\u83b7\u53d6\u7684\u5929\u6c14\u6570\u636e\uff0c\u800c\u4e14\u80fd\u7f51\u7edc\u8fd4\u56de\u6700\u65b0\u6570\u636e\u65f6\uff0c\u7b2c\u4e00\u65f6\u95f4\u66f4\u65b0\u3002 Cache-first-then-network \u5c06\u89e6\u53d1\u4e24\u4e2a\u5f02\u6b65\u8bf7\u6c42\uff0c\u4e00\u4e2a\u5230\u7f13\u5b58\uff0c\u4e00\u4e2a\u5230\u7f51\u7edc\u3002 5.3.1 \u62e6\u622a\u8bf7\u6c42\uff0c\u7f13\u5b58\u54cd\u5e94 \u00b6 \u68c0\u67e5\u62e6\u622a\u5230\u7684\u8bf7\u6c42\uff0c\u82e5\u8bf7\u6c42\u7684 URL \u4ee5 weather API \u5730\u5740\u5f00\u5934\uff0c\u5219\u7f13\u5b58\u54cd\u5e94\u7684\u514b\u9686\uff0c\u540c\u65f6\u8fd4\u56de\u54cd\u5e94\u3002 var dataCacheName = 'weatherData-v1'; // \u4fee\u6539 fetch event handler \u5982\u4e0b, \u5c06\u62e6\u622a\u5230\u7684\u8bf7\u6c42\u5206\u522b\u5904\u7406 self.addEventListener('fetch', function(e) { console.log('[Service Worker] Fetch', e.request.url); var dataUrl = 'https://query.yahooapis.com/v1/public/yql'; if (e.request.url.indexOf(dataUrl) > -1) { /* * When the request URL contains dataUrl, the app is asking for fresh * weather data. In this case, the service worker always goes to the * network and then caches the response. This is called the \"Cache then * network\" strategy: * https://jakearchibald.com/2014/offline-cookbook/#cache-then-network */ e.respondWith( caches.open(dataCacheName).then(function(cache) { return fetch(e.request).then(function(response){ cache.put(e.request.url, response.clone()); return response; }); }) ); } else { /* * The app is asking for app shell files. In this scenario the app uses the * \"Cache, falling back to the network\" offline strategy: * https://jakearchibald.com/2014/offline-cookbook/#cache-falling-back-to-network */ e.respondWith( caches.match(e.request).then(function(response) { return response || fetch(e.request); }) ); } }); 5.3.2 \u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e \u00b6 app \u53d1\u51fa\u4fe9\u8bf7\u6c42\uff0c\u4e00\u4e2a\u6765\u81ea cache\uff0c\u4e00\u4e2a\u901a\u8fc7 XHR\u3002\u82e5 cache \u5185\u6709\u6570\u636e\uff0c\u5219\u76f4\u63a5\u6e32\u67d3\uff1b\u82e5 XHR \u4ecd\u5728\u7ee7\u7eed\uff0c\u5219\u6e32\u67d3\u6570\u636e\u88ab\u66f4\u65b0\u4e3a weather API \u76f4\u63a5\u83b7\u53d6\u7684\u6570\u636e\u3002 \u5728 app.getForecast() \u5185\u589e\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a // TODO add cache logic here if ('caches' in window) { /* * Check if the service worker has already cached this city's weather * data. If the service worker has the data, then display the cached * data while the app fetches the latest data. */ caches.match(url).then(function(response) { if (response) { response.json().then(function updateFromCache(json) { var results = json.query.results; results.key = key; results.label = label; results.created = json.query.created; app.updateForecastCard(results); }); } }); } 5.3.4 \u6d4b\u8bd5\u9a8c\u8bc1 \u00b6 \u81ea\u6b64\uff0cPWApp \u5df2\u80fd\u5b8c\u5168\u79bb\u7ebf\u5730\u5740\uff0c\u5730\u5740\u89c1 https://silverbulllet.github.io/my-first-pwapp/ \u3002 \u4fdd\u5b58\u82e5\u5e72\u57ce\u5e02\uff0c\u70b9\u51fb\u5237\u65b0\u83b7\u53d6\u6700\u65b0\u6570\u636e\uff0c\u7f6e\u4e3a\u79bb\u7ebf\uff0c\u91cd\u8f7d\u9875\u9762\u3002","title":"PWA \u4e4b Service Worker"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#1","text":"Service Worker \u662f\u4e00\u6bb5**\u72ec\u7acb\u4e8e\u5f53\u524d\u9875\u9762\uff0c\u8fd0\u884c\u4e8e\u6d4f\u89c8\u5668\u540e\u53f0\u8fdb\u7a0b**\u7684\u811a\u672c\u3002 \u6ce8\u610f \uff1a Service Worker \u5f02\u6b65\u8fd0\u884c\uff0c\u4e14\u72ec\u7acb\u4e8e\u5168\u5c40\u4e0a\u4e0b\u6587\u3002 Service Worker \u6ca1\u6709\u64cd\u4f5cDOM\u7684\u6743\u9650\u3002\u4f46\u53ef\u901a\u8fc7 postMessage \u65b9\u6cd5\u4e0eWeb\u9875\u9762\u901a\u4fe1\uff0c\u8ba9\u9875\u9762\u64cd\u4f5cDOM\u3002 Service Worker \u662f\u4e8b\u4ef6\u9a71\u52a8\u3002\u5904\u4e8e Idle \u72b6\u6001\u65f6\uff0c\u968f\u65f6\u4f1a\u88ab\u6d4f\u89c8\u5668\u56de\u6536\uff0c\u4ee5\u8282\u7701\u5185\u5b58\u3002","title":"1. \u6982\u5ff5"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#2","text":"\u7531\u56fe\u53ef\u89c1\uff0c\u4e00\u4e2a Service Worker \u4e00\u751f\u80fd\u7ecf\u5386\u5982\u4e0b\u8fc7\u7a0b\uff1a \u5b89\u88c5\uff1b \u6fc0\u6d3b\uff0c\u53ef\u901a\u8fc7 chrome://inspect/#service-workers \u67e5\u770b\u5230\u5f53\u524d\u8fd0\u884c\u7684service worker\uff1b \u7a7a\u95f2\uff0c\u76d1\u542c fetch \u548c message \u4e8b\u4ef6\uff1b \u9500\u6bc1\uff0c\u82e5\u957f\u671f\u4e0d\u4f7f\u7528\u6216\u5185\u5b58\u6709\u9650\uff0c\u6d4f\u89c8\u5668\u4f1a\u9500\u6bc1\u4e4b\uff0c\u4ee5\u56de\u6536\u5185\u5b58\u3002","title":"2. \u751f\u547d\u5468\u671f"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#fetch","text":"\u5411\u9875\u9762\u53d1\u9001 http \u8bf7\u6c42\u65f6\uff0cService Worker \u53ef\u4ee5\u901a\u8fc7 fetch \u4e8b\u4ef6\u62e6\u622a\u8bf7\u6c42\uff0c\u5e76\u4e14\u7ed9\u51fa\u81ea\u5df1\u7684\u54cd\u5e94\u3002","title":"fetch \u4e8b\u4ef6"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#message","text":"\u9875\u9762\u548c serviceWorker \u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7 postMessage() \u65b9\u6cd5\u53d1\u9001\u6d88\u606f\uff0c\u53d1\u9001\u7684\u6d88\u606f\u53ef\u4ee5\u901a\u8fc7 message \u4e8b\u4ef6\u63a5\u6536\u5230\u3002","title":"message \u4e8b\u4ef6"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#3","text":"","title":"3. \u73af\u5883\u548c\u8c03\u8bd5"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#31-https","text":"\u670d\u52a1\u5668\u9700\u8981\u652f\u6301 HTTPS\u3002\u56e0\u4e3a\u901a\u8fc7 Service Worker \u53ef\u4ee5\u52ab\u6301\u8fde\u63a5\uff0c\u4f2a\u9020\u548c\u8fc7\u6ee4\u54cd\u5e94\uff1b\u53ea\u80fd\u5728 HTTPS \u7684\u7f51\u9875\u4e0a\u6ce8\u518c Service Workers\uff0c\u9632\u6b62\u4ee5\u4e0a\u6076\u610f\u7be1\u6539\u884c\u4e3a\u3002","title":"3.1 HTTPS"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#32","text":"chrome://inspect/#service-workers : \u67e5\u770b Service workers \u5217\u8868\u3002 chrome://serviceworker-internals/ : \u67e5\u770b Service Worker \u8be6\u7ec6\u4fe1\u606f\u548c\u72b6\u6001\uff0c\u4e14\u8c03\u8bd5\u65f6\u53ef\u6267\u884c unregister\u3001stop\u3001start \u7b49\u64cd\u4f5c\u3002 ChromeDevTools : \u9009\u62e9 Application \u9009\u9879\u5361 > Service Workers, \u53ef\u67e5\u770b Service Worker \u811a\u672c\uff0c\u8bbe\u7f6e\u7f51\u7edc\u72b6\u6001\uff0c\u5305\u62ec offline\uff0c update on reload \u7b49\u3002","title":"3.2 \u8c03\u8bd5\u5de5\u5177"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#33","text":"\u5bf9 URL\u5bfb\u5740\u8d44\u6e90 (URL addressable resources)\uff0c\u4f7f\u7528 Cache API \uff08\u8fd9\u662f Service Worker \u7684\u4e00\u90e8\u5206\uff09\u3002\u5bf9\u5176\u4ed6\u6570\u636e\uff0c\u4f7f\u7528 IndexedDB \uff08\u5305\u88f9\u8fdb Promises \uff09\u3002","title":"3.3 \u79bb\u7ebf\u5b58\u50a8\u6570\u636e\u5efa\u8bae"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#4-service-worker","text":"\u4ee5\u4e0b\u662f\u901a\u8fc7 Service Worker \u548c Cache API \u5b9e\u73b0\u7684\u4e00\u4e2aURL\u5bfb\u5740\u8d44\u6e90\u7f13\u5b58\u7684 DEMO\u3002\u539f\u6587\u53c2\u9605 service-workers \u3002","title":"4. Service Worker \u539f\u7406"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#41-register-a-service-worker","text":"\u9996\u5148\u5728\u9875\u9762\u91cc\u6ce8\u518c service worker \uff0c\u8fd9\u5c31\u544a\u8bc9\u4e86\u6d4f\u89c8\u5668\u4f60\u7684 service worker JavaScript file \u5728\u54ea\u513f\u3002 if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { // Registration was successful console.log('ServiceWorker registration successful with scope: ', registration.scope); }, function(err) { // registration failed :( console.log('ServiceWorker registration failed: ', err); }); }); } You can call register() every time a page loads without concern; the browser will figure out if the service worker is already registered or not and handle it accordingly. \u6ce8\u610f \uff1a service worker file \u5728\u57df\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u8868\u793a the service worker's scope will be the entire origin. \u82e5\u6ce8\u518c\u4e3a /example/sw.js \uff0c\u5219\u8868\u793a service worker \u53ea\u53ef\u89c1 fetch events for pages whose URL starts with /example/ \u3002","title":"4.1 Register a service worker"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#42-install-a-service-worker","text":"\u6ce8\u518c\u5b8c\u6210\u4e4b\u540e\uff0c\u5728 service worker script \u91cc\u5904\u7406 install \u4e8b\u4ef6\u3002\u5728 install \u4e8b\u4ef6\u7684 callback \u91cc\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a Open a cache. Cache our files. Confirm whether all the required assets are cached or not. var CACHE_NAME = 'my-site-cache-v1'; var urlsToCache = [ '/', '/styles/main.css', '/script/main.js' ]; self.addEventListener('install', function(event) { // Perform install steps event.waitUntil( caches.open(CACHE_NAME) .then(function(cache) { console.log('Opened cache'); return cache.addAll(urlsToCache); }) ); }); event.waitUntil() method \u7684\u53c2\u6570\u4e3a a chain of promises ( caches.open() and cache.addAll() ). \u6253\u5f00\u540d\u4e3a CACHE_NAME \u7684 cache \uff0c\u7136\u540e\u7f13\u5b58 urlsToCache \u6570\u7ec4\u4e2d\u6240\u5217\u7684\u6587\u4ef6\u3002 \u6ce8\u610f \uff1a If any of the files fail to download, then the install step will fail. This allows you to rely on having all the assets that you defined, but does mean you need to be careful with the list of files you decide to cache in the install step.","title":"4.2 Install a service worker"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#43-cache-and-return-requests","text":"\u5b89\u88c5\u6210\u529f\u4e4b\u540e\uff0c\u5f53\u5237\u65b0\u6216\u8bbf\u95ee\u53e6\u4e00\u4e2a\u9875\u9762\u65f6\uff0cservice worker \u5c06\u5f00\u59cb\u63a5\u6536 fetch \u4e8b\u4ef6\u3002 \u62e6\u622a\u7f51\u7edc\u8bf7\u6c42\uff0c event.respondWith() method \u7684\u53c2\u6570\u4e3a caches.match() \uff0c \u7528\u6765\u5339\u914d\u8bf7\u6c42\u3002\u82e5\u7f13\u5b58\u547d\u4e2d\uff0c\u5219\u8fd4\u56de\u7f13\u5b58\u8d44\u6e90\uff0c\u5426\u5219\uff0c\u8fd4\u56de\u7f51\u7edc\u8bf7\u6c42 fetch \u7684\u7ed3\u679c\u3002 self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } return fetch(event.request); } ) ); }); \u82e5\u60f3\u8981 cache new requests cumulatively\uff0c \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7f13\u5b58 response of the fetch request \u6765\u5b9e\u73b0\u3002 \u6b65\u9aa4\u5982\u4e0b\uff1a Add a callback to .then() on the fetch request. Once we get a response, we perform the following checks: Ensure the response is valid. Check the status is 200 on the response. Make sure the response type is basic , which indicates that it's a request from our origin. This means that requests to third party assets aren't cached as well. If we pass the checks, we clone the response. \u6ce8\u610f \uff1a request \u548c response \u90fd\u662f stream, \u53ea\u80fd\u6d88\u8d39\u4e00\u6b21\u3002\u56e0\u6b64\u5c06\u5b83\u4eec\u514b\u9686\uff0c\u4e00\u4efd\u4f20\u7ed9 cache\uff0c \u4e00\u4efd\u4f20\u7ed9 browser\u3002 self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } // IMPORTANT: Clone the request. A request is a stream and // can only be consumed once. Since we are consuming this // once by cache and once by the browser for fetch, we need // to clone the response. var fetchRequest = event.request.clone(); return fetch(fetchRequest).then( function(response) { // Check if we received a valid response if(!response || response.status !== 200 || response.type !== 'basic') { return response; } // IMPORTANT: Clone the response. A response is a stream // and because we want the browser to consume the response // as well as the cache consuming the response, we need // to clone it so we have two streams. var responseToCache = response.clone(); caches.open(CACHE_NAME) .then(function(cache) { cache.put(event.request, responseToCache); }); return response; } ); }) ); });","title":"4.3 Cache and return requests"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#44-update-a-service-worker","text":"service worker \u4f55\u65f6\u66f4\u65b0\uff0c\u66f4\u65b0\u6b65\u9aa4\u53c8\u5982\u4f55\uff1f \u8df3\u8f6c\u81f3\u672c\u9875\u65f6\uff0c\u6d4f\u89c8\u5668\u5c1d\u8bd5\u91cd\u65b0\u4e0b\u8f7d service worker JavaScript file\uff0c\u82e5\u4e0e\u5f53\u524d\u4e0d\u540c\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u65b0\u7684\u3002 \u65b0 service worker \u542f\u52a8\uff0c install event \u88ab\u89e6\u53d1\u3002 \u6b64\u65f6\uff0c\u8001 service worker \u4f9d\u65e7\u63a7\u5236\u9875\u9762\uff0c\u65b0 service worker \u8fdb\u5165 waiting \u72b6\u6001\u3002 \u6b64\u9875\u9762\u5173\u95ed\u65f6\uff0c\u8001 service worker \u88ab\u6740\u6b7b\uff0c\u65b0 service worker \u624d\u638c\u63e1\u63a7\u5236\u6743\u3002 \u65b0 service worker \u7684 activate event \u88ab\u89e6\u53d1\u3002 activate \u4e8b\u4ef6\u4f7f\u7528\u7684\u4e00\u4e2a\u573a\u666f\u5c31\u662f\uff0c if you were to wipe out any old caches in the install step\u3002 \u4e3e\u4e2a\u6817\u5b50\uff0c\u6bd4\u5982\u6211\u4eec\u60f3\u5c06 cache \u4e00\u5206\u4e3a\u4e8c 'pages-cache-v1' \u548c 'blog-posts-cache-v1' \u3002\u610f\u5473\u7740\uff0c\u6211\u4eec\u5728 install step \u521b\u5efa\u8fd9\u4e24\u4e2a cache\uff0c \u5728 activate step \u5220\u9664 'my-site-cache-v1' \u3002 self.addEventListener('activate', function(event) { var cacheWhitelist = ['pages-cache-v1', 'blog-posts-cache-v1']; event.waitUntil( caches.keys().then(function(cacheNames) { return Promise.all( cacheNames.map(function(cacheName) { if (cacheWhitelist.indexOf(cacheName) === -1) { return caches.delete(cacheName); } }) ); }) ); });","title":"4.4 Update a service worker"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#45","text":"ChromeDevTools \u4e2d Application \u9009\u9879\u5361 > Cache Storage \u67e5\u770b\u7f13\u5b58\u6210\u529f\u4e0e\u5426\u3002 \u82e5\u7f13\u5b58\u6210\u529f\uff0cApplication \u9009\u9879\u5361 > Service Workers \u5c06\u7f51\u7edc\u7f6e\u4e3a offline\u3002 \u91cd\u65b0\u8bbf\u95ee\u9875\u9762\uff0cserver worker \u62e6\u622a\u8bf7\u6c42\uff0c\u7f13\u5b58\u547d\u4e2d\u3002 \u200b DEMO \u5730\u5740\uff0c\u89c1 https://silverbulllet.github.io/","title":"4.5 \u9a8c\u8bc1\u6b65\u9aa4"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#5-my-first-progressive-web-app","text":"\u4e0b\u8f7d The sample code , \u5305\u542b WeatherApp \u7684\u4ee3\u7801\uff0c\u4e0d\u7528\u8d58\u8ff0\u3002","title":"5. My First Progressive Web App"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#51-cache-the-site-assets","text":"service worker \u6ce8\u518c\u540e\uff0cinstall event \u89e6\u53d1\uff0c \u5728 callback \u5185 cache \u5e94\u7528\u9700\u8981\u7684\u6240\u6709\u8d44\u6e90\u3002 var cacheName = 'my-first-pwapp-assets-v1'; var filesToCache = [ '/my-first-pwapp/', '/my-first-pwapp/index.html', '/my-first-pwapp/scripts/app.js', '/my-first-pwapp/styles/inline.css', '/my-first-pwapp/images/clear.png', '/my-first-pwapp/images/cloudy-scattered-showers.png', '/my-first-pwapp/images/cloudy.png', '/my-first-pwapp/images/fog.png', '/my-first-pwapp/images/ic_add_white_24px.svg', '/my-first-pwapp/images/ic_refresh_white_24px.svg', '/my-first-pwapp/images/partly-cloudy.png', '/my-first-pwapp/images/rain.png', '/my-first-pwapp/images/scattered-showers.png', '/my-first-pwapp/images/sleet.png', '/my-first-pwapp/images/snow.png', '/my-first-pwapp/images/thunderstorm.png', '/my-first-pwapp/images/wind.png' ]; self.addEventListener('install', function(e) { console.log('[ServiceWorker] Install'); e.waitUntil( caches.open(cacheName).then(function(cache) { console.log('[ServiceWorker] Caching app shell'); return cache.addAll(filesToCache); }) ); });","title":"5.1 Cache the site assets"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#52-serve-the-app-shell-from-the-cache","text":"Service workers \u53ef\u62e6\u622a\u7f51\u7edc\u8bf7\u6c42\uff0c\u5e76\u5728 service worker \u5185\u90e8\u5904\u7406\u3002 self.addEventListener('fetch', function(e) { console.log('[ServiceWorker] Fetch', e.request.url); e.respondWith( caches.match(e.request).then(function(response) { return response || fetch(e.request); }) ); });","title":"5.2 Serve the app shell from the cache"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#53-use-service-workers-to-cache-the-forecast-data","text":"\u4f7f\u7528 service worker \u6765 cache \u5929\u6c14\u9884\u62a5\u7684\u6570\u636e\u3002 \u9009\u62e9\u6b63\u786e\u7684**\u7f13\u5b58\u7b56\u7565**\u5f88\u91cd\u8981\uff0cThe cache-first-then-network strategy is ideal for our app. \u8fd9\u6837\u80fd\u5c3d\u53ef\u80fd\u5feb\u7684\u663e\u793a\u83b7\u53d6\u7684\u5929\u6c14\u6570\u636e\uff0c\u800c\u4e14\u80fd\u7f51\u7edc\u8fd4\u56de\u6700\u65b0\u6570\u636e\u65f6\uff0c\u7b2c\u4e00\u65f6\u95f4\u66f4\u65b0\u3002 Cache-first-then-network \u5c06\u89e6\u53d1\u4e24\u4e2a\u5f02\u6b65\u8bf7\u6c42\uff0c\u4e00\u4e2a\u5230\u7f13\u5b58\uff0c\u4e00\u4e2a\u5230\u7f51\u7edc\u3002","title":"5.3 Use service workers to cache the forecast data"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#531","text":"\u68c0\u67e5\u62e6\u622a\u5230\u7684\u8bf7\u6c42\uff0c\u82e5\u8bf7\u6c42\u7684 URL \u4ee5 weather API \u5730\u5740\u5f00\u5934\uff0c\u5219\u7f13\u5b58\u54cd\u5e94\u7684\u514b\u9686\uff0c\u540c\u65f6\u8fd4\u56de\u54cd\u5e94\u3002 var dataCacheName = 'weatherData-v1'; // \u4fee\u6539 fetch event handler \u5982\u4e0b, \u5c06\u62e6\u622a\u5230\u7684\u8bf7\u6c42\u5206\u522b\u5904\u7406 self.addEventListener('fetch', function(e) { console.log('[Service Worker] Fetch', e.request.url); var dataUrl = 'https://query.yahooapis.com/v1/public/yql'; if (e.request.url.indexOf(dataUrl) > -1) { /* * When the request URL contains dataUrl, the app is asking for fresh * weather data. In this case, the service worker always goes to the * network and then caches the response. This is called the \"Cache then * network\" strategy: * https://jakearchibald.com/2014/offline-cookbook/#cache-then-network */ e.respondWith( caches.open(dataCacheName).then(function(cache) { return fetch(e.request).then(function(response){ cache.put(e.request.url, response.clone()); return response; }); }) ); } else { /* * The app is asking for app shell files. In this scenario the app uses the * \"Cache, falling back to the network\" offline strategy: * https://jakearchibald.com/2014/offline-cookbook/#cache-falling-back-to-network */ e.respondWith( caches.match(e.request).then(function(response) { return response || fetch(e.request); }) ); } });","title":"5.3.1 \u62e6\u622a\u8bf7\u6c42\uff0c\u7f13\u5b58\u54cd\u5e94"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#532","text":"app \u53d1\u51fa\u4fe9\u8bf7\u6c42\uff0c\u4e00\u4e2a\u6765\u81ea cache\uff0c\u4e00\u4e2a\u901a\u8fc7 XHR\u3002\u82e5 cache \u5185\u6709\u6570\u636e\uff0c\u5219\u76f4\u63a5\u6e32\u67d3\uff1b\u82e5 XHR \u4ecd\u5728\u7ee7\u7eed\uff0c\u5219\u6e32\u67d3\u6570\u636e\u88ab\u66f4\u65b0\u4e3a weather API \u76f4\u63a5\u83b7\u53d6\u7684\u6570\u636e\u3002 \u5728 app.getForecast() \u5185\u589e\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a // TODO add cache logic here if ('caches' in window) { /* * Check if the service worker has already cached this city's weather * data. If the service worker has the data, then display the cached * data while the app fetches the latest data. */ caches.match(url).then(function(response) { if (response) { response.json().then(function updateFromCache(json) { var results = json.query.results; results.key = key; results.label = label; results.created = json.query.created; app.updateForecastCard(results); }); } }); }","title":"5.3.2 \u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e"},{"location":"history/PWA%20%E4%B9%8B%20Service%20Worker/#534","text":"\u81ea\u6b64\uff0cPWApp \u5df2\u80fd\u5b8c\u5168\u79bb\u7ebf\u5730\u5740\uff0c\u5730\u5740\u89c1 https://silverbulllet.github.io/my-first-pwapp/ \u3002 \u4fdd\u5b58\u82e5\u5e72\u57ce\u5e02\uff0c\u70b9\u51fb\u5237\u65b0\u83b7\u53d6\u6700\u65b0\u6570\u636e\uff0c\u7f6e\u4e3a\u79bb\u7ebf\uff0c\u91cd\u8f7d\u9875\u9762\u3002","title":"5.3.4 \u6d4b\u8bd5\u9a8c\u8bc1"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/","text":"\u770b\u8fc7 Vue.js \u7684 Cookbook \u4e4b\u540e\u624d\u660e\u767d\u5176\u5f3a\u5927\u4e4b\u5904\uff0c\u591a\u8bf4\u65e0\u76ca\u3002 1. \u524d\u8a00 \u00b6 1.1 \u6982\u5ff5 \u00b6 Vue.js \u662f\u4e00\u5957\u6784\u5efa\u7528\u6237\u754c\u9762\u7684**\u6e10\u8fdb\u5f0f\u6846\u67b6**\uff0c\u91c7\u7528\u81ea\u5e95\u5411\u4e0a\u589e\u91cf\u5f00\u53d1\u7684\u8bbe\u8ba1\u3002\u4e00\u4e2a\u8f7b\u5de7\uff0c\u9ad8\u6027\u80fd\uff0c\u53ef\u7ec4\u4ef6\u5316\u7684MVVM\u5e93\u3002 1.2 \u517c\u5bb9\u6027 \u00b6 Vue.js \u652f\u6301\u6240\u6709 \u517c\u5bb9 ECMAScript 5 \u7684\u6d4f\u89c8\u5668 \u3002 1.3 \u8f83\u4e4b\u5176\u5b83\u6846\u67b6 \u00b6 \u4e0e React \u6bd4\u8f83 \u00b6 React \u548c Vue \u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\uff0c\u5b83\u4eec\u90fd\u6709\uff1a \u4f7f\u7528 Virtual DOM \u63d0\u4f9b\u4e86\u54cd\u5e94\u5f0f (Reactive) \u548c\u7ec4\u4ef6\u5316 (Composable) \u7684\u89c6\u56fe\u7ec4\u4ef6\u3002 \u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u4fdd\u6301\u5728\u6838\u5fc3\u5e93\uff0c\u800c\u5c06\u5176\u4ed6\u529f\u80fd\u5982\u8def\u7531\u548c\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u4ea4\u7ed9\u76f8\u5173\u7684\u5e93 # \u6846\u67b6\u6027\u80fd \u00b6 \u901a\u5e38 Vue \u4f1a\u6709\u5c11\u91cf\u4f18\u52bf\uff0c\u56e0\u4e3a Vue \u7684 Virtual DOM \u5b9e\u73b0\u76f8\u5bf9\u66f4\u4e3a\u8f7b\u91cf\u4e00\u4e9b\u3002 # \u72b6\u6001\u7ba1\u7406 \u00b6 React \u793e\u533a\u5728\u72b6\u6001\u7ba1\u7406\u65b9\u9762\u975e\u5e38\u6709\u521b\u65b0\u7cbe\u795e (\u6bd4\u5982 Flux\u3001Redux)\uff0c\u800c\u8fd9\u4e9b\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f\u751a\u81f3 Redux \u672c\u8eab \u4e5f\u53ef\u4ee5\u975e\u5e38\u5bb9\u6613\u7684\u96c6\u6210\u5728 Vue \u5e94\u7528\u4e2d\u3002\u5b9e\u9645\u4e0a\uff0cVue \u66f4\u8fdb\u4e00\u6b65\u5730\u91c7\u7528\u4e86\u8fd9\u79cd\u6a21\u5f0f ( Vuex )\uff0c\u66f4\u52a0\u6df1\u5165\u96c6\u6210 Vue \u7684\u72b6\u6001\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\u3002 # \u539f\u751f\u6e32\u67d3 \u00b6 React Native \u80fd\u4f7f\u4f60\u7528\u76f8\u540c\u7684\u7ec4\u4ef6\u6a21\u578b\u7f16\u5199\u6709\u672c\u5730\u6e32\u67d3\u80fd\u529b\u7684 APP (iOS \u548c Android)\u3002\u80fd\u540c\u65f6\u8de8\u591a\u5e73\u53f0\u5f00\u53d1\uff0c\u5bf9\u5f00\u53d1\u8005\u662f\u975e\u5e38\u68d2\u7684\u3002\u76f8\u5e94\u5730\uff0cVue \u548c Weex \u4f1a\u8fdb\u884c\u5b98\u65b9\u5408\u4f5c\uff0cWeex \u662f\u963f\u91cc\u7684\u8de8\u5e73\u53f0\u7528\u6237\u754c\u9762\u5f00\u53d1\u6846\u67b6\uff0cWeex \u7684 JavaScript \u6846\u67b6\u8fd0\u884c\u65f6\u7528\u7684\u5c31\u662f Vue\u3002\u8fd9\u610f\u5473\u7740\u5728 Weex \u7684\u5e2e\u52a9\u4e0b\uff0c\u4f60\u4f7f\u7528 Vue \u8bed\u6cd5\u5f00\u53d1\u7684\u7ec4\u4ef6\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u7aef\uff0c\u8fd8\u80fd\u88ab\u7528\u4e8e\u5f00\u53d1 iOS \u548c Android \u4e0a\u7684\u539f\u751f\u5e94\u7528\u3002 \u4f46\u76ee\u524d\uff0cWeex \u8fd8\u5728\u79ef\u6781\u53d1\u5c55\uff0c\u6210\u719f\u5ea6\u4e5f\u4e0d\u80fd\u548c React Native \u76f8\u6297\u8861\u3002 \u4e0e Angular2 \u6bd4\u8f83 \u00b6 Vue \u7684\u4e00\u4e9b\u8bed\u6cd5\u548c Angular1\u7684\u5f88\u76f8\u4f3c (\u4f8b\u5982 v-if vs ng-if )\uff0c\u56e0\u4e3a Angular1\u662f Vue \u65e9\u671f\u5f00\u53d1\u7684\u7075\u611f\u6765\u6e90\u3002 \u8fd9\u91cc\u53ea\u4e0eAngular2\u505a\u4e00\u4e0b\u6bd4\u8f83\u3002 # TypeScript \u00b6 Angular \u4e8b\u5b9e\u4e0a\u5fc5\u987b\u7528 TypeScript \u6765\u5f00\u53d1\uff0c\u56e0\u4e3a\u5b83\u7684\u6587\u6863\u548c\u5b66\u4e60\u8d44\u6e90\u51e0\u4e4e\u5168\u90e8\u662f\u9762\u5411 TS \u7684\u3002TS \u6709\u5f88\u591a\u597d\u5904\u2014\u2014\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5728\u5927\u89c4\u6a21\u7684\u5e94\u7528\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u540c\u65f6\u5bf9\u4e8e Java \u548c C# \u80cc\u666f\u7684\u5f00\u53d1\u8005\u4e5f\u662f\u975e\u5e38\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\uff0c\u4f46\u5728\u4e0d\u7528 TS \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 Angular \u4f1a\u5f88\u6709\u6311\u6218\u6027\u3002\u5bf9\u4e8eVue\uff0c\u5927\u91cf\u7528\u6237\u4e5f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 Vue + TS \u7684\u7ec4\u5408\u3002 # \u5927\u5c0f \u00b6 \u4e00\u4e2a\u5305\u542b\u4e86 Vuex + Vue Router \u7684 Vue \u9879\u76ee (30kB gzipped) \u76f8\u6bd4\u4f18\u5316\u540e\u7684 angular-cli \u751f\u6210\u7684\u9ed8\u8ba4\u9879\u76ee\u5c3a\u5bf8 (~130kB) \u8fd8\u662f\u8981\u5c0f\u7684\u591a\u3002 # \u7075\u6d3b\u6027 \u00b6 Vue \u76f8\u6bd4\u4e8e Angular \u66f4\u52a0\u7075\u6d3b\uff0cVue \u5b98\u65b9\u63d0\u4f9b\u4e86\u6784\u5efa\u5de5\u5177\u6765\u534f\u52a9\u4f60\u6784\u5efa\u9879\u76ee\uff0c\u4f46\u5b83\u5e76\u4e0d\u9650\u5236\u4f60\u53bb\u5982\u4f55\u7ec4\u7ec7\u4f60\u7684\u5e94\u7528\u4ee3\u7801\u3002 1.4 \u5b89\u88c5 \u00b6 \u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177 \u5b89\u88c5\uff0c\u53ea\u9700\u51e0\u5206\u949f\u5373\u53ef\u521b\u5efa\u5e76\u542f\u52a8\u4e00\u4e2a\u5e26\u70ed\u91cd\u8f7d\u3001\u4fdd\u5b58\u65f6\u9759\u6001\u68c0\u67e5\u4ee5\u53ca\u53ef\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u6784\u5efa\u914d\u7f6e\u7684\u9879\u76ee\uff1a # \u5168\u5c40\u5b89\u88c5 vue-cli $ npm install --global vue-cli # \u521b\u5efa\u4e00\u4e2a\u57fa\u4e8e webpack \u6a21\u677f\u7684\u65b0\u9879\u76ee $ vue init webpack my-project # \u5b89\u88c5\u4f9d\u8d56\uff0c\u8d70\u4f60 $ cd my-project $ npm install $ npm run dev 2. Vue \u5b9e\u4f8b \u00b6 var data = { a: 1 } //\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b var vm = new Vue({ el: '#example', data: data }) 2.1 \u5b9e\u4f8b\u7684\u5c5e\u6027 \u00b6 \u5f53\u4e00\u4e2a Vue \u5b9e\u4f8b\u88ab\u521b\u5efa\u65f6\uff0c\u5b83\u5411 Vue \u7684**\u54cd\u5e94\u5f0f\u7cfb\u7edf**\u4e2d\u52a0\u5165\u4e86\u5176 data \u5bf9\u8c61\u4e2d\u80fd\u627e\u5230\u7684\u6240\u6709\u7684\u5c5e\u6027\u3002 // \u5bf9\u4e8e\u4e0a\u8ff0\u5b9e\u4f8b\uff0cvm \u548c data \u5f15\u7528\u76f8\u540c\u7684\u5bf9\u50cf vm.a === data.a // => true 2.2 \u5b9e\u4f8b\u7684\u65b9\u6cd5 \u00b6 \u9664\u4e86 data \u5c5e\u6027\uff0cVue \u5b9e\u4f8b\u66b4\u9732\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u5b9e\u4f8b\u5c5e\u6027\u4e0e\u65b9\u6cd5\u3002\u5b83\u4eec\u90fd\u6709\u524d\u7f00 $ \uff0c\u4ee5\u4fbf\u4e0e\u7528\u6237\u5b9a\u4e49\u7684\u5c5e\u6027\u533a\u5206\u5f00\u6765\u3002\u4f8b\u5982\uff1a // \u9488\u5bf9\u4e0a\u8ff0\u5b9e\u4f8b vm.$data === data // => true vm.$el === document.getElementById('example') // => true // $watch \u662f\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5 vm.$watch('a', function (newValue, oldValue) { // \u8fd9\u4e2a\u56de\u8c03\u5c06\u5728 `vm.a` \u6539\u53d8\u540e\u8c03\u7528 }) 2.3 \u5b9e\u4f8b\u751f\u547d\u5468\u671f \u00b6 Vue \u5b9e\u4f8b\u5728\u88ab\u521b\u5efa\u4e4b\u524d\u90fd\u8981\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff0c\u4f8b\u5982\u8bbe\u7f6e\u6570\u636e\u76d1\u542c\u3001\u7f16\u8bd1\u6a21\u677f\u3001\u6302\u8f7d\u5b9e\u4f8b\u5230 DOM\u3001\u5728\u6570\u636e\u53d8\u5316\u65f6\u66f4\u65b0 DOM \u7b49\u3002 \u540c\u65f6\u4f1a\u8fd0\u884c\u4e00\u4e9b\u53eb\u505a**\u751f\u547d\u5468\u671f\u94a9\u5b50**\u7684\u51fd\u6570\uff0c\u4f8b\u5982 created \u3001 mounted \u3001 updated \u3001 destroyed \u7b49\uff0c\u94a9\u5b50\u7684 this \u6307\u5411\u8c03\u7528\u5b83\u7684 Vue \u5b9e\u4f8b\u3002 new Vue({ data: { a: 1 }, created: function () { console.log('a is: ' + this.a); // `this` \u6307\u5411 vm \u5b9e\u4f8b } }) \u5b98\u65b9\u63d0\u4f9b\u7684\u5b9e\u4f8b\u7684\u751f\u547d\u5468\u671f\u56fe\uff0c\u5982\u4e0b\u6240\u793a\u3002 3. \u8ba1\u7b97\u5c5e\u6027 \u00b6 \u5728\u6a21\u677f\u4e2d\u653e\u5165\u592a\u591a\u7684\u903b\u8f91\u4f1a\u8ba9\u6a21\u677f\u8fc7\u91cd\u4e14\u96be\u4ee5\u7ef4\u62a4\u3002\u4f8b\u5982\uff1a <div id=\"example\"> {{ message.split('').reverse().join('') }} </div> \u6240\u4ee5\uff0c\u5bf9\u4e8e\u4efb\u4f55\u590d\u6742\u903b\u8f91\uff0c\u90fd\u5e94\u5f53\u4f7f\u7528**\u8ba1\u7b97\u5c5e\u6027**\u3002 <div id=\"example\"> <p>Original message: \"{{ message }}\"</p> <p>Computed reversed message: \"{{ reversedMessage }}\"</p> </div> var vm = new Vue({ el: '#example', data: { message: 'Hello' }, computed: { // \u8ba1\u7b97\u5c5e\u6027\u7684 getter reversedMessage: function () { // `this` \u6307\u5411 vm \u5b9e\u4f8b return this.message.split('').reverse().join('') } } }) vm.reversedMessage \u7684\u503c\u59cb\u7ec8\u53d6\u51b3\u4e8e vm.message \u7684\u503c\u3002\u5f53 vm.message \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u6240\u6709\u4f9d\u8d56 vm.reversedMessage \u7684\u7ed1\u5b9a\u4e5f\u4f1a\u66f4\u65b0\u3002 console.log(vm.reversedMessage) // => 'olleH' vm.message = 'Goodbye' console.log(vm.reversedMessage) // => 'eybdooG' 3.1 \u8ba1\u7b97\u5c5e\u6027 vs \u65b9\u6cd5 \u00b6 \u53ef\u5c06\u51fd\u6570\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5b9e\u73b0\u76f8\u540c\u7ed3\u679c\u3002 // \u5728\u7ec4\u4ef6\u4e2d methods: { reversedMessage: function () { return this.message.split('').reverse().join('') } } // \u5728\u6a21\u677f\u4e2d\u8c03\u7528 <p>{{ reverseMessage() }}</p> \u4e0d\u540c\u7684\u662f**\u8ba1\u7b97\u5c5e\u6027\u662f\u57fa\u4e8e\u5b83\u4eec\u7684\u4f9d\u8d56\u8fdb\u884c\u7f13\u5b58\u7684**\u3002\u8ba1\u7b97\u5c5e\u6027\u53ea\u6709\u5728\u5b83\u7684\u76f8\u5173\u4f9d\u8d56\u53d1\u751f\u6539\u53d8\u65f6\u624d\u4f1a\u91cd\u65b0\u6c42\u503c\u3002\u8fd9\u5c31\u610f\u5473\u7740\u53ea\u8981 message \u8fd8\u6ca1\u6709\u53d1\u751f\u6539\u53d8\uff0c\u591a\u6b21\u8bbf\u95ee reversedMessage \u8ba1\u7b97\u5c5e\u6027\u4f1a\u7acb\u5373\u8fd4\u56de\u4e4b\u524d\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u800c\u4e0d\u5fc5\u518d\u6b21\u6267\u884c\u51fd\u6570\u3002 \u76f8\u53cd\uff0c\u8ba1\u7b97\u5c5e\u6027 vm.now \u5c06\u4e0d\u4f1a\u518d\u66f4\u65b0\uff0c\u56e0\u4e3a Date.now() \u4e0d\u662f\u54cd\u5e94\u5f0f\u4f9d\u8d56\uff1a computed: { now: function () { return Date.now() } } \u82e5\u4e0d\u5e0c\u671b\u6709\u7f13\u5b58\uff0c\u8bf7\u7528\u65b9\u6cd5\u6765\u66ff\u4ee3\u3002 3.2 \u8ba1\u7b97\u5c5e\u6027\u7684setter \u00b6 \u8ba1\u7b97\u5c5e\u6027\u9ed8\u8ba4\u53ea\u6709 getter \uff0c\u4e0d\u8fc7\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a setter \uff1a computed: { fullName: { // getter get: function () { return this.firstName + ' ' + this.lastName }, // setter set: function (newValue) { var names = newValue.split(' ') this.firstName = names[0] this.lastName = names[names.length - 1] } } } // \u8fd0\u884c vm.fullName = 'John Doe' \u65f6\uff0csetter \u4f1a\u88ab\u8c03\u7528\u3002 3.3 \u8ba1\u7b97\u5c5e\u6027 vs \u4fa6\u542c\u5c5e\u6027 \u00b6 \u5f53\u6709\u4e00\u4e9b\u6570\u636e\u9700\u8981\u968f\u7740\u5176\u5b83\u6570\u636e\u53d8\u52a8\u800c\u53d8\u52a8\u65f6\uff0c\u4f60\u5f88\u5bb9\u6613\u6ee5\u7528 watch \u4e2d\u7684**\u4fa6\u542c\u5c5e\u6027**\u3002\u7136\u800c\uff0c\u901a\u5e38\u66f4\u597d\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u8ba1\u7b97\u5c5e\u6027\u800c\u975e\u547d\u4ee4\u5f0f\u7684 watch \u56de\u8c03\u3002 \u7ec6\u60f3\u5982\u4e0b\u4f8b\u5b50\uff1a var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar', fullName: 'Foo Bar' }, watch: { firstName: function (val) { this.fullName = val + ' ' + this.lastName }, lastName: function (val) { this.fullName = this.firstName + ' ' + val } } }) var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar' }, computed: { fullName: function () { return this.firstName + ' ' + this.lastName } } }) 3.4 \u4f55\u65f6\u4f7f\u7528\u4fa6\u542c\u5668 watch \u00b6 \u5f53\u9700\u8981\u5728\u6570\u636e\u53d8\u5316\u65f6\u6267\u884c\u5f02\u6b65\u6216\u5f00\u9500\u8f83\u5927\u7684\u64cd\u4f5c\u65f6\uff0c\u4f7f\u7528\u4fa6\u542c\u5668 \u3002\u4f7f\u7528 watch \u9009\u9879\u5141\u8bb8\u6211\u4eec\u6267\u884c\u5f02\u6b65\u64cd\u4f5c (\u8bbf\u95ee\u4e00\u4e2a API)\uff0c\u9650\u5236\u6211\u4eec\u6267\u884c\u8be5\u64cd\u4f5c\u7684\u9891\u7387\uff0c\u5e76\u5728\u6211\u4eec\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\u524d\uff0c\u8bbe\u7f6e\u4e2d\u95f4\u72b6\u6001\u3002\u8fd9\u4e9b\u90fd\u662f\u8ba1\u7b97\u5c5e\u6027\u65e0\u6cd5\u505a\u5230\u7684\u3002 4. \u7ec4\u4ef6 \u00b6 4.1 \u5168\u5c40\u6ce8\u518c \u00b6 \u8981\u6ce8\u518c\u4e00\u4e2a\u5168\u5c40\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 Vue.component(tagName, options) \uff1a Vue.component('my-component', { // \u9009\u9879 }) 4.2 \u5c40\u90e8\u6ce8\u518c \u00b6 \u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e2a Vue \u5b9e\u4f8b/\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u9009\u9879 components \u6ce8\u518c\u4ec5\u5728\u5176\u4f5c\u7528\u57df\u4e2d\u53ef\u7528\u7684\u7ec4\u4ef6\uff1a var Child = { template: '<div>A custom component!</div>' } new Vue({ // ... components: { // <my-component> \u5c06\u53ea\u5728\u7236\u7ec4\u4ef6\u6a21\u677f\u4e2d\u53ef\u7528 'my-component': Child } }) 4.3 \u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1 \u00b6 \u5728 Vue \u4e2d\uff0c\u7236\u5b50\u7ec4\u4ef6\u7684\u5173\u7cfb\u53ef\u4ee5\u603b\u7ed3\u4e3a prop \u5411\u4e0b\u4f20\u9012\uff0c\u4e8b\u4ef6\u5411\u4e0a\u4f20\u9012 \u3002\u7236\u7ec4\u4ef6\u901a\u8fc7 prop \u7ed9\u5b50\u7ec4\u4ef6\u4e0b\u53d1\u6570\u636e\uff0c\u5b50\u7ec4\u4ef6\u901a\u8fc7**\u4e8b\u4ef6**\u7ed9\u7236\u7ec4\u4ef6\u53d1\u9001\u6d88\u606f\u3002 4.4 Prop \u5355\u9879\u6570\u636e\u6d41 \u00b6 Prop \u662f\u5355\u5411\u7ed1\u5b9a\u7684\uff1a\u5f53\u7236\u7ec4\u4ef6\u7684\u5c5e\u6027\u53d8\u5316\u65f6\uff0c\u5c06\u4f20\u5bfc\u7ed9\u5b50\u7ec4\u4ef6\uff0c\u4f46\u662f\u53cd\u8fc7\u6765\u4e0d\u4f1a\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u5b50\u7ec4\u4ef6\u65e0\u610f\u95f4\u4fee\u6539\u4e86\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\uff0c\u6765\u907f\u514d\u5e94\u7528\u7684\u6570\u636e\u6d41\u53d8\u5f97\u96be\u4ee5\u7406\u89e3\u3002 \u5982\u679c prop \u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4\uff0c\u5728\u5b50\u7ec4\u4ef6\u5185\u90e8\u6539\u53d8\u5b83**\u4f1a\u5f71\u54cd**\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\u3002 4.5 \u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u00b6 \u6bcf\u4e2a Vue \u5b9e\u4f8b\u90fd\u5b9e\u73b0\u4e86 \u4e8b\u4ef6\u63a5\u53e3 \uff0c\u5373\uff1a \u4f7f\u7528 $on(eventName) \u76d1\u542c\u4e8b\u4ef6 \u4f7f\u7528 $emit(eventName) \u89e6\u53d1\u4e8b\u4ef6 vm.$on('test', function (msg) { console.log(msg) }) vm.$emit('test', 'hi') // => \"hi\" 4.6 \u975e\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1 \u00b6 \u975e\u7236\u5b50\u5173\u7cfb\u7684\u4e24\u4e2a\u7ec4\u4ef6\u4e4b\u95f4\u4e5f\u9700\u8981\u901a\u4fe1\u3002\u7b80\u5355\u573a\u666f\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7a7a\u7684 Vue \u5b9e\u4f8b\u4f5c\u4e3a**\u4e8b\u4ef6\u603b\u7ebf**\uff1a var bus = new Vue() // \u89e6\u53d1\u7ec4\u4ef6 A \u4e2d\u7684\u4e8b\u4ef6 bus.$emit('id-selected', 1) // \u5728\u7ec4\u4ef6 B \u521b\u5efa\u7684\u94a9\u5b50\u4e2d\u76d1\u542c\u4e8b\u4ef6 bus.$on('id-selected', function (id) { // ... }) \u590d\u6742\u573a\u666f\u4e0b\uff0c\u5e94\u8be5\u4f7f\u7528\u4e13\u95e8\u7684**\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f**\uff0c\u5982vuex\u3002 4.7 \u52a8\u6001\u7ec4\u4ef6 \u00b6 \u901a\u8fc7\u4f7f\u7528**\u4fdd\u7559\u7684 <component> \u5143\u7d20**\uff0c\u52a8\u6001\u5730\u7ed1\u5b9a\u5230\u5b83\u7684 is \u7279\u6027\uff0c\u6211\u4eec\u8ba9\u591a\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u6302\u8f7d\u70b9\uff0c\u5e76\u52a8\u6001\u5207\u6362\uff1a var vm = new Vue({ el: '#example', data: { currentView: 'home' }, components: { home: { /* ... */ }, posts: { /* ... */ }, archive: { /* ... */ } } }) <component v-bind:is=\"currentView\"> <!-- \u7ec4\u4ef6\u5728 vm.currentview \u53d8\u5316\u65f6\u6539\u53d8\uff01 --> </component> 4.8 \u5b50\u7ec4\u7684\u5f15\u7528 \u00b6 <div id=\"parent\"> <user-profile ref=\"profile\"></user-profile> </div> var parent = new Vue({ el: '#parent' }) // \u8bbf\u95ee\u5b50\u7ec4\u4ef6\u5b9e\u4f8b var child = parent.$refs.profile $refs \u53ea\u5728\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u540e\u624d\u586b\u5145\uff0c\u5b83\u662f\u975e\u54cd\u5e94\u5f0f\u7684\uff0c\u5e94\u907f\u514d\u5728\u6a21\u677f\u6216\u8ba1\u7b97\u5c5e\u6027\u4e2d\u4f7f\u7528 $refs 4.9 \u5f02\u6b65\u7ec4\u4ef6 \u00b6 Vue.js \u5141\u8bb8\u5c06\u7ec4\u4ef6\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5de5\u5382\u51fd\u6570\uff0c\u5f02\u6b65\u5730\u89e3\u6790\u7ec4\u4ef6\u7684\u5b9a\u4e49\u3002Vue.js \u53ea\u5728\u7ec4\u4ef6\u9700\u8981\u6e32\u67d3\u65f6\u89e6\u53d1\u5de5\u5382\u51fd\u6570\uff0c\u5e76\u4e14\u628a\u7ed3\u679c\u7f13\u5b58\u8d77\u6765\uff0c\u7528\u4e8e\u540e\u9762\u7684\u518d\u6b21\u6e32\u67d3\u3002\u4f8b\u5982\uff1a Vue.component('async-example', function (resolve, reject) { setTimeout(function () { // \u5c06\u7ec4\u4ef6\u5b9a\u4e49\u4f20\u5165 resolve \u56de\u8c03\u51fd\u6570 resolve({ template: '<div>I am async!</div>' }) }, 1000) }) 4.10 \u9ad8\u7ea7\u5f02\u6b65\u7ec4\u4ef6 \u00b6 const AsyncComp = () => ({ // \u9700\u8981\u52a0\u8f7d\u7684\u7ec4\u4ef6\u3002\u5e94\u5f53\u662f\u4e00\u4e2a Promise component: import('./MyComp.vue'), // \u52a0\u8f7d\u4e2d\u5e94\u5f53\u6e32\u67d3\u7684\u7ec4\u4ef6 loading: LoadingComp, // \u51fa\u9519\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6 error: ErrorComp, // \u6e32\u67d3\u52a0\u8f7d\u4e2d\u7ec4\u4ef6\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002\u9ed8\u8ba4\uff1a200ms\u3002 delay: 200, // \u6700\u957f\u7b49\u5f85\u65f6\u95f4\u3002\u8d85\u51fa\u6b64\u65f6\u95f4\u5219\u6e32\u67d3\u9519\u8bef\u7ec4\u4ef6\u3002\u9ed8\u8ba4\uff1aInfinity timeout: 3000 })","title":"Vuejs \u5b66\u4e60\u7b14\u8bb0\u4e4b\u57fa\u7840\u7bc7\uff08\u4e0a\uff09"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#1","text":"","title":"1. \u524d\u8a00"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#11","text":"Vue.js \u662f\u4e00\u5957\u6784\u5efa\u7528\u6237\u754c\u9762\u7684**\u6e10\u8fdb\u5f0f\u6846\u67b6**\uff0c\u91c7\u7528\u81ea\u5e95\u5411\u4e0a\u589e\u91cf\u5f00\u53d1\u7684\u8bbe\u8ba1\u3002\u4e00\u4e2a\u8f7b\u5de7\uff0c\u9ad8\u6027\u80fd\uff0c\u53ef\u7ec4\u4ef6\u5316\u7684MVVM\u5e93\u3002","title":"1.1 \u6982\u5ff5"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#12","text":"Vue.js \u652f\u6301\u6240\u6709 \u517c\u5bb9 ECMAScript 5 \u7684\u6d4f\u89c8\u5668 \u3002","title":"1.2 \u517c\u5bb9\u6027"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#13","text":"","title":"1.3 \u8f83\u4e4b\u5176\u5b83\u6846\u67b6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#react","text":"React \u548c Vue \u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\uff0c\u5b83\u4eec\u90fd\u6709\uff1a \u4f7f\u7528 Virtual DOM \u63d0\u4f9b\u4e86\u54cd\u5e94\u5f0f (Reactive) \u548c\u7ec4\u4ef6\u5316 (Composable) \u7684\u89c6\u56fe\u7ec4\u4ef6\u3002 \u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u4fdd\u6301\u5728\u6838\u5fc3\u5e93\uff0c\u800c\u5c06\u5176\u4ed6\u529f\u80fd\u5982\u8def\u7531\u548c\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u4ea4\u7ed9\u76f8\u5173\u7684\u5e93","title":"\u4e0e React \u6bd4\u8f83"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#_1","text":"\u901a\u5e38 Vue \u4f1a\u6709\u5c11\u91cf\u4f18\u52bf\uff0c\u56e0\u4e3a Vue \u7684 Virtual DOM \u5b9e\u73b0\u76f8\u5bf9\u66f4\u4e3a\u8f7b\u91cf\u4e00\u4e9b\u3002","title":"# \u6846\u67b6\u6027\u80fd"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#_2","text":"React \u793e\u533a\u5728\u72b6\u6001\u7ba1\u7406\u65b9\u9762\u975e\u5e38\u6709\u521b\u65b0\u7cbe\u795e (\u6bd4\u5982 Flux\u3001Redux)\uff0c\u800c\u8fd9\u4e9b\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f\u751a\u81f3 Redux \u672c\u8eab \u4e5f\u53ef\u4ee5\u975e\u5e38\u5bb9\u6613\u7684\u96c6\u6210\u5728 Vue \u5e94\u7528\u4e2d\u3002\u5b9e\u9645\u4e0a\uff0cVue \u66f4\u8fdb\u4e00\u6b65\u5730\u91c7\u7528\u4e86\u8fd9\u79cd\u6a21\u5f0f ( Vuex )\uff0c\u66f4\u52a0\u6df1\u5165\u96c6\u6210 Vue \u7684\u72b6\u6001\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\u3002","title":"# \u72b6\u6001\u7ba1\u7406"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#_3","text":"React Native \u80fd\u4f7f\u4f60\u7528\u76f8\u540c\u7684\u7ec4\u4ef6\u6a21\u578b\u7f16\u5199\u6709\u672c\u5730\u6e32\u67d3\u80fd\u529b\u7684 APP (iOS \u548c Android)\u3002\u80fd\u540c\u65f6\u8de8\u591a\u5e73\u53f0\u5f00\u53d1\uff0c\u5bf9\u5f00\u53d1\u8005\u662f\u975e\u5e38\u68d2\u7684\u3002\u76f8\u5e94\u5730\uff0cVue \u548c Weex \u4f1a\u8fdb\u884c\u5b98\u65b9\u5408\u4f5c\uff0cWeex \u662f\u963f\u91cc\u7684\u8de8\u5e73\u53f0\u7528\u6237\u754c\u9762\u5f00\u53d1\u6846\u67b6\uff0cWeex \u7684 JavaScript \u6846\u67b6\u8fd0\u884c\u65f6\u7528\u7684\u5c31\u662f Vue\u3002\u8fd9\u610f\u5473\u7740\u5728 Weex \u7684\u5e2e\u52a9\u4e0b\uff0c\u4f60\u4f7f\u7528 Vue \u8bed\u6cd5\u5f00\u53d1\u7684\u7ec4\u4ef6\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u7aef\uff0c\u8fd8\u80fd\u88ab\u7528\u4e8e\u5f00\u53d1 iOS \u548c Android \u4e0a\u7684\u539f\u751f\u5e94\u7528\u3002 \u4f46\u76ee\u524d\uff0cWeex \u8fd8\u5728\u79ef\u6781\u53d1\u5c55\uff0c\u6210\u719f\u5ea6\u4e5f\u4e0d\u80fd\u548c React Native \u76f8\u6297\u8861\u3002","title":"# \u539f\u751f\u6e32\u67d3"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#angular2","text":"Vue \u7684\u4e00\u4e9b\u8bed\u6cd5\u548c Angular1\u7684\u5f88\u76f8\u4f3c (\u4f8b\u5982 v-if vs ng-if )\uff0c\u56e0\u4e3a Angular1\u662f Vue \u65e9\u671f\u5f00\u53d1\u7684\u7075\u611f\u6765\u6e90\u3002 \u8fd9\u91cc\u53ea\u4e0eAngular2\u505a\u4e00\u4e0b\u6bd4\u8f83\u3002","title":"\u4e0e Angular2 \u6bd4\u8f83"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#typescript","text":"Angular \u4e8b\u5b9e\u4e0a\u5fc5\u987b\u7528 TypeScript \u6765\u5f00\u53d1\uff0c\u56e0\u4e3a\u5b83\u7684\u6587\u6863\u548c\u5b66\u4e60\u8d44\u6e90\u51e0\u4e4e\u5168\u90e8\u662f\u9762\u5411 TS \u7684\u3002TS \u6709\u5f88\u591a\u597d\u5904\u2014\u2014\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5728\u5927\u89c4\u6a21\u7684\u5e94\u7528\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u540c\u65f6\u5bf9\u4e8e Java \u548c C# \u80cc\u666f\u7684\u5f00\u53d1\u8005\u4e5f\u662f\u975e\u5e38\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\uff0c\u4f46\u5728\u4e0d\u7528 TS \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 Angular \u4f1a\u5f88\u6709\u6311\u6218\u6027\u3002\u5bf9\u4e8eVue\uff0c\u5927\u91cf\u7528\u6237\u4e5f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 Vue + TS \u7684\u7ec4\u5408\u3002","title":"# TypeScript"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#_4","text":"\u4e00\u4e2a\u5305\u542b\u4e86 Vuex + Vue Router \u7684 Vue \u9879\u76ee (30kB gzipped) \u76f8\u6bd4\u4f18\u5316\u540e\u7684 angular-cli \u751f\u6210\u7684\u9ed8\u8ba4\u9879\u76ee\u5c3a\u5bf8 (~130kB) \u8fd8\u662f\u8981\u5c0f\u7684\u591a\u3002","title":"# \u5927\u5c0f"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#_5","text":"Vue \u76f8\u6bd4\u4e8e Angular \u66f4\u52a0\u7075\u6d3b\uff0cVue \u5b98\u65b9\u63d0\u4f9b\u4e86\u6784\u5efa\u5de5\u5177\u6765\u534f\u52a9\u4f60\u6784\u5efa\u9879\u76ee\uff0c\u4f46\u5b83\u5e76\u4e0d\u9650\u5236\u4f60\u53bb\u5982\u4f55\u7ec4\u7ec7\u4f60\u7684\u5e94\u7528\u4ee3\u7801\u3002","title":"# \u7075\u6d3b\u6027"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#14","text":"\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177 \u5b89\u88c5\uff0c\u53ea\u9700\u51e0\u5206\u949f\u5373\u53ef\u521b\u5efa\u5e76\u542f\u52a8\u4e00\u4e2a\u5e26\u70ed\u91cd\u8f7d\u3001\u4fdd\u5b58\u65f6\u9759\u6001\u68c0\u67e5\u4ee5\u53ca\u53ef\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u6784\u5efa\u914d\u7f6e\u7684\u9879\u76ee\uff1a # \u5168\u5c40\u5b89\u88c5 vue-cli $ npm install --global vue-cli # \u521b\u5efa\u4e00\u4e2a\u57fa\u4e8e webpack \u6a21\u677f\u7684\u65b0\u9879\u76ee $ vue init webpack my-project # \u5b89\u88c5\u4f9d\u8d56\uff0c\u8d70\u4f60 $ cd my-project $ npm install $ npm run dev","title":"1.4 \u5b89\u88c5"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#2-vue","text":"var data = { a: 1 } //\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b var vm = new Vue({ el: '#example', data: data })","title":"2.  Vue \u5b9e\u4f8b"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#21","text":"\u5f53\u4e00\u4e2a Vue \u5b9e\u4f8b\u88ab\u521b\u5efa\u65f6\uff0c\u5b83\u5411 Vue \u7684**\u54cd\u5e94\u5f0f\u7cfb\u7edf**\u4e2d\u52a0\u5165\u4e86\u5176 data \u5bf9\u8c61\u4e2d\u80fd\u627e\u5230\u7684\u6240\u6709\u7684\u5c5e\u6027\u3002 // \u5bf9\u4e8e\u4e0a\u8ff0\u5b9e\u4f8b\uff0cvm \u548c data \u5f15\u7528\u76f8\u540c\u7684\u5bf9\u50cf vm.a === data.a // => true","title":"2.1 \u5b9e\u4f8b\u7684\u5c5e\u6027"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#22","text":"\u9664\u4e86 data \u5c5e\u6027\uff0cVue \u5b9e\u4f8b\u66b4\u9732\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u5b9e\u4f8b\u5c5e\u6027\u4e0e\u65b9\u6cd5\u3002\u5b83\u4eec\u90fd\u6709\u524d\u7f00 $ \uff0c\u4ee5\u4fbf\u4e0e\u7528\u6237\u5b9a\u4e49\u7684\u5c5e\u6027\u533a\u5206\u5f00\u6765\u3002\u4f8b\u5982\uff1a // \u9488\u5bf9\u4e0a\u8ff0\u5b9e\u4f8b vm.$data === data // => true vm.$el === document.getElementById('example') // => true // $watch \u662f\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5 vm.$watch('a', function (newValue, oldValue) { // \u8fd9\u4e2a\u56de\u8c03\u5c06\u5728 `vm.a` \u6539\u53d8\u540e\u8c03\u7528 })","title":"2.2 \u5b9e\u4f8b\u7684\u65b9\u6cd5"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#23","text":"Vue \u5b9e\u4f8b\u5728\u88ab\u521b\u5efa\u4e4b\u524d\u90fd\u8981\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff0c\u4f8b\u5982\u8bbe\u7f6e\u6570\u636e\u76d1\u542c\u3001\u7f16\u8bd1\u6a21\u677f\u3001\u6302\u8f7d\u5b9e\u4f8b\u5230 DOM\u3001\u5728\u6570\u636e\u53d8\u5316\u65f6\u66f4\u65b0 DOM \u7b49\u3002 \u540c\u65f6\u4f1a\u8fd0\u884c\u4e00\u4e9b\u53eb\u505a**\u751f\u547d\u5468\u671f\u94a9\u5b50**\u7684\u51fd\u6570\uff0c\u4f8b\u5982 created \u3001 mounted \u3001 updated \u3001 destroyed \u7b49\uff0c\u94a9\u5b50\u7684 this \u6307\u5411\u8c03\u7528\u5b83\u7684 Vue \u5b9e\u4f8b\u3002 new Vue({ data: { a: 1 }, created: function () { console.log('a is: ' + this.a); // `this` \u6307\u5411 vm \u5b9e\u4f8b } }) \u5b98\u65b9\u63d0\u4f9b\u7684\u5b9e\u4f8b\u7684\u751f\u547d\u5468\u671f\u56fe\uff0c\u5982\u4e0b\u6240\u793a\u3002","title":"2.3 \u5b9e\u4f8b\u751f\u547d\u5468\u671f"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#3","text":"\u5728\u6a21\u677f\u4e2d\u653e\u5165\u592a\u591a\u7684\u903b\u8f91\u4f1a\u8ba9\u6a21\u677f\u8fc7\u91cd\u4e14\u96be\u4ee5\u7ef4\u62a4\u3002\u4f8b\u5982\uff1a <div id=\"example\"> {{ message.split('').reverse().join('') }} </div> \u6240\u4ee5\uff0c\u5bf9\u4e8e\u4efb\u4f55\u590d\u6742\u903b\u8f91\uff0c\u90fd\u5e94\u5f53\u4f7f\u7528**\u8ba1\u7b97\u5c5e\u6027**\u3002 <div id=\"example\"> <p>Original message: \"{{ message }}\"</p> <p>Computed reversed message: \"{{ reversedMessage }}\"</p> </div> var vm = new Vue({ el: '#example', data: { message: 'Hello' }, computed: { // \u8ba1\u7b97\u5c5e\u6027\u7684 getter reversedMessage: function () { // `this` \u6307\u5411 vm \u5b9e\u4f8b return this.message.split('').reverse().join('') } } }) vm.reversedMessage \u7684\u503c\u59cb\u7ec8\u53d6\u51b3\u4e8e vm.message \u7684\u503c\u3002\u5f53 vm.message \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u6240\u6709\u4f9d\u8d56 vm.reversedMessage \u7684\u7ed1\u5b9a\u4e5f\u4f1a\u66f4\u65b0\u3002 console.log(vm.reversedMessage) // => 'olleH' vm.message = 'Goodbye' console.log(vm.reversedMessage) // => 'eybdooG'","title":"3. \u8ba1\u7b97\u5c5e\u6027"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#31-vs","text":"\u53ef\u5c06\u51fd\u6570\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5b9e\u73b0\u76f8\u540c\u7ed3\u679c\u3002 // \u5728\u7ec4\u4ef6\u4e2d methods: { reversedMessage: function () { return this.message.split('').reverse().join('') } } // \u5728\u6a21\u677f\u4e2d\u8c03\u7528 <p>{{ reverseMessage() }}</p> \u4e0d\u540c\u7684\u662f**\u8ba1\u7b97\u5c5e\u6027\u662f\u57fa\u4e8e\u5b83\u4eec\u7684\u4f9d\u8d56\u8fdb\u884c\u7f13\u5b58\u7684**\u3002\u8ba1\u7b97\u5c5e\u6027\u53ea\u6709\u5728\u5b83\u7684\u76f8\u5173\u4f9d\u8d56\u53d1\u751f\u6539\u53d8\u65f6\u624d\u4f1a\u91cd\u65b0\u6c42\u503c\u3002\u8fd9\u5c31\u610f\u5473\u7740\u53ea\u8981 message \u8fd8\u6ca1\u6709\u53d1\u751f\u6539\u53d8\uff0c\u591a\u6b21\u8bbf\u95ee reversedMessage \u8ba1\u7b97\u5c5e\u6027\u4f1a\u7acb\u5373\u8fd4\u56de\u4e4b\u524d\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u800c\u4e0d\u5fc5\u518d\u6b21\u6267\u884c\u51fd\u6570\u3002 \u76f8\u53cd\uff0c\u8ba1\u7b97\u5c5e\u6027 vm.now \u5c06\u4e0d\u4f1a\u518d\u66f4\u65b0\uff0c\u56e0\u4e3a Date.now() \u4e0d\u662f\u54cd\u5e94\u5f0f\u4f9d\u8d56\uff1a computed: { now: function () { return Date.now() } } \u82e5\u4e0d\u5e0c\u671b\u6709\u7f13\u5b58\uff0c\u8bf7\u7528\u65b9\u6cd5\u6765\u66ff\u4ee3\u3002","title":"3.1 \u8ba1\u7b97\u5c5e\u6027 vs \u65b9\u6cd5"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#32-setter","text":"\u8ba1\u7b97\u5c5e\u6027\u9ed8\u8ba4\u53ea\u6709 getter \uff0c\u4e0d\u8fc7\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a setter \uff1a computed: { fullName: { // getter get: function () { return this.firstName + ' ' + this.lastName }, // setter set: function (newValue) { var names = newValue.split(' ') this.firstName = names[0] this.lastName = names[names.length - 1] } } } // \u8fd0\u884c vm.fullName = 'John Doe' \u65f6\uff0csetter \u4f1a\u88ab\u8c03\u7528\u3002","title":"3.2 \u8ba1\u7b97\u5c5e\u6027\u7684setter"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#33-vs","text":"\u5f53\u6709\u4e00\u4e9b\u6570\u636e\u9700\u8981\u968f\u7740\u5176\u5b83\u6570\u636e\u53d8\u52a8\u800c\u53d8\u52a8\u65f6\uff0c\u4f60\u5f88\u5bb9\u6613\u6ee5\u7528 watch \u4e2d\u7684**\u4fa6\u542c\u5c5e\u6027**\u3002\u7136\u800c\uff0c\u901a\u5e38\u66f4\u597d\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u8ba1\u7b97\u5c5e\u6027\u800c\u975e\u547d\u4ee4\u5f0f\u7684 watch \u56de\u8c03\u3002 \u7ec6\u60f3\u5982\u4e0b\u4f8b\u5b50\uff1a var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar', fullName: 'Foo Bar' }, watch: { firstName: function (val) { this.fullName = val + ' ' + this.lastName }, lastName: function (val) { this.fullName = this.firstName + ' ' + val } } }) var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar' }, computed: { fullName: function () { return this.firstName + ' ' + this.lastName } } })","title":"3.3 \u8ba1\u7b97\u5c5e\u6027 vs \u4fa6\u542c\u5c5e\u6027"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#34-watch","text":"\u5f53\u9700\u8981\u5728\u6570\u636e\u53d8\u5316\u65f6\u6267\u884c\u5f02\u6b65\u6216\u5f00\u9500\u8f83\u5927\u7684\u64cd\u4f5c\u65f6\uff0c\u4f7f\u7528\u4fa6\u542c\u5668 \u3002\u4f7f\u7528 watch \u9009\u9879\u5141\u8bb8\u6211\u4eec\u6267\u884c\u5f02\u6b65\u64cd\u4f5c (\u8bbf\u95ee\u4e00\u4e2a API)\uff0c\u9650\u5236\u6211\u4eec\u6267\u884c\u8be5\u64cd\u4f5c\u7684\u9891\u7387\uff0c\u5e76\u5728\u6211\u4eec\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\u524d\uff0c\u8bbe\u7f6e\u4e2d\u95f4\u72b6\u6001\u3002\u8fd9\u4e9b\u90fd\u662f\u8ba1\u7b97\u5c5e\u6027\u65e0\u6cd5\u505a\u5230\u7684\u3002","title":"3.4 \u4f55\u65f6\u4f7f\u7528\u4fa6\u542c\u5668 watch"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#4","text":"","title":"4. \u7ec4\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#41","text":"\u8981\u6ce8\u518c\u4e00\u4e2a\u5168\u5c40\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 Vue.component(tagName, options) \uff1a Vue.component('my-component', { // \u9009\u9879 })","title":"4.1 \u5168\u5c40\u6ce8\u518c"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#42","text":"\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e2a Vue \u5b9e\u4f8b/\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u9009\u9879 components \u6ce8\u518c\u4ec5\u5728\u5176\u4f5c\u7528\u57df\u4e2d\u53ef\u7528\u7684\u7ec4\u4ef6\uff1a var Child = { template: '<div>A custom component!</div>' } new Vue({ // ... components: { // <my-component> \u5c06\u53ea\u5728\u7236\u7ec4\u4ef6\u6a21\u677f\u4e2d\u53ef\u7528 'my-component': Child } })","title":"4.2 \u5c40\u90e8\u6ce8\u518c"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#43","text":"\u5728 Vue \u4e2d\uff0c\u7236\u5b50\u7ec4\u4ef6\u7684\u5173\u7cfb\u53ef\u4ee5\u603b\u7ed3\u4e3a prop \u5411\u4e0b\u4f20\u9012\uff0c\u4e8b\u4ef6\u5411\u4e0a\u4f20\u9012 \u3002\u7236\u7ec4\u4ef6\u901a\u8fc7 prop \u7ed9\u5b50\u7ec4\u4ef6\u4e0b\u53d1\u6570\u636e\uff0c\u5b50\u7ec4\u4ef6\u901a\u8fc7**\u4e8b\u4ef6**\u7ed9\u7236\u7ec4\u4ef6\u53d1\u9001\u6d88\u606f\u3002","title":"4.3 \u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#44-prop","text":"Prop \u662f\u5355\u5411\u7ed1\u5b9a\u7684\uff1a\u5f53\u7236\u7ec4\u4ef6\u7684\u5c5e\u6027\u53d8\u5316\u65f6\uff0c\u5c06\u4f20\u5bfc\u7ed9\u5b50\u7ec4\u4ef6\uff0c\u4f46\u662f\u53cd\u8fc7\u6765\u4e0d\u4f1a\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u5b50\u7ec4\u4ef6\u65e0\u610f\u95f4\u4fee\u6539\u4e86\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\uff0c\u6765\u907f\u514d\u5e94\u7528\u7684\u6570\u636e\u6d41\u53d8\u5f97\u96be\u4ee5\u7406\u89e3\u3002 \u5982\u679c prop \u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4\uff0c\u5728\u5b50\u7ec4\u4ef6\u5185\u90e8\u6539\u53d8\u5b83**\u4f1a\u5f71\u54cd**\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\u3002","title":"4.4 Prop \u5355\u9879\u6570\u636e\u6d41"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#45","text":"\u6bcf\u4e2a Vue \u5b9e\u4f8b\u90fd\u5b9e\u73b0\u4e86 \u4e8b\u4ef6\u63a5\u53e3 \uff0c\u5373\uff1a \u4f7f\u7528 $on(eventName) \u76d1\u542c\u4e8b\u4ef6 \u4f7f\u7528 $emit(eventName) \u89e6\u53d1\u4e8b\u4ef6 vm.$on('test', function (msg) { console.log(msg) }) vm.$emit('test', 'hi') // => \"hi\"","title":"4.5 \u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#46","text":"\u975e\u7236\u5b50\u5173\u7cfb\u7684\u4e24\u4e2a\u7ec4\u4ef6\u4e4b\u95f4\u4e5f\u9700\u8981\u901a\u4fe1\u3002\u7b80\u5355\u573a\u666f\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7a7a\u7684 Vue \u5b9e\u4f8b\u4f5c\u4e3a**\u4e8b\u4ef6\u603b\u7ebf**\uff1a var bus = new Vue() // \u89e6\u53d1\u7ec4\u4ef6 A \u4e2d\u7684\u4e8b\u4ef6 bus.$emit('id-selected', 1) // \u5728\u7ec4\u4ef6 B \u521b\u5efa\u7684\u94a9\u5b50\u4e2d\u76d1\u542c\u4e8b\u4ef6 bus.$on('id-selected', function (id) { // ... }) \u590d\u6742\u573a\u666f\u4e0b\uff0c\u5e94\u8be5\u4f7f\u7528\u4e13\u95e8\u7684**\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f**\uff0c\u5982vuex\u3002","title":"4.6 \u975e\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#47","text":"\u901a\u8fc7\u4f7f\u7528**\u4fdd\u7559\u7684 <component> \u5143\u7d20**\uff0c\u52a8\u6001\u5730\u7ed1\u5b9a\u5230\u5b83\u7684 is \u7279\u6027\uff0c\u6211\u4eec\u8ba9\u591a\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u6302\u8f7d\u70b9\uff0c\u5e76\u52a8\u6001\u5207\u6362\uff1a var vm = new Vue({ el: '#example', data: { currentView: 'home' }, components: { home: { /* ... */ }, posts: { /* ... */ }, archive: { /* ... */ } } }) <component v-bind:is=\"currentView\"> <!-- \u7ec4\u4ef6\u5728 vm.currentview \u53d8\u5316\u65f6\u6539\u53d8\uff01 --> </component>","title":"4.7 \u52a8\u6001\u7ec4\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#48","text":"<div id=\"parent\"> <user-profile ref=\"profile\"></user-profile> </div> var parent = new Vue({ el: '#parent' }) // \u8bbf\u95ee\u5b50\u7ec4\u4ef6\u5b9e\u4f8b var child = parent.$refs.profile $refs \u53ea\u5728\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u540e\u624d\u586b\u5145\uff0c\u5b83\u662f\u975e\u54cd\u5e94\u5f0f\u7684\uff0c\u5e94\u907f\u514d\u5728\u6a21\u677f\u6216\u8ba1\u7b97\u5c5e\u6027\u4e2d\u4f7f\u7528 $refs","title":"4.8 \u5b50\u7ec4\u7684\u5f15\u7528"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#49","text":"Vue.js \u5141\u8bb8\u5c06\u7ec4\u4ef6\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5de5\u5382\u51fd\u6570\uff0c\u5f02\u6b65\u5730\u89e3\u6790\u7ec4\u4ef6\u7684\u5b9a\u4e49\u3002Vue.js \u53ea\u5728\u7ec4\u4ef6\u9700\u8981\u6e32\u67d3\u65f6\u89e6\u53d1\u5de5\u5382\u51fd\u6570\uff0c\u5e76\u4e14\u628a\u7ed3\u679c\u7f13\u5b58\u8d77\u6765\uff0c\u7528\u4e8e\u540e\u9762\u7684\u518d\u6b21\u6e32\u67d3\u3002\u4f8b\u5982\uff1a Vue.component('async-example', function (resolve, reject) { setTimeout(function () { // \u5c06\u7ec4\u4ef6\u5b9a\u4e49\u4f20\u5165 resolve \u56de\u8c03\u51fd\u6570 resolve({ template: '<div>I am async!</div>' }) }, 1000) })","title":"4.9 \u5f02\u6b65\u7ec4\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8A%EF%BC%89/#410","text":"const AsyncComp = () => ({ // \u9700\u8981\u52a0\u8f7d\u7684\u7ec4\u4ef6\u3002\u5e94\u5f53\u662f\u4e00\u4e2a Promise component: import('./MyComp.vue'), // \u52a0\u8f7d\u4e2d\u5e94\u5f53\u6e32\u67d3\u7684\u7ec4\u4ef6 loading: LoadingComp, // \u51fa\u9519\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6 error: ErrorComp, // \u6e32\u67d3\u52a0\u8f7d\u4e2d\u7ec4\u4ef6\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002\u9ed8\u8ba4\uff1a200ms\u3002 delay: 200, // \u6700\u957f\u7b49\u5f85\u65f6\u95f4\u3002\u8d85\u51fa\u6b64\u65f6\u95f4\u5219\u6e32\u67d3\u9519\u8bef\u7ec4\u4ef6\u3002\u9ed8\u8ba4\uff1aInfinity timeout: 3000 })","title":"4.10 \u9ad8\u7ea7\u5f02\u6b65\u7ec4\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/","text":"\u7b14\u8bb0\u7565\u957f\uff0c\u9605\u4e45\u7565\u4e4f\uff0c\u6545\u4e00\u5206\u4e3a\u4e8c\u3002 5. \u63d2\u69fd \u00b6 \u5f53\u5b50\u7ec4\u4ef6\u6a21\u677f\u53ea\u6709\u4e00\u4e2a\u65e0\u5c5e\u6027\u63d2\u69fd\u65f6\uff0c\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u6574\u4e2a\u5185\u5bb9\u7247\u6bb5\u5c06\u63d2\u5165\u5230\u63d2\u69fd\u6240\u5728\u7684 DOM \u4f4d\u7f6e\uff0c\u5e76\u66ff\u6362\u6389\u63d2\u69fd\u6807\u7b7e\u672c\u8eab\u3002 <slot> \u6807\u7b7e\u4e2d\u5185\u5bb9\u90fd\u88ab\u89c6\u4e3a**\u5907\u7528\u5185\u5bb9**\uff0c\u5728\u6ca1\u6709\u8981\u63d2\u5165\u7684\u5185\u5bb9\u65f6\u624d\u663e\u793a\u5907\u7528\u5185\u5bb9\u3002 5.1 \u5177\u540d\u63d2\u69fd \u00b6 <slot> \u5143\u7d20\u53ef\u4ee5\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u7279\u6027 name \u6765\u914d\u7f6e\u5982\u4f55\u5206\u53d1\u5185\u5bb9\u3002\u4e0e\u5176\u76f8\u5bf9\u7684\u662f**\u533f\u540d\u63d2\u69fd**\uff0c\u4f5c\u4e3a\u627e\u4e0d\u5230\u5339\u914d\u7684\u5185\u5bb9\u7247\u6bb5\u7684\u5907\u7528\u63d2\u69fd\u3002 \u5047\u5b9a app-layout \u7ec4\u4ef6\uff0c\u5176\u6a21\u677f\u4e3a\uff1a <div class=\"container\"> <header> <slot name=\"header\"></slot> </header> <main> <slot></slot> </main> <footer> <slot name=\"footer\"></slot> </footer> </div> \u7236\u7ec4\u4ef6\u6a21\u677f\u4e3a\uff1a <app-layout> <h1 slot=\"header\">\u8fd9\u91cc\u53ef\u80fd\u662f\u4e00\u4e2a\u9875\u9762\u6807\u9898</h1> <p>\u4e3b\u8981\u5185\u5bb9\u7684\u4e00\u4e2a\u6bb5\u843d\u3002</p> <p>\u53e6\u4e00\u4e2a\u4e3b\u8981\u6bb5\u843d\u3002</p> <p slot=\"footer\">\u8fd9\u91cc\u6709\u4e00\u4e9b\u8054\u7cfb\u4fe1\u606f</p> </app-layout> \u6e32\u67d3\u7ed3\u679c\u4e3a\uff1a <div class=\"container\"> <header> <h1>\u8fd9\u91cc\u53ef\u80fd\u662f\u4e00\u4e2a\u9875\u9762\u6807\u9898</h1> </header> <main> <p>\u4e3b\u8981\u5185\u5bb9\u7684\u4e00\u4e2a\u6bb5\u843d\u3002</p> <p>\u53e6\u4e00\u4e2a\u4e3b\u8981\u6bb5\u843d\u3002</p> </main> <footer> <p>\u8fd9\u91cc\u6709\u4e00\u4e9b\u8054\u7cfb\u4fe1\u606f</p> </footer> </div> 5.2 \u4f5c\u7528\u57df\u63d2\u69fd \u00b6 \u4f5c\u7528\u57df\u63d2\u69fd\u7528\u4f5c\u4e00\u4e2a (\u80fd\u88ab\u4f20\u9012\u6570\u636e\u7684) \u53ef\u91cd\u7528\u6a21\u677f\uff0c\u6765\u4ee3\u66ff\u5df2\u7ecf\u6e32\u67d3\u597d\u7684\u5143\u7d20\u3002 \u5728\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u53ea\u9700\u5c06\u6570\u636e\u4f20\u9012\u5230\u63d2\u69fd\uff0c\u5c31\u50cf\u4f60\u5c06 prop \u4f20\u9012\u7ed9\u7ec4\u4ef6\u4e00\u6837\uff1a <ul> <slot name=\"item\" v-for=\"item in items\" :text=\"item.text\"> <!-- \u8fd9\u91cc\u5199\u5165\u5907\u7528\u5185\u5bb9 --> </slot> </ul> \u5728\u7236\u7ea7\u4e2d\uff0c slot-scope \u7684\u503c\u5c06\u88ab\u7528\u4f5c\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\u540d\uff0c\u6b64\u53d8\u91cf\u63a5\u6536\u4ece\u5b50\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684 prop \u5bf9\u8c61\uff1a <my-awesome-list :items=\"items\"> <!-- \u4f5c\u7528\u57df\u63d2\u69fd\u4e5f\u53ef\u4ee5\u662f\u5177\u540d\u7684 --> <li slot=\"item\" slot-scope=\"props\"> {{ props.text }} </li> </my-awesome-list> 6. \u6df7\u5408 (Mixins) \u00b6 \u6df7\u5408 (Mixins) \u4f7fVue\u7ec4\u4ef6\u7075\u6d3b\u5730\u590d\u7528\u3002 // \u5b9a\u4e49\u4e00\u4e2a\u6df7\u5408\u5bf9\u8c61 var myMixin = { created: function () { console.log('hello from mixin!') } } // \u5b9a\u4e49\u4e00\u4e2a\u4f7f\u7528\u6df7\u5408\u5bf9\u8c61\u7684\u7ec4\u4ef6 var Component = Vue.extend({ mixins: [myMixin] }) var component = new Component() // => \"hello from mixin!\" 6.1 \u9009\u9879\u5408\u5e76 \u00b6 \u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u4e0e\u7ec4\u4ef6\u81ea\u8eab\u94a9\u5b50\u540c\u540d\uff0c\u4e24\u8005\u90fd\u88ab\u8c03\u7528\uff0c \u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5c06\u5148\u6267\u884c \u3002 var mixin = { created: function () { console.log('\u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u88ab\u8c03\u7528') } } new Vue({ mixins: [mixin], created: function () { console.log('\u7ec4\u4ef6\u94a9\u5b50\u88ab\u8c03\u7528') } }) // => \"\u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u88ab\u8c03\u7528\" // => \"\u7ec4\u4ef6\u94a9\u5b50\u88ab\u8c03\u7528\" \u503c\u4e3a\u5bf9\u8c61\u7684\u9009\u9879\uff0c\u4f8b\u5982 methods , components \u548c directives \uff0c\u5c06\u88ab\u6df7\u5408\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e24\u4e2a\u5bf9\u8c61\u952e\u540d\u51b2\u7a81\u65f6\uff0c\u53d6\u7ec4\u4ef6\u5bf9\u8c61\u7684\u952e\u503c\u5bf9\u3002 var mixin = { methods: { foo: function () { console.log('foo') }, conflicting: function () { console.log('from mixin') } } } var vm = new Vue({ mixins: [mixin], methods: { bar: function () { console.log('bar') }, conflicting: function () { console.log('from self') } } }) vm.foo() // => \"foo\" vm.bar() // => \"bar\" vm.conflicting() // => \"from self\" 6.2 \u5168\u5c40\u6df7\u5408 \u00b6 \u4e00\u65e6\u5168\u5c40\u6ce8\u518c\u6df7\u5408\u5bf9\u8c61\uff0c\u5c06\u4f1a\u5f71\u54cd\u5230 \u6240\u6709\u4e4b\u540e\u521b\u5efa\u7684 Vue \u5b9e\u4f8b\u3002 Vue.mixin({}) 7. \u81ea\u5b9a\u4e49\u6307\u4ee4 \u00b6 \u9664\u9ed8\u8ba4\u6838\u5fc3\u6307\u4ee4 ( v-model \u548c v-show )\u5916\uff0cVue \u5141\u8bb8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u4ee4\u3002 \u4f8b\u5982\uff0c\u5f53\u9875\u9762\u52a0\u8f7d\u65f6\uff0c\u5143\u7d20\u5c06\u83b7\u5f97\u7126\u70b9 (\u6ce8\u610f\uff1aautofocus \u5728\u79fb\u52a8\u7248 Safari \u4e0a\u4e0d\u5de5\u4f5c)\u3002 \u5168\u5c40\u6ce8\u518c // \u6ce8\u518c\u4e00\u4e2a\u5168\u5c40\u81ea\u5b9a\u4e49\u6307\u4ee4 v-focus Vue.directive('focus', { // \u5f53\u7ed1\u5b9a\u5143\u7d20\u63d2\u5165\u5230 DOM \u4e2d\u3002 inserted: function (el) { // \u805a\u7126\u5143\u7d20 el.focus() } }) \u5c40\u90e8\u6ce8\u518c directives: { focus: { // \u6307\u4ee4\u7684\u5b9a\u4e49 inserted: function (el) { el.focus() } } } \u4f7f\u7528\u6307\u4ee4 <input v-focus> 7.1 \u94a9\u5b50\u51fd\u6570 \u00b6 \u6307\u4ee4\u5b9a\u4e49\u51fd\u6570\u63d0\u4f9b\u4e86\u51e0\u4e2a\u94a9\u5b50\u51fd\u6570 \uff1a bind \uff1a\u53ea\u8c03\u7528\u4e00\u6b21\uff0c\u6307\u4ee4\u7b2c\u4e00\u6b21\u7ed1\u5b9a\u5230\u5143\u7d20\u65f6\u8c03\u7528\uff0c\u53ef\u5b9a\u4e49\u59cb\u5316\u52a8\u4f5c\u3002 inserted \uff1a\u88ab\u7ed1\u5b9a\u5143\u7d20\u63d2\u5165\u7236\u8282\u70b9\u65f6\u8c03\u7528 \u3002 update \uff1a\u6240\u5728\u7ec4\u4ef6\u7684 VNode \u66f4\u65b0\u65f6\u8c03\u7528\uff0c \u4f46\u662f\u53ef\u80fd\u53d1\u751f\u5728\u5176\u5b69\u5b50\u7684 VNode \u66f4\u65b0\u4e4b\u524d \u3002\u53ef\u901a\u8fc7\u6bd4\u8f83\u66f4\u65b0\u524d\u540e\u7684\u503c\u6765\u5ffd\u7565\u4e0d\u5fc5\u8981\u7684\u6a21\u677f\u66f4\u65b0 \u3002 componentUpdated \uff1a\u6240\u5728\u7ec4\u4ef6\u7684 VNode \u53ca\u5176\u5b69\u5b50\u7684 VNode \u5168\u90e8\u66f4\u65b0\u65f6\u8c03\u7528\u3002 unbind \uff1a\u53ea\u8c03\u7528\u4e00\u6b21\uff0c\u6307\u4ee4\u4e0e\u5143\u7d20\u89e3\u7ed1\u65f6\u8c03\u7528\u3002 7.2 \u94a9\u5b50\u51fd\u6570\u7684\u53c2\u6570 \u00b6 \u51fd\u6570\u53c2\u6570\u5305\u62ec el \uff0c binding \uff0c vnode \uff0c oldVnode \u3002 8. \u6e32\u67d3\u51fd\u6570 (render) \u00b6 Vue \u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528 template \u6765\u521b\u5efa HTML\u3002\u4f46\u4e5f\u80fd\u901a\u8fc7 JavaScript \u6765\u5b9e\u73b0\uff0c\u8fd9\u5f97\u7528\u5230 render \u51fd\u6570 \u3002 Vue.component('blog-header', { render: function (createElement) { return createElement( 'h1', //tag name \u6807\u7b7e\u540d\u79f0 this.blogTitle //\u5b50\u7ec4\u4ef6\u4e2d\u7684\u9635\u5217 ) } }) render\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u8bf7\u52a1\u5fc5\u4ed4\u7ec6\u770b\u6587\u6863\u3002 9. \u63d2\u4ef6 \u00b6 \u5b9a\u4e49\u63d2\u4ef6 MyPlugin.install = function (Vue, options) { // 1. \u6dfb\u52a0\u5168\u5c40\u65b9\u6cd5\u6216\u5c5e\u6027 Vue.myGlobalMethod = function () { // \u903b\u8f91... } // 2. \u6dfb\u52a0\u5168\u5c40\u8d44\u6e90 Vue.directive('my-directive', { bind (el, binding, vnode, oldVnode) { // \u903b\u8f91... } ... }) // 3. \u6ce8\u5165\u7ec4\u4ef6 Vue.mixin({ created: function () { // \u903b\u8f91... } ... }) // 4. \u6dfb\u52a0\u5b9e\u4f8b\u65b9\u6cd5 Vue.prototype.$myMethod = function (methodOptions) { // \u903b\u8f91... } } \u4f7f\u7528\u63d2\u4ef6 Vue.use(MyPlugin, { someOption: true }) awesome-vue \u96c6\u5408\u4e86\u6765\u81ea\u793e\u533a\u8d21\u732e\u7684\u6570\u4ee5\u5343\u8ba1\u7684\u63d2\u4ef6\u548c\u5e93\u3002 10. \u8fc7\u6ee4\u5668 \u00b6 \u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668 new Vue({ // ... filters: { capitalize: function (value) { if (!value) return '' value = value.toString() return value.charAt(0).toUpperCase() + value.slice(1) } } }) \u4f7f\u7528 <!-- in mustaches --> {{ message | capitalize }} <!-- in v-bind --> <div v-bind:id=\"message | capitalize\"></div>","title":"Vuejs \u5b66\u4e60\u7b14\u8bb0\u4e4b\u57fa\u7840\u7bc7\uff08\u4e0b\uff09"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#5","text":"\u5f53\u5b50\u7ec4\u4ef6\u6a21\u677f\u53ea\u6709\u4e00\u4e2a\u65e0\u5c5e\u6027\u63d2\u69fd\u65f6\uff0c\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u6574\u4e2a\u5185\u5bb9\u7247\u6bb5\u5c06\u63d2\u5165\u5230\u63d2\u69fd\u6240\u5728\u7684 DOM \u4f4d\u7f6e\uff0c\u5e76\u66ff\u6362\u6389\u63d2\u69fd\u6807\u7b7e\u672c\u8eab\u3002 <slot> \u6807\u7b7e\u4e2d\u5185\u5bb9\u90fd\u88ab\u89c6\u4e3a**\u5907\u7528\u5185\u5bb9**\uff0c\u5728\u6ca1\u6709\u8981\u63d2\u5165\u7684\u5185\u5bb9\u65f6\u624d\u663e\u793a\u5907\u7528\u5185\u5bb9\u3002","title":"5. \u63d2\u69fd"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#51","text":"<slot> \u5143\u7d20\u53ef\u4ee5\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u7279\u6027 name \u6765\u914d\u7f6e\u5982\u4f55\u5206\u53d1\u5185\u5bb9\u3002\u4e0e\u5176\u76f8\u5bf9\u7684\u662f**\u533f\u540d\u63d2\u69fd**\uff0c\u4f5c\u4e3a\u627e\u4e0d\u5230\u5339\u914d\u7684\u5185\u5bb9\u7247\u6bb5\u7684\u5907\u7528\u63d2\u69fd\u3002 \u5047\u5b9a app-layout \u7ec4\u4ef6\uff0c\u5176\u6a21\u677f\u4e3a\uff1a <div class=\"container\"> <header> <slot name=\"header\"></slot> </header> <main> <slot></slot> </main> <footer> <slot name=\"footer\"></slot> </footer> </div> \u7236\u7ec4\u4ef6\u6a21\u677f\u4e3a\uff1a <app-layout> <h1 slot=\"header\">\u8fd9\u91cc\u53ef\u80fd\u662f\u4e00\u4e2a\u9875\u9762\u6807\u9898</h1> <p>\u4e3b\u8981\u5185\u5bb9\u7684\u4e00\u4e2a\u6bb5\u843d\u3002</p> <p>\u53e6\u4e00\u4e2a\u4e3b\u8981\u6bb5\u843d\u3002</p> <p slot=\"footer\">\u8fd9\u91cc\u6709\u4e00\u4e9b\u8054\u7cfb\u4fe1\u606f</p> </app-layout> \u6e32\u67d3\u7ed3\u679c\u4e3a\uff1a <div class=\"container\"> <header> <h1>\u8fd9\u91cc\u53ef\u80fd\u662f\u4e00\u4e2a\u9875\u9762\u6807\u9898</h1> </header> <main> <p>\u4e3b\u8981\u5185\u5bb9\u7684\u4e00\u4e2a\u6bb5\u843d\u3002</p> <p>\u53e6\u4e00\u4e2a\u4e3b\u8981\u6bb5\u843d\u3002</p> </main> <footer> <p>\u8fd9\u91cc\u6709\u4e00\u4e9b\u8054\u7cfb\u4fe1\u606f</p> </footer> </div>","title":"5.1 \u5177\u540d\u63d2\u69fd"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#52","text":"\u4f5c\u7528\u57df\u63d2\u69fd\u7528\u4f5c\u4e00\u4e2a (\u80fd\u88ab\u4f20\u9012\u6570\u636e\u7684) \u53ef\u91cd\u7528\u6a21\u677f\uff0c\u6765\u4ee3\u66ff\u5df2\u7ecf\u6e32\u67d3\u597d\u7684\u5143\u7d20\u3002 \u5728\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u53ea\u9700\u5c06\u6570\u636e\u4f20\u9012\u5230\u63d2\u69fd\uff0c\u5c31\u50cf\u4f60\u5c06 prop \u4f20\u9012\u7ed9\u7ec4\u4ef6\u4e00\u6837\uff1a <ul> <slot name=\"item\" v-for=\"item in items\" :text=\"item.text\"> <!-- \u8fd9\u91cc\u5199\u5165\u5907\u7528\u5185\u5bb9 --> </slot> </ul> \u5728\u7236\u7ea7\u4e2d\uff0c slot-scope \u7684\u503c\u5c06\u88ab\u7528\u4f5c\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\u540d\uff0c\u6b64\u53d8\u91cf\u63a5\u6536\u4ece\u5b50\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684 prop \u5bf9\u8c61\uff1a <my-awesome-list :items=\"items\"> <!-- \u4f5c\u7528\u57df\u63d2\u69fd\u4e5f\u53ef\u4ee5\u662f\u5177\u540d\u7684 --> <li slot=\"item\" slot-scope=\"props\"> {{ props.text }} </li> </my-awesome-list>","title":"5.2 \u4f5c\u7528\u57df\u63d2\u69fd"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#6-mixins","text":"\u6df7\u5408 (Mixins) \u4f7fVue\u7ec4\u4ef6\u7075\u6d3b\u5730\u590d\u7528\u3002 // \u5b9a\u4e49\u4e00\u4e2a\u6df7\u5408\u5bf9\u8c61 var myMixin = { created: function () { console.log('hello from mixin!') } } // \u5b9a\u4e49\u4e00\u4e2a\u4f7f\u7528\u6df7\u5408\u5bf9\u8c61\u7684\u7ec4\u4ef6 var Component = Vue.extend({ mixins: [myMixin] }) var component = new Component() // => \"hello from mixin!\"","title":"6. \u6df7\u5408 (Mixins)"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#61","text":"\u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u4e0e\u7ec4\u4ef6\u81ea\u8eab\u94a9\u5b50\u540c\u540d\uff0c\u4e24\u8005\u90fd\u88ab\u8c03\u7528\uff0c \u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5c06\u5148\u6267\u884c \u3002 var mixin = { created: function () { console.log('\u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u88ab\u8c03\u7528') } } new Vue({ mixins: [mixin], created: function () { console.log('\u7ec4\u4ef6\u94a9\u5b50\u88ab\u8c03\u7528') } }) // => \"\u6df7\u5408\u5bf9\u8c61\u7684\u94a9\u5b50\u88ab\u8c03\u7528\" // => \"\u7ec4\u4ef6\u94a9\u5b50\u88ab\u8c03\u7528\" \u503c\u4e3a\u5bf9\u8c61\u7684\u9009\u9879\uff0c\u4f8b\u5982 methods , components \u548c directives \uff0c\u5c06\u88ab\u6df7\u5408\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e24\u4e2a\u5bf9\u8c61\u952e\u540d\u51b2\u7a81\u65f6\uff0c\u53d6\u7ec4\u4ef6\u5bf9\u8c61\u7684\u952e\u503c\u5bf9\u3002 var mixin = { methods: { foo: function () { console.log('foo') }, conflicting: function () { console.log('from mixin') } } } var vm = new Vue({ mixins: [mixin], methods: { bar: function () { console.log('bar') }, conflicting: function () { console.log('from self') } } }) vm.foo() // => \"foo\" vm.bar() // => \"bar\" vm.conflicting() // => \"from self\"","title":"6.1 \u9009\u9879\u5408\u5e76"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#62","text":"\u4e00\u65e6\u5168\u5c40\u6ce8\u518c\u6df7\u5408\u5bf9\u8c61\uff0c\u5c06\u4f1a\u5f71\u54cd\u5230 \u6240\u6709\u4e4b\u540e\u521b\u5efa\u7684 Vue \u5b9e\u4f8b\u3002 Vue.mixin({})","title":"6.2 \u5168\u5c40\u6df7\u5408"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#7","text":"\u9664\u9ed8\u8ba4\u6838\u5fc3\u6307\u4ee4 ( v-model \u548c v-show )\u5916\uff0cVue \u5141\u8bb8\u6ce8\u518c\u81ea\u5b9a\u4e49\u6307\u4ee4\u3002 \u4f8b\u5982\uff0c\u5f53\u9875\u9762\u52a0\u8f7d\u65f6\uff0c\u5143\u7d20\u5c06\u83b7\u5f97\u7126\u70b9 (\u6ce8\u610f\uff1aautofocus \u5728\u79fb\u52a8\u7248 Safari \u4e0a\u4e0d\u5de5\u4f5c)\u3002 \u5168\u5c40\u6ce8\u518c // \u6ce8\u518c\u4e00\u4e2a\u5168\u5c40\u81ea\u5b9a\u4e49\u6307\u4ee4 v-focus Vue.directive('focus', { // \u5f53\u7ed1\u5b9a\u5143\u7d20\u63d2\u5165\u5230 DOM \u4e2d\u3002 inserted: function (el) { // \u805a\u7126\u5143\u7d20 el.focus() } }) \u5c40\u90e8\u6ce8\u518c directives: { focus: { // \u6307\u4ee4\u7684\u5b9a\u4e49 inserted: function (el) { el.focus() } } } \u4f7f\u7528\u6307\u4ee4 <input v-focus>","title":"7. \u81ea\u5b9a\u4e49\u6307\u4ee4"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#71","text":"\u6307\u4ee4\u5b9a\u4e49\u51fd\u6570\u63d0\u4f9b\u4e86\u51e0\u4e2a\u94a9\u5b50\u51fd\u6570 \uff1a bind \uff1a\u53ea\u8c03\u7528\u4e00\u6b21\uff0c\u6307\u4ee4\u7b2c\u4e00\u6b21\u7ed1\u5b9a\u5230\u5143\u7d20\u65f6\u8c03\u7528\uff0c\u53ef\u5b9a\u4e49\u59cb\u5316\u52a8\u4f5c\u3002 inserted \uff1a\u88ab\u7ed1\u5b9a\u5143\u7d20\u63d2\u5165\u7236\u8282\u70b9\u65f6\u8c03\u7528 \u3002 update \uff1a\u6240\u5728\u7ec4\u4ef6\u7684 VNode \u66f4\u65b0\u65f6\u8c03\u7528\uff0c \u4f46\u662f\u53ef\u80fd\u53d1\u751f\u5728\u5176\u5b69\u5b50\u7684 VNode \u66f4\u65b0\u4e4b\u524d \u3002\u53ef\u901a\u8fc7\u6bd4\u8f83\u66f4\u65b0\u524d\u540e\u7684\u503c\u6765\u5ffd\u7565\u4e0d\u5fc5\u8981\u7684\u6a21\u677f\u66f4\u65b0 \u3002 componentUpdated \uff1a\u6240\u5728\u7ec4\u4ef6\u7684 VNode \u53ca\u5176\u5b69\u5b50\u7684 VNode \u5168\u90e8\u66f4\u65b0\u65f6\u8c03\u7528\u3002 unbind \uff1a\u53ea\u8c03\u7528\u4e00\u6b21\uff0c\u6307\u4ee4\u4e0e\u5143\u7d20\u89e3\u7ed1\u65f6\u8c03\u7528\u3002","title":"7.1 \u94a9\u5b50\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#72","text":"\u51fd\u6570\u53c2\u6570\u5305\u62ec el \uff0c binding \uff0c vnode \uff0c oldVnode \u3002","title":"7.2 \u94a9\u5b50\u51fd\u6570\u7684\u53c2\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#8-render","text":"Vue \u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528 template \u6765\u521b\u5efa HTML\u3002\u4f46\u4e5f\u80fd\u901a\u8fc7 JavaScript \u6765\u5b9e\u73b0\uff0c\u8fd9\u5f97\u7528\u5230 render \u51fd\u6570 \u3002 Vue.component('blog-header', { render: function (createElement) { return createElement( 'h1', //tag name \u6807\u7b7e\u540d\u79f0 this.blogTitle //\u5b50\u7ec4\u4ef6\u4e2d\u7684\u9635\u5217 ) } }) render\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u8bf7\u52a1\u5fc5\u4ed4\u7ec6\u770b\u6587\u6863\u3002","title":"8. \u6e32\u67d3\u51fd\u6570 (render)"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#9","text":"\u5b9a\u4e49\u63d2\u4ef6 MyPlugin.install = function (Vue, options) { // 1. \u6dfb\u52a0\u5168\u5c40\u65b9\u6cd5\u6216\u5c5e\u6027 Vue.myGlobalMethod = function () { // \u903b\u8f91... } // 2. \u6dfb\u52a0\u5168\u5c40\u8d44\u6e90 Vue.directive('my-directive', { bind (el, binding, vnode, oldVnode) { // \u903b\u8f91... } ... }) // 3. \u6ce8\u5165\u7ec4\u4ef6 Vue.mixin({ created: function () { // \u903b\u8f91... } ... }) // 4. \u6dfb\u52a0\u5b9e\u4f8b\u65b9\u6cd5 Vue.prototype.$myMethod = function (methodOptions) { // \u903b\u8f91... } } \u4f7f\u7528\u63d2\u4ef6 Vue.use(MyPlugin, { someOption: true }) awesome-vue \u96c6\u5408\u4e86\u6765\u81ea\u793e\u533a\u8d21\u732e\u7684\u6570\u4ee5\u5343\u8ba1\u7684\u63d2\u4ef6\u548c\u5e93\u3002","title":"9.  \u63d2\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%AF%87%EF%BC%88%E4%B8%8B%EF%BC%89/#10","text":"\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668 new Vue({ // ... filters: { capitalize: function (value) { if (!value) return '' value = value.toString() return value.charAt(0).toUpperCase() + value.slice(1) } } }) \u4f7f\u7528 <!-- in mustaches --> {{ message | capitalize }} <!-- in v-bind --> <div v-bind:id=\"message | capitalize\"></div>","title":"10. \u8fc7\u6ee4\u5668"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/","text":"Vuex \u662f\u4e00\u4e2a\u4e13\u4e3a Vue.js \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684**\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f**\uff0c\u5bf9\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u72b6\u6001\u8fdb\u884c\u96c6\u4e2d\u5f0f\u7ba1\u7406\u3002 1. \u524d\u8a00 \u00b6 1.1 \u5e94\u7528\u573a\u666f \u00b6 \u5f53\u6211\u4eec\u7684\u5e94\u7528\u9047\u5230**\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001**\u65f6\uff0c\u6211\u4e48\u53ef\u80fd\u9700\u8981\u7528\u5230\u72b6\u6001\u7ba1\u7406\u673a\u5236\uff1a \u591a\u4e2a\u89c6\u56fe\u4f9d\u8d56\u4e8e\u540c\u4e00\u72b6\u6001\u3002 \u6765\u81ea\u4e0d\u540c\u89c6\u56fe\u7684\u884c\u4e3a\u9700\u8981\u53d8\u66f4\u540c\u4e00\u72b6\u6001\u3002 \u5728\u7b80\u5355\u573a\u666f\u4e0b\uff0c\u4e00\u4e2a\u7b80\u5355\u7684 global event bus \u5c31\u8db3\u591f\u6240\u9700\u3002 var bus = new Vue() // \u89e6\u53d1\u7ec4\u4ef6 A \u4e2d\u7684\u4e8b\u4ef6 bus.$emit('id-selected', 1) // \u5728\u7ec4\u4ef6 B \u521b\u5efa\u7684\u94a9\u5b50\u4e2d\u76d1\u542c\u4e8b\u4ef6 bus.$on('id-selected', function (id) { // ... }) \u4f46\u662f\uff0c\u5982\u679c\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u4e2d\u5927\u578b\u5355\u9875\u5e94\u7528\uff0c\u60a8\u4f1a\u8003\u8651\u5982\u4f55\u66f4\u597d\u5730\u5728**\u7ec4\u4ef6\u5916\u90e8\u7ba1\u7406\u72b6\u6001**\uff0c\u6b64\u65f6\u5e94\u5f53\u9009\u62e9 Vuex \u3002 1.2 Vuex \u72b6\u6001\u8f6c\u79fb\u56fe \u00b6 Vuex \u7684\u57fa\u672c\u601d\u60f3\u501f\u9274\u4e86 Flux \u3001 Redux \uff0c\u540c\u65f6\u8f83\u4e4b\u6570\u636e\u54cd\u5e94\u7684\u7c92\u5ea6\u66f4\u7ec6\u81f4\uff0c\u66f4\u5951\u5408Vue.js\u3002 1.3 \u57fa\u672c\u601d\u60f3 \u00b6 Vuex \u5e94\u7528\u7684\u6838\u5fc3\u662f store\u3002\u201cstore\u201d \u662f\u4e00\u4e2a\u4ed3\u5e93\uff0c\u5305\u542b\u5e94\u7528\u4e2d\u5927\u90e8\u5206\u7684**\u72b6\u6001 (state)**\uff1a Vuex \u7684\u72b6\u6001\u5b58\u50a8\u662f\u54cd\u5e94\u5f0f\u7684\u3002\u5f53 Vue \u7ec4\u4ef6\u4ece store \u4e2d\u8bfb\u53d6\u72b6\u6001\u7684\u65f6\u5019\uff0c\u82e5 store \u4e2d\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u76f8\u5e94\u7684\u7ec4\u4ef6\u4f1a\u66f4\u65b0\u3002 \u6539\u53d8 store \u4e2d\u7684\u72b6\u6001\u7684\u552f\u4e00\u9014\u5f84\u662f\u663e\u5f0f\u5730**\u63d0\u4ea4 (commit) mutation**\u3002 2. \u6838\u5fc3\u6982\u5ff5 \u00b6 2.1 State \u00b6 Vuex \u4f7f\u7528**\u5355\u4e00\u72b6\u6001\u6811**\uff0c\u4f5c\u4e3a\u201c\u552f\u4e00\u6570\u636e\u6e90 ( SSOT )\u201d\uff0c\u7528\u4e00\u4e2a\u5bf9\u8c61\u5305\u542b\u5168\u90e8\u7684\u5e94\u7528\u5c42\u7ea7\u72b6\u6001\u3002 mapState \u8f85\u52a9\u51fd\u6570 \u00b6 import { mapState } from 'vuex' computed: mapState({ count: state => state.count // ... }) \u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26 \u00b6 mapState \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002ECMASCript\u63d0\u4f9b\u7684\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\uff0c\u6709\u52a9\u4e8e mapState \u51fd\u6570\u8fd4\u56de\u503c\u4e0e\u5c40\u90e8\u8ba1\u7b97\u5c5e\u6027\u6df7\u5408\u4f7f\u7528\u3002 computed: { localComputed () { /* ... */ }, // \u4f7f\u7528\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\u5c06\u6b64\u5bf9\u8c61\u6df7\u5165\u5230\u5916\u90e8\u5bf9\u8c61\u4e2d ...mapState({ // ... }) } 2.2 Getter \u00b6 Vuex \u5141\u8bb8\u6211\u4eec\u5728 store \u4e2d\u5b9a\u4e49\u201cgetter\u201d\uff08\u53ef\u4ee5\u8ba4\u4e3a\u662f store \u7684\u8ba1\u7b97\u5c5e\u6027\uff09\u3002\u5c31\u50cf\u8ba1\u7b97\u5c5e\u6027\u4e00\u6837\uff0cgetter \u7684\u8fd4\u56de\u503c\u4f1a\u6839\u636e\u5b83\u7684\u4f9d\u8d56\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u4e14\u53ea\u6709\u5f53\u5b83\u7684\u4f9d\u8d56\u503c\u53d1\u751f\u4e86\u6539\u53d8\u624d\u4f1a\u88ab\u91cd\u65b0\u8ba1\u7b97\u3002 \u5b9a\u4e49 getter \u00b6 const store = new Vuex.Store({ state: { todos: [ { id: 1, text: '...', done: true }, { id: 2, text: '...', done: false } ] }, getters: { // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a state\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5176\u4ed6 getter doneTodos: (state, getters) => { return state.todos.filter(todo => todo.done) } } }) Getter \u4f1a\u66b4\u9732\u4e3a store.getters \u5bf9\u8c61\uff1a store.getters.doneTodos // -> [{ id: 1, text: '...', done: true }] mapGetters \u8f85\u52a9\u51fd\u6570 \u00b6 mapGetters \u8f85\u52a9\u51fd\u6570\u4ec5\u4ec5\u662f\u5c06 store \u4e2d\u7684 getter \u6620\u5c04\u5230\u5c40\u90e8\u8ba1\u7b97\u5c5e\u6027: import { mapGetters } from 'vuex' export default { // ... computed: { // \u4f7f\u7528\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\u5c06 getter \u6df7\u5165 computed \u5bf9\u8c61\u4e2d ...mapGetters([ 'doneTodosCount', 'anotherGetter', // ... ]) } } 2.3 Mutations \u00b6 \u66f4\u6539 Vuex \u7684 store \u4e2d\u7684\u72b6\u6001\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u63d0\u4ea4 mutation\u3002Vuex \u4e2d\u7684 mutation \u7c7b\u4f3c\u4e8e\u4e8b\u4ef6\uff1a\u6bcf\u4e2a mutation \u90fd\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684 \u4e8b\u4ef6\u7c7b\u578b (type) \u548c \u4e00\u4e2a \u56de\u8c03\u51fd\u6570 (handler) \u3002 const store = new Vuex.Store({ state: { count: 1 }, mutations: { increment (state, payload) { state.count += payload.amount } } }) \u201c\u5f53\u89e6\u53d1\u4e00\u4e2a\u7c7b\u578b\u4e3a increment \u7684 mutation \u65f6\uff0c\u8c03\u7528\u51fd\u6570 mutation handler\u3002\u201d store.commit('increment', { amount: 10 }) \u5bf9\u8c61\u98ce\u683c\u7684\u63d0\u4ea4\u65b9\u5f0f \u00b6 store.commit({ type: 'increment', amount: 10 }) \u4f7f\u7528\u5e38\u91cf\u66ff\u4ee3 Mutation \u4e8b\u4ef6\u7c7b\u578b \u00b6 const SOME_MUTATION = 'SOME_MUTATION' mutations: { [SOME_MUTATION] (state) { // ES2015 \u98ce\u683c\u7684\u8ba1\u7b97\u5c5e\u6027\u547d\u540d // mutate state } } mapMutations \u8f85\u52a9\u51fd\u6570 \u00b6 \u53ef\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528 this.$store.commit() \u63d0\u4ea4 mutation\uff0c\u6216\u4f7f\u7528 mapMutations \u8f85\u52a9\u51fd\u6570\u5c06\u7ec4\u4ef6\u4e2d\u7684 methods \u6620\u5c04\u4e3a store.commit \u8c03\u7528 import { mapMutations } from 'vuex' export default { // ... methods: { ...mapMutations([ 'increment', // \u5c06 `this.increment()` \u6620\u5c04\u4e3a `this.$store.commit('increment')` 'incrementBy' // `this.incrementBy(amount)` \u6620\u5c04\u4e3a`this.$store.commit('incrementBy', amount)` ]) } } \u4e00\u6761\u91cd\u8981\u7684\u539f\u5219\u5c31\u662f\u8981\u8bb0\u4f4f mutation \u5fc5\u987b\u662f\u540c\u6b65\u51fd\u6570 \u3002 2.4 Action \u00b6 Action \u7c7b\u4f3c\u4e8e mutation\uff0c\u4e0d\u540c\u5728\u4e8e\uff1a Action \u63d0\u4ea4\u7684\u662f mutation\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u53d8\u66f4\u72b6\u6001\u3002 Action \u53ef\u4ee5\u5305\u542b\u4efb\u610f\u5f02\u6b65\u64cd\u4f5c\u3002 const store = new Vuex.Store({ state: { count: 0 }, mutations: { increment (state) { state.count++ } }, actions: { incrementAsync (context) { setTimeout(() => { // mutation \u5fc5\u987b\u540c\u6b65\u6267\u884c, action \u5c31\u4e0d\u53d7\u7ea6\u675f context.commit('increment') }, 1000) } } }) \u5206\u53d1 Action \u00b6 // \u4ee5\u8f7d\u8377\u5f62\u5f0f\u5206\u53d1 store.dispatch('incrementAsync', { amount: 10 }) // \u4ee5\u5bf9\u8c61\u5f62\u5f0f\u5206\u53d1 store.dispatch({ type: 'incrementAsync', amount: 10 }) mapActions \u8f85\u52a9\u51fd\u6570 \u00b6 \u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528 this.$store.dispatch() \u5206\u53d1 action\uff0c\u6216\u8005\u4f7f\u7528 mapActions \u8f85\u52a9\u51fd\u6570\u5c06\u7ec4\u4ef6\u7684 methods \u6620\u5c04\u4e3a store.dispatch \u8c03\u7528\u3002 import { mapActions } from 'vuex' export default { methods: { ...mapActions([ 'increment', // \u5c06 `this.increment()` \u6620\u5c04\u4e3a `this.$store.dispatch('increment')` 'incrementBy' //`this.incrementBy(amount)` \u6620\u5c04\u4e3a `this.$store.dispatch('incrementBy', amount)` ]) } } \u7ec4\u5408 Action \u00b6 \u5047\u8bbe\u5229\u7528 async / await \u8fd9\u4e2a JavaScript \u65b0\u7279\u6027\uff1a // \u5047\u8bbe getData() \u548c getOtherData() \u8fd4\u56de\u7684\u662f Promise actions: { async actionA ({ commit }) { commit('gotData', await getData()) }, async actionB ({ dispatch, commit }) { await dispatch('actionA') // \u7b49\u5f85 actionA \u5b8c\u6210 commit('gotOtherData', await getOtherData()) } } 2.4 Module \u00b6 Vuex \u53ef\u5c06 store \u5206\u5272\u6210**\u6a21\u5757\uff08module\uff09**\u3002\u6bcf\u4e2a\u6a21\u5757\u62e5\u6709\u81ea\u5df1\u7684 state\u3001mutation\u3001action\u3001getter\u3001\u751a\u81f3\u662f\u5d4c\u5957\u5b50\u6a21\u5757\u2014\u2014\u4ece\u4e0a\u81f3\u4e0b\u8fdb\u884c\u540c\u6837\u65b9\u5f0f\u7684\u5206\u5272\uff1a const moduleA = { state: { ... }, mutations: { ... }, actions: { ... }, getters: { ... } } const moduleB = { // ... } const store = new Vuex.Store({ modules: { a: moduleA, b: moduleB } }) store.state.a // -> moduleA \u7684\u72b6\u6001 store.state.b // -> moduleB \u7684\u72b6\u6001 \u547d\u540d\u7a7a\u95f4 \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6a21\u5757\u5185\u90e8\u7684 action\u3001mutation \u548c getter \u662f\u6ce8\u518c\u5728**\u5168\u5c40\u547d\u540d\u7a7a\u95f4**\u7684\u3002\u82e5\u60f3\u6a21\u5757\u5177\u6709\u66f4\u9ad8\u7684\u5c01\u88c5\u5ea6\u548c\u590d\u7528\u6027\uff0c\u53ef\u6dfb\u52a0 namespaced: true \u4f7f\u5176\u6210\u4e3a\u547d\u540d\u7a7a\u95f4\u6a21\u5757\u3002 \u5728\u547d\u540d\u7a7a\u95f4\u6a21\u5757\u5185\u8bbf\u95ee\u5168\u5c40\u5185\u5bb9\uff08Global Assets\uff09 \u00b6 \u5982\u679c\u5411\u4f7f\u7528\u5168\u5c40 state \u548c getter\uff0c rootState \u548c rootGetter \u4f1a\u4f5c\u4e3a\u7b2c\u4e09\u548c\u7b2c\u56db\u53c2\u6570\u4f20\u5165 getter\uff0c\u4e5f\u4f1a\u901a\u8fc7 context \u5bf9\u8c61\u7684\u5c5e\u6027\u4f20\u5165 action\u3002 \u5e26\u547d\u540d\u7a7a\u95f4\u7684\u7ed1\u5b9a\u51fd\u6570 \u00b6 computed: { ...mapState('some/nested/module', { a: state => state.a, // === a: state => state.some.nested.module.a, b: state => state.b // === b: state => state.some.nested.module.b }) }, methods: { ...mapActions('some/nested/module', [ 'foo', // === 'some/nested/module/foo', 'bar' // === 'some/nested/module/bar', ]) } \u6216\u8005\uff0c import { createNamespacedHelpers } from 'vuex' const { mapState, mapActions } = createNamespacedHelpers('some/nested/module') export default { computed: { // \u5728 `some/nested/module` \u4e2d\u67e5\u627e ...mapState({ a: state => state.a, b: state => state.b }) }, methods: { // \u5728 `some/nested/module` \u4e2d\u67e5\u627e ...mapActions([ 'foo', 'bar' ]) } } \u6a21\u5757\u52a8\u6001\u6ce8\u518c \u00b6 \u5728 store \u521b\u5efa**\u4e4b\u540e**\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 store.registerModule \u65b9\u6cd5\u6ce8\u518c\u6a21\u5757\uff1a // \u6ce8\u518c\u6a21\u5757 `myModule` store.registerModule('myModule', { // ... }) // \u6ce8\u518c\u5d4c\u5957\u6a21\u5757 `nested/myModule` store.registerModule(['nested', 'myModule'], { // ... }) \u53ef\u4ee5\u4f7f\u7528 store.unregisterModule(moduleName) \u6765\u52a8\u6001\u5378\u8f7d\u6a21\u5757\u3002 3. \u9879\u76ee\u7ed3\u6784 \u00b6 Vuex \u9700\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219\uff1a \u5e94\u7528\u5c42\u7ea7\u7684\u72b6\u6001\u5e94\u8be5\u96c6\u4e2d\u5230\u5355\u4e2a store \u5bf9\u8c61\u4e2d\u3002 \u63d0\u4ea4 mutation \u662f\u66f4\u6539\u72b6\u6001\u7684\u552f\u4e00\u65b9\u6cd5\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u540c\u6b65\u7684\u3002 \u5f02\u6b65\u903b\u8f91\u90fd\u5e94\u8be5\u5c01\u88c5\u5230 action \u91cc\u9762\u3002 \u53ea\u8981\u9075\u5b88\u4ee5\u4e0a\u89c4\u5219\uff0c\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\u968f\u4fbf\u3002 \u251c\u2500\u2500 index.html \u251c\u2500\u2500 main.js \u251c\u2500\u2500 api \u2502 \u2514\u2500\u2500 ... # \u62bd\u53d6\u51faAPI\u8bf7\u6c42 \u251c\u2500\u2500 components \u2502 \u251c\u2500\u2500 App.vue \u2502 \u2514\u2500\u2500 ... \u2514\u2500\u2500 store \u251c\u2500\u2500 index.js # \u6211\u4eec\u7ec4\u88c5\u6a21\u5757\u5e76\u5bfc\u51fa store \u7684\u5730\u65b9 \u251c\u2500\u2500 actions.js # \u6839\u7ea7\u522b\u7684 action \u251c\u2500\u2500 mutations.js # \u6839\u7ea7\u522b\u7684 mutation \u2514\u2500\u2500 modules \u251c\u2500\u2500 cart.js # \u8d2d\u7269\u8f66\u6a21\u5757 \u2514\u2500\u2500 products.js # \u4ea7\u54c1\u6a21\u5757 4. \u63d2\u4ef6 \u00b6 Vuex \u7684 store \u63a5\u53d7 plugins \u9009\u9879\uff0c\u8fd9\u4e2a\u9009\u9879\u66b4\u9732\u51fa\u6bcf\u6b21 mutation \u7684\u94a9\u5b50\u3002Vuex \u63d2\u4ef6\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0cstore \u4f5c\u4e3a\u5176\u552f\u4e00\u53c2\u6570\uff1a const myPlugin = store => { // \u5f53 store \u521d\u59cb\u5316\u540e\u8c03\u7528 store.subscribe((mutation, state) => { // \u6bcf\u6b21 mutation \u4e4b\u540e\u8c03\u7528 // mutation \u7684\u683c\u5f0f\u4e3a { type, payload } }) } \u4f7f\u7528\uff1a const store = new Vuex.Store({ state, mutations, plugins: [myPlugin] })","title":"Vuejs \u5b66\u4e60\u7b14\u8bb0\u4e4b\u72b6\u6001\u7ba1\u7406 Vuex"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#1","text":"","title":"1. \u524d\u8a00"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#11","text":"\u5f53\u6211\u4eec\u7684\u5e94\u7528\u9047\u5230**\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001**\u65f6\uff0c\u6211\u4e48\u53ef\u80fd\u9700\u8981\u7528\u5230\u72b6\u6001\u7ba1\u7406\u673a\u5236\uff1a \u591a\u4e2a\u89c6\u56fe\u4f9d\u8d56\u4e8e\u540c\u4e00\u72b6\u6001\u3002 \u6765\u81ea\u4e0d\u540c\u89c6\u56fe\u7684\u884c\u4e3a\u9700\u8981\u53d8\u66f4\u540c\u4e00\u72b6\u6001\u3002 \u5728\u7b80\u5355\u573a\u666f\u4e0b\uff0c\u4e00\u4e2a\u7b80\u5355\u7684 global event bus \u5c31\u8db3\u591f\u6240\u9700\u3002 var bus = new Vue() // \u89e6\u53d1\u7ec4\u4ef6 A \u4e2d\u7684\u4e8b\u4ef6 bus.$emit('id-selected', 1) // \u5728\u7ec4\u4ef6 B \u521b\u5efa\u7684\u94a9\u5b50\u4e2d\u76d1\u542c\u4e8b\u4ef6 bus.$on('id-selected', function (id) { // ... }) \u4f46\u662f\uff0c\u5982\u679c\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u4e2d\u5927\u578b\u5355\u9875\u5e94\u7528\uff0c\u60a8\u4f1a\u8003\u8651\u5982\u4f55\u66f4\u597d\u5730\u5728**\u7ec4\u4ef6\u5916\u90e8\u7ba1\u7406\u72b6\u6001**\uff0c\u6b64\u65f6\u5e94\u5f53\u9009\u62e9 Vuex \u3002","title":"1.1 \u5e94\u7528\u573a\u666f"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#12-vuex","text":"Vuex \u7684\u57fa\u672c\u601d\u60f3\u501f\u9274\u4e86 Flux \u3001 Redux \uff0c\u540c\u65f6\u8f83\u4e4b\u6570\u636e\u54cd\u5e94\u7684\u7c92\u5ea6\u66f4\u7ec6\u81f4\uff0c\u66f4\u5951\u5408Vue.js\u3002","title":"1.2 Vuex \u72b6\u6001\u8f6c\u79fb\u56fe"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#13","text":"Vuex \u5e94\u7528\u7684\u6838\u5fc3\u662f store\u3002\u201cstore\u201d \u662f\u4e00\u4e2a\u4ed3\u5e93\uff0c\u5305\u542b\u5e94\u7528\u4e2d\u5927\u90e8\u5206\u7684**\u72b6\u6001 (state)**\uff1a Vuex \u7684\u72b6\u6001\u5b58\u50a8\u662f\u54cd\u5e94\u5f0f\u7684\u3002\u5f53 Vue \u7ec4\u4ef6\u4ece store \u4e2d\u8bfb\u53d6\u72b6\u6001\u7684\u65f6\u5019\uff0c\u82e5 store \u4e2d\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u76f8\u5e94\u7684\u7ec4\u4ef6\u4f1a\u66f4\u65b0\u3002 \u6539\u53d8 store \u4e2d\u7684\u72b6\u6001\u7684\u552f\u4e00\u9014\u5f84\u662f\u663e\u5f0f\u5730**\u63d0\u4ea4 (commit) mutation**\u3002","title":"1.3 \u57fa\u672c\u601d\u60f3"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#2","text":"","title":"2. \u6838\u5fc3\u6982\u5ff5"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#21-state","text":"Vuex \u4f7f\u7528**\u5355\u4e00\u72b6\u6001\u6811**\uff0c\u4f5c\u4e3a\u201c\u552f\u4e00\u6570\u636e\u6e90 ( SSOT )\u201d\uff0c\u7528\u4e00\u4e2a\u5bf9\u8c61\u5305\u542b\u5168\u90e8\u7684\u5e94\u7528\u5c42\u7ea7\u72b6\u6001\u3002","title":"2.1 State"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#mapstate","text":"import { mapState } from 'vuex' computed: mapState({ count: state => state.count // ... })","title":"mapState \u8f85\u52a9\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#_1","text":"mapState \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002ECMASCript\u63d0\u4f9b\u7684\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\uff0c\u6709\u52a9\u4e8e mapState \u51fd\u6570\u8fd4\u56de\u503c\u4e0e\u5c40\u90e8\u8ba1\u7b97\u5c5e\u6027\u6df7\u5408\u4f7f\u7528\u3002 computed: { localComputed () { /* ... */ }, // \u4f7f\u7528\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\u5c06\u6b64\u5bf9\u8c61\u6df7\u5165\u5230\u5916\u90e8\u5bf9\u8c61\u4e2d ...mapState({ // ... }) }","title":"\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#22-getter","text":"Vuex \u5141\u8bb8\u6211\u4eec\u5728 store \u4e2d\u5b9a\u4e49\u201cgetter\u201d\uff08\u53ef\u4ee5\u8ba4\u4e3a\u662f store \u7684\u8ba1\u7b97\u5c5e\u6027\uff09\u3002\u5c31\u50cf\u8ba1\u7b97\u5c5e\u6027\u4e00\u6837\uff0cgetter \u7684\u8fd4\u56de\u503c\u4f1a\u6839\u636e\u5b83\u7684\u4f9d\u8d56\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u4e14\u53ea\u6709\u5f53\u5b83\u7684\u4f9d\u8d56\u503c\u53d1\u751f\u4e86\u6539\u53d8\u624d\u4f1a\u88ab\u91cd\u65b0\u8ba1\u7b97\u3002","title":"2.2 Getter"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#getter","text":"const store = new Vuex.Store({ state: { todos: [ { id: 1, text: '...', done: true }, { id: 2, text: '...', done: false } ] }, getters: { // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a state\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5176\u4ed6 getter doneTodos: (state, getters) => { return state.todos.filter(todo => todo.done) } } }) Getter \u4f1a\u66b4\u9732\u4e3a store.getters \u5bf9\u8c61\uff1a store.getters.doneTodos // -> [{ id: 1, text: '...', done: true }]","title":"\u5b9a\u4e49 getter"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#mapgetters","text":"mapGetters \u8f85\u52a9\u51fd\u6570\u4ec5\u4ec5\u662f\u5c06 store \u4e2d\u7684 getter \u6620\u5c04\u5230\u5c40\u90e8\u8ba1\u7b97\u5c5e\u6027: import { mapGetters } from 'vuex' export default { // ... computed: { // \u4f7f\u7528\u5bf9\u8c61\u5c55\u5f00\u8fd0\u7b97\u7b26\u5c06 getter \u6df7\u5165 computed \u5bf9\u8c61\u4e2d ...mapGetters([ 'doneTodosCount', 'anotherGetter', // ... ]) } }","title":"mapGetters \u8f85\u52a9\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#23-mutations","text":"\u66f4\u6539 Vuex \u7684 store \u4e2d\u7684\u72b6\u6001\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u63d0\u4ea4 mutation\u3002Vuex \u4e2d\u7684 mutation \u7c7b\u4f3c\u4e8e\u4e8b\u4ef6\uff1a\u6bcf\u4e2a mutation \u90fd\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684 \u4e8b\u4ef6\u7c7b\u578b (type) \u548c \u4e00\u4e2a \u56de\u8c03\u51fd\u6570 (handler) \u3002 const store = new Vuex.Store({ state: { count: 1 }, mutations: { increment (state, payload) { state.count += payload.amount } } }) \u201c\u5f53\u89e6\u53d1\u4e00\u4e2a\u7c7b\u578b\u4e3a increment \u7684 mutation \u65f6\uff0c\u8c03\u7528\u51fd\u6570 mutation handler\u3002\u201d store.commit('increment', { amount: 10 })","title":"2.3 Mutations"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#_2","text":"store.commit({ type: 'increment', amount: 10 })","title":"\u5bf9\u8c61\u98ce\u683c\u7684\u63d0\u4ea4\u65b9\u5f0f"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#mutation","text":"const SOME_MUTATION = 'SOME_MUTATION' mutations: { [SOME_MUTATION] (state) { // ES2015 \u98ce\u683c\u7684\u8ba1\u7b97\u5c5e\u6027\u547d\u540d // mutate state } }","title":"\u4f7f\u7528\u5e38\u91cf\u66ff\u4ee3 Mutation \u4e8b\u4ef6\u7c7b\u578b"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#mapmutations","text":"\u53ef\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528 this.$store.commit() \u63d0\u4ea4 mutation\uff0c\u6216\u4f7f\u7528 mapMutations \u8f85\u52a9\u51fd\u6570\u5c06\u7ec4\u4ef6\u4e2d\u7684 methods \u6620\u5c04\u4e3a store.commit \u8c03\u7528 import { mapMutations } from 'vuex' export default { // ... methods: { ...mapMutations([ 'increment', // \u5c06 `this.increment()` \u6620\u5c04\u4e3a `this.$store.commit('increment')` 'incrementBy' // `this.incrementBy(amount)` \u6620\u5c04\u4e3a`this.$store.commit('incrementBy', amount)` ]) } } \u4e00\u6761\u91cd\u8981\u7684\u539f\u5219\u5c31\u662f\u8981\u8bb0\u4f4f mutation \u5fc5\u987b\u662f\u540c\u6b65\u51fd\u6570 \u3002","title":"mapMutations \u8f85\u52a9\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#24-action","text":"Action \u7c7b\u4f3c\u4e8e mutation\uff0c\u4e0d\u540c\u5728\u4e8e\uff1a Action \u63d0\u4ea4\u7684\u662f mutation\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u53d8\u66f4\u72b6\u6001\u3002 Action \u53ef\u4ee5\u5305\u542b\u4efb\u610f\u5f02\u6b65\u64cd\u4f5c\u3002 const store = new Vuex.Store({ state: { count: 0 }, mutations: { increment (state) { state.count++ } }, actions: { incrementAsync (context) { setTimeout(() => { // mutation \u5fc5\u987b\u540c\u6b65\u6267\u884c, action \u5c31\u4e0d\u53d7\u7ea6\u675f context.commit('increment') }, 1000) } } })","title":"2.4 Action"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#action","text":"// \u4ee5\u8f7d\u8377\u5f62\u5f0f\u5206\u53d1 store.dispatch('incrementAsync', { amount: 10 }) // \u4ee5\u5bf9\u8c61\u5f62\u5f0f\u5206\u53d1 store.dispatch({ type: 'incrementAsync', amount: 10 })","title":"\u5206\u53d1 Action"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#mapactions","text":"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528 this.$store.dispatch() \u5206\u53d1 action\uff0c\u6216\u8005\u4f7f\u7528 mapActions \u8f85\u52a9\u51fd\u6570\u5c06\u7ec4\u4ef6\u7684 methods \u6620\u5c04\u4e3a store.dispatch \u8c03\u7528\u3002 import { mapActions } from 'vuex' export default { methods: { ...mapActions([ 'increment', // \u5c06 `this.increment()` \u6620\u5c04\u4e3a `this.$store.dispatch('increment')` 'incrementBy' //`this.incrementBy(amount)` \u6620\u5c04\u4e3a `this.$store.dispatch('incrementBy', amount)` ]) } }","title":"mapActions \u8f85\u52a9\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#action_1","text":"\u5047\u8bbe\u5229\u7528 async / await \u8fd9\u4e2a JavaScript \u65b0\u7279\u6027\uff1a // \u5047\u8bbe getData() \u548c getOtherData() \u8fd4\u56de\u7684\u662f Promise actions: { async actionA ({ commit }) { commit('gotData', await getData()) }, async actionB ({ dispatch, commit }) { await dispatch('actionA') // \u7b49\u5f85 actionA \u5b8c\u6210 commit('gotOtherData', await getOtherData()) } }","title":"\u7ec4\u5408 Action"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#24-module","text":"Vuex \u53ef\u5c06 store \u5206\u5272\u6210**\u6a21\u5757\uff08module\uff09**\u3002\u6bcf\u4e2a\u6a21\u5757\u62e5\u6709\u81ea\u5df1\u7684 state\u3001mutation\u3001action\u3001getter\u3001\u751a\u81f3\u662f\u5d4c\u5957\u5b50\u6a21\u5757\u2014\u2014\u4ece\u4e0a\u81f3\u4e0b\u8fdb\u884c\u540c\u6837\u65b9\u5f0f\u7684\u5206\u5272\uff1a const moduleA = { state: { ... }, mutations: { ... }, actions: { ... }, getters: { ... } } const moduleB = { // ... } const store = new Vuex.Store({ modules: { a: moduleA, b: moduleB } }) store.state.a // -> moduleA \u7684\u72b6\u6001 store.state.b // -> moduleB \u7684\u72b6\u6001","title":"2.4 Module"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#_3","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6a21\u5757\u5185\u90e8\u7684 action\u3001mutation \u548c getter \u662f\u6ce8\u518c\u5728**\u5168\u5c40\u547d\u540d\u7a7a\u95f4**\u7684\u3002\u82e5\u60f3\u6a21\u5757\u5177\u6709\u66f4\u9ad8\u7684\u5c01\u88c5\u5ea6\u548c\u590d\u7528\u6027\uff0c\u53ef\u6dfb\u52a0 namespaced: true \u4f7f\u5176\u6210\u4e3a\u547d\u540d\u7a7a\u95f4\u6a21\u5757\u3002","title":"\u547d\u540d\u7a7a\u95f4"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#global-assets","text":"\u5982\u679c\u5411\u4f7f\u7528\u5168\u5c40 state \u548c getter\uff0c rootState \u548c rootGetter \u4f1a\u4f5c\u4e3a\u7b2c\u4e09\u548c\u7b2c\u56db\u53c2\u6570\u4f20\u5165 getter\uff0c\u4e5f\u4f1a\u901a\u8fc7 context \u5bf9\u8c61\u7684\u5c5e\u6027\u4f20\u5165 action\u3002","title":"\u5728\u547d\u540d\u7a7a\u95f4\u6a21\u5757\u5185\u8bbf\u95ee\u5168\u5c40\u5185\u5bb9\uff08Global Assets\uff09"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#_4","text":"computed: { ...mapState('some/nested/module', { a: state => state.a, // === a: state => state.some.nested.module.a, b: state => state.b // === b: state => state.some.nested.module.b }) }, methods: { ...mapActions('some/nested/module', [ 'foo', // === 'some/nested/module/foo', 'bar' // === 'some/nested/module/bar', ]) } \u6216\u8005\uff0c import { createNamespacedHelpers } from 'vuex' const { mapState, mapActions } = createNamespacedHelpers('some/nested/module') export default { computed: { // \u5728 `some/nested/module` \u4e2d\u67e5\u627e ...mapState({ a: state => state.a, b: state => state.b }) }, methods: { // \u5728 `some/nested/module` \u4e2d\u67e5\u627e ...mapActions([ 'foo', 'bar' ]) } }","title":"\u5e26\u547d\u540d\u7a7a\u95f4\u7684\u7ed1\u5b9a\u51fd\u6570"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#_5","text":"\u5728 store \u521b\u5efa**\u4e4b\u540e**\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 store.registerModule \u65b9\u6cd5\u6ce8\u518c\u6a21\u5757\uff1a // \u6ce8\u518c\u6a21\u5757 `myModule` store.registerModule('myModule', { // ... }) // \u6ce8\u518c\u5d4c\u5957\u6a21\u5757 `nested/myModule` store.registerModule(['nested', 'myModule'], { // ... }) \u53ef\u4ee5\u4f7f\u7528 store.unregisterModule(moduleName) \u6765\u52a8\u6001\u5378\u8f7d\u6a21\u5757\u3002","title":"\u6a21\u5757\u52a8\u6001\u6ce8\u518c"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#3","text":"Vuex \u9700\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219\uff1a \u5e94\u7528\u5c42\u7ea7\u7684\u72b6\u6001\u5e94\u8be5\u96c6\u4e2d\u5230\u5355\u4e2a store \u5bf9\u8c61\u4e2d\u3002 \u63d0\u4ea4 mutation \u662f\u66f4\u6539\u72b6\u6001\u7684\u552f\u4e00\u65b9\u6cd5\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u540c\u6b65\u7684\u3002 \u5f02\u6b65\u903b\u8f91\u90fd\u5e94\u8be5\u5c01\u88c5\u5230 action \u91cc\u9762\u3002 \u53ea\u8981\u9075\u5b88\u4ee5\u4e0a\u89c4\u5219\uff0c\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\u968f\u4fbf\u3002 \u251c\u2500\u2500 index.html \u251c\u2500\u2500 main.js \u251c\u2500\u2500 api \u2502 \u2514\u2500\u2500 ... # \u62bd\u53d6\u51faAPI\u8bf7\u6c42 \u251c\u2500\u2500 components \u2502 \u251c\u2500\u2500 App.vue \u2502 \u2514\u2500\u2500 ... \u2514\u2500\u2500 store \u251c\u2500\u2500 index.js # \u6211\u4eec\u7ec4\u88c5\u6a21\u5757\u5e76\u5bfc\u51fa store \u7684\u5730\u65b9 \u251c\u2500\u2500 actions.js # \u6839\u7ea7\u522b\u7684 action \u251c\u2500\u2500 mutations.js # \u6839\u7ea7\u522b\u7684 mutation \u2514\u2500\u2500 modules \u251c\u2500\u2500 cart.js # \u8d2d\u7269\u8f66\u6a21\u5757 \u2514\u2500\u2500 products.js # \u4ea7\u54c1\u6a21\u5757","title":"3. \u9879\u76ee\u7ed3\u6784"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20Vuex/#4","text":"Vuex \u7684 store \u63a5\u53d7 plugins \u9009\u9879\uff0c\u8fd9\u4e2a\u9009\u9879\u66b4\u9732\u51fa\u6bcf\u6b21 mutation \u7684\u94a9\u5b50\u3002Vuex \u63d2\u4ef6\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0cstore \u4f5c\u4e3a\u5176\u552f\u4e00\u53c2\u6570\uff1a const myPlugin = store => { // \u5f53 store \u521d\u59cb\u5316\u540e\u8c03\u7528 store.subscribe((mutation, state) => { // \u6bcf\u6b21 mutation \u4e4b\u540e\u8c03\u7528 // mutation \u7684\u683c\u5f0f\u4e3a { type, payload } }) } \u4f7f\u7528\uff1a const store = new Vuex.Store({ state, mutations, plugins: [myPlugin] })","title":"4. \u63d2\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/","text":"\u8ba9\u8bbe\u8ba1\u770b\u8d77\u6765\u70ab\u9177\uff0c\u4e5f\u662f\u6211\u559c\u6b22\u524d\u7aef\u7684\u539f\u56e0\u4e4b\u4e00\uff0c\u8bdd\u8bf4\uff0c\u8c01\u53c8\u4e0d\u7231\u5462\uff1f 0. \u6982\u8ff0 \u00b6 Vue \u5728\u63d2\u5165\u3001\u66f4\u65b0\u6216\u8005\u79fb\u9664 DOM \u65f6\uff0c\u63d0\u4f9b\u591a\u79cd\u4e0d\u540c\u65b9\u5f0f\u7684\u5e94\u7528\u8fc7\u6e21\u6548\u679c\u3002 1. \u8fc7\u6e21\u7ec4\u4ef6 transition \u00b6 Vue \u63d0\u4f9b\u4e86 transition \u7684\u5c01\u88c5\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7ed9\u4efb\u4f55\u5143\u7d20\u548c\u7ec4\u4ef6\u6dfb\u52a0 entering/leaving \u8fc7\u6e21\u3002 1.1 \u8fc7\u6e21\u7684\u8fc7\u7a0b \u00b6 \u5f53\u63d2\u5165\u6216\u5220\u9664\u5305\u542b\u5728 transition \u7ec4\u4ef6\u4e2d\u7684\u5143\u7d20\u65f6\uff0cVue \u5c06\u4f1a\u505a\u4ee5\u4e0b\u5904\u7406\uff1a \u81ea\u52a8\u55c5\u63a2\u76ee\u6807\u5143\u7d20\u662f\u5426\u5e94\u7528\u4e86 CSS \u8fc7\u6e21\u6216\u52a8\u753b \uff0c\u5982\u679c\u662f\uff0c\u5728\u6070\u5f53\u7684\u65f6\u673a\u6dfb\u52a0/\u5220\u9664 CSS \u7c7b\u540d\u3002 \u5982\u679c\u8fc7\u6e21\u7ec4\u4ef6\u63d0\u4f9b\u4e86**JavaScript \u94a9\u5b50\u51fd\u6570**\uff0c\u8fd9\u4e9b\u94a9\u5b50\u51fd\u6570\u5c06\u5728\u6070\u5f53\u7684\u65f6\u673a\u88ab\u8c03\u7528\u3002 \u5982\u679c\u6ca1\u6709\u627e\u5230 JavaScript \u94a9\u5b50\u5e76\u4e14\u4e5f\u6ca1\u6709\u68c0\u6d4b\u5230 CSS \u8fc7\u6e21/\u52a8\u753b\uff0cDOM \u64cd\u4f5c (\u63d2\u5165/\u5220\u9664) \u5728\u4e0b\u4e00\u5e27\u4e2d\u7acb\u5373\u6267\u884c\u3002(\u6ce8\u610f\uff1a\u6b64\u6307\u6d4f\u89c8\u5668\u9010\u5e27\u52a8\u753b\u673a\u5236\uff0c\u548c Vue \u7684 nextTick \u6982\u5ff5\u4e0d\u540c) 1.2 \u8fc7\u6e21CSS \u7c7b\u540d \u00b6 \u5728\u8fdb\u5165/\u79bb\u5f00\u7684\u8fc7\u6e21\u4e2d\uff0c\u4f1a\u6709 6 \u4e2a class \u5207\u6362\u3002 v-enter \uff1a\u5b9a\u4e49\u8fdb\u5165\u8fc7\u6e21\u7684**\u5f00\u59cb\u72b6\u6001**\u3002\u5728\u5143\u7d20\u88ab\u63d2\u5165\u65f6\u751f\u6548\uff0c\u5728\u4e0b\u4e00\u4e2a\u5e27\u79fb\u9664\u3002 v-enter-active \uff1a\u5b9a\u4e49\u8fc7\u6e21\u7684\u72b6\u6001\u3002\u5728\u5143\u7d20**\u6574\u4e2a\u8fc7\u6e21\u8fc7\u7a0b**\u4e2d\u4f5c\u7528\uff0c\u5728\u5143\u7d20\u88ab\u63d2\u5165\u65f6\u751f\u6548\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u88ab\u7528\u6765\u5b9a\u4e49\u8fc7\u6e21\u7684\u8fc7\u7a0b\u65f6\u95f4\uff0c\u5ef6\u8fdf\u548c\u66f2\u7ebf\u51fd\u6570\u3002 v-enter-to : \u5b9a\u4e49\u8fdb\u5165\u8fc7\u6e21\u7684**\u7ed3\u675f\u72b6\u6001**\u3002\u5728\u5143\u7d20\u88ab\u63d2\u5165\u4e00\u5e27\u540e\u751f\u6548 (\u4e8e\u6b64\u540c\u65f6 v-enter \u88ab\u5220\u9664)\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002 v-leave : \u5b9a\u4e49\u79bb\u5f00\u8fc7\u6e21\u7684**\u5f00\u59cb\u72b6\u6001**\u3002\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u65f6\u751f\u6548\uff0c\u5728\u4e0b\u4e00\u4e2a\u5e27\u79fb\u9664\u3002 v-leave-active \uff1a\u5b9a\u4e49\u8fc7\u6e21\u7684\u72b6\u6001\u3002\u5728\u5143\u7d20**\u6574\u4e2a\u8fc7\u6e21\u8fc7\u7a0b**\u4e2d\u4f5c\u7528\uff0c\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u540e\u7acb\u5373\u751f\u6548\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u88ab\u7528\u6765\u5b9a\u4e49\u8fc7\u6e21\u7684\u8fc7\u7a0b\u65f6\u95f4\uff0c\u5ef6\u8fdf\u548c\u66f2\u7ebf\u51fd\u6570\u3002 v-leave-to : \u5b9a\u4e49\u79bb\u5f00\u8fc7\u6e21\u7684**\u7ed3\u675f\u72b6\u6001**\u3002\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u4e00\u5e27\u540e\u751f\u6548 (\u4e8e\u6b64\u540c\u65f6 v-leave \u88ab\u5220\u9664)\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002 \u6b64\u5916\u53ef\u4ee5\u5b9a\u5236\u4e00\u4e2a\u663e\u6027\u7684**\u8fc7\u6e21\u6301\u7eed\u65f6\u95f4**\uff1a <transition :duration=\"{ enter: 500, leave: 800 }\">...</transition> \u200b 1.3 CSS\u8fc7\u6e21\u52a8\u753b \u00b6 CSS \u52a8\u753b\u7528\u6cd5\u540c CSS \u8fc7\u6e21\uff0c\u533a\u522b\u662f\u5728\u52a8\u753b\u4e2d v-enter \u7c7b\u540d\u5728\u8282\u70b9\u63d2\u5165 DOM \u540e\u4e0d\u4f1a\u7acb\u5373\u5220\u9664\uff0c\u800c\u662f\u5728 animationend \u4e8b\u4ef6\u89e6\u53d1\u65f6\u5220\u9664\u3002 \u793a\u4f8b\uff1a .bounce-enter-active { animation: bounce-in .5s; } .bounce-leave-active { animation: bounce-in .5s reverse; } @keyframes bounce-in { 0% { transform: scale(0); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } } 1.4 \u81ea\u5b9a\u4e49\u8fc7\u6e21\u7c7b\u540d \u00b6 \u53ef\u901a\u8fc7\u4ee5\u4e0b\u7279\u6027\u6765\u81ea\u5b9a\u4e49\u8fc7\u6e21\u7c7b\u540d\uff1a enter-class enter-active-class enter-to-class (2.1.8+) leave-class leave-active-class leave-to-class (2.1.8+) \u793a\u4f8b\uff0c\u4e0e\u7b2c\u4e09\u65b9 CSS \u52a8\u753b\u5e93 Animate.css \u7ed3\u5408\u4f7f\u7528\uff1a <transition name=\"custom-classes-transition\" enter-active-class=\"animated tada\" leave-active-class=\"animated bounceOutRight\" > <p v-if=\"show\">hello</p> </transition> 1.5 Javascript \u94a9\u5b50 \u00b6 <transition v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:after-enter=\"afterEnter\" v-on:enter-cancelled=\"enterCancelled\" v-on:before-leave=\"beforeLeave\" v-on:leave=\"leave\" v-on:after-leave=\"afterLeave\" v-on:leave-cancelled=\"leaveCancelled\" > <!-- ... --> </transition> \u5f53\u53ea\u7528 JavaScript \u8fc7\u6e21\u7684\u65f6\u5019\uff0c \u5728 enter \u548c leave \u4e2d\uff0c\u56de\u8c03\u51fd\u6570 done \u662f\u5fc5\u987b\u7684 \u3002\u5426\u5219\uff0c\u5b83\u4eec\u4f1a\u88ab\u540c\u6b65\u8c03\u7528\uff0c\u8fc7\u6e21\u4f1a\u7acb\u5373\u5b8c\u6210\u3002 2. \u521d\u59cb\u6e32\u67d3\u8fc7\u6e21 \u00b6 \u53ef\u4ee5\u901a\u8fc7 appear \u7279\u6027\u8bbe\u7f6e\u8282\u70b9\u7684\u5728\u521d\u59cb\u6e32\u67d3\u7684\u8fc7\u6e21\u3002 \u81ea\u5b9a\u4e49CSS\u7c7b\u540d <transition appear appear-class=\"custom-appear-class\" appear-to-class=\"custom-appear-to-class\" (2.1.8+) appear-active-class=\"custom-appear-active-class\" > <!-- ... --> </transition> \u81ea\u5b9a\u4e49Javascript\u94a9\u5b50 <transition appear v-on:before-appear=\"customBeforeAppearHook\" v-on:appear=\"customAppearHook\" v-on:after-appear=\"customAfterAppearHook\" v-on:appear-cancelled=\"customAppearCancelledHook\" > <!-- ... --> </transition> 3. \u591a\u5143\u7d20\u8fc7\u6e21 \u00b6 3.1 \u7b80\u5355\u6807\u7b7e \u00b6 \u5f53\u6709**\u76f8\u540c\u6807\u7b7e\u540d**\u7684\u5143\u7d20\u5207\u6362\u65f6\uff0c\u9700\u8981\u901a\u8fc7 key \u7279\u6027\u8bbe\u7f6e\u552f\u4e00\u7684\u503c\u6765\u6807\u8bb0\u4ee5\u8ba9 Vue \u533a\u5206\u5b83\u4eec\u3002 <transition> <button v-if=\"isEditing\" key=\"save\"> Save </button> <button v-else key=\"edit\"> Edit </button> </transition> 3.2 \u52a8\u6001\u7ec4\u4ef6 \u00b6 \u4e0d\u9700\u8981\u4f7f\u7528 key \u7279\u6027\uff0c\u53ea\u9700\u8981\u4f7f\u7528 \u52a8\u6001\u7ec4\u4ef6 \uff1a <transition name=\"component-fade\" mode=\"out-in\"> <component v-bind:is=\"view\"></component> </transition> 3.3 \u8fc7\u6e21\u6a21\u5f0f \u00b6 in-out \uff1a\u65b0\u5143\u7d20\u5148\u8fdb\u884c\u8fc7\u6e21\uff0c\u5b8c\u6210\u4e4b\u540e\u5f53\u524d\u5143\u7d20\u8fc7\u6e21\u79bb\u5f00\u3002 out-in \uff1a\u5f53\u524d\u5143\u7d20\u5148\u8fdb\u884c\u8fc7\u6e21\uff0c\u5b8c\u6210\u4e4b\u540e\u65b0\u5143\u7d20\u8fc7\u6e21\u8fdb\u5165\u3002 4. \u5217\u8868\u8fc7\u6e21 \u00b6 \u5728 v-for \u573a\u666f\u4e2d\uff0c\u53ef\u4f7f\u7528 <transition-group> \u7ec4\u4ef6\u540c\u65f6\u6e32\u67d3\u6574\u4e2a\u5217\u8868\u3002 \u4e0d\u540c\u4e8e <transition> \uff0c\u5b83\u4f1a\u4ee5\u4e00\u4e2a\u771f\u5b9e\u5143\u7d20\u5448\u73b0\uff1a\u9ed8\u8ba4\u4e3a\u4e00\u4e2a <span> \u3002\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7 tag \u7279\u6027\u66f4\u6362\u4e3a\u5176\u4ed6\u5143\u7d20\u3002 \u5185\u90e8\u5143\u7d20 \u603b\u662f\u9700\u8981 \u63d0\u4f9b\u552f\u4e00\u7684 key \u5c5e\u6027\u503c <transition-group name=\"list\" tag=\"ul\"> <li v-for=\"item in items\" v-bind:key=\"item\" class=\"list-item\"> {{ item }} </li> </transition-group> 4.1 \u8fdb\u5165/\u79bb\u5f00\u8fc7\u6e21 \u00b6 .list-enter-active, .list-leave-active { transition: all 1s; } .list-enter, .list-leave-to{ opacity: 0; transform: translateY(30px); } 4.2 \u6392\u5e8f\u8fc7\u6e21 \u00b6 .list-move { transition: transform 1s; } 4.3 \u4ea4\u9519\u8fc7\u6e21 \u00b6 \u901a\u8fc7 data \u5c5e\u6027\u4e0e JavaScript \u901a\u4fe1 \uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5217\u8868\u7684\u4ea4\u9519\u8fc7\u6e21\u3002 <transition-group name=\"list\" tag=\"ul\" v-bind:css=\"false\" v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:leave=\"leave\" > <li v-for=\"(item, index) in computedList\" v-bind:key=\"item.msg\" v-bind:data-index=\"index\" >{{ item.msg }}</li> </transition-group> \u53ef\u4ee5\u914d\u5408\u4f7f\u7528\u7b2c\u4e09\u65b9 JavaScript \u52a8\u753b\u5e93\u4f7f\u7528\uff0c\u5982 Velocity.js 5. \u8fc7\u6e21\u7684\u590d\u7528 \u00b6 \u521b\u5efa\u4e00\u4e2a\u53ef\u590d\u7528\u8fc7\u6e21\u7ec4\u4ef6\uff1a Vue.component('my-special-transition', { template: '\\ <transition\\ name=\"very-special-transition\"\\ mode=\"out-in\"\\ v-on:before-enter=\"beforeEnter\"\\ v-on:after-enter=\"afterEnter\"\\ >\\ <slot></slot>\\ </transition>\\ ', methods: { beforeEnter: function (el) { // ... }, afterEnter: function (el) { // ... } } }) \u5f53\u7136\uff0c\u4f7f\u7528**render\u51fd\u6570**\u66f4\u9002\u5408\u521b\u5efa\u8fd9\u7c7b\u7ec4\u5efa\u3002 6. \u72b6\u6001\u8fc7\u6e21 \u00b6 \u5bf9\u4e8e\u6570\u636e\u5143\u7d20\u672c\u8eab\u7684\u52a8\u6001\u6548\u679c\uff0c\u6bd4\u5982\uff1a \u6570\u5b57\u548c\u8fd0\u7b97 \u989c\u8272\u7684\u663e\u793a SVG \u8282\u70b9\u7684\u4f4d\u7f6e \u5143\u7d20\u7684\u5927\u5c0f\u548c\u5176\u4ed6\u7684\u5c5e\u6027 \u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u6765\u5b9e\u73b0\u5207\u6362\u5143\u7d20\u7684\u8fc7\u6e21\u72b6\u6001\uff0c\u5982Tween.js\u3002 **\u72b6\u6001\u8fc7\u6e21**\u5927\u6709\u53ef\u4e3a\uff0c\u80fd\u8ba9\u8bbe\u8ba1\u5bcc\u6709\u751f\u8da3\uff0c\u597d\u751f\u7814\u7a76\u4e4b\u3002","title":"Vuejs \u5b66\u4e60\u7b14\u8bb0\u4e4b\u8fc7\u6e21\u52a8\u753b"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#0","text":"Vue \u5728\u63d2\u5165\u3001\u66f4\u65b0\u6216\u8005\u79fb\u9664 DOM \u65f6\uff0c\u63d0\u4f9b\u591a\u79cd\u4e0d\u540c\u65b9\u5f0f\u7684\u5e94\u7528\u8fc7\u6e21\u6548\u679c\u3002","title":"0. \u6982\u8ff0"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#1-transition","text":"Vue \u63d0\u4f9b\u4e86 transition \u7684\u5c01\u88c5\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7ed9\u4efb\u4f55\u5143\u7d20\u548c\u7ec4\u4ef6\u6dfb\u52a0 entering/leaving \u8fc7\u6e21\u3002","title":"1. \u8fc7\u6e21\u7ec4\u4ef6 transition"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#11","text":"\u5f53\u63d2\u5165\u6216\u5220\u9664\u5305\u542b\u5728 transition \u7ec4\u4ef6\u4e2d\u7684\u5143\u7d20\u65f6\uff0cVue \u5c06\u4f1a\u505a\u4ee5\u4e0b\u5904\u7406\uff1a \u81ea\u52a8\u55c5\u63a2\u76ee\u6807\u5143\u7d20\u662f\u5426\u5e94\u7528\u4e86 CSS \u8fc7\u6e21\u6216\u52a8\u753b \uff0c\u5982\u679c\u662f\uff0c\u5728\u6070\u5f53\u7684\u65f6\u673a\u6dfb\u52a0/\u5220\u9664 CSS \u7c7b\u540d\u3002 \u5982\u679c\u8fc7\u6e21\u7ec4\u4ef6\u63d0\u4f9b\u4e86**JavaScript \u94a9\u5b50\u51fd\u6570**\uff0c\u8fd9\u4e9b\u94a9\u5b50\u51fd\u6570\u5c06\u5728\u6070\u5f53\u7684\u65f6\u673a\u88ab\u8c03\u7528\u3002 \u5982\u679c\u6ca1\u6709\u627e\u5230 JavaScript \u94a9\u5b50\u5e76\u4e14\u4e5f\u6ca1\u6709\u68c0\u6d4b\u5230 CSS \u8fc7\u6e21/\u52a8\u753b\uff0cDOM \u64cd\u4f5c (\u63d2\u5165/\u5220\u9664) \u5728\u4e0b\u4e00\u5e27\u4e2d\u7acb\u5373\u6267\u884c\u3002(\u6ce8\u610f\uff1a\u6b64\u6307\u6d4f\u89c8\u5668\u9010\u5e27\u52a8\u753b\u673a\u5236\uff0c\u548c Vue \u7684 nextTick \u6982\u5ff5\u4e0d\u540c)","title":"1.1 \u8fc7\u6e21\u7684\u8fc7\u7a0b"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#12-css","text":"\u5728\u8fdb\u5165/\u79bb\u5f00\u7684\u8fc7\u6e21\u4e2d\uff0c\u4f1a\u6709 6 \u4e2a class \u5207\u6362\u3002 v-enter \uff1a\u5b9a\u4e49\u8fdb\u5165\u8fc7\u6e21\u7684**\u5f00\u59cb\u72b6\u6001**\u3002\u5728\u5143\u7d20\u88ab\u63d2\u5165\u65f6\u751f\u6548\uff0c\u5728\u4e0b\u4e00\u4e2a\u5e27\u79fb\u9664\u3002 v-enter-active \uff1a\u5b9a\u4e49\u8fc7\u6e21\u7684\u72b6\u6001\u3002\u5728\u5143\u7d20**\u6574\u4e2a\u8fc7\u6e21\u8fc7\u7a0b**\u4e2d\u4f5c\u7528\uff0c\u5728\u5143\u7d20\u88ab\u63d2\u5165\u65f6\u751f\u6548\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u88ab\u7528\u6765\u5b9a\u4e49\u8fc7\u6e21\u7684\u8fc7\u7a0b\u65f6\u95f4\uff0c\u5ef6\u8fdf\u548c\u66f2\u7ebf\u51fd\u6570\u3002 v-enter-to : \u5b9a\u4e49\u8fdb\u5165\u8fc7\u6e21\u7684**\u7ed3\u675f\u72b6\u6001**\u3002\u5728\u5143\u7d20\u88ab\u63d2\u5165\u4e00\u5e27\u540e\u751f\u6548 (\u4e8e\u6b64\u540c\u65f6 v-enter \u88ab\u5220\u9664)\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002 v-leave : \u5b9a\u4e49\u79bb\u5f00\u8fc7\u6e21\u7684**\u5f00\u59cb\u72b6\u6001**\u3002\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u65f6\u751f\u6548\uff0c\u5728\u4e0b\u4e00\u4e2a\u5e27\u79fb\u9664\u3002 v-leave-active \uff1a\u5b9a\u4e49\u8fc7\u6e21\u7684\u72b6\u6001\u3002\u5728\u5143\u7d20**\u6574\u4e2a\u8fc7\u6e21\u8fc7\u7a0b**\u4e2d\u4f5c\u7528\uff0c\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u540e\u7acb\u5373\u751f\u6548\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u88ab\u7528\u6765\u5b9a\u4e49\u8fc7\u6e21\u7684\u8fc7\u7a0b\u65f6\u95f4\uff0c\u5ef6\u8fdf\u548c\u66f2\u7ebf\u51fd\u6570\u3002 v-leave-to : \u5b9a\u4e49\u79bb\u5f00\u8fc7\u6e21\u7684**\u7ed3\u675f\u72b6\u6001**\u3002\u5728\u79bb\u5f00\u8fc7\u6e21\u88ab\u89e6\u53d1\u4e00\u5e27\u540e\u751f\u6548 (\u4e8e\u6b64\u540c\u65f6 v-leave \u88ab\u5220\u9664)\uff0c\u5728 transition/animation \u5b8c\u6210\u4e4b\u540e\u79fb\u9664\u3002 \u6b64\u5916\u53ef\u4ee5\u5b9a\u5236\u4e00\u4e2a\u663e\u6027\u7684**\u8fc7\u6e21\u6301\u7eed\u65f6\u95f4**\uff1a <transition :duration=\"{ enter: 500, leave: 800 }\">...</transition> \u200b","title":"1.2 \u8fc7\u6e21CSS \u7c7b\u540d"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#13-css","text":"CSS \u52a8\u753b\u7528\u6cd5\u540c CSS \u8fc7\u6e21\uff0c\u533a\u522b\u662f\u5728\u52a8\u753b\u4e2d v-enter \u7c7b\u540d\u5728\u8282\u70b9\u63d2\u5165 DOM \u540e\u4e0d\u4f1a\u7acb\u5373\u5220\u9664\uff0c\u800c\u662f\u5728 animationend \u4e8b\u4ef6\u89e6\u53d1\u65f6\u5220\u9664\u3002 \u793a\u4f8b\uff1a .bounce-enter-active { animation: bounce-in .5s; } .bounce-leave-active { animation: bounce-in .5s reverse; } @keyframes bounce-in { 0% { transform: scale(0); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } }","title":"1.3 CSS\u8fc7\u6e21\u52a8\u753b"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#14","text":"\u53ef\u901a\u8fc7\u4ee5\u4e0b\u7279\u6027\u6765\u81ea\u5b9a\u4e49\u8fc7\u6e21\u7c7b\u540d\uff1a enter-class enter-active-class enter-to-class (2.1.8+) leave-class leave-active-class leave-to-class (2.1.8+) \u793a\u4f8b\uff0c\u4e0e\u7b2c\u4e09\u65b9 CSS \u52a8\u753b\u5e93 Animate.css \u7ed3\u5408\u4f7f\u7528\uff1a <transition name=\"custom-classes-transition\" enter-active-class=\"animated tada\" leave-active-class=\"animated bounceOutRight\" > <p v-if=\"show\">hello</p> </transition>","title":"1.4 \u81ea\u5b9a\u4e49\u8fc7\u6e21\u7c7b\u540d"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#15-javascript","text":"<transition v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:after-enter=\"afterEnter\" v-on:enter-cancelled=\"enterCancelled\" v-on:before-leave=\"beforeLeave\" v-on:leave=\"leave\" v-on:after-leave=\"afterLeave\" v-on:leave-cancelled=\"leaveCancelled\" > <!-- ... --> </transition> \u5f53\u53ea\u7528 JavaScript \u8fc7\u6e21\u7684\u65f6\u5019\uff0c \u5728 enter \u548c leave \u4e2d\uff0c\u56de\u8c03\u51fd\u6570 done \u662f\u5fc5\u987b\u7684 \u3002\u5426\u5219\uff0c\u5b83\u4eec\u4f1a\u88ab\u540c\u6b65\u8c03\u7528\uff0c\u8fc7\u6e21\u4f1a\u7acb\u5373\u5b8c\u6210\u3002","title":"1.5 Javascript \u94a9\u5b50"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#2","text":"\u53ef\u4ee5\u901a\u8fc7 appear \u7279\u6027\u8bbe\u7f6e\u8282\u70b9\u7684\u5728\u521d\u59cb\u6e32\u67d3\u7684\u8fc7\u6e21\u3002 \u81ea\u5b9a\u4e49CSS\u7c7b\u540d <transition appear appear-class=\"custom-appear-class\" appear-to-class=\"custom-appear-to-class\" (2.1.8+) appear-active-class=\"custom-appear-active-class\" > <!-- ... --> </transition> \u81ea\u5b9a\u4e49Javascript\u94a9\u5b50 <transition appear v-on:before-appear=\"customBeforeAppearHook\" v-on:appear=\"customAppearHook\" v-on:after-appear=\"customAfterAppearHook\" v-on:appear-cancelled=\"customAppearCancelledHook\" > <!-- ... --> </transition>","title":"2. \u521d\u59cb\u6e32\u67d3\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#3","text":"","title":"3. \u591a\u5143\u7d20\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#31","text":"\u5f53\u6709**\u76f8\u540c\u6807\u7b7e\u540d**\u7684\u5143\u7d20\u5207\u6362\u65f6\uff0c\u9700\u8981\u901a\u8fc7 key \u7279\u6027\u8bbe\u7f6e\u552f\u4e00\u7684\u503c\u6765\u6807\u8bb0\u4ee5\u8ba9 Vue \u533a\u5206\u5b83\u4eec\u3002 <transition> <button v-if=\"isEditing\" key=\"save\"> Save </button> <button v-else key=\"edit\"> Edit </button> </transition>","title":"3.1 \u7b80\u5355\u6807\u7b7e"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#32","text":"\u4e0d\u9700\u8981\u4f7f\u7528 key \u7279\u6027\uff0c\u53ea\u9700\u8981\u4f7f\u7528 \u52a8\u6001\u7ec4\u4ef6 \uff1a <transition name=\"component-fade\" mode=\"out-in\"> <component v-bind:is=\"view\"></component> </transition>","title":"3.2 \u52a8\u6001\u7ec4\u4ef6"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#33","text":"in-out \uff1a\u65b0\u5143\u7d20\u5148\u8fdb\u884c\u8fc7\u6e21\uff0c\u5b8c\u6210\u4e4b\u540e\u5f53\u524d\u5143\u7d20\u8fc7\u6e21\u79bb\u5f00\u3002 out-in \uff1a\u5f53\u524d\u5143\u7d20\u5148\u8fdb\u884c\u8fc7\u6e21\uff0c\u5b8c\u6210\u4e4b\u540e\u65b0\u5143\u7d20\u8fc7\u6e21\u8fdb\u5165\u3002","title":"3.3 \u8fc7\u6e21\u6a21\u5f0f"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#4","text":"\u5728 v-for \u573a\u666f\u4e2d\uff0c\u53ef\u4f7f\u7528 <transition-group> \u7ec4\u4ef6\u540c\u65f6\u6e32\u67d3\u6574\u4e2a\u5217\u8868\u3002 \u4e0d\u540c\u4e8e <transition> \uff0c\u5b83\u4f1a\u4ee5\u4e00\u4e2a\u771f\u5b9e\u5143\u7d20\u5448\u73b0\uff1a\u9ed8\u8ba4\u4e3a\u4e00\u4e2a <span> \u3002\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7 tag \u7279\u6027\u66f4\u6362\u4e3a\u5176\u4ed6\u5143\u7d20\u3002 \u5185\u90e8\u5143\u7d20 \u603b\u662f\u9700\u8981 \u63d0\u4f9b\u552f\u4e00\u7684 key \u5c5e\u6027\u503c <transition-group name=\"list\" tag=\"ul\"> <li v-for=\"item in items\" v-bind:key=\"item\" class=\"list-item\"> {{ item }} </li> </transition-group>","title":"4. \u5217\u8868\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#41","text":".list-enter-active, .list-leave-active { transition: all 1s; } .list-enter, .list-leave-to{ opacity: 0; transform: translateY(30px); }","title":"4.1 \u8fdb\u5165/\u79bb\u5f00\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#42","text":".list-move { transition: transform 1s; }","title":"4.2 \u6392\u5e8f\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#43","text":"\u901a\u8fc7 data \u5c5e\u6027\u4e0e JavaScript \u901a\u4fe1 \uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5217\u8868\u7684\u4ea4\u9519\u8fc7\u6e21\u3002 <transition-group name=\"list\" tag=\"ul\" v-bind:css=\"false\" v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:leave=\"leave\" > <li v-for=\"(item, index) in computedList\" v-bind:key=\"item.msg\" v-bind:data-index=\"index\" >{{ item.msg }}</li> </transition-group> \u53ef\u4ee5\u914d\u5408\u4f7f\u7528\u7b2c\u4e09\u65b9 JavaScript \u52a8\u753b\u5e93\u4f7f\u7528\uff0c\u5982 Velocity.js","title":"4.3 \u4ea4\u9519\u8fc7\u6e21"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#5","text":"\u521b\u5efa\u4e00\u4e2a\u53ef\u590d\u7528\u8fc7\u6e21\u7ec4\u4ef6\uff1a Vue.component('my-special-transition', { template: '\\ <transition\\ name=\"very-special-transition\"\\ mode=\"out-in\"\\ v-on:before-enter=\"beforeEnter\"\\ v-on:after-enter=\"afterEnter\"\\ >\\ <slot></slot>\\ </transition>\\ ', methods: { beforeEnter: function (el) { // ... }, afterEnter: function (el) { // ... } } }) \u5f53\u7136\uff0c\u4f7f\u7528**render\u51fd\u6570**\u66f4\u9002\u5408\u521b\u5efa\u8fd9\u7c7b\u7ec4\u5efa\u3002","title":"5. \u8fc7\u6e21\u7684\u590d\u7528"},{"location":"history/Vuejs%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/#6","text":"\u5bf9\u4e8e\u6570\u636e\u5143\u7d20\u672c\u8eab\u7684\u52a8\u6001\u6548\u679c\uff0c\u6bd4\u5982\uff1a \u6570\u5b57\u548c\u8fd0\u7b97 \u989c\u8272\u7684\u663e\u793a SVG \u8282\u70b9\u7684\u4f4d\u7f6e \u5143\u7d20\u7684\u5927\u5c0f\u548c\u5176\u4ed6\u7684\u5c5e\u6027 \u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u6765\u5b9e\u73b0\u5207\u6362\u5143\u7d20\u7684\u8fc7\u6e21\u72b6\u6001\uff0c\u5982Tween.js\u3002 **\u72b6\u6001\u8fc7\u6e21**\u5927\u6709\u53ef\u4e3a\uff0c\u80fd\u8ba9\u8bbe\u8ba1\u5bcc\u6709\u751f\u8da3\uff0c\u597d\u751f\u7814\u7a76\u4e4b\u3002","title":"6. \u72b6\u6001\u8fc7\u6e21"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/","text":"1. Scrollanim - CSS3&JavaScript\u6eda\u52a8\u52a8\u753b \u00b6 Scrollanim \u662f\u7ed3\u5408 CSS3\u548c JavaScript]\u6765\u521b\u5efa\u4ee4\u4eba\u60ca\u53f9\u7684\u6eda\u52a8\u52a8\u753b\u7684\u5f00\u6e90\u5e93\u3002 Scrolanim \u652f\u6301\u5728\u9875\u9762\u4e0a\u7684\u6240\u6709\u53ef\u7528\u7684\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u6709\u5f88\u591a\u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u4f7f\u7528\uff0c\u6784\u5efa\u51fa\u7cbe\u5f69\u7684\u6548\u679c\uff0c\u975e\u5e38\u5bb9\u6613\u4f7f\u7528\u3002 2. PixiJS - \u8d85\u5febHTML5 2D\u6e32\u67d3\u5f15\u64ce \u00b6 PixiJS \u662f\u4e00\u6b3e\u8d85\u5feb\u5f00\u6e90HTML5 2D\u6e32\u67d3\u5f15\u64ce\uff0c\u4f7f\u7528\u5e26\u6709Canvas\u56de\u8c03\u529f\u80fd\u7684WebGL\u3002\u4f5c\u4e3aJavaScript\u76842D\u6e32\u67d3\u5668\uff0cPixi\u7684\u76ee\u6807\u662f\uff0c\u63d0\u4f9b\u4e00\u4e2a\u5feb\u901f\u4e14\u8f7b\u91cf\u76842D\u5e93\uff0c\u53ef\u4ee5\u517c\u5bb9\u6240\u6709\u8bbe\u5907\u3002 pixi.js\u6559\u7a0b\u4e2d\u6587\u7248--\u57fa\u7840\u7bc7 3.CssStats - \u5206\u6790\u548c\u4f18\u5316\u7f51\u7ad9 CSS \u4ee3\u7801 \u00b6 CssStats \u662f\u4e00\u4e2a\u5728\u7ebf\u7684 **CSS**\u4ee3\u7801\u5206\u6790\u5de5\u5177\u3002\u53ea\u9700\u8981\u8f93\u5165\u7f51\u5740\u6216\u8005\u76f4\u63a5CSS\u5730\u5740\u5373\u53ef\u8fdb\u884c CSS \u4ee3\u7801\u7684\u5168\u65b9\u4f4d\u5206\u6790\uff0c\u662f\u524d\u7aef\u5f00\u53d1\u4eba\u5458\u548c\u7f51\u9875\u8bbe\u8ba1\u5e08\u5206\u6790\u7f51\u7ad9 CSS \u4ee3\u7801\u7684\u5229\u5668\uff0c\u53ef\u4ee5\u7edf\u8ba1\u51fa CSS \u4ee3\u7801\u91cc\u7684\u89c4\u5219\u6570\u91cf\u3001\u5b57\u4f53\u989c\u8272\u3001\u5b57\u4f53\u5927\u5c0f\u3001\u80cc\u666f\u989c\u8272\u6570\u7b49\u3002 4. Animate.css \u00b6 Animate.css \u4e00\u6b3e\u5f3a\u5927\u7684\u9884\u8bbecss3\u52a8\u753b\u5e93\uff0c\u7528\u8fc7\u7684\u4eba\u90fd\u77e5\u9053\uff0c\u6bcb\u5eb8\u8d58\u8ff0\u3002 5. Material Design - \u524d\u7aef\u6846\u67b6 \u00b6 MATERIALDESIGN Google's Material Design \u6846\u67b6\u5b98\u7f51 Material-UI Material Desig for React\uff0c 1.0\u7248\u672c \u5df2\u51fa\u3002 6. \u81ea\u52a8\u5316\u751f\u6210\u96ea\u78a7\u56fe\u7684\u5de5\u5177 \u00b6 \u5728\u7ebf\u5de5\u5177\uff1a https://www.toptal.com/developers/css/sprite-generator \u53ea\u8981\u4f60\u6dfb\u52a0\u76f8\u5173\u8d44\u6e90\u6587\u4ef6\uff0c\u4ed6\u5c31\u4f1a\u81ea\u52a8\u5e2e\u4f60\u751f\u6210\u96ea\u78a7\u56fe\u4ee5\u53ca\u5bf9\u5e94\u7684 CSS \u6837\u5f0f\u3002 \u53e6\u5916\uff0c\u96ea\u78a7\u56fe\u751f\u6210\u63d2\u4ef6 webpack-spritesmith \u3002 \u5b98\u65b9\u6587\u6863\uff1a https://www.npmjs.com/package/webpack-spritesmith 7. \u4f7f\u7528 WebP \u00b6 X. JavaScript\u4e4b\u661f \u00b6 \u8fc7\u53bb\uff0c2016\u5e74\u7684web\u524d\u7aef\u6280\u672f\u4e4b\u661f\u4e3a \uff1a 3\u4e2aUI\u6846\u67b6\uff1a Vue.js , React \u4ee5\u53ca Angular 2 \u65b0\u7684node.js\u5305\u7ba1\u7406\u5de5\u5177\uff1a Yarn \u684c\u9762\u5e94\u7528\u9886\u5148\u7ea7\u89e3\u51b3\u65b9\u6848\uff1a Electron \u5feb\u901f\u4e0a\u624bReact\u7684\u89e3\u51b3\u65b9\u6848\uff1a Create React App \u79fb\u52a8\u7aef\u6846\u67b6\uff1a React Native \u6700\u8457\u540d\u7684CSS\u5de5\u5177\u5305\uff1a Bootstrap \u57fa\u4e8e\u51fd\u6570\u5f0f\u7f16\u7a0b\u601d\u60f3\u7684\u72b6\u6001\u7ba1\u7406\u5e93\uff1a Redux \u5f3a\u5927\u7075\u6d3b\u7684\u56fe\u8868\u5e93\uff1a D3 \u672a\u6765\uff0c2017\u5e74\uff0c\u9884\u6d4b\u768410\u5927Javascript\u4e4b\u661f\u4e3a \uff1a Vue.JS Electron Create React App React Native Gatsby Yarn\uff1a\u4e00\u4e2a\u5feb\u901f\u3001\u53ef\u4fe1\u8d56\u7684\u5b89\u5168\u4f9d\u8d56\u5305\uff0c\u53ef\u66ff\u4ee3npm\uff0c\u53ef\u4ee5 \u5728\u8fd9\u513f \u67e5\u9605node.js\u5305\u7ba1\u7406\u5de5\u5177\u7684\u72b6\u6001 \u201c\u6e10\u8fdb\u5f0f\u7f51\u9875\u5e94\u7528\u201d\u6982\u5ff5 Node.js\u7684\u201c\u5fae\u670d\u52a1\u201d\u89e3\u51b3\u65b9\u6848\uff0c\u80fd\u591f\u66f4\u597d\u5b9e\u73b0\u90e8\u7f72\uff0c\u4f8b\u5982Now Node.js\u7684\u5347\u7ea7\uff1a\u6700\u65b0\u4e00\u7248\u5df2\u7ecf\u5b9e\u73b0\u5bf9ES6\u8bed\u6cd5\u5f88\u597d\u7684\u652f\u6301 \u6700\u540e\u4e00\u4e2a\u662fGraphQL\uff1a\u6240\u6709\u7684\u670b\u53cb\u90fd\u544a\u8bc9\u6211\uff0c\u5c06\u6709\u5927\u4e8b\u53d1\u751f\u3002","title":"Web\u5b9e\u7528\u5de5\u5177\u6536\u96c6"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#1-scrollanim-css3javascript","text":"Scrollanim \u662f\u7ed3\u5408 CSS3\u548c JavaScript]\u6765\u521b\u5efa\u4ee4\u4eba\u60ca\u53f9\u7684\u6eda\u52a8\u52a8\u753b\u7684\u5f00\u6e90\u5e93\u3002 Scrolanim \u652f\u6301\u5728\u9875\u9762\u4e0a\u7684\u6240\u6709\u53ef\u7528\u7684\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u6709\u5f88\u591a\u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u4f7f\u7528\uff0c\u6784\u5efa\u51fa\u7cbe\u5f69\u7684\u6548\u679c\uff0c\u975e\u5e38\u5bb9\u6613\u4f7f\u7528\u3002","title":"1. Scrollanim - CSS3&amp;JavaScript\u6eda\u52a8\u52a8\u753b"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#2-pixijs-html5-2d","text":"PixiJS \u662f\u4e00\u6b3e\u8d85\u5feb\u5f00\u6e90HTML5 2D\u6e32\u67d3\u5f15\u64ce\uff0c\u4f7f\u7528\u5e26\u6709Canvas\u56de\u8c03\u529f\u80fd\u7684WebGL\u3002\u4f5c\u4e3aJavaScript\u76842D\u6e32\u67d3\u5668\uff0cPixi\u7684\u76ee\u6807\u662f\uff0c\u63d0\u4f9b\u4e00\u4e2a\u5feb\u901f\u4e14\u8f7b\u91cf\u76842D\u5e93\uff0c\u53ef\u4ee5\u517c\u5bb9\u6240\u6709\u8bbe\u5907\u3002 pixi.js\u6559\u7a0b\u4e2d\u6587\u7248--\u57fa\u7840\u7bc7","title":"2. PixiJS - \u8d85\u5febHTML5 2D\u6e32\u67d3\u5f15\u64ce"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#3cssstats-css","text":"CssStats \u662f\u4e00\u4e2a\u5728\u7ebf\u7684 **CSS**\u4ee3\u7801\u5206\u6790\u5de5\u5177\u3002\u53ea\u9700\u8981\u8f93\u5165\u7f51\u5740\u6216\u8005\u76f4\u63a5CSS\u5730\u5740\u5373\u53ef\u8fdb\u884c CSS \u4ee3\u7801\u7684\u5168\u65b9\u4f4d\u5206\u6790\uff0c\u662f\u524d\u7aef\u5f00\u53d1\u4eba\u5458\u548c\u7f51\u9875\u8bbe\u8ba1\u5e08\u5206\u6790\u7f51\u7ad9 CSS \u4ee3\u7801\u7684\u5229\u5668\uff0c\u53ef\u4ee5\u7edf\u8ba1\u51fa CSS \u4ee3\u7801\u91cc\u7684\u89c4\u5219\u6570\u91cf\u3001\u5b57\u4f53\u989c\u8272\u3001\u5b57\u4f53\u5927\u5c0f\u3001\u80cc\u666f\u989c\u8272\u6570\u7b49\u3002","title":"3.CssStats - \u5206\u6790\u548c\u4f18\u5316\u7f51\u7ad9 CSS \u4ee3\u7801"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#4-animatecss","text":"Animate.css \u4e00\u6b3e\u5f3a\u5927\u7684\u9884\u8bbecss3\u52a8\u753b\u5e93\uff0c\u7528\u8fc7\u7684\u4eba\u90fd\u77e5\u9053\uff0c\u6bcb\u5eb8\u8d58\u8ff0\u3002","title":"4. Animate.css"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#5-material-design-","text":"MATERIALDESIGN Google's Material Design \u6846\u67b6\u5b98\u7f51 Material-UI Material Desig for React\uff0c 1.0\u7248\u672c \u5df2\u51fa\u3002","title":"5. Material Design - \u524d\u7aef\u6846\u67b6"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#6","text":"\u5728\u7ebf\u5de5\u5177\uff1a https://www.toptal.com/developers/css/sprite-generator \u53ea\u8981\u4f60\u6dfb\u52a0\u76f8\u5173\u8d44\u6e90\u6587\u4ef6\uff0c\u4ed6\u5c31\u4f1a\u81ea\u52a8\u5e2e\u4f60\u751f\u6210\u96ea\u78a7\u56fe\u4ee5\u53ca\u5bf9\u5e94\u7684 CSS \u6837\u5f0f\u3002 \u53e6\u5916\uff0c\u96ea\u78a7\u56fe\u751f\u6210\u63d2\u4ef6 webpack-spritesmith \u3002 \u5b98\u65b9\u6587\u6863\uff1a https://www.npmjs.com/package/webpack-spritesmith","title":"6. \u81ea\u52a8\u5316\u751f\u6210\u96ea\u78a7\u56fe\u7684\u5de5\u5177"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#7-webp","text":"","title":"7. \u4f7f\u7528 WebP"},{"location":"history/Web%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86/#x-javascript","text":"\u8fc7\u53bb\uff0c2016\u5e74\u7684web\u524d\u7aef\u6280\u672f\u4e4b\u661f\u4e3a \uff1a 3\u4e2aUI\u6846\u67b6\uff1a Vue.js , React \u4ee5\u53ca Angular 2 \u65b0\u7684node.js\u5305\u7ba1\u7406\u5de5\u5177\uff1a Yarn \u684c\u9762\u5e94\u7528\u9886\u5148\u7ea7\u89e3\u51b3\u65b9\u6848\uff1a Electron \u5feb\u901f\u4e0a\u624bReact\u7684\u89e3\u51b3\u65b9\u6848\uff1a Create React App \u79fb\u52a8\u7aef\u6846\u67b6\uff1a React Native \u6700\u8457\u540d\u7684CSS\u5de5\u5177\u5305\uff1a Bootstrap \u57fa\u4e8e\u51fd\u6570\u5f0f\u7f16\u7a0b\u601d\u60f3\u7684\u72b6\u6001\u7ba1\u7406\u5e93\uff1a Redux \u5f3a\u5927\u7075\u6d3b\u7684\u56fe\u8868\u5e93\uff1a D3 \u672a\u6765\uff0c2017\u5e74\uff0c\u9884\u6d4b\u768410\u5927Javascript\u4e4b\u661f\u4e3a \uff1a Vue.JS Electron Create React App React Native Gatsby Yarn\uff1a\u4e00\u4e2a\u5feb\u901f\u3001\u53ef\u4fe1\u8d56\u7684\u5b89\u5168\u4f9d\u8d56\u5305\uff0c\u53ef\u66ff\u4ee3npm\uff0c\u53ef\u4ee5 \u5728\u8fd9\u513f \u67e5\u9605node.js\u5305\u7ba1\u7406\u5de5\u5177\u7684\u72b6\u6001 \u201c\u6e10\u8fdb\u5f0f\u7f51\u9875\u5e94\u7528\u201d\u6982\u5ff5 Node.js\u7684\u201c\u5fae\u670d\u52a1\u201d\u89e3\u51b3\u65b9\u6848\uff0c\u80fd\u591f\u66f4\u597d\u5b9e\u73b0\u90e8\u7f72\uff0c\u4f8b\u5982Now Node.js\u7684\u5347\u7ea7\uff1a\u6700\u65b0\u4e00\u7248\u5df2\u7ecf\u5b9e\u73b0\u5bf9ES6\u8bed\u6cd5\u5f88\u597d\u7684\u652f\u6301 \u6700\u540e\u4e00\u4e2a\u662fGraphQL\uff1a\u6240\u6709\u7684\u670b\u53cb\u90fd\u544a\u8bc9\u6211\uff0c\u5c06\u6709\u5927\u4e8b\u53d1\u751f\u3002","title":"X. JavaScript\u4e4b\u661f"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","text":"\u524d\u51e0\u4e2a\u6708\u770b\u4e86\u300a\u56fe\u89e3 HTTP\u300b\uff0c\u7b80\u5355\u6613\u61c2\u3002\u73b0\u5728\u6574\u7406\u4e00\u4e0b\u7b14\u8bb0\u3002 Part 1. HTTP \u7684\u7f51\u7edc\u57fa\u7840 \u00b6 Q1. \u5404\u5c42\u534f\u8bae\u5bf9\u4e00\u6b21 HTTP \u8bf7\u6c42\u7684\u5c01\u88c5 \u7b54\uff1a\u89c1 p10 \u56fe\u3002 Q2. \u5404\u79cd\u534f\u8bae\u4e0e HTTP \u534f\u8bae\u7684\u5173\u7cfb\u3002 \u7b54\uff1a \u56fe p15 \u4e86\u89e3\u4e00\u4e0b\uff0cIP \u534f\u8bae\uff08\u7f51\u7edc\u5c42\uff09\u3001TCP \u534f\u8bae\uff08\u4f20\u8f93\u5c42\uff09\u548c DNS \u670d\u52a1\uff08\u5e94\u7528\u5c42\uff09\u5728\u4f7f\u7528 HTTP \u534f\u8bae\u7684\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u5404\u81ea\u53d1\u6325\u4e86\u54ea\u4e9b\u4f5c\u7528\u3002 Part 2. \u7b80\u5355\u7684 HTTP \u534f\u8bae \u00b6 Q3. HTTP \u662f\u4e0d\u4fdd\u5b58\u72b6\u6001\u7684\u534f\u8bae\u3002 \u7b54\uff1a HTTP \u4e3a\u65e0\u72b6\u6001\uff08stateless\uff09\u534f\u8bae\uff0c\u5373**\u4e0d\u5177\u5907\u4fdd\u5b58\u4e4b\u524d\u53d1\u9001\u8fc7\u7684\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u529f\u80fd**\u3002 \u4f46\u4e3a\u4e86\u5b9e\u73b0\u4fdd\u6301\u72b6\u6001\u7684\u529f\u80fd\uff0c\uff08\u6bd4\u5982\uff0c\u5bf9\u4e8e\u7528\u6237\u767b\u9646\uff0c\u7f51\u7ad9\u8981\u638c\u63e1\u662f\u8c01\u9001\u51fa\u7684\u8df3\u8f6c\u7b49\u8bf7\u6c42\uff0c\uff09\u4e8e\u662f\u5f15\u5165\u4e86 Cookie \u6280\u672f \u3002 Q4. HTTP/1.1 \u53ef\u7528\u7684\u65b9\u6cd5 GET\uff1a\u83b7\u53d6\u8d44\u6e90 # \u8bf7\u6c42 GET /index.html HTTP/1.1 Host: www.hacker.jp # --------------------------------------- # # \u54cd\u5e94 \u8fd4\u56de index.html \u7684\u9875\u9762\u8d44\u6e90 # \u8bf7\u6c42 GET /index.html HTTP/1.1 Host: www.hacker.jp If-Modified-Since: Wed, 15 Aug 2018 08:30:11 GMT # --------------------------------------- # # \u54cd\u5e94 \u8fd4\u56de Wed, 15 Aug 2018 08:30:11 \u540e\u6709\u66f4\u65b0\u7684 index.html \u7684\u9875\u9762\u8d44\u6e90\uff1b \u5426\u5219\uff0c\u8fd4\u56de 304 Not Modified \u7684\u54cd\u5e94 POST\uff1a\u4f20\u8f93\u5b9e\u4f53\u4e3b\u4f53 PUT\uff1a \u4f20\u8f93\u6587\u4ef6 \u8bf7\u6c42\u62a5\u6587\u4e3b\u4f53\u4e2d\u5305\u542b\u6587\u4ef6\u5185\u5bb9\uff0c\u4fdd\u5b58\u5230\u8bf7\u6c42 URI \u6307\u5b9a\u7684\u4f4d\u7f6e\u3002 \u54cd\u5e94\u7801 204 No Content\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u5df2\u5728\u670d\u52a1\u5668\u4e0a\u3002 HTTP/1.1 \u7684 PUT \u65b9\u6cd5\u4e0d\u5e26\u9a8c\u8bc1\u673a\u5236\uff0c\u5b58\u5728\u5b89\u5168\u95ee\u9898\uff0c\u4e00\u822c Web \u7f51\u7ad9\u4f1a\u7981\u7528\uff1b\u53ef\u914d\u5408 Web \u5e94\u7528\u9a8c\u8bc1\u673a\u5236\uff0c\u6216 REST \u6807\u51c6\u4f1a\u5f00\u653e\u8be5\u65b9\u6cd5\u3002 DELETE\uff1a\u5220\u9664\u6587\u4ef6 \u5220\u9664\u8bf7\u6c42 URI \u6307\u5b9a\u7684\u8d44\u6e90\u3002 \u54cd\u5e94\u7801 204 No Content\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4e0a\u5220\u9664\u3002 \u4e0e PUT \u4e00\u6837\uff0c\u65e0\u9a8c\u8bc1\u673a\u5236\u3002 HEAD\uff1a\u83b7\u5f97\u62a5\u6587\u9996\u90e8 \u53ea\u8fd4\u56de GET \u54cd\u5e94\u62a5\u6587\u7684\u5934\u90e8\u3002 OPTIONS\uff1a\u8be2\u95ee\u652f\u6301\u7684\u65b9\u6cd5 # \u8bf7\u6c42 OPTIONS * HTTP/1.1 Host: www.hacker.jp # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK Allow: GET,POST,HEAD,OPTIONS (\u8fd4\u56de\u670d\u52a1\u5668\u652f\u6301\u7684\u65b9\u6cd5) TRACE\uff1a\u8ffd\u8e2a\u8def\u5f84 Max-Forwards \u586b\u5165\u6570\u503c\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u670d\u52a1\u5668\u5c31\u51cf1\uff0c\u5f53\u51cf\u52300\u65f6\uff0c\u505c\u6b62\u4f20\u8f93\uff1b\u6700\u540e\u63a5\u5230\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u8fd4\u56de 200 OK \u7684\u54cd\u5e94\u3002 \u5bb9\u6613\u5f15\u53d1XST\uff08Cross-Site Tracing\uff0c\u8de8\u7ad9\u8ffd\u8e2a\uff09\u653b\u51fb\uff0c\u901a\u5e38\u4e0d\u7528\u3002 # \u8bf7\u6c42 TRACE / HTTP/1.1 Host: www.hacker.jp Max-Forwards: 2 # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK .... TRACE / HTTP/1.1 Host: www.hacker.jp Max-Forwards: 2 (\u8fd4\u56de\u54cd\u5e94\u5305\u542b\u8bf7\u6c42\u5185\u5bb9) CONNECT\uff1a\u8981\u6c42\u4f7f\u7528\u96a7\u9053\u534f\u8bae\u8fde\u63a5\u4ee3\u7406 \u8981\u6c42\u5728\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u901a\u4fe1\u65f6\u5efa\u7acb\u96a7\u9053\uff0c\u5b9e\u73b0\u96a7\u9053\u534f\u8bae\u7684 TCP \u901a\u4fe1\u3002\u4e3b\u8981\u4f7f\u7528 SSL \u548c TLS \u534f\u8bae\u7ed9\u901a\u4fe1\u52a0\u5bc6\uff0c\u7ecf\u7f51\u7edc\u96a7\u9053\u4f20\u8f93\u3002 # \u8bf7\u6c42 CONNECT proxy.hacker.jp:8080 HTTP/1.1 Host: proxy.hacker.jp (\u4ee3\u7406\u670d\u52a1\u5668) # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK Q5. \u6301\u4e45\u8fde\u63a5 \u7b54\uff1a \u6301\u4e45\u8fde\u63a5\uff0c\u5373\u53ea\u8981\u4efb\u610f\u4e00\u7aef\u6ca1\u6709\u660e\u786e\u63d0\u51fa\u65ad\u5f00\u8fde\u63a5\uff0c\u5219\u4fdd\u6301 TCP \u8fde\u63a5\u72b6\u6001\u3002 \u5728 HTTP/1.1 \u4e2d\uff0c\u6240\u6709\u8fde\u63a5\u9ed8\u8ba4\u662f\u6301\u4e45\u8fde\u63a5\uff0c\u4f46\u5728 HTTP/1.0 \u5185\u672a\u6807\u51c6\u5316\u3002 Q6. \u4f7f\u7528 Cookie \u7684\u72b6\u6001\u7ba1\u7406 \u7b54\uff1aCookie \u4f1a\u6839\u636e\u4ece**\u670d\u52a1\u5668\u7aef**\u53d1\u9001\u7684\u54cd\u5e94\u62a5\u6587\u5185\u7684\u4e00\u4e2a\u53eb Set-Cookie \u7684\u9996\u90e8\u5b57\u6bb5\u4fe1\u606f\uff0c\u901a\u77e5**\u5ba2\u6237\u7aef**\u4fdd\u5b58 Cookie\u3002\u5f53\u4e0b\u6b21**\u5ba2\u6237\u7aef**\u518d\u5f80\u8be5**\u670d\u52a1\u5668**\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c**\u5ba2\u6237\u7aef**\u4f1a\u81ea\u52a8\u5728\u8bf7\u6c42\u62a5\u6587\u79cd\u52a0\u5165 Cookie \u53ea\u540e\u53d1\u9001\u51fa\u53bb\u3002 **\u670d\u52a1\u5668\u7aef**\u53d1\u73b0\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684 Cookie \u540e\uff0c\u56de\u53bb\u68c0\u67e5\u7a76\u7adf\u662f\u4ece\u54ea\u4e2a**\u5ba2\u6237\u7aef**\u53d1\u6765\u7684\u8bf7\u6c42\uff0c\u7136\u540e\u5bf9\u6bd4\u670d\u52a1\u5668\u4e0a\u7684\u8bb0\u5f55\uff0c\u6700\u540e\u5f97\u5230\u4e4b\u524d\u7684\u72b6\u6001\u4fe1\u606f 1\uff09\u8bf7\u6c42\u62a5\u6587\uff08\u6ca1\u6709 Cookie \u4fe1\u606f\u7684\u72b6\u6001\uff09 GET /reader/ HTTP/1.1 Host: hacker.jp 2\uff09\u54cd\u5e94\u62a5\u6587\uff08\u670d\u52a1\u5668\u7aef\u751f\u4ea7 Cookie \u4fe1\u606f\uff09 HTTP/1.1 200 OK Date: xxx Server: Apache <Set-Cookie: sid= 1234321; path=/; expires=Wed, 15 Aug 2018 08:30:11 GMT> 3\uff09\u8bf7\u6c42\u62a5\u6587\uff08\u81ea\u52a8\u53d1\u9001\u4fdd\u5b58\u7740\u7684 Cookie \u4fe1\u606f\uff09 GET /image/ HTTP/1.1 Host: hacker.jp Cookie: sid= 1234321 Part 3. HTTP \u54cd\u5e94\u72b6\u6001\u7801 \u00b6 Q7. \u5e38\u7528\u72b6\u6001\u7801 200 OK 204 No Content 206 Partial Content 301 Moved Permanently. 302 Found 303 See Other 304 Not Modified 307 Temporary Redirect 400 Bad Request 401 Unauthorized 404 Not Found 500 Internal Server Error 503 Service Unavailble Part 4. \u4e0e HTTP \u534f\u4f5c\u7684 Web \u670d\u52a1\u5668 \u00b6 Q8. \u901a\u4fe1\u6570\u636e\u8f6c\u53d1\u7a0b\u5e8f\uff1a\u4ee3\u7406\u3001\u7f51\u5173\u3001\u96a7\u9053 1\uff09\u4ee3\u7406 \u4ee3\u7406\u670d\u52a1\u5668\u7684\u884c\u4e3a\u5c31\u662f\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u8f6c\u53d1\u53d1\u7ed9\u5176\u4ed6\u670d\u52a1\u5668\uff0c\u4e0d\u6539\u53d8\u8bf7\u6c42URI\u3002\u8f6c\u53d1\u65f6\uff0c\u9700\u8981\u9644\u52a0 Via \u9996\u90e8\u5b57\u6bb5\u4ee5\u6807\u8bb0\u7ecf\u8fc7\u7684\u4e3b\u673a\u4fe1\u606f\u3002 2\uff09\u7f51\u5173 \u7f51\u5173\u884c\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\uff0c\u4f46\u80fd\u63a5\u53d1\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u975e HTTP \u534f\u8bae\u670d\u52a1\uff0c\u63d0\u9ad8\u901a\u4fe1\u7684\u5b89\u5168\u6027\u3002 3\uff09\u96a7\u9053 \u96a7\u9053\u901a\u4fe1\u4e2d\uff0c\u53ef\u4f7f\u7528 SSL \u7b49\u52a0\u5bc6\u624b\u6bb5\uff0c\u4fdd\u8bc1\u548c\u8fdc\u8ddd\u79bb\u670d\u52a1\u5668\u7684\u5b89\u5168\u901a\u4fe1\u3002\u96a7\u9053\u672c\u8eab\u900f\u660e\uff0c\u5ba2\u6237\u7aef\u4e0d\u7528\u5728\u610f\u96a7\u9053\u7684\u5b58\u5728\u3002 Part 5. HTTP \u9996\u90e8 \u00b6 Q9. HTTP \u62a5\u6587\u7684\u9996\u90e8\u6784\u6210 1\uff09 HTTP/1.1 \u901a\u7528\u9996\u90e8\u5b57\u6bb5 \u8bf7\u6c42\u548c\u54cd\u5e94\u62a5\u6587\u90fd\u4f1a\u4f7f\u7528\u7684\u9996\u90e8\u3002 Cache-Control \u6307\u4ee4\u7684\u53c2\u6570\u53ef\u9009\uff0c\u591a\u4e2a\u6307\u4ee4\u95f4 \u201c,\u201d \u5206\u9694\u3002 Cache-Control: private, max-age=0, no-cache \u53ef\u5206\u4e3a**\u7f13\u5b58\u8bf7\u6c42\u6307\u4ee4**\u548c**\u7f13\u5b58\u54cd\u5e94\u6307\u4ee4**\u3002 ## \u7f13\u5b58\u8bf7\u6c42\u6307\u4ee4 \u6307\u4ee4 \u3000\u3000\u53c2\u6570 \u3000\u3000\u8bf4\u660e no-cache \u65e0 \u5f3a\u5236\u5411\u6e90\u670d\u52a1\u5668\u518d\u6b21\u9a8c\u8bc1 no-store \u65e0 \u4e0d\u7f13\u5b58\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u4efb\u4f55\u5185\u5bb9 max-age=[\u79d2] \u5fc5\u9700 \u3000\u3000 \u54cd\u5e94\u7684\u6700\u5927Age\u503c max-stale(= [\u79d2]) \u53ef\u7701\u7565 \u63a5\u6536\u5df2\u8fc7\u671f\u7684\u54cd\u5e94 min-fresh=[\u79d2] \u5fc5\u9700 \u671f\u671b\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u7684\u54cd\u5e94\u4ecd\u6709\u6548 no-transform \u65e0 \u4ee3\u7406\u4e0d\u53ef\u66f4\u6539\u5a92\u4f53\u7c7b\u578b only-if-cached \u65e0 \u4ece\u7f13\u5b58\u83b7\u53d6\u8d44\u6e90 cache-extension \u3000\u3000- \u65b0\u6307\u4ee4\u6807\u8bb0(token) ## \u7f13\u5b58\u54cd\u5e94\u6307\u4ee4 \u6307\u4ee4 \u3000\u3000 \u53c2\u6570 \u3000\u3000\u8bf4\u660e public \u65e0 \u53ef\u5411\u4efb\u610f\u65b9\u63d0\u4f9b\u54cd\u5e94\u7684\u7f13\u5b58 private \u53ef\u7701\u7565 \u4ec5\u5411\u7279\u5b9a\u7528\u6237\u8fd4\u56de\u54cd\u5e94 no-cache \u3000\u7701\u7565 \u7f13\u5b58\u524d\u5fc5\u987b\u5148\u786e\u8ba4\u5176\u6709\u6548\u6027 no-store \u65e0 \u4e0d\u7f13\u5b58\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u4efb\u4f55\u5185\u5bb9 no-transform \u65e0 \u4ee3\u7406\u4e0d\u53ef\u66f4\u6539\u5a92\u4f53\u7c7b\u578b must-revalidate \u65e0 \u53ef\u7f13\u5b58\u4f46\u5fc5\u987b\u518d\u5411\u6e90\u670d\u52a1\u5668\u8fdb\u884c\u786e\u8ba4 proxy-revalidate \u65e0 \u8981\u6c42\u4e2d\u95f4\u7f13\u5b58\u670d\u52a1\u5668\u5bf9\u7f13\u5b58\u7684\u54cd\u5e94\u6709\u6548\u6027\u518d\u8fdb\u884c\u786e\u8ba4 max-age=[\u79d2] \u5fc5\u9700 \u54cd\u5e94\u7684\u6700\u5927Age\u503c s-maxage=[\u79d2] \u5fc5\u9700 \u516c\u5171\u7f13\u5b58\u670d\u52a1\u5668\u54cd\u5e94\u7684\u6700\u5927Age\u503c cache-extension - \u65b0\u6307\u4ee4\u6807\u8bb0(token) Connection \u4f5c\u7528\uff1a1. \u63a7\u5236\u4e0d\u518d\u8f6c\u53d1\u7ed9\u4ee3\u7406\u7684\u9996\u90e8\u5b57\u6bb5\uff1b2. \u7ba1\u7406\u6301\u4e45\u8fde\u63a5\uff0cHTTP/1.1 \u9ed8\u8ba4 Keep-alive\u3002 Via \u8ffd\u8e2a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u8bf7\u6c42\u548c\u54cd\u5e94\u62a5\u6587\u7684\u4f20\u8f93\u8def\u5f84\uff0c\u8fd8\u53ef\u907f\u514d\u56de\u73af\u7684\u53d1\u751f\u3002 2\uff09 \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5 Authorization \u544a\u77e5\u670d\u52a1\u5668\uff0c\u7528\u6237\u4ee3\u7406\u7684\u8ba4\u8bc1\u4fe1\u606f\uff08\u8bc1\u4e66\u503c\uff09\u3002\u82e5\u8ba4\u8bc1\u5931\u8d25\uff0c\u8fd4\u56de 401 \u3002 Expect \u544a\u77e5\u670d\u52a1\u5668\uff0c\u671f\u671b\u51fa\u73b0\u7684\u67d0\u79cd\u7279\u5b9a\u884c\u4e3a\u3002\u82e5\u670d\u52a1\u5668\u65e0\u6cd5\u7406\u89e3\u5ba2\u6237\u7aef\u7684\u671f\u671b\uff0c\u5219\u8fd4\u56de 417 Expectation Failed\u3002 Expect: 100-continue # \u5ba2\u6237\u7aef\u5728\u7b49\u5f85\u72b6\u6001\u5417100\u7684\u54cd\u5e94 If-xxx \u6761\u4ef6\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u63a5\u53d7\u5230\u6761\u4ef6\u8bf7\u6c42\uff0c\u53ea\u6709\u5224\u65ad\u4e3a\u771f\u65f6\uff0c\u624d\u6267\u884c\u8bf7\u6c42\u3002 If - Match : \"123456\" # \u53ea\u6709\u5f53 ETag \uff08 \u5b9e\u4f53\u6807\u8bb0 \uff09 \u4e3a \u201c 123456 \u201d \u65f6 \uff0c \u670d\u52a1\u5668\u624d\u5904\u7406\u8bf7\u6c42 # \u5426\u5219\u8fd4\u56de\u54cd\u5e94 412 Precondition Failed If-Modified-Since: \u67d0\u65f6\u95f4 # \u82e5 Last-Modified \u5728\u67d0\u65f6\u95f4\u4e4b\u540e\uff0c\u5219\u8fd4\u56de\u8d44\u6e90\uff1b # \u5426\u5219\u8fd4\u56de 304 Not Modified 3\uff09 \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5 Age \u8d44\u6e90\u5728\u591a\u4e45\u524d\u521b\u5efa\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002 ETag \u670d\u52a1\u5668\u7aef\u5206\u914d\u7684\u8d44\u6e90\u552f\u4e00\u6807\u5fd7\uff0c\u5f53\u8d44\u6e90\u66f4\u65b0\u65f6\uff0cETag \u503c\u4e5f\u9700\u8981\u66f4\u65b0\u3002 Loaction \u53ef\u5c06\u54cd\u5e94\u63a5\u53d7\u65b9\u5f15\u5bfc\u81f3\u67d0\u4e2a\u4e0e\u8bf7\u6c42URI\u4f4d\u7f6e\u4e0d\u540c\u7684\u8d44\u6e90\u3002\u914d\u5408 3xx\uff1a Redirection \u7684\u54cd\u5e94\u3002 WWW-Authenticate \u544a\u77e5\u5ba2\u6237\u7aef\u9002\u7528\u4e8e\u8bbf\u95ee\u8bf7\u6c42URI\u6240\u6307\u5b9a\u7684\u8ba4\u8bc1\u65b9\u6848\uff08Basic \u6216 Digest\uff09\u548c\u5e26\u53c2\u6570\u63d0\u793a\u7684\u8d28\u8be2\uff08challenge\uff09\u3002 401 Unauthorized \u54cd\u5e94\u4e2d\uff0c\u80af\u5b9a\u5e26\u6709 WWW-Authenticate \u5b57\u6bb5\u3002 WWW-Authenticate: Basic ream=\"USagidesign Auth\" 4\uff09 \u5b9e\u4f53\u9996\u90e8\u5b57\u6bb5 Allow \u901a\u77e5\u5ba2\u6237\u7aef\u80fd\u591f\u8bf7\u6c42\u7684 URI \u8d44\u6e90\u7684 HTTP \u65b9\u6cd5\u3002\u82e5\u4e0d\u652f\u6301\uff0c\u5219\u8fd4\u56de 405 Method Not Allowed\u3002 Content-Range Content-Length Content-Type Expires Last-Modified 5\uff09 \u4e3a Cookie \u670d\u52a1\u7684\u9996\u90e8\u5b57\u6bb5 Set-Cookie \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5\uff0c\u5f00\u59cb\u7ba1\u7406\u5ba2\u6237\u7aef\u72b6\u6001\u65f6\uff0c\u6240\u4f7f\u7528\u7684 Cookie \u4fe1\u606f\u3002 Cookie \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5\u3002 Part 6. \u786e\u4fdd Web \u5b89\u5168\u7684 HTTPS \u00b6 Q10. \u4ec0\u4e48\u662f HTTPS\uff1f \u7b54\uff1aHTTP + \u52a0\u5bc6 + \u8ba4\u8bc1 + \u5b8c\u6574\u6027\u4fdd\u62a4 = HTTPS HTTP \u5728\u901a\u4fe1\u63a5\u53e3\u90e8\u5206\u7528 SSL\uff08Secure Socket Layer\uff09\u548c TLS\uff08Transport Layer Security\uff09\u4ee3\u66ff\uff0c\u4fbf\u6210\u4e86 HTTPS\u3002 Part 7. \u8bbf\u95ee\u8005\u8eab\u4efd\u8ba4\u8bc1 \u00b6 Q11. HTTP \u4f7f\u7528\u7684\u8ba4\u8bc1\u65b9\u5f0f \u7b54\uff1a1\uff09BASIC \u8ba4\u8bc1\uff08\u57fa\u672c\u8ba4\u8bc1\uff09 \u200b 2\uff09DIGEST \u8ba4\u8bc1\uff08\u6458\u8981\u8ba4\u8bc1\uff09 \u200b 3\uff09SSL \u5ba2\u6237\u7aef\u8ba4\u8bc1 \u200b 4\uff09FormBase \u8ba4\u8bc1\uff08\u57fa\u4e8e\u8868\u5355\u8ba4\u8bc1\uff09 BASIC \u8ba4\u8bc1 DIGEST \u8ba4\u8bc1 SSL \u5ba2\u6237\u7aef\u8ba4\u8bc1 FormBase \u8ba4\u8bc1 \u57fa\u4e8e\u8868\u5355\u8ba4\u8bc1\u6807\u51c6\u5c1a\u65e0\u5b9a\u8bba\uff0c\u4e00\u822c\u7528 Cookie \u6765\u7ba1\u7406 Session\u3002","title":"\u56fe\u89e3 HTTP \u5b66\u4e60\u7b14\u8bb0"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-1-http","text":"Q1. \u5404\u5c42\u534f\u8bae\u5bf9\u4e00\u6b21 HTTP \u8bf7\u6c42\u7684\u5c01\u88c5 \u7b54\uff1a\u89c1 p10 \u56fe\u3002 Q2. \u5404\u79cd\u534f\u8bae\u4e0e HTTP \u534f\u8bae\u7684\u5173\u7cfb\u3002 \u7b54\uff1a \u56fe p15 \u4e86\u89e3\u4e00\u4e0b\uff0cIP \u534f\u8bae\uff08\u7f51\u7edc\u5c42\uff09\u3001TCP \u534f\u8bae\uff08\u4f20\u8f93\u5c42\uff09\u548c DNS \u670d\u52a1\uff08\u5e94\u7528\u5c42\uff09\u5728\u4f7f\u7528 HTTP \u534f\u8bae\u7684\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u5404\u81ea\u53d1\u6325\u4e86\u54ea\u4e9b\u4f5c\u7528\u3002","title":"Part 1. HTTP \u7684\u7f51\u7edc\u57fa\u7840"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-2-http","text":"Q3. HTTP \u662f\u4e0d\u4fdd\u5b58\u72b6\u6001\u7684\u534f\u8bae\u3002 \u7b54\uff1a HTTP \u4e3a\u65e0\u72b6\u6001\uff08stateless\uff09\u534f\u8bae\uff0c\u5373**\u4e0d\u5177\u5907\u4fdd\u5b58\u4e4b\u524d\u53d1\u9001\u8fc7\u7684\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u529f\u80fd**\u3002 \u4f46\u4e3a\u4e86\u5b9e\u73b0\u4fdd\u6301\u72b6\u6001\u7684\u529f\u80fd\uff0c\uff08\u6bd4\u5982\uff0c\u5bf9\u4e8e\u7528\u6237\u767b\u9646\uff0c\u7f51\u7ad9\u8981\u638c\u63e1\u662f\u8c01\u9001\u51fa\u7684\u8df3\u8f6c\u7b49\u8bf7\u6c42\uff0c\uff09\u4e8e\u662f\u5f15\u5165\u4e86 Cookie \u6280\u672f \u3002 Q4. HTTP/1.1 \u53ef\u7528\u7684\u65b9\u6cd5 GET\uff1a\u83b7\u53d6\u8d44\u6e90 # \u8bf7\u6c42 GET /index.html HTTP/1.1 Host: www.hacker.jp # --------------------------------------- # # \u54cd\u5e94 \u8fd4\u56de index.html \u7684\u9875\u9762\u8d44\u6e90 # \u8bf7\u6c42 GET /index.html HTTP/1.1 Host: www.hacker.jp If-Modified-Since: Wed, 15 Aug 2018 08:30:11 GMT # --------------------------------------- # # \u54cd\u5e94 \u8fd4\u56de Wed, 15 Aug 2018 08:30:11 \u540e\u6709\u66f4\u65b0\u7684 index.html \u7684\u9875\u9762\u8d44\u6e90\uff1b \u5426\u5219\uff0c\u8fd4\u56de 304 Not Modified \u7684\u54cd\u5e94 POST\uff1a\u4f20\u8f93\u5b9e\u4f53\u4e3b\u4f53 PUT\uff1a \u4f20\u8f93\u6587\u4ef6 \u8bf7\u6c42\u62a5\u6587\u4e3b\u4f53\u4e2d\u5305\u542b\u6587\u4ef6\u5185\u5bb9\uff0c\u4fdd\u5b58\u5230\u8bf7\u6c42 URI \u6307\u5b9a\u7684\u4f4d\u7f6e\u3002 \u54cd\u5e94\u7801 204 No Content\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u5df2\u5728\u670d\u52a1\u5668\u4e0a\u3002 HTTP/1.1 \u7684 PUT \u65b9\u6cd5\u4e0d\u5e26\u9a8c\u8bc1\u673a\u5236\uff0c\u5b58\u5728\u5b89\u5168\u95ee\u9898\uff0c\u4e00\u822c Web \u7f51\u7ad9\u4f1a\u7981\u7528\uff1b\u53ef\u914d\u5408 Web \u5e94\u7528\u9a8c\u8bc1\u673a\u5236\uff0c\u6216 REST \u6807\u51c6\u4f1a\u5f00\u653e\u8be5\u65b9\u6cd5\u3002 DELETE\uff1a\u5220\u9664\u6587\u4ef6 \u5220\u9664\u8bf7\u6c42 URI \u6307\u5b9a\u7684\u8d44\u6e90\u3002 \u54cd\u5e94\u7801 204 No Content\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4e0a\u5220\u9664\u3002 \u4e0e PUT \u4e00\u6837\uff0c\u65e0\u9a8c\u8bc1\u673a\u5236\u3002 HEAD\uff1a\u83b7\u5f97\u62a5\u6587\u9996\u90e8 \u53ea\u8fd4\u56de GET \u54cd\u5e94\u62a5\u6587\u7684\u5934\u90e8\u3002 OPTIONS\uff1a\u8be2\u95ee\u652f\u6301\u7684\u65b9\u6cd5 # \u8bf7\u6c42 OPTIONS * HTTP/1.1 Host: www.hacker.jp # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK Allow: GET,POST,HEAD,OPTIONS (\u8fd4\u56de\u670d\u52a1\u5668\u652f\u6301\u7684\u65b9\u6cd5) TRACE\uff1a\u8ffd\u8e2a\u8def\u5f84 Max-Forwards \u586b\u5165\u6570\u503c\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u670d\u52a1\u5668\u5c31\u51cf1\uff0c\u5f53\u51cf\u52300\u65f6\uff0c\u505c\u6b62\u4f20\u8f93\uff1b\u6700\u540e\u63a5\u5230\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u8fd4\u56de 200 OK \u7684\u54cd\u5e94\u3002 \u5bb9\u6613\u5f15\u53d1XST\uff08Cross-Site Tracing\uff0c\u8de8\u7ad9\u8ffd\u8e2a\uff09\u653b\u51fb\uff0c\u901a\u5e38\u4e0d\u7528\u3002 # \u8bf7\u6c42 TRACE / HTTP/1.1 Host: www.hacker.jp Max-Forwards: 2 # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK .... TRACE / HTTP/1.1 Host: www.hacker.jp Max-Forwards: 2 (\u8fd4\u56de\u54cd\u5e94\u5305\u542b\u8bf7\u6c42\u5185\u5bb9) CONNECT\uff1a\u8981\u6c42\u4f7f\u7528\u96a7\u9053\u534f\u8bae\u8fde\u63a5\u4ee3\u7406 \u8981\u6c42\u5728\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u901a\u4fe1\u65f6\u5efa\u7acb\u96a7\u9053\uff0c\u5b9e\u73b0\u96a7\u9053\u534f\u8bae\u7684 TCP \u901a\u4fe1\u3002\u4e3b\u8981\u4f7f\u7528 SSL \u548c TLS \u534f\u8bae\u7ed9\u901a\u4fe1\u52a0\u5bc6\uff0c\u7ecf\u7f51\u7edc\u96a7\u9053\u4f20\u8f93\u3002 # \u8bf7\u6c42 CONNECT proxy.hacker.jp:8080 HTTP/1.1 Host: proxy.hacker.jp (\u4ee3\u7406\u670d\u52a1\u5668) # --------------------------------------- # # \u54cd\u5e94 HTTP/1.1 200 OK Q5. \u6301\u4e45\u8fde\u63a5 \u7b54\uff1a \u6301\u4e45\u8fde\u63a5\uff0c\u5373\u53ea\u8981\u4efb\u610f\u4e00\u7aef\u6ca1\u6709\u660e\u786e\u63d0\u51fa\u65ad\u5f00\u8fde\u63a5\uff0c\u5219\u4fdd\u6301 TCP \u8fde\u63a5\u72b6\u6001\u3002 \u5728 HTTP/1.1 \u4e2d\uff0c\u6240\u6709\u8fde\u63a5\u9ed8\u8ba4\u662f\u6301\u4e45\u8fde\u63a5\uff0c\u4f46\u5728 HTTP/1.0 \u5185\u672a\u6807\u51c6\u5316\u3002 Q6. \u4f7f\u7528 Cookie \u7684\u72b6\u6001\u7ba1\u7406 \u7b54\uff1aCookie \u4f1a\u6839\u636e\u4ece**\u670d\u52a1\u5668\u7aef**\u53d1\u9001\u7684\u54cd\u5e94\u62a5\u6587\u5185\u7684\u4e00\u4e2a\u53eb Set-Cookie \u7684\u9996\u90e8\u5b57\u6bb5\u4fe1\u606f\uff0c\u901a\u77e5**\u5ba2\u6237\u7aef**\u4fdd\u5b58 Cookie\u3002\u5f53\u4e0b\u6b21**\u5ba2\u6237\u7aef**\u518d\u5f80\u8be5**\u670d\u52a1\u5668**\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c**\u5ba2\u6237\u7aef**\u4f1a\u81ea\u52a8\u5728\u8bf7\u6c42\u62a5\u6587\u79cd\u52a0\u5165 Cookie \u53ea\u540e\u53d1\u9001\u51fa\u53bb\u3002 **\u670d\u52a1\u5668\u7aef**\u53d1\u73b0\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684 Cookie \u540e\uff0c\u56de\u53bb\u68c0\u67e5\u7a76\u7adf\u662f\u4ece\u54ea\u4e2a**\u5ba2\u6237\u7aef**\u53d1\u6765\u7684\u8bf7\u6c42\uff0c\u7136\u540e\u5bf9\u6bd4\u670d\u52a1\u5668\u4e0a\u7684\u8bb0\u5f55\uff0c\u6700\u540e\u5f97\u5230\u4e4b\u524d\u7684\u72b6\u6001\u4fe1\u606f 1\uff09\u8bf7\u6c42\u62a5\u6587\uff08\u6ca1\u6709 Cookie \u4fe1\u606f\u7684\u72b6\u6001\uff09 GET /reader/ HTTP/1.1 Host: hacker.jp 2\uff09\u54cd\u5e94\u62a5\u6587\uff08\u670d\u52a1\u5668\u7aef\u751f\u4ea7 Cookie \u4fe1\u606f\uff09 HTTP/1.1 200 OK Date: xxx Server: Apache <Set-Cookie: sid= 1234321; path=/; expires=Wed, 15 Aug 2018 08:30:11 GMT> 3\uff09\u8bf7\u6c42\u62a5\u6587\uff08\u81ea\u52a8\u53d1\u9001\u4fdd\u5b58\u7740\u7684 Cookie \u4fe1\u606f\uff09 GET /image/ HTTP/1.1 Host: hacker.jp Cookie: sid= 1234321","title":"Part 2. \u7b80\u5355\u7684 HTTP \u534f\u8bae"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-3-http","text":"Q7. \u5e38\u7528\u72b6\u6001\u7801 200 OK 204 No Content 206 Partial Content 301 Moved Permanently. 302 Found 303 See Other 304 Not Modified 307 Temporary Redirect 400 Bad Request 401 Unauthorized 404 Not Found 500 Internal Server Error 503 Service Unavailble","title":"Part 3. HTTP \u54cd\u5e94\u72b6\u6001\u7801"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-4-http-web","text":"Q8. \u901a\u4fe1\u6570\u636e\u8f6c\u53d1\u7a0b\u5e8f\uff1a\u4ee3\u7406\u3001\u7f51\u5173\u3001\u96a7\u9053 1\uff09\u4ee3\u7406 \u4ee3\u7406\u670d\u52a1\u5668\u7684\u884c\u4e3a\u5c31\u662f\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u8f6c\u53d1\u53d1\u7ed9\u5176\u4ed6\u670d\u52a1\u5668\uff0c\u4e0d\u6539\u53d8\u8bf7\u6c42URI\u3002\u8f6c\u53d1\u65f6\uff0c\u9700\u8981\u9644\u52a0 Via \u9996\u90e8\u5b57\u6bb5\u4ee5\u6807\u8bb0\u7ecf\u8fc7\u7684\u4e3b\u673a\u4fe1\u606f\u3002 2\uff09\u7f51\u5173 \u7f51\u5173\u884c\u4e3a\u7c7b\u4f3c\u4e8e\u4ee3\u7406\uff0c\u4f46\u80fd\u63a5\u53d1\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u975e HTTP \u534f\u8bae\u670d\u52a1\uff0c\u63d0\u9ad8\u901a\u4fe1\u7684\u5b89\u5168\u6027\u3002 3\uff09\u96a7\u9053 \u96a7\u9053\u901a\u4fe1\u4e2d\uff0c\u53ef\u4f7f\u7528 SSL \u7b49\u52a0\u5bc6\u624b\u6bb5\uff0c\u4fdd\u8bc1\u548c\u8fdc\u8ddd\u79bb\u670d\u52a1\u5668\u7684\u5b89\u5168\u901a\u4fe1\u3002\u96a7\u9053\u672c\u8eab\u900f\u660e\uff0c\u5ba2\u6237\u7aef\u4e0d\u7528\u5728\u610f\u96a7\u9053\u7684\u5b58\u5728\u3002","title":"Part 4. \u4e0e HTTP \u534f\u4f5c\u7684 Web \u670d\u52a1\u5668"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-5-http","text":"Q9. HTTP \u62a5\u6587\u7684\u9996\u90e8\u6784\u6210 1\uff09 HTTP/1.1 \u901a\u7528\u9996\u90e8\u5b57\u6bb5 \u8bf7\u6c42\u548c\u54cd\u5e94\u62a5\u6587\u90fd\u4f1a\u4f7f\u7528\u7684\u9996\u90e8\u3002 Cache-Control \u6307\u4ee4\u7684\u53c2\u6570\u53ef\u9009\uff0c\u591a\u4e2a\u6307\u4ee4\u95f4 \u201c,\u201d \u5206\u9694\u3002 Cache-Control: private, max-age=0, no-cache \u53ef\u5206\u4e3a**\u7f13\u5b58\u8bf7\u6c42\u6307\u4ee4**\u548c**\u7f13\u5b58\u54cd\u5e94\u6307\u4ee4**\u3002 ## \u7f13\u5b58\u8bf7\u6c42\u6307\u4ee4 \u6307\u4ee4 \u3000\u3000\u53c2\u6570 \u3000\u3000\u8bf4\u660e no-cache \u65e0 \u5f3a\u5236\u5411\u6e90\u670d\u52a1\u5668\u518d\u6b21\u9a8c\u8bc1 no-store \u65e0 \u4e0d\u7f13\u5b58\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u4efb\u4f55\u5185\u5bb9 max-age=[\u79d2] \u5fc5\u9700 \u3000\u3000 \u54cd\u5e94\u7684\u6700\u5927Age\u503c max-stale(= [\u79d2]) \u53ef\u7701\u7565 \u63a5\u6536\u5df2\u8fc7\u671f\u7684\u54cd\u5e94 min-fresh=[\u79d2] \u5fc5\u9700 \u671f\u671b\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u7684\u54cd\u5e94\u4ecd\u6709\u6548 no-transform \u65e0 \u4ee3\u7406\u4e0d\u53ef\u66f4\u6539\u5a92\u4f53\u7c7b\u578b only-if-cached \u65e0 \u4ece\u7f13\u5b58\u83b7\u53d6\u8d44\u6e90 cache-extension \u3000\u3000- \u65b0\u6307\u4ee4\u6807\u8bb0(token) ## \u7f13\u5b58\u54cd\u5e94\u6307\u4ee4 \u6307\u4ee4 \u3000\u3000 \u53c2\u6570 \u3000\u3000\u8bf4\u660e public \u65e0 \u53ef\u5411\u4efb\u610f\u65b9\u63d0\u4f9b\u54cd\u5e94\u7684\u7f13\u5b58 private \u53ef\u7701\u7565 \u4ec5\u5411\u7279\u5b9a\u7528\u6237\u8fd4\u56de\u54cd\u5e94 no-cache \u3000\u7701\u7565 \u7f13\u5b58\u524d\u5fc5\u987b\u5148\u786e\u8ba4\u5176\u6709\u6548\u6027 no-store \u65e0 \u4e0d\u7f13\u5b58\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u4efb\u4f55\u5185\u5bb9 no-transform \u65e0 \u4ee3\u7406\u4e0d\u53ef\u66f4\u6539\u5a92\u4f53\u7c7b\u578b must-revalidate \u65e0 \u53ef\u7f13\u5b58\u4f46\u5fc5\u987b\u518d\u5411\u6e90\u670d\u52a1\u5668\u8fdb\u884c\u786e\u8ba4 proxy-revalidate \u65e0 \u8981\u6c42\u4e2d\u95f4\u7f13\u5b58\u670d\u52a1\u5668\u5bf9\u7f13\u5b58\u7684\u54cd\u5e94\u6709\u6548\u6027\u518d\u8fdb\u884c\u786e\u8ba4 max-age=[\u79d2] \u5fc5\u9700 \u54cd\u5e94\u7684\u6700\u5927Age\u503c s-maxage=[\u79d2] \u5fc5\u9700 \u516c\u5171\u7f13\u5b58\u670d\u52a1\u5668\u54cd\u5e94\u7684\u6700\u5927Age\u503c cache-extension - \u65b0\u6307\u4ee4\u6807\u8bb0(token) Connection \u4f5c\u7528\uff1a1. \u63a7\u5236\u4e0d\u518d\u8f6c\u53d1\u7ed9\u4ee3\u7406\u7684\u9996\u90e8\u5b57\u6bb5\uff1b2. \u7ba1\u7406\u6301\u4e45\u8fde\u63a5\uff0cHTTP/1.1 \u9ed8\u8ba4 Keep-alive\u3002 Via \u8ffd\u8e2a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u8bf7\u6c42\u548c\u54cd\u5e94\u62a5\u6587\u7684\u4f20\u8f93\u8def\u5f84\uff0c\u8fd8\u53ef\u907f\u514d\u56de\u73af\u7684\u53d1\u751f\u3002 2\uff09 \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5 Authorization \u544a\u77e5\u670d\u52a1\u5668\uff0c\u7528\u6237\u4ee3\u7406\u7684\u8ba4\u8bc1\u4fe1\u606f\uff08\u8bc1\u4e66\u503c\uff09\u3002\u82e5\u8ba4\u8bc1\u5931\u8d25\uff0c\u8fd4\u56de 401 \u3002 Expect \u544a\u77e5\u670d\u52a1\u5668\uff0c\u671f\u671b\u51fa\u73b0\u7684\u67d0\u79cd\u7279\u5b9a\u884c\u4e3a\u3002\u82e5\u670d\u52a1\u5668\u65e0\u6cd5\u7406\u89e3\u5ba2\u6237\u7aef\u7684\u671f\u671b\uff0c\u5219\u8fd4\u56de 417 Expectation Failed\u3002 Expect: 100-continue # \u5ba2\u6237\u7aef\u5728\u7b49\u5f85\u72b6\u6001\u5417100\u7684\u54cd\u5e94 If-xxx \u6761\u4ef6\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u63a5\u53d7\u5230\u6761\u4ef6\u8bf7\u6c42\uff0c\u53ea\u6709\u5224\u65ad\u4e3a\u771f\u65f6\uff0c\u624d\u6267\u884c\u8bf7\u6c42\u3002 If - Match : \"123456\" # \u53ea\u6709\u5f53 ETag \uff08 \u5b9e\u4f53\u6807\u8bb0 \uff09 \u4e3a \u201c 123456 \u201d \u65f6 \uff0c \u670d\u52a1\u5668\u624d\u5904\u7406\u8bf7\u6c42 # \u5426\u5219\u8fd4\u56de\u54cd\u5e94 412 Precondition Failed If-Modified-Since: \u67d0\u65f6\u95f4 # \u82e5 Last-Modified \u5728\u67d0\u65f6\u95f4\u4e4b\u540e\uff0c\u5219\u8fd4\u56de\u8d44\u6e90\uff1b # \u5426\u5219\u8fd4\u56de 304 Not Modified 3\uff09 \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5 Age \u8d44\u6e90\u5728\u591a\u4e45\u524d\u521b\u5efa\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002 ETag \u670d\u52a1\u5668\u7aef\u5206\u914d\u7684\u8d44\u6e90\u552f\u4e00\u6807\u5fd7\uff0c\u5f53\u8d44\u6e90\u66f4\u65b0\u65f6\uff0cETag \u503c\u4e5f\u9700\u8981\u66f4\u65b0\u3002 Loaction \u53ef\u5c06\u54cd\u5e94\u63a5\u53d7\u65b9\u5f15\u5bfc\u81f3\u67d0\u4e2a\u4e0e\u8bf7\u6c42URI\u4f4d\u7f6e\u4e0d\u540c\u7684\u8d44\u6e90\u3002\u914d\u5408 3xx\uff1a Redirection \u7684\u54cd\u5e94\u3002 WWW-Authenticate \u544a\u77e5\u5ba2\u6237\u7aef\u9002\u7528\u4e8e\u8bbf\u95ee\u8bf7\u6c42URI\u6240\u6307\u5b9a\u7684\u8ba4\u8bc1\u65b9\u6848\uff08Basic \u6216 Digest\uff09\u548c\u5e26\u53c2\u6570\u63d0\u793a\u7684\u8d28\u8be2\uff08challenge\uff09\u3002 401 Unauthorized \u54cd\u5e94\u4e2d\uff0c\u80af\u5b9a\u5e26\u6709 WWW-Authenticate \u5b57\u6bb5\u3002 WWW-Authenticate: Basic ream=\"USagidesign Auth\" 4\uff09 \u5b9e\u4f53\u9996\u90e8\u5b57\u6bb5 Allow \u901a\u77e5\u5ba2\u6237\u7aef\u80fd\u591f\u8bf7\u6c42\u7684 URI \u8d44\u6e90\u7684 HTTP \u65b9\u6cd5\u3002\u82e5\u4e0d\u652f\u6301\uff0c\u5219\u8fd4\u56de 405 Method Not Allowed\u3002 Content-Range Content-Length Content-Type Expires Last-Modified 5\uff09 \u4e3a Cookie \u670d\u52a1\u7684\u9996\u90e8\u5b57\u6bb5 Set-Cookie \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5\uff0c\u5f00\u59cb\u7ba1\u7406\u5ba2\u6237\u7aef\u72b6\u6001\u65f6\uff0c\u6240\u4f7f\u7528\u7684 Cookie \u4fe1\u606f\u3002 Cookie \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5\u3002","title":"Part 5. HTTP \u9996\u90e8"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-6-web-https","text":"Q10. \u4ec0\u4e48\u662f HTTPS\uff1f \u7b54\uff1aHTTP + \u52a0\u5bc6 + \u8ba4\u8bc1 + \u5b8c\u6574\u6027\u4fdd\u62a4 = HTTPS HTTP \u5728\u901a\u4fe1\u63a5\u53e3\u90e8\u5206\u7528 SSL\uff08Secure Socket Layer\uff09\u548c TLS\uff08Transport Layer Security\uff09\u4ee3\u66ff\uff0c\u4fbf\u6210\u4e86 HTTPS\u3002","title":"Part 6. \u786e\u4fdd Web \u5b89\u5168\u7684 HTTPS"},{"location":"history/%E5%9B%BE%E8%A7%A3%20HTTP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#part-7","text":"Q11. HTTP \u4f7f\u7528\u7684\u8ba4\u8bc1\u65b9\u5f0f \u7b54\uff1a1\uff09BASIC \u8ba4\u8bc1\uff08\u57fa\u672c\u8ba4\u8bc1\uff09 \u200b 2\uff09DIGEST \u8ba4\u8bc1\uff08\u6458\u8981\u8ba4\u8bc1\uff09 \u200b 3\uff09SSL \u5ba2\u6237\u7aef\u8ba4\u8bc1 \u200b 4\uff09FormBase \u8ba4\u8bc1\uff08\u57fa\u4e8e\u8868\u5355\u8ba4\u8bc1\uff09 BASIC \u8ba4\u8bc1 DIGEST \u8ba4\u8bc1 SSL \u5ba2\u6237\u7aef\u8ba4\u8bc1 FormBase \u8ba4\u8bc1 \u57fa\u4e8e\u8868\u5355\u8ba4\u8bc1\u6807\u51c6\u5c1a\u65e0\u5b9a\u8bba\uff0c\u4e00\u822c\u7528 Cookie \u6765\u7ba1\u7406 Session\u3002","title":"Part 7. \u8bbf\u95ee\u8005\u8eab\u4efd\u8ba4\u8bc1"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/","text":"CodeIgniter\uff0c\u540e\u7b80\u79f0CI\uff0c\u662f\u4e00\u4e2a\u5c0f\u5de7\u800c\u6027\u80fd\u51fa\u4f17\u7684PHP Web\u6846\u67b6\uff0c\u5178\u578b\u7684MVC\u67b6\u6784\uff0c\u903b\u8f91\u7ed3\u6784\u6e05\u6670\u3001\u6587\u6863\u5b8c\u6574\uff0c\u6709\u5f3a\u5927\u7684\u7c7b\u5e93\u652f\u6301\uff0c\u4fbf\u4e8e\u5feb\u901f\u5f00\u53d1\u3002 1. \u524d\u8a00 \u00b6 \u672c\u9879\u76ee\u662f\u67d0\u94f6\u884c\u6570\u636e\u4e2d\u5fc3\u8fd0\u7ef4\u76d1\u63a7\u7cfb\u7edf\uff0c\u7531\u4e8e\u53d7\u751f\u4ea7\u73af\u5883\u9650\u5236\uff0c\u6545\u53ea\u80fd\u56e0\u5730\u5236\u5b9c\uff0c\u90e8\u7f72\u4e8eLinux\u7cfb\u7edf\uff0c\u670d\u52a1\u5668Apache2\uff0c\u6570\u636e\u5e93\u4e3aOracle\uff0c\u9009\u62e9\u5b8c\u5168\u80fd\u6ee1\u8db3\u9700\u6c42\u7684CodeIgniter\u6846\u67b6\u3002 ## 1.1 \u529f\u80fd\u9700\u6c42\u5206\u6790 \u7528\u6237\u767b\u5f55\u529f\u80fd \u6743\u9650\u5206\u7ec4\u7ba1\u7406 \u529f\u80fd\u83dc\u5355\u7ba1\u7406 \u7cfb\u7edf\u5404\u9879\u6307\u6807\u76d1\u63a7 \u4e3b\u673a\u8d44\u6e90\u67e5\u8be2 \u8bbe\u5907\u7ef4\u4fdd\u4fe1\u606f\u7ba1\u7406 1.2 \u603b\u4f53\u8bbe\u8ba1 \u00b6 \u603b\u4f53\u67b6\u6784\u8bbe\u8ba1 \u00b6 \u91c7\u7528\u4f20\u7edf\u7684\u4e09\u5c42\u67b6\u6784\u8bbe\u8ba1\uff0c\u81ea\u4e0b\u800c\u4e0a\u4f9d\u6b21\u4e3a\u6301\u4e45\u5c42\u3001\u4e1a\u52a1\u903b\u8f91\u5c42\u548c\u8868\u793a\u5c42\u3002 \u6301\u4e45\u5c42 \uff0c\u91c7\u7528Oracle\u6570\u636e\u5e93\u5b58\u50a8\u6570\u636e\uff0c\u901a\u8fc7\u8f6e\u8be2\u5b9e\u65f6\u76d1\u63a7\u5e76\u83b7\u53d6\u5404\u7cfb\u7edf\u670d\u52a1\u5668\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff0c\u5c06\u6570\u636e\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u3002 \u4e1a\u52a1\u903b\u8f91\u5c42 \uff0c\u8be5\u7cfb\u7edf\u7684\u6838\u5fc3\u5c42\uff0c\u4e3b\u8981\u7531\u90e8\u7f72\u4e8eapache2\u7684CI\u7ec4\u6210\uff0c\u5305\u62ec\u6570\u636e\u6a21\u578b\u521b\u5efa\uff0c\u63a7\u5236\u903b\u8f91\u7684\u8bbe\u8ba1\uff0c\u6570\u636e\u53ef\u89c6\u5316\u7684\u5b9e\u73b0\u7b49\u3002 \u8868\u793a\u5c42 \uff0c\u901a\u8fc7\u6d4f\u89c8\u5668\u5411\u7528\u6237\u5c55\u793a\u7cfb\u7edf\u95e8\u6237\uff0c\u5b8c\u6210\u7cfb\u7edf\u4e0e\u7528\u6237\u7684\u5404\u79cd\u4ea4\u4e92\u529f\u80fd\u3002 \u200b \u529f\u80fd\u5212\u5206\u53ca\u5904\u7406\u6d41\u7a0b \u00b6 \u767b\u5f55 \u63a5\u6536POST\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u6570\u636e\u5e93\u7684\u7528\u6237\u540d\u4e0e\u5bc6\u7801\uff0c\u4fdd\u5b58\u5728session\u91cc\uff0c\u7136\u540e\u6267\u884c\u540e\u9762\u64cd\u4f5c\u3002\u5f88\u5e38\u89c4\uff0c\u6bcb\u5eb8\u8d58\u8a00\u3002 \u6743\u9650\u5206\u7ec4\u7ba1\u7406 \u7cfb\u7edf\u7684\u529f\u80fd\u83dc\u5355\u4e0e\u7528\u6237\u7ec4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884cCRUD\u64cd\u4f5c\u3002\u7528\u6237\u767b\u9646\u65f6\u4f1a\u9a8c\u8bc1\u7528\u6237\u6743\u9650\uff0c\u786e\u5b9a\u6240\u5c5e\u5206\u7ec4\uff0c\u7136\u540e\u83b7\u53d6\u76f8\u5e94\u7684\u529f\u80fd\u83dc\u5355\u3002\u6743\u9650\u4e4b\u5916\u7684\u64cd\u4f5c\u5c06\u4f1a\u88ab\u62d2\u7edd\u3002 \u529f\u80fd\u83dc\u5355\u7ba1\u7406 \u7cfb\u7edf\u529f\u80fd\u83dc\u5355\u4fdd\u5b58\u5728\u6570\u636e\u5e93\uff0c\u7528\u6237\u53ef\u4ee5\u4f9d\u636e\u81ea\u8eab\u6743\u9650\u83b7\u53d6\u76f8\u5e94\u7684\u83dc\u5355\u3002\u8d85\u7ea7\u7528\u6237\u53ef\u4ee5\u5bf9\u7528\u6237\u83dc\u5355\u8fdb\u884cCRUD\u7b49\u64cd\u4f5c\u3002 \u7cfb\u7edf\u5404\u9879\u6307\u6807\u76d1\u63a7 \u7528\u6237\u767b\u9646\u540e\uff0c\u4f9d\u5176\u6743\u9650\u83b7\u53d6\u5df2\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u91cc\u7684\u76f8\u5e94\u7cfb\u7edf\u6307\u6807\uff0cCPU\u4f7f\u7528\u7387\u3001\u5185\u5b58\u4f7f\u7528\u7387\u3001\u6570\u636e\u5e93\u4f7f\u7528\u60c5\u51b5\u7b49\u3002 \u4e3b\u673a\u8d44\u6e90\u67e5\u8be2 \u7528\u6237\u53ef\u67e5\u8be2\u5404\u7cfb\u7edf\u7684\u4e3b\u673a\u8d44\u6e90\uff0c\u5305\u62ec\u4e3b\u673a\u540d\uff0c\u4e3b\u673a\u7528\u9014\uff0cIP\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7b49\u3002 \u8bbe\u5907\u7ef4\u4fdd\u4fe1\u606f\u7ba1\u7406 \u5305\u62ec\u7ef4\u4fdd\u4fe1\u606f\u7684CRUD\u64cd\u4f5c\uff0c\u5e76\u80fdEXCEL\u6279\u91cf\u5bfc\u5165\u7ef4\u4fdd\u4fe1\u606f\u3002 \u7cfb\u7edf\u529f\u80fd\u5168\u666f\u56fe \u00b6 \u200b 1.3 \u9879\u76ee\u6587\u4ef6\u7ed3\u6784 \u00b6 1.4 \u7cfb\u7edf\u7684\u6570\u636e\u6d41\u7a0b \u00b6 index.php \u6587\u4ef6\u4f5c\u4e3a\u524d\u7aef\u63a7\u5236\u5668\uff0c\u521d\u59cb\u5316\u8fd0\u884c CodeIgniter \u6240\u9700\u7684\u57fa\u672c\u8d44\u6e90\uff1b Router \u68c0\u67e5 HTTP \u8bf7\u6c42\uff0c\u4ee5\u786e\u5b9a\u5982\u4f55\u5904\u7406\u8be5\u8bf7\u6c42\uff1b \u5982\u679c\u5b58\u5728\u7f13\u5b58\u6587\u4ef6\uff0c\u5c06\u76f4\u63a5\u8f93\u51fa\u5230\u6d4f\u89c8\u5668\uff0c\u4e0d\u7528\u8d70\u4e0b\u9762\u6b63\u5e38\u7684\u7cfb\u7edf\u6d41\u7a0b\uff1b \u5728\u52a0\u8f7d\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u5668\u4e4b\u524d\uff0c\u5bf9 HTTP \u8bf7\u6c42\u4ee5\u53ca\u4efb\u4f55\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u8fdb\u884c\u5b89\u5168\u68c0\u67e5\uff1b \u63a7\u5236\u5668\u52a0\u8f7d\u6a21\u578b\u3001\u6838\u5fc3\u7c7b\u5e93\u3001\u8f85\u52a9\u51fd\u6570\u4ee5\u53ca\u5176\u4ed6\u6240\u6709\u5904\u7406\u8bf7\u6c42\u6240\u9700\u7684\u8d44\u6e90\uff1b \u6700\u540e\u4e00\u6b65\uff0c\u6e32\u67d3\u89c6\u56fe\u5e76\u53d1\u9001\u81f3\u6d4f\u89c8\u5668\uff0c\u5982\u679c\u5f00\u542f\u4e86\u7f13\u5b58\uff0c\u89c6\u56fe\u88ab\u4f1a\u5148\u7f13\u5b58\u8d77\u6765\u7528\u4e8e \u540e\u7eed\u7684\u8bf7\u6c42\u3002 2. \u6838\u5fc3\u67b6\u6784\u53ca\u5b9e\u73b0 \u00b6 CI \u7684\u5f00\u53d1\u57fa\u4e8e MVC\uff08\u6a21\u578b - \u89c6\u56fe -\u63a7\u5236\u5668\uff09\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u5c42\u548c\u8868\u73b0\u5c42\u5206\u79bb\u5f00\u6765\u3002 \u6a21\u578b \u4ee3\u8868\u4f60\u7684\u6570\u636e\u7ed3\u6784\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u6a21\u578b\u7c7b\u5c06\u5305\u542b\u5e2e\u52a9\u4f60\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u589e\u5220\u6539\u67e5\u7684\u65b9\u6cd5\u3002 \u89c6\u56fe \u662f\u8981\u5c55\u73b0\u7ed9\u7528\u6237\u7684\u4fe1\u606f\u3002\u4e00\u4e2a\u89c6\u56fe\u901a\u5e38\u5c31\u662f\u4e00\u4e2a\u7f51\u9875\uff0c\u4f46\u662f\u5728 CI \u4e2d\uff0c \u4e00\u4e2a\u89c6\u56fe\u4e5f\u53ef\u4ee5\u662f\u4e00\u90e8\u5206\u9875\u9762\uff08\u4f8b\u5982\u9875\u5934\u3001\u9875\u5c3e\uff09\uff0c\u5b83\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a RSS \u9875\u9762\uff0c \u6216\u5176\u4ed6\u4efb\u4f55\u7c7b\u578b\u7684\u9875\u9762\u3002 \u63a7\u5236\u5668 \u662f\u6a21\u578b\u3001\u89c6\u56fe\u4ee5\u53ca\u5176\u4ed6\u4efb\u4f55\u5904\u7406 HTTP \u8bf7\u6c42\u6240\u5fc5\u987b\u7684\u8d44\u6e90\u4e4b\u95f4\u7684\u4e2d\u4ecb\uff0c\u5e76\u751f\u6210\u7f51\u9875\u3002 \u200b 2.1 Model\u5c42 \u00b6 BASE_Model \uff0c\u7531\u4e8e\u6240\u6709\u7684\u6570\u636e\u6a21\u578b\u90fd\u6709\u5bf9\u6570\u636e\u5e93\u7684CRUD\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u4ec5\u4ec5\u5728\u8868\u540d\u3001\u67e5\u8be2\u6761\u4ef6\u3001\u67e5\u8be2\u5b57\u6bb5\u7b49\u53c2\u6570\u65b9\u9762\u6709\u5dee\u522b\uff0c\u56e0\u6b64\u521b\u5efa\u4e00\u4e2aBASE_Model\u4f5c\u4e3a\u7236\u8f88\u6a21\u578b\uff0c\u4f9b\u5176\u5b83\u6a21\u578b\u7ee7\u627f\u3002 class BASE_Model extends CI_Model{ protected $table_name = ''; function __construct(){ $this->table_name = $this->table_name; parent::__construct(); } /** * \u6267\u884csql\u67e5\u8be2 * @param $where \u67e5\u8be2\u6761\u4ef6[\u4f8b`name`='$name'] * @param $data \u9700\u8981\u67e5\u8be2\u7684\u5b57\u6bb5\u503c[\u4f8b`name`,`gender`,`birthday`] * @param $limit \u8fd4\u56de\u7ed3\u679c\u8303\u56f4[\u4f8b\uff1a10\u621610,10 \u9ed8\u8ba4\u4e3a\u7a7a] * @param $order \u6392\u5e8f\u65b9\u5f0f [\u9ed8\u8ba4\u6309\u6570\u636e\u5e93\u9ed8\u8ba4\u65b9\u5f0f\u6392\u5e8f] * @param $group \u5206\u7ec4\u65b9\u5f0f [\u9ed8\u8ba4\u4e3a\u7a7a] * @param $key \u8fd4\u56de\u6570\u7ec4\u6309\u952e\u540d\u6392\u5e8f * @return array \u67e5\u8be2\u7ed3\u679c\u96c6\u6570\u7ec4 */ final public function select($where = '', $data = '*', $limit = '', $order = '', $group = '', $key='') { // ... } /** * \u6267\u884c\u63d2\u5165\u64cd\u4f5cinsert * @param $data */ final public function insert($data){ return $this->db->insert($this->table_name,$data); } /** * \u6279\u91cfinsert * @param $data \u6279\u91cf\u6570\u7ec4 */ final public function insert_batch($data){ return $this->db->insert_batch($this->table_name,$data); } /* ... */ } \u7528\u6237\u6a21\u578b \uff0cOracle\u6570\u636e\u5e93\u4e2d\u7684\u7528\u6237\u8868\u5982\u4e0b\u6240\u5217\u3002 CREATE TABLE `dc_sys_member` ( `user_id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT, `username` char(100) NOT NULL, `password` char(32) NOT NULL, `group_id` tinyint(3) unsigned DEFAULT '0', `avatar` varchar(50) DEFAULT NULL, `last_login_ip` char(15) DEFAULT NULL, `last_login_time` datetime DEFAULT NULL, `encrypt` varchar(50) DEFAULT NULL, `fullname` varchar(50) DEFAULT NULL, `qq` varchar(50) DEFAULT NULL, `created` datetime DEFAULT NULL, `modified` datetime DEFAULT NULL, `mobile` varchar(50) DEFAULT NULL, `sex` varchar(2) DEFAULT '0', PRIMARY KEY (`user_id`), UNIQUE KEY `username` (`username`(15)), KEY `groupID` (`group_id`) ) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=utf8; \u200b \u6839\u636e\u7528\u6237\u8868\u521b\u5efa\u6570\u636e\u6a21\u578b\u3002 class Member_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER'; parent::__construct(); } /* ... */ } \u7528\u6237\u7ec4\u6a21\u578b \uff0c\u7ed9\u7528\u6237\u6309\u6743\u9650\u89d2\u8272\u5206\u7ec4\uff0c\u7528\u6237\u7ec4\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002 CREATE TABLE `dc_sys_member_role` ( `role_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '\u7ec4ID', `role_name` varchar(45) NOT NULL DEFAULT '' COMMENT '\u7ec4\u540d', `type_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '\u4fdd\u7559', `description` varchar(200) DEFAULT NULL COMMENT '\u63cf\u8ff0', PRIMARY KEY (`role_id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED; \u200b \u521b\u5efa\u7528\u6237\u7ec4\u6a21\u578b\u3002 class Member_role_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE'; parent::__construct(); } /* ... */ } \u529f\u80fd\u83dc\u5355\u6a21\u578b \uff0c\u83dc\u5355\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002\u5b57\u6bb5\u4e2d\uff0cCI \u7684 URI \u8def\u7531\u7531 controller/folder/method \u6765\u552f\u4e00\u786e\u5b9a\uff1b\u6bcf\u6761\u83dc\u5355entry\u7684 arr_parentid \u5b57\u6bb5\uff0c\u4ece\u6839\u5f00\u59cb\u4f9d\u6b21\u4fdd\u5b58\u5176\u6240\u6709\u7956\u5148\u7684 menu_id \u3002 CREATE TABLE `dc_sys_module_menu` ( `menu_id` smallint(6) unsigned NOT NULL AUTO_INCREMENT, `menu_name` char(40) NOT NULL DEFAULT '', `parent_id` smallint(6) NOT NULL DEFAULT '0', `controller` varchar(50) DEFAULT NULL, `folder` varchar(50) DEFAULT NULL, `arr_parentid` varchar(250) DEFAULT NULL, `arr_childid` varchar(250) DEFAULT NULL, `is_parent` tinyint(1) DEFAULT '0', PRIMARY KEY (`menu_id`), KEY `parent_id` (`parent_id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 \u200b \u521b\u5efa\u529f\u80fd\u83dc\u5355\u6a21\u578b\u3002 class Member_role_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE'; parent::__construct(); } /* ... */ } \u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u6a21\u578b \uff0c\u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002 CREATE TABLE `dc_sys_member_role_priv` ( `role_id` tinyint(3) unsigned NOT NULL DEFAULT '0', `folder` varchar(50) NOT NULL DEFAULT '', `controller` varchar(50) NOT NULL DEFAULT '', `method` varchar(50) NOT NULL DEFAULT '', `data` varchar(50) NOT NULL DEFAULT '', `priv_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `menu_id` int(11) DEFAULT '0', PRIMARY KEY (`priv_id`), KEY `role_id` (`role_id`,`folder`,`controller`,`method`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8; \u200b \u521b\u5efa\u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u6a21\u578b\u3002 class Member_role_priv_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE_PRIV'; parent::__construct(); } /* ... */ } \u5176\u4ed6\u529f\u80fd\u6a21\u578b \uff0c\u5176\u4ed6\u529f\u80fd\u4e8e\u7cfb\u7edf\u7684\u4e3b\u8981\u6846\u67b6\u5173\u8054\u6027\u4e0d\u5927\uff0c\u53ef\u6309\u9700\u6269\u5c55\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002 2.2 Controller\u5c42 \u00b6 BASE_Controller \uff0c\u521b\u5efa\u4e00\u4e2a\u7236\u8f88\u63a7\u5236\u5668\uff0c\u5305\u542b\u4e00\u4e9b\u6240\u6709\u529f\u80fd\u6a21\u5757\u90fd\u5171\u6709\u7684 method \uff0c\u4f8b\u5982\u901a\u8fc7session\u67e5\u770b\u767b\u9646\u72b6\u6001\uff0c\u68c0\u67e5\u7528\u6237\u6743\u9650\uff0c\u83b7\u53d6\u529f\u80fd\u83dc\u5355\uff0c\u663e\u793a\u5168\u5c40\u63d0\u793a\uff0c\u751f\u6210\u89c6\u56fe\u7b49\u3002 class BASE_Controller extends CI_Controller{ function __construct(){ parent::__construct(); $this->check_member(); $this->check_priv(); } /* * \u5224\u65ad\u7528\u6237\u662f\u5426\u5df2\u7ecf\u767b\u9646 */ protected function check_member() { $_datainfo = $this->Member_model->get_one(array('USER_ID'=>$this->user_id,'USERNAME'=>$this->user_name)); if(!($this->page_data['folder_name']=='adminpanel'&&$this->page_data['controller_name']=='manage'&&$this->page_data['method_name']=='login')&&!$_datainfo){ redirect(site_url('adminpanel/manage/login')); exit(0); } } /* * \u68c0\u67e5\u7528\u6237\u6743\u9650 */ protected function check_priv(){ $r =$this->Member_role_priv_model->get_one(array('METHOD'=>$this->page_data['method_name'],'CONTROLLER'=>$this->page_data['controller_name'] ,'FOLDER'=>$this->page_data['folder_name'],'ROLE_ID'=>$this->group_id )); if(!$r) exit(\"\u60a8\u6ca1\u6709\u6743\u9650\u64cd\u4f5c\u8be5\u9879\"); } /* ... */ /** * view \u81ea\u52a8\u6a21\u677f\u8c03\u7528 */ protected function view($view_file,$sub_page_data=NULL){ $this->load->view(\"header\"); $this->load->view($view_file, $sub_page_data); $this->load->view(\"footer\"); } } \u5176\u4ed6\u63a7\u5236\u5668 \uff0c\u5176\u4ed6\u63a7\u5236\u5668\u7686\u7ee7\u627f\u81ea BASE_Controller \uff0c\u53ef\u6309\u7167\u4e0d\u540c\u7684\u529f\u80fd\u9700\u6c42\u521b\u5efa\uff0c\u6bcf\u4e00\u4e2a method \uff0c\u5bf9\u5e94\u4e00\u4e2a\u83dc\u5355entry\uff0c\u5176\u4e2d\u5305\u542b controller/folder/method \u7684\u552f\u4e00\u8def\u7531\u3002 \u200b 2.3 View\u5c42 \u00b6 \u4e00\u4e2a\u89c6\u56fe\u57fa\u672c\u4e0a\u5c31\u662f\u4e00\u4e2a\u7f51\u9875\u6216\u7f51\u9875\u7684\u4e00\u90e8\u5206\uff0c\u6839\u636e\u8def\u7531\u8c03\u7528Controller\u91cc\u7684\u5bf9\u5e94method\uff0c\u4f1a\u52a0\u8f7dview\u6a21\u677f\uff0c\u5e76\u5c06\u4ece\u670d\u52a1\u5668\u7aef\u5f97\u5230\u7684\u6570\u636e\u6e32\u67d3\u5728\u8be5\u6a21\u677f\u5185\u3002\u901a\u5e38\u4f1a\u5bf9\u4e00\u4e2a\u7f51\u9875\u8fdb\u884c\u5207\u5272\uff0c\u65b9\u4fbf\u5171\u7528Header\uff0cFooter\uff0cSidebar\uff0cBreadcrumb\uff0cNav\u7b49 \u3002 2.4 Libraries \u7c7b\u5e93 \u00b6 \u81ea\u5b9a\u7684\u529f\u80fd\u51fd\u6570\u5e93\uff0c\u65b9\u4fbf\u5728\u67d0\u4e9bmethods\u91cc\u8c03\u7528\u3002\u4f8b\u5982Menu_tree\uff0c\u4f5c\u7528\u662f\u6839\u636e\u7528\u6237\u6743\u9650\uff0c\u83b7\u53d6\u7528\u6237\u7684\u529f\u80fd\u83dc\u5355\u6811\u3002 Class Menu_tree { //\u628atree\u5c55\u5f00\u6210\u4e00\u7ef4\u6570\u7ec4\u4fbf\u4e8eview\uff0c\u89c1 generate_treeview_arr public $treeview_arr = array(); /** *\u6839\u636e\u8282\u70b9\u4eceroot\u5f00\u59cb\u5efa\u9020\u76ee\u5f55\u6811 * $result \u5fc5\u987b menu_id ASC */ public function build($result){ $menu=array(); foreach ($result as $r) { $menu_id = $r[\"MENU_ID\"]; $path = explode(\",\",$r[\"ARR_PARENTID\"]); $obj_r = (object)null; $obj_r->item = $r; if($r[\"IS_PARENT\"]) $obj_r->children = array(); $tmp=&$menu; for($i=1;$i<count($path);$i++){ $tmp=&$tmp[$path[$i]]->children; } $tmp[$menu_id] = $obj_r; } return $menu; } /** * \u628atree\u5c55\u5f00\u6210\u4e00\u7ef4\u6570\u7ec4\u4fbf\u4e8eview * \u5c55\u5f00\u4e4b\u540e \u4fdd\u5b58\u5728 treeview_arr */ public function generate_treeview_arr($menu_tree){ foreach ($menu_tree as $value) { $obj=(object)null; $nbsp=\"\"; for ($i=1; $i<count(explode(\",\",$value->item[\"ARR_PARENTID\"])); $i++) $nbsp.= \"&nbsp;<i class='fa fa-i-cursor'>&nbsp;</i><i class='fa fa-ellipsis-h'></i>\"; $obj->nbsp=$nbsp.\"&nbsp;\"; if(property_exists((object)$value->item,\"CHECKED\")) $obj->checked = $value->item[\"CHECKED\"]; $obj->val = $value->item; $this->treeview_arr[] = $obj; if(property_exists($value,\"children\")){ $this->generate_treeview_arr($value->children); } } } } 2.5 Helpers \u8f85\u52a9\u51fd\u6570 \u00b6 \u5305\u542b\u4e86\u81ea\u5b9a\u4e49\u7684\u5168\u5c40functions\uff0c\u4f8b\u5982\u4e0b\u9762\u4e24\u4e2a\u3002 /** * \u5b89\u5168\u8fc7\u6ee4\u51fd\u6570 */ if(! function_exists('safe_replace')){ function _safe_replace($string) { $string = str_replace('%20','',$string); $string = str_replace('%27','',$string); $string = str_replace('%2527','',$string); $string = str_replace('*','',$string); $string = str_replace('\"','&quot;',$string); $string = str_replace(\"'\",'',$string); $string = str_replace('\"','',$string); $string = str_replace(';','',$string); $string = str_replace('<','&lt;',$string); $string = str_replace('>','&gt;',$string); $string = str_replace(\"{\",'',$string); $string = str_replace('}','',$string); return $string; } function safe_replace($string) { if(!is_array($string)) return _safe_replace($string); foreach($string as $key => $val) $string[$key] = _safe_replace($val); return $string; } } /** * \u5224\u65ad\u662f\u4e0d\u662fajax\u8bf7\u6c42 */ if(!function_exists('is_ajax_request')){ function is_ajax_request(){ return isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] ='xmlhttprequest'; } } 3. \u4ecd\u9700\u6539\u8fdb\u4e4b\u5904 \u00b6 \u4e3b\u9875\u9700\u8981\u91cd\u65b0\u8bbe\u8ba1 \u65b0\u589e\u548c\u7f16\u8f91\u529f\u80fd\u83dc\u5355\u53ef\u4ee5\u505a\u5f97\u66f4\u7ec6\u81f4\u3001\u66f4\u7075\u6d3b \u7cfb\u7edf\u6307\u6807\u548c\u4e3b\u673a\u8d44\u6e90\u7684\u67e5\u8be2SQL\u4f18\u5316 Web\u524d\u7aef\u7684\u56fe\u5f62\u5316\u5c55\u793a\u53ef\u4ee5\u66f4\u4e30\u5bcc\u66f4\u53cb\u597d","title":"\u57fa\u4e8e CodeIgniter \u7684\u8fd0\u7ef4\u76d1\u63a7\u7cfb\u7edf\u5b9e\u73b0"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#1","text":"\u672c\u9879\u76ee\u662f\u67d0\u94f6\u884c\u6570\u636e\u4e2d\u5fc3\u8fd0\u7ef4\u76d1\u63a7\u7cfb\u7edf\uff0c\u7531\u4e8e\u53d7\u751f\u4ea7\u73af\u5883\u9650\u5236\uff0c\u6545\u53ea\u80fd\u56e0\u5730\u5236\u5b9c\uff0c\u90e8\u7f72\u4e8eLinux\u7cfb\u7edf\uff0c\u670d\u52a1\u5668Apache2\uff0c\u6570\u636e\u5e93\u4e3aOracle\uff0c\u9009\u62e9\u5b8c\u5168\u80fd\u6ee1\u8db3\u9700\u6c42\u7684CodeIgniter\u6846\u67b6\u3002 ## 1.1 \u529f\u80fd\u9700\u6c42\u5206\u6790 \u7528\u6237\u767b\u5f55\u529f\u80fd \u6743\u9650\u5206\u7ec4\u7ba1\u7406 \u529f\u80fd\u83dc\u5355\u7ba1\u7406 \u7cfb\u7edf\u5404\u9879\u6307\u6807\u76d1\u63a7 \u4e3b\u673a\u8d44\u6e90\u67e5\u8be2 \u8bbe\u5907\u7ef4\u4fdd\u4fe1\u606f\u7ba1\u7406","title":"1. \u524d\u8a00"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#12","text":"","title":"1.2 \u603b\u4f53\u8bbe\u8ba1"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#_1","text":"\u91c7\u7528\u4f20\u7edf\u7684\u4e09\u5c42\u67b6\u6784\u8bbe\u8ba1\uff0c\u81ea\u4e0b\u800c\u4e0a\u4f9d\u6b21\u4e3a\u6301\u4e45\u5c42\u3001\u4e1a\u52a1\u903b\u8f91\u5c42\u548c\u8868\u793a\u5c42\u3002 \u6301\u4e45\u5c42 \uff0c\u91c7\u7528Oracle\u6570\u636e\u5e93\u5b58\u50a8\u6570\u636e\uff0c\u901a\u8fc7\u8f6e\u8be2\u5b9e\u65f6\u76d1\u63a7\u5e76\u83b7\u53d6\u5404\u7cfb\u7edf\u670d\u52a1\u5668\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff0c\u5c06\u6570\u636e\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u3002 \u4e1a\u52a1\u903b\u8f91\u5c42 \uff0c\u8be5\u7cfb\u7edf\u7684\u6838\u5fc3\u5c42\uff0c\u4e3b\u8981\u7531\u90e8\u7f72\u4e8eapache2\u7684CI\u7ec4\u6210\uff0c\u5305\u62ec\u6570\u636e\u6a21\u578b\u521b\u5efa\uff0c\u63a7\u5236\u903b\u8f91\u7684\u8bbe\u8ba1\uff0c\u6570\u636e\u53ef\u89c6\u5316\u7684\u5b9e\u73b0\u7b49\u3002 \u8868\u793a\u5c42 \uff0c\u901a\u8fc7\u6d4f\u89c8\u5668\u5411\u7528\u6237\u5c55\u793a\u7cfb\u7edf\u95e8\u6237\uff0c\u5b8c\u6210\u7cfb\u7edf\u4e0e\u7528\u6237\u7684\u5404\u79cd\u4ea4\u4e92\u529f\u80fd\u3002 \u200b","title":"\u603b\u4f53\u67b6\u6784\u8bbe\u8ba1"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#_2","text":"\u767b\u5f55 \u63a5\u6536POST\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u6570\u636e\u5e93\u7684\u7528\u6237\u540d\u4e0e\u5bc6\u7801\uff0c\u4fdd\u5b58\u5728session\u91cc\uff0c\u7136\u540e\u6267\u884c\u540e\u9762\u64cd\u4f5c\u3002\u5f88\u5e38\u89c4\uff0c\u6bcb\u5eb8\u8d58\u8a00\u3002 \u6743\u9650\u5206\u7ec4\u7ba1\u7406 \u7cfb\u7edf\u7684\u529f\u80fd\u83dc\u5355\u4e0e\u7528\u6237\u7ec4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884cCRUD\u64cd\u4f5c\u3002\u7528\u6237\u767b\u9646\u65f6\u4f1a\u9a8c\u8bc1\u7528\u6237\u6743\u9650\uff0c\u786e\u5b9a\u6240\u5c5e\u5206\u7ec4\uff0c\u7136\u540e\u83b7\u53d6\u76f8\u5e94\u7684\u529f\u80fd\u83dc\u5355\u3002\u6743\u9650\u4e4b\u5916\u7684\u64cd\u4f5c\u5c06\u4f1a\u88ab\u62d2\u7edd\u3002 \u529f\u80fd\u83dc\u5355\u7ba1\u7406 \u7cfb\u7edf\u529f\u80fd\u83dc\u5355\u4fdd\u5b58\u5728\u6570\u636e\u5e93\uff0c\u7528\u6237\u53ef\u4ee5\u4f9d\u636e\u81ea\u8eab\u6743\u9650\u83b7\u53d6\u76f8\u5e94\u7684\u83dc\u5355\u3002\u8d85\u7ea7\u7528\u6237\u53ef\u4ee5\u5bf9\u7528\u6237\u83dc\u5355\u8fdb\u884cCRUD\u7b49\u64cd\u4f5c\u3002 \u7cfb\u7edf\u5404\u9879\u6307\u6807\u76d1\u63a7 \u7528\u6237\u767b\u9646\u540e\uff0c\u4f9d\u5176\u6743\u9650\u83b7\u53d6\u5df2\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u91cc\u7684\u76f8\u5e94\u7cfb\u7edf\u6307\u6807\uff0cCPU\u4f7f\u7528\u7387\u3001\u5185\u5b58\u4f7f\u7528\u7387\u3001\u6570\u636e\u5e93\u4f7f\u7528\u60c5\u51b5\u7b49\u3002 \u4e3b\u673a\u8d44\u6e90\u67e5\u8be2 \u7528\u6237\u53ef\u67e5\u8be2\u5404\u7cfb\u7edf\u7684\u4e3b\u673a\u8d44\u6e90\uff0c\u5305\u62ec\u4e3b\u673a\u540d\uff0c\u4e3b\u673a\u7528\u9014\uff0cIP\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7b49\u3002 \u8bbe\u5907\u7ef4\u4fdd\u4fe1\u606f\u7ba1\u7406 \u5305\u62ec\u7ef4\u4fdd\u4fe1\u606f\u7684CRUD\u64cd\u4f5c\uff0c\u5e76\u80fdEXCEL\u6279\u91cf\u5bfc\u5165\u7ef4\u4fdd\u4fe1\u606f\u3002","title":"\u529f\u80fd\u5212\u5206\u53ca\u5904\u7406\u6d41\u7a0b"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#_3","text":"\u200b","title":"\u7cfb\u7edf\u529f\u80fd\u5168\u666f\u56fe"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#13","text":"","title":"1.3 \u9879\u76ee\u6587\u4ef6\u7ed3\u6784"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#14","text":"index.php \u6587\u4ef6\u4f5c\u4e3a\u524d\u7aef\u63a7\u5236\u5668\uff0c\u521d\u59cb\u5316\u8fd0\u884c CodeIgniter \u6240\u9700\u7684\u57fa\u672c\u8d44\u6e90\uff1b Router \u68c0\u67e5 HTTP \u8bf7\u6c42\uff0c\u4ee5\u786e\u5b9a\u5982\u4f55\u5904\u7406\u8be5\u8bf7\u6c42\uff1b \u5982\u679c\u5b58\u5728\u7f13\u5b58\u6587\u4ef6\uff0c\u5c06\u76f4\u63a5\u8f93\u51fa\u5230\u6d4f\u89c8\u5668\uff0c\u4e0d\u7528\u8d70\u4e0b\u9762\u6b63\u5e38\u7684\u7cfb\u7edf\u6d41\u7a0b\uff1b \u5728\u52a0\u8f7d\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u5668\u4e4b\u524d\uff0c\u5bf9 HTTP \u8bf7\u6c42\u4ee5\u53ca\u4efb\u4f55\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u8fdb\u884c\u5b89\u5168\u68c0\u67e5\uff1b \u63a7\u5236\u5668\u52a0\u8f7d\u6a21\u578b\u3001\u6838\u5fc3\u7c7b\u5e93\u3001\u8f85\u52a9\u51fd\u6570\u4ee5\u53ca\u5176\u4ed6\u6240\u6709\u5904\u7406\u8bf7\u6c42\u6240\u9700\u7684\u8d44\u6e90\uff1b \u6700\u540e\u4e00\u6b65\uff0c\u6e32\u67d3\u89c6\u56fe\u5e76\u53d1\u9001\u81f3\u6d4f\u89c8\u5668\uff0c\u5982\u679c\u5f00\u542f\u4e86\u7f13\u5b58\uff0c\u89c6\u56fe\u88ab\u4f1a\u5148\u7f13\u5b58\u8d77\u6765\u7528\u4e8e \u540e\u7eed\u7684\u8bf7\u6c42\u3002","title":"1.4 \u7cfb\u7edf\u7684\u6570\u636e\u6d41\u7a0b"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#2","text":"CI \u7684\u5f00\u53d1\u57fa\u4e8e MVC\uff08\u6a21\u578b - \u89c6\u56fe -\u63a7\u5236\u5668\uff09\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u5c42\u548c\u8868\u73b0\u5c42\u5206\u79bb\u5f00\u6765\u3002 \u6a21\u578b \u4ee3\u8868\u4f60\u7684\u6570\u636e\u7ed3\u6784\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u6a21\u578b\u7c7b\u5c06\u5305\u542b\u5e2e\u52a9\u4f60\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u589e\u5220\u6539\u67e5\u7684\u65b9\u6cd5\u3002 \u89c6\u56fe \u662f\u8981\u5c55\u73b0\u7ed9\u7528\u6237\u7684\u4fe1\u606f\u3002\u4e00\u4e2a\u89c6\u56fe\u901a\u5e38\u5c31\u662f\u4e00\u4e2a\u7f51\u9875\uff0c\u4f46\u662f\u5728 CI \u4e2d\uff0c \u4e00\u4e2a\u89c6\u56fe\u4e5f\u53ef\u4ee5\u662f\u4e00\u90e8\u5206\u9875\u9762\uff08\u4f8b\u5982\u9875\u5934\u3001\u9875\u5c3e\uff09\uff0c\u5b83\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a RSS \u9875\u9762\uff0c \u6216\u5176\u4ed6\u4efb\u4f55\u7c7b\u578b\u7684\u9875\u9762\u3002 \u63a7\u5236\u5668 \u662f\u6a21\u578b\u3001\u89c6\u56fe\u4ee5\u53ca\u5176\u4ed6\u4efb\u4f55\u5904\u7406 HTTP \u8bf7\u6c42\u6240\u5fc5\u987b\u7684\u8d44\u6e90\u4e4b\u95f4\u7684\u4e2d\u4ecb\uff0c\u5e76\u751f\u6210\u7f51\u9875\u3002 \u200b","title":"2. \u6838\u5fc3\u67b6\u6784\u53ca\u5b9e\u73b0"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#21-model","text":"BASE_Model \uff0c\u7531\u4e8e\u6240\u6709\u7684\u6570\u636e\u6a21\u578b\u90fd\u6709\u5bf9\u6570\u636e\u5e93\u7684CRUD\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u4ec5\u4ec5\u5728\u8868\u540d\u3001\u67e5\u8be2\u6761\u4ef6\u3001\u67e5\u8be2\u5b57\u6bb5\u7b49\u53c2\u6570\u65b9\u9762\u6709\u5dee\u522b\uff0c\u56e0\u6b64\u521b\u5efa\u4e00\u4e2aBASE_Model\u4f5c\u4e3a\u7236\u8f88\u6a21\u578b\uff0c\u4f9b\u5176\u5b83\u6a21\u578b\u7ee7\u627f\u3002 class BASE_Model extends CI_Model{ protected $table_name = ''; function __construct(){ $this->table_name = $this->table_name; parent::__construct(); } /** * \u6267\u884csql\u67e5\u8be2 * @param $where \u67e5\u8be2\u6761\u4ef6[\u4f8b`name`='$name'] * @param $data \u9700\u8981\u67e5\u8be2\u7684\u5b57\u6bb5\u503c[\u4f8b`name`,`gender`,`birthday`] * @param $limit \u8fd4\u56de\u7ed3\u679c\u8303\u56f4[\u4f8b\uff1a10\u621610,10 \u9ed8\u8ba4\u4e3a\u7a7a] * @param $order \u6392\u5e8f\u65b9\u5f0f [\u9ed8\u8ba4\u6309\u6570\u636e\u5e93\u9ed8\u8ba4\u65b9\u5f0f\u6392\u5e8f] * @param $group \u5206\u7ec4\u65b9\u5f0f [\u9ed8\u8ba4\u4e3a\u7a7a] * @param $key \u8fd4\u56de\u6570\u7ec4\u6309\u952e\u540d\u6392\u5e8f * @return array \u67e5\u8be2\u7ed3\u679c\u96c6\u6570\u7ec4 */ final public function select($where = '', $data = '*', $limit = '', $order = '', $group = '', $key='') { // ... } /** * \u6267\u884c\u63d2\u5165\u64cd\u4f5cinsert * @param $data */ final public function insert($data){ return $this->db->insert($this->table_name,$data); } /** * \u6279\u91cfinsert * @param $data \u6279\u91cf\u6570\u7ec4 */ final public function insert_batch($data){ return $this->db->insert_batch($this->table_name,$data); } /* ... */ } \u7528\u6237\u6a21\u578b \uff0cOracle\u6570\u636e\u5e93\u4e2d\u7684\u7528\u6237\u8868\u5982\u4e0b\u6240\u5217\u3002 CREATE TABLE `dc_sys_member` ( `user_id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT, `username` char(100) NOT NULL, `password` char(32) NOT NULL, `group_id` tinyint(3) unsigned DEFAULT '0', `avatar` varchar(50) DEFAULT NULL, `last_login_ip` char(15) DEFAULT NULL, `last_login_time` datetime DEFAULT NULL, `encrypt` varchar(50) DEFAULT NULL, `fullname` varchar(50) DEFAULT NULL, `qq` varchar(50) DEFAULT NULL, `created` datetime DEFAULT NULL, `modified` datetime DEFAULT NULL, `mobile` varchar(50) DEFAULT NULL, `sex` varchar(2) DEFAULT '0', PRIMARY KEY (`user_id`), UNIQUE KEY `username` (`username`(15)), KEY `groupID` (`group_id`) ) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=utf8; \u200b \u6839\u636e\u7528\u6237\u8868\u521b\u5efa\u6570\u636e\u6a21\u578b\u3002 class Member_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER'; parent::__construct(); } /* ... */ } \u7528\u6237\u7ec4\u6a21\u578b \uff0c\u7ed9\u7528\u6237\u6309\u6743\u9650\u89d2\u8272\u5206\u7ec4\uff0c\u7528\u6237\u7ec4\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002 CREATE TABLE `dc_sys_member_role` ( `role_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '\u7ec4ID', `role_name` varchar(45) NOT NULL DEFAULT '' COMMENT '\u7ec4\u540d', `type_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '\u4fdd\u7559', `description` varchar(200) DEFAULT NULL COMMENT '\u63cf\u8ff0', PRIMARY KEY (`role_id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED; \u200b \u521b\u5efa\u7528\u6237\u7ec4\u6a21\u578b\u3002 class Member_role_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE'; parent::__construct(); } /* ... */ } \u529f\u80fd\u83dc\u5355\u6a21\u578b \uff0c\u83dc\u5355\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002\u5b57\u6bb5\u4e2d\uff0cCI \u7684 URI \u8def\u7531\u7531 controller/folder/method \u6765\u552f\u4e00\u786e\u5b9a\uff1b\u6bcf\u6761\u83dc\u5355entry\u7684 arr_parentid \u5b57\u6bb5\uff0c\u4ece\u6839\u5f00\u59cb\u4f9d\u6b21\u4fdd\u5b58\u5176\u6240\u6709\u7956\u5148\u7684 menu_id \u3002 CREATE TABLE `dc_sys_module_menu` ( `menu_id` smallint(6) unsigned NOT NULL AUTO_INCREMENT, `menu_name` char(40) NOT NULL DEFAULT '', `parent_id` smallint(6) NOT NULL DEFAULT '0', `controller` varchar(50) DEFAULT NULL, `folder` varchar(50) DEFAULT NULL, `arr_parentid` varchar(250) DEFAULT NULL, `arr_childid` varchar(250) DEFAULT NULL, `is_parent` tinyint(1) DEFAULT '0', PRIMARY KEY (`menu_id`), KEY `parent_id` (`parent_id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 \u200b \u521b\u5efa\u529f\u80fd\u83dc\u5355\u6a21\u578b\u3002 class Member_role_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE'; parent::__construct(); } /* ... */ } \u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u6a21\u578b \uff0c\u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u8868\u7684\u5b57\u6bb5\u5982\u4e0b\u3002 CREATE TABLE `dc_sys_member_role_priv` ( `role_id` tinyint(3) unsigned NOT NULL DEFAULT '0', `folder` varchar(50) NOT NULL DEFAULT '', `controller` varchar(50) NOT NULL DEFAULT '', `method` varchar(50) NOT NULL DEFAULT '', `data` varchar(50) NOT NULL DEFAULT '', `priv_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `menu_id` int(11) DEFAULT '0', PRIMARY KEY (`priv_id`), KEY `role_id` (`role_id`,`folder`,`controller`,`method`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8; \u200b \u521b\u5efa\u7528\u6237\u7ec4-\u83dc\u5355\u5173\u7cfb\u6a21\u578b\u3002 class Member_role_priv_model extends BASE_Model{ public function __construct() { $this->table_name = 'DC_SYS_MEMBER_ROLE_PRIV'; parent::__construct(); } /* ... */ } \u5176\u4ed6\u529f\u80fd\u6a21\u578b \uff0c\u5176\u4ed6\u529f\u80fd\u4e8e\u7cfb\u7edf\u7684\u4e3b\u8981\u6846\u67b6\u5173\u8054\u6027\u4e0d\u5927\uff0c\u53ef\u6309\u9700\u6269\u5c55\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002","title":"2.1 Model\u5c42"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#22-controller","text":"BASE_Controller \uff0c\u521b\u5efa\u4e00\u4e2a\u7236\u8f88\u63a7\u5236\u5668\uff0c\u5305\u542b\u4e00\u4e9b\u6240\u6709\u529f\u80fd\u6a21\u5757\u90fd\u5171\u6709\u7684 method \uff0c\u4f8b\u5982\u901a\u8fc7session\u67e5\u770b\u767b\u9646\u72b6\u6001\uff0c\u68c0\u67e5\u7528\u6237\u6743\u9650\uff0c\u83b7\u53d6\u529f\u80fd\u83dc\u5355\uff0c\u663e\u793a\u5168\u5c40\u63d0\u793a\uff0c\u751f\u6210\u89c6\u56fe\u7b49\u3002 class BASE_Controller extends CI_Controller{ function __construct(){ parent::__construct(); $this->check_member(); $this->check_priv(); } /* * \u5224\u65ad\u7528\u6237\u662f\u5426\u5df2\u7ecf\u767b\u9646 */ protected function check_member() { $_datainfo = $this->Member_model->get_one(array('USER_ID'=>$this->user_id,'USERNAME'=>$this->user_name)); if(!($this->page_data['folder_name']=='adminpanel'&&$this->page_data['controller_name']=='manage'&&$this->page_data['method_name']=='login')&&!$_datainfo){ redirect(site_url('adminpanel/manage/login')); exit(0); } } /* * \u68c0\u67e5\u7528\u6237\u6743\u9650 */ protected function check_priv(){ $r =$this->Member_role_priv_model->get_one(array('METHOD'=>$this->page_data['method_name'],'CONTROLLER'=>$this->page_data['controller_name'] ,'FOLDER'=>$this->page_data['folder_name'],'ROLE_ID'=>$this->group_id )); if(!$r) exit(\"\u60a8\u6ca1\u6709\u6743\u9650\u64cd\u4f5c\u8be5\u9879\"); } /* ... */ /** * view \u81ea\u52a8\u6a21\u677f\u8c03\u7528 */ protected function view($view_file,$sub_page_data=NULL){ $this->load->view(\"header\"); $this->load->view($view_file, $sub_page_data); $this->load->view(\"footer\"); } } \u5176\u4ed6\u63a7\u5236\u5668 \uff0c\u5176\u4ed6\u63a7\u5236\u5668\u7686\u7ee7\u627f\u81ea BASE_Controller \uff0c\u53ef\u6309\u7167\u4e0d\u540c\u7684\u529f\u80fd\u9700\u6c42\u521b\u5efa\uff0c\u6bcf\u4e00\u4e2a method \uff0c\u5bf9\u5e94\u4e00\u4e2a\u83dc\u5355entry\uff0c\u5176\u4e2d\u5305\u542b controller/folder/method \u7684\u552f\u4e00\u8def\u7531\u3002 \u200b","title":"2.2 Controller\u5c42"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#23-view","text":"\u4e00\u4e2a\u89c6\u56fe\u57fa\u672c\u4e0a\u5c31\u662f\u4e00\u4e2a\u7f51\u9875\u6216\u7f51\u9875\u7684\u4e00\u90e8\u5206\uff0c\u6839\u636e\u8def\u7531\u8c03\u7528Controller\u91cc\u7684\u5bf9\u5e94method\uff0c\u4f1a\u52a0\u8f7dview\u6a21\u677f\uff0c\u5e76\u5c06\u4ece\u670d\u52a1\u5668\u7aef\u5f97\u5230\u7684\u6570\u636e\u6e32\u67d3\u5728\u8be5\u6a21\u677f\u5185\u3002\u901a\u5e38\u4f1a\u5bf9\u4e00\u4e2a\u7f51\u9875\u8fdb\u884c\u5207\u5272\uff0c\u65b9\u4fbf\u5171\u7528Header\uff0cFooter\uff0cSidebar\uff0cBreadcrumb\uff0cNav\u7b49 \u3002","title":"2.3 View\u5c42"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#24-libraries","text":"\u81ea\u5b9a\u7684\u529f\u80fd\u51fd\u6570\u5e93\uff0c\u65b9\u4fbf\u5728\u67d0\u4e9bmethods\u91cc\u8c03\u7528\u3002\u4f8b\u5982Menu_tree\uff0c\u4f5c\u7528\u662f\u6839\u636e\u7528\u6237\u6743\u9650\uff0c\u83b7\u53d6\u7528\u6237\u7684\u529f\u80fd\u83dc\u5355\u6811\u3002 Class Menu_tree { //\u628atree\u5c55\u5f00\u6210\u4e00\u7ef4\u6570\u7ec4\u4fbf\u4e8eview\uff0c\u89c1 generate_treeview_arr public $treeview_arr = array(); /** *\u6839\u636e\u8282\u70b9\u4eceroot\u5f00\u59cb\u5efa\u9020\u76ee\u5f55\u6811 * $result \u5fc5\u987b menu_id ASC */ public function build($result){ $menu=array(); foreach ($result as $r) { $menu_id = $r[\"MENU_ID\"]; $path = explode(\",\",$r[\"ARR_PARENTID\"]); $obj_r = (object)null; $obj_r->item = $r; if($r[\"IS_PARENT\"]) $obj_r->children = array(); $tmp=&$menu; for($i=1;$i<count($path);$i++){ $tmp=&$tmp[$path[$i]]->children; } $tmp[$menu_id] = $obj_r; } return $menu; } /** * \u628atree\u5c55\u5f00\u6210\u4e00\u7ef4\u6570\u7ec4\u4fbf\u4e8eview * \u5c55\u5f00\u4e4b\u540e \u4fdd\u5b58\u5728 treeview_arr */ public function generate_treeview_arr($menu_tree){ foreach ($menu_tree as $value) { $obj=(object)null; $nbsp=\"\"; for ($i=1; $i<count(explode(\",\",$value->item[\"ARR_PARENTID\"])); $i++) $nbsp.= \"&nbsp;<i class='fa fa-i-cursor'>&nbsp;</i><i class='fa fa-ellipsis-h'></i>\"; $obj->nbsp=$nbsp.\"&nbsp;\"; if(property_exists((object)$value->item,\"CHECKED\")) $obj->checked = $value->item[\"CHECKED\"]; $obj->val = $value->item; $this->treeview_arr[] = $obj; if(property_exists($value,\"children\")){ $this->generate_treeview_arr($value->children); } } } }","title":"2.4 Libraries \u7c7b\u5e93"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#25-helpers","text":"\u5305\u542b\u4e86\u81ea\u5b9a\u4e49\u7684\u5168\u5c40functions\uff0c\u4f8b\u5982\u4e0b\u9762\u4e24\u4e2a\u3002 /** * \u5b89\u5168\u8fc7\u6ee4\u51fd\u6570 */ if(! function_exists('safe_replace')){ function _safe_replace($string) { $string = str_replace('%20','',$string); $string = str_replace('%27','',$string); $string = str_replace('%2527','',$string); $string = str_replace('*','',$string); $string = str_replace('\"','&quot;',$string); $string = str_replace(\"'\",'',$string); $string = str_replace('\"','',$string); $string = str_replace(';','',$string); $string = str_replace('<','&lt;',$string); $string = str_replace('>','&gt;',$string); $string = str_replace(\"{\",'',$string); $string = str_replace('}','',$string); return $string; } function safe_replace($string) { if(!is_array($string)) return _safe_replace($string); foreach($string as $key => $val) $string[$key] = _safe_replace($val); return $string; } } /** * \u5224\u65ad\u662f\u4e0d\u662fajax\u8bf7\u6c42 */ if(!function_exists('is_ajax_request')){ function is_ajax_request(){ return isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] ='xmlhttprequest'; } }","title":"2.5 Helpers \u8f85\u52a9\u51fd\u6570"},{"location":"history/%E5%9F%BA%E4%BA%8E%20CodeIgniter%20%E7%9A%84%E8%BF%90%E7%BB%B4%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/#3","text":"\u4e3b\u9875\u9700\u8981\u91cd\u65b0\u8bbe\u8ba1 \u65b0\u589e\u548c\u7f16\u8f91\u529f\u80fd\u83dc\u5355\u53ef\u4ee5\u505a\u5f97\u66f4\u7ec6\u81f4\u3001\u66f4\u7075\u6d3b \u7cfb\u7edf\u6307\u6807\u548c\u4e3b\u673a\u8d44\u6e90\u7684\u67e5\u8be2SQL\u4f18\u5316 Web\u524d\u7aef\u7684\u56fe\u5f62\u5316\u5c55\u793a\u53ef\u4ee5\u66f4\u4e30\u5bcc\u66f4\u53cb\u597d","title":"3. \u4ecd\u9700\u6539\u8fdb\u4e4b\u5904"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/","text":"\u57fa\u7840\u5f88\u91cd\u8981\uff0c\u8ba4\u771f\u5bf9\u5f85\u3002\u5982\u679c\u4e00\u5473\u8ffd\u6c42\u6280\u672f\u6808\uff0c\u5373\u4f7f\u8dd1\u5f97\u518d\u8fdc\uff0c\u5176\u5b9e\u4e0d\u8fc7\u662f\u5728\u539f\u5730\u6253\u8f6c\u3002 1. \u4e8b\u4ef6\u5faa\u73af\u673a\u5236 \u00b6 // question 1 for (var i = 0; i < 5; i++) { console.log(i); } // \u7acb\u5373 output: 0,1,2,3,4 // question 2 for (var i = 0; i < 5; i++) { setTimeout(function() { console.log(i); }, 1000 * i); } //\u5ef6\u8fdf output: 5,5,5,5,5 // question 3 for (var i = 0; i < 5; i++) { (function(i){ setTimeout(function() { console.log(i); }, 1000 * i); })(i) } //\u5ef6\u8fdf output: 0,1,2,3,4 // question 4 for (var i = 0; i < 5; i++) { (function() { setTimeout(function() { console.log(i); }, i * 1000); })(i); } //\u5ef6\u8fdf output: 5,5,5,5,5 // question 5 for (var i = 0; i < 5; i++) { setTimeout((function(i) { console.log(i); })(i), i * 1000); } //\u5ef6\u8fdf output: 5,5,5,5,5 \u2716\ufe0f //\u7acb\u5373 output: 0,1,2,3,4 \u2714\ufe0f \u89e3\u6790 \uff1a setTimeout \u4f20\u9012\u4e86\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u51fd\u6570\uff0c\u5373\u4e3aundefined\uff0c\u800c\u7acb\u5373\u6267\u884c\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u90a3\u4e48\u5e94\u8be5\u662f\u7acb\u9a6c\u8f93\u51fa\u7684\u3002 // question 6 setTimeout(function() { console.log(1); }, 0); new Promise(function executor(resolve) { console.log(2); for( var i=0 ; i<10000 ; i++ ) { i == 9999 && resolve(); } console.log(3); }).then(function() { console.log(4); }); console.log(5); //\u7acb\u5373output: 2, 3, 4, 5, 1 \u2716\ufe0f //\u7acb\u5373output: 2, 3, 5, 4, 1 \u2714\ufe0f \u89e3\u6790 \uff1aPromise \u7684 then \u5728\u5f53\u524d tick \u7684\u672b\u5c3e\u6267\u884c\uff0c\u56e0\u6b64\uff0c\u5f53\u524dtick\u5e94\u5f53\u5148\u8f93\u51fa 5\uff0c\u800c\u540e\u8f93\u51fa 4 \u3002 \u5230\u4e0b\u4e00\u4e2a tick\uff0c\u5c31\u662f 1 \u3002 2. \u8de8\u57df\u4e4b JSONP \u00b6 \u540c\u6e90\uff1a\u534f\u8bae\uff0cIP\uff0c\u7aef\u53e3\u4e09\u8005\u7686\u76f8\u540c\u8005\uff0c\u4e3a\u540c\u6e90\u3002\u4e0d\u540c\u6e90\u4e4b\u95f4\u4ea4\u4e92\u8005\u4e3a**\u8de8\u57df**\u3002 \u524d\u63d0\uff1a\u51e1\u662f\u62e5\u6709\u201csrc\u201d\u8fd9\u4e2a\u5c5e\u6027\u7684\u6807\u7b7e\u90fd\u62e5\u6709\u8de8\u57df\u7684\u80fd\u529b\uff0c\u5982 <script> \u3001 <img> \u3001 <iframe> \u3002 JSONP ( JSON with Padding )\uff0c\u4e00\u79cd\u975e\u6b63\u5f0f\u4f20\u8f93\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u7684\u4e00\u4e2a\u8981\u70b9\u5c31\u662f**\u5141\u8bb8\u7528\u6237\u4f20\u9012\u4e00\u4e2acallback\u53c2\u6570\u7ed9\u670d\u52a1\u7aef**\uff0c\u7136\u540e\u670d\u52a1\u7aef\u8fd4\u56de\u6570\u636e\u65f6\u4f1a\u5c06\u8fd9\u4e2acallback\u53c2\u6570\u4f5c\u4e3a\u51fd\u6570\u540d\u6765\u5305\u88f9\u4f4fJSON\u6570\u636e\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u968f\u610f\u5b9a\u5236\u81ea\u5df1\u7684\u51fd\u6570\u6765\u81ea\u52a8\u5904\u7406\u8fd4\u56de\u6570\u636e\u4e86\u3002 3. \u5ba2\u6237\u7aef Storage \u00b6 cookie\uff1a \u6709\u8fc7\u671f\u65f6\u95f4\uff0c\u6700\u59274kb\uff1b localStorage\uff1a\u82e5\u4e0d\u624b\u52a8\u6e05\u9664\uff0c\u6c38\u4e0d\u6d88\u5931\uff0c\u53ef\u8fbe5M\u6216\u66f4\u5927\uff1b sessionStorage\uff1a\u5b58\u6d3b\u4e8e\u4e00\u4e2a\u4f1a\u8bdd\u671f\u95f4\uff0c\u6d4f\u89c8\u5668\u5173\u95ed\u5373\u6d88\u5931\uff0c\u53ef\u8fbe5M\u6216\u66f4\u5927\u3002 4. \u6d4f\u89c8\u5668\u6e32\u67d3 \u00b6 \u89e3\u6790html\u4ee5\u6784\u5efadom\u6811 -> \u6784\u5efarender\u6811 -> \u5e03\u5c40render\u6811 -> \u7ed8\u5236render\u6811 \u6982\u5ff5\u89e3\u91ca\uff1a DOM Tree\uff1a\u6d4f\u89c8\u5668\u5c06HTML\u89e3\u6790\u6210\u6811\u5f62\u7684\u6570\u636e\u7ed3\u6784\u3002 CSS Rule Tree\uff1a\u6d4f\u89c8\u5668\u5c06CSS\u89e3\u6790\u6210\u6811\u5f62\u7684\u6570\u636e\u7ed3\u6784\u3002 Render Tree\uff1aDOM\u548cCSSOM\u5408\u5e76\u540e\u751f\u6210 Render Tree\u3002 Layout\uff1a\u6709\u4e86Render Tree\uff0c\u6d4f\u89c8\u5668\u5df2\u7ecf\u80fd\u77e5\u9053\u7f51\u9875\u4e2d\u6709\u54ea\u4e9b\u8282\u70b9\u3001\u5404\u4e2a\u8282\u70b9\u7684CSS\u5b9a\u4e49\u4ee5\u53ca\u4ed6\u4eec\u7684\u4ece\u5c5e\u5173\u7cfb\uff0c\u4ece\u800c\u53bb\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u8282\u70b9\u5728\u5c4f\u5e55\u4e2d\u7684\u4f4d\u7f6e\u3002 Painting\uff1a \u6309\u7167\u7b97\u51fa\u6765\u7684\u89c4\u5219\uff0c\u901a\u8fc7\u663e\u5361\uff0c\u628a\u5185\u5bb9\u753b\u5230\u5c4f\u5e55\u4e0a\u3002 Reflow\uff08\u56de\u6d41\uff09\uff1a\u5f53\u6d4f\u89c8\u5668\u53d1\u73b0\u67d0\u90e8\u5206\u53d1\u751f\u53d8\u5316\u5f71\u54cd\u5e03\u5c40\uff0c\u9700\u5012\u56de\u53bb\u91cd\u65b0\u6e32\u67d3\uff0c\u79f0\u4f5cReflow\u3002 Repaint\uff08\u91cd\u7ed8\uff09\uff1a\u6539\u53d8\u67d0\u5143\u7d20\u7684\u80cc\u666f\u8272\u3001\u6587\u5b57\u989c\u8272\u3001\u8fb9\u6846\u989c\u8272\u7b49\u4e0d\u5f71\u54cd\u5b83\u5468\u56f4\u6216\u5185\u90e8\u5e03\u5c40\u7684\u5c5e\u6027\u65f6\uff0c\u5c4f\u5e55\u7684\u4e00\u90e8\u5206\u8981\u91cd\u753b\uff0c\u4f46\u662f\u5143\u7d20\u7684\u51e0\u4f55\u5c3a\u5bf8\u6ca1\u6709\u53d8\u3002 5. Javascript \u7ee7\u627f \u00b6 5.0 \u7236\u7c7b \u00b6 function Animal(name) { this.name = name || 'Animal' } Animal.prototype.say = function(){ console.log(this.name+\" says Hi!\") } 5.1 \u539f\u578b\u94fe\u7ee7\u627f \u00b6 function Dog(){} Dog.prototype = new Animal('Dog') var dog = new Dog() dog.say() //'Dog says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true \u7f3a\u70b9\uff1a \u5b50\u7c7b\u5b9e\u4f8b\u521b\u5efa\uff0c\u4e0d\u80fd\u5411\u7236\u7c7b\u4f20\u9012\u53c2\u6570\u3002 \u6240\u6709\u5b50\u7c7b**\u5171\u4eab\u7236\u7c7b\u5b9e\u4f8b**\uff0c\u5982\u679c\u67d0\u4e00\u4e2a\u5b50\u7c7b\u4fee\u6539\u4e86\u7236\u7c7b\uff0c\u5176\u4ed6\u7684\u5b50\u7c7b\u5728\u7ee7\u627f\u7684\u65f6\u5019\uff0c\u4f1a\u9020\u6210\u610f\u60f3\u4e0d\u5230\u7684\u540e\u679c\u3002 \u4f8b\u5982\uff1a // ... dog.__proto__.name = 'HOT DOG'; var dog2 = new Dog() dog2.say() //HOT DOG says Hi! 5.2 \u6784\u9020\u51fd\u6570\u7ee7\u627f \u00b6 \u601d\u60f3\uff1a\u5229\u7528 call() \u65b9\u6cd5\u590d\u5236\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\u7ed9\u5b50\u7c7b\u3002\u53efcall\u591a\u4e2a\u7236\u7c7b\u5bf9\u8c61\uff0c\u5b9e\u73b0\u591a\u7ee7\u627f\u3002 function Dog(name){ Animal.call(this, name) } var dog = new Dog('Dog') console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //false console.log(dog.name) //'Dog' \u7f3a\u70b9\uff1a \u80fd\u7ee7\u627f\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c \u4e0d\u80fd\u7ee7\u627f\u539f\u578b\u5c5e\u6027/\u65b9\u6cd5 \u3002 \u4f8b\u5982\uff1a dog.say() //Error: dog.say is not a function 5.3 \u7ec4\u5408\u7ee7\u627f\uff08\u6784\u9020\u51fd\u6570+\u539f\u578b\u94fe\uff09 \u00b6 \u601d\u60f3\uff1a\u6784\u9020\u51fd\u6570\u5f25\u8865\u5f15\u7528\u5c5e\u6027\u5171\u4eab\u95ee\u9898\uff0c\u4fdd\u7559\u4f20\u53c2\u4f18\u70b9\uff1b\u7136\u540e\uff0c\u4e3a\u5b50\u7c7b\u539f\u578b\u6307\u5411\u7236\u7c7b\u5b9e\u4f8b\uff0c\u5b9e\u73b0\u51fd\u6570\u590d\u7528\u3002 function Dog(name){ Animal.call(this, name) } Dog.prototype = new Animal('Dog') var dog = new Dog('NEW DOG') dog.say() //'NEW DOG says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true 5.4 \u539f\u578b\u5f0f\u7ee7\u627f \u00b6 \u601d\u60f3\uff1a \u5229\u7528 Object.create() \u65b9\u6cd5\u3002 function Dog(){ Animal.apply(this, arguments) } Dog.prototype = Object.create(Animal.prototype); Dog.prototype.constructor = Dog; var dog = new Dog('Dog') console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true dog.say() //'Dog says Hi!' 5.5 ES6\u65b9\u5f0f\u7ee7\u627f \u00b6 //\u7236\u7c7b class Animal{ constructor(props){ this.name = props || 'Animal' } say(){ console.log(this.name+\" says Hi!\") } } //\u5b50\u7c7b class Dog extends Animal{ constructor(props){ super(props) } } var dog = new Dog('DOG') dog.say() //'DOG says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true 6. HTTP \u72b6\u6001\u7801 \u00b6 \u6d88\u606f 100\uff08continue\uff09\uff0c\u5ba2\u6237\u7aef\u5e94\u5f53\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u3002\u8fd9\u4e2a\u4e34\u65f6\u54cd\u5e94\u662f\u7528\u6765\u901a\u77e5\u5ba2\u6237\u7aef\u5b83\u7684\u90e8\u5206\u8bf7\u6c42\u5df2\u7ecf\u88ab\u670d\u52a1\u5668\u63a5\u6536 \u6210\u529f 200\uff08OK\uff09\uff0c\u8868\u793a\u8bf7\u6c42\u6210\u529f\uff0c\u8bf7\u6c42\u6240\u5e0c\u671b\u7684\u54cd\u5e94\u5934\u6216\u6570\u636e\u4f53\u5c06\u968f\u6b64\u54cd\u5e94\u8fd4\u56de\u3002 202\uff08Accepted\uff09\uff0c\u670d\u52a1\u5668\u5df2\u63a5\u53d7\u8bf7\u6c42\uff0c\u4f46\u5c1a\u672a\u5904\u7406\u3002 204\uff08No-Content\uff09\uff0c\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4f46\u4e0d\u9700\u8981\u8fd4\u56de\u4efb\u4f55\u5b9e\u4f53\u5185\u5bb9 205\uff08Reset-Content\uff09\uff0c\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4e14\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u5185\u5bb9\u3002\u4f46\u662f\u4e0e204\u54cd\u5e94\u4e0d\u540c\uff0c\u8fd4\u56de\u6b64\u72b6\u6001\u7801\u7684\u54cd\u5e94\u8981\u6c42\u8bf7\u6c42\u8005\u91cd\u7f6e\u6587\u6863\u89c6\u56fe\u3002\u8be5\u54cd\u5e94\u4e3b\u8981\u662f\u88ab\u7528\u4e8e\u63a5\u53d7\u7528\u6237\u8f93\u5165\u540e\uff0c\u7acb\u5373\u91cd\u7f6e\u8868\u5355\uff0c\u4ee5\u4fbf\u7528\u6237\u80fd\u591f\u8f7b\u677e\u5730\u5f00\u59cb\u53e6\u4e00\u6b21\u8f93\u5165\u3002 206\uff08Partial-Content\uff09\uff0c\u670d\u52a1\u5668\u5df2\u7ecf\u6210\u529f\u5904\u7406\u4e86\u90e8\u5206 GET \u8bf7\u6c42\u3002 \u91cd\u5b9a\u5411 301\uff08Moved-Permanently\uff09\uff0c\u6c38\u4e45\u6027\u91cd\u5b9a\u5411 302\uff08Moved-Temporarily\uff09\uff0c\u6682\u65f6\u6027\u91cd\u5b9a\u5411 304\uff08Not-Modified\uff09\uff0c\u6d4f\u89c8\u5668\u7aef\u7f13\u5b58\u7684\u8d44\u6e90\u4f9d\u7136\u6709\u6548 \u5ba2\u6237\u7aef\u8bf7\u6c42\u9519\u8bef 400\uff08Bad-Reques\uff09\uff0c\u8bf7\u6c42\u6709\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u65e0\u6cd5\u88ab\u670d\u52a1\u5668\u7406\u89e3\u3002 401\uff08Unauthorized\uff09\uff0c\u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1\u3002 403\uff08Forbidden\uff09\uff0c\u670d\u52a1\u5668\u5df2\u7ecf\u7406\u89e3\u8bf7\u6c42\uff0c\u4f46\u662f\u62d2\u7edd\u6267\u884c\u5b83\u3002 404\uff08Not-Found\uff09\uff0c\u8bf7\u6c42\u7684\u8d44\u6e90\u6ca1\u6709\u88ab\u627e\u5230 \u670d\u52a1\u5668\u9519\u8bef 500\uff08Interval Server Error\uff09\uff0c\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef 502\uff08Bad GateWay\uff09\uff0c\u7f51\u5173\u51fa\u9519 503\uff08Service Unavailable\uff09\uff0c\u7531\u4e8e\u4e34\u65f6\u7684\u670d\u52a1\u5668\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u670d\u52a1\u5668\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002 504\uff08Gateway Timeout\uff09\uff0c\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u5de5\u4f5c\u7684\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u672a\u80fd\u53ca\u65f6\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\uff08URI\u6807\u8bc6\u51fa\u7684\u670d\u52a1\u5668\uff0c\u4f8b\u5982HTTP\u3001FTP\u3001LDAP\uff09\u6216\u8005\u8f85\u52a9\u670d\u52a1\u5668\uff08\u4f8b\u5982DNS\uff09\u6536\u5230\u54cd\u5e94\u3002 7. Javascript \u4e4b\u51fd\u6570\u5f0f\u7f16\u7a0b \u00b6 \u5c3d\u53ef\u80fd\u5730\u4f7f\u7528\u7eaf\u51fd\u6570\u3002 \u51fd\u6570\u5f0f\u7f16\u7a0b\u6709\u5982\u4e0b\u4f18\u70b9\uff1a \u65e0\u8bba\u5e94\u7528\u72b6\u6001\u5982\u4f55\uff0c\u90fd\u80fd\u4fdd\u8bc1\u76f8\u540c\u7684\u7ed3\u679c; \u5e94\u7528\u72b6\u6001\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u524d\u548c\u4e4b\u540e\u4fdd\u6301\u4e0d\u53d8\u3002 const arr = [ { name: 'first', value: 12 }, { name: 'second', value: 7 }, { name: 'first', value: 20 } ] // \u666e\u901a\u7248 const res = {} for (let i = 0; i < arr.length; i++) { const calculatedValue = arr[i].value * 10 if (calculatedValue > 100) { res[arr[i].name] = calculatedValue } } // \u9ad8\u5bcc\u5e05\u7248 const res = arr .map(elem => ({ name: elem.name, calculatedValue: elem.value * 10 })) .filter(elem => elem.calculatedValue > 100) .reduce((acc, elem) => ({ [elem.name]: elem.calculatedValue, ...acc }), {}) 8. Javascript \u4e4b\u6241\u5e73\u5316\u7f16\u7a0b \u00b6 \u53e4\u8bed\u6709\u4e91\uff1a The flatter, the better. 8.1 \u5faa\u73af \u00b6 \u7528\u6241\u5e73\u7684\u94fe\u5f0f\u7ed3\u6784\u53bb\u63cf\u8ff0\u5faa\u73af\u8bed\u53e5\uff0cforEach\uff0cmap\uff0cfilter\uff0creduce \u548c slice \u7b49\u3002 function foo(arr) { for (let i = 1; i < arr.length; i++) { arr[i] *= 2 if (arr[i] % 2 === 0) { doSomething(arr[i]) } } } \u91cd\u6784\u5982\u4e0b\uff1a function foo(arr) { const evenNumbers = n => n % 2 === 0 arr .slice(1) .map(v => v * 2) .filter(evenNumbers) .forEach(v => doSomething(v)) } 8.2 if else \u8bed\u53e5 \u00b6 \u4f8b\u5b50\uff0c\u901a\u8fc7\u4e09\u6761\u89c4\u5219\u6765\u9a8c\u8bc1\u5bc6\u7801\u7684\u6709\u6548\u6027\u3002 import { passwordRegex as requiredChars } from 'regexes' import { getJson } from 'helpers' const validatePassword = async value => { if (value.length < 6) return false if (!requiredChars.test(value)) return false const forbidden = await getJson('/forbidden-passwords') if (forbidden.includes(value)) return false return value } validatePassword(someValue).then(persist) \u4e09\u6761\u9a8c\u8bc1\u8bed\u53ef\u7f6e\u4e8e 'validationRule' \u4e2d\uff0c\u91cd\u6784\u5982\u4e0b\uff1a import { minLength, matchesRegex, notBlacklisted } from 'validationRules' import { passwordRegex as requiredChars } from 'regexes' import { getJson } from 'helpers' const validatePassword = async value => { const result = Array.from(value) .filter(minLength(6)) .filter(matchesRegex(requiredChars)) .filter(await notBlacklisted('/forbidden-passwords')) .shift() if (result) return result throw new Error('something went wrong...') } validatePassword(someValue).then(persist) 8.3 \u4e8b\u4ef6 \u00b6 \u4e8b\u4ef6\u7684\u5904\u7406\u4e00\u5411\u96be\u4ee5\u6241\u5e73\u5316\u3002Promise \u5316\u53ef\u4ee5\u4fdd\u6301\u4e00\u79cd\u94fe\u5f0f\u7684\u3001\u6241\u5e73\u5316\u7684\u7f16\u7a0b\u98ce\u683c\uff0c\u4f46 Promise \u53ea\u80fd resolve \u4e00\u6b21\uff0c\u800c\u4e8b\u4ef6\u7edd\u5bf9\u4f1a\u591a\u6b21\u89e6\u53d1\u3002 import { apiCall } from 'helpers' class AutoComplete { constructor (options) { this._endpoint = options.endpoint this._threshold = options.threshold this._inputElement = options.inputElement this._containerElement = options.list this._inputElement.addEventListener('input', () => this._onInput()) } _onInput () { const value = this._inputElement.value if (value > this._options.threshold) { this._updateList(value) } } _updateList (value) { apiCall(this._endpoint, { value }) .then(items => this._render(items)) .then(html => this._containerElement = html) } _render (items) { let html = '' items.forEach(item => { html += `<a href=\"${ item.href }\">${ item.label }</a>` }) return html } } \u53ef\u4ee5\u501f\u9274\u4e00\u4e0b RxJS \u7684 observales\uff0c Observable \u53ef\u7b80\u5355\u7406\u89e3\u4e3a\u4e00\u4e2a\u80fd\u591f\u591a\u6b21 resolve \u7684 Promise\u3002\u5c06\u4e8b\u4ef6\u76d1\u542c\u5668\u8f6c\u6362\u6210 Observable\uff0c\u91cd\u6784\u5982\u4e0b\uff1a import { apiCall, listen } from 'helpers'; import { renderItems } from 'templates'; function AutoComplete ({ endpoint, threshold, input, container }) { listen(input, 'input') .map(e => e.target.value) .filter(value => value.length >= threshold) .forEach(value => apiCall(endpoint, { value })) .then(items => renderItems(items)) .then(html => container.innerHTML = html) } P.S. \u4ee5\u4e0a\u4f8b\u5b50\u7686\u6458\u81ea\u300a\u524d\u7aef\u65e9\u8bfb\u8bfe\u300b\uff0c\u7528\u4e8e\u53d1\u6563\u601d\u7ef4\u3002 9. \u539f\u578b\u548c\u5bf9\u8c61 \u00b6 function C() {} var obj = new C() \u7c7b\u662f\u7531\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u548c\u4e00\u4e2a\u5173\u8054\u7684\u539f\u578b\u7ec4\u6210\u7684\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002 9.1 \u7406\u89e3prototype\u3001getPrototypeOf \u548c _ proto_ \u00b6 C.prototype \u7528\u4e8e\u7531 new C() \u521b\u5efa\u7684\u5bf9\u8c61\u7684\u539f\u578b\u3002 Object.getPrototypeOf(obj) \u662fES5\u4e2d\u7528\u6765\u83b7\u53d6obj\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u7684\u6807\u51c6\u65b9\u6cd5\u3002 obj.__proto__ \u662f\u83b7\u53d6obj\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u7684\u975e\u6807\u51c6\u65b9\u6cd5\u3002 // \u5728\u6807\u51c6\u7684 ES5 \u91cc\uff0c \u68c0\u6d4b\u5bf9\u8c61\u7684\u539f\u578b Object.getPrototypeOf(obj) === C.prototype; // true // \u67d0\u4e9b\u73af\u5883\u4e2d\u7684\u975e\u6807\u51c6\u65b9\u6cd5 obj.__prototype === C.prototype; // true \u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c Object.getPrototypeOf() \u63d0\u53d6\u5bf9\u8c61\u539f\u578b\u90fd\u662f\u6709\u6548\u7684\uff0c\u800c __proto__ \u5c5e\u6027\u4f1a\u6c61\u67d3\u6240\u6709\u5bf9\u8c61\uff0c\u56e0\u6b64\u5c3d\u53ef\u80fd\u7981\u6b62 __proto__ \u7684\u4f7f\u7528\u3002 9.2 \u59cb\u7ec8\u4e0d\u8981\u4fee\u6539 _ proto_ \u5c5e\u6027 \u00b6 __proto__ \u5c5e\u6027\u5f88\u7279\u6b8a\uff0c\u5b83\u63d0\u4f9b Object.getPrototypeOf() \u65b9\u6cd5\u6240\u4e0d\u5177\u5907\u7684\u80fd\u529b\uff0c\u5373\u4fee\u6539\u5bf9\u8c61\u539f\u578b\u94fe\u63a5\u7684\u80fd\u529b\u3002 \u4fee\u6539 __proto__ \u5c5e\u6027\u7684\u5371\u5bb3\uff1a \u53ef\u79fb\u690d\u6027\u95ee\u9898\uff0c\u56e0\u4e3a\u5e76\u975e\u6240\u6709\u5e73\u53f0\u90fd\u652f\u6301\u6539\u53d8\u5bf9\u8c61\u539f\u578b\u7684\u7279\u6027\uff0c\u6240\u4ee5\u65e0\u6cd5\u7f16\u5199\u53ef\u79fb\u690d\u4ee3\u7801\u3002 \u4fee\u6539 __proto__ \u5c5e\u6027\u5b9e\u9645\u4e0a\u662f\u6539\u53d8\u4e86\u7ee7\u627f\u7ed3\u6784\u672c\u8eab\uff0c\u8fd9\u79cd\u64cd\u4f5c\u6781\u5177\u7834\u574f\u6027\u3002 \u4e3a\u4e86\u4fdd\u6301\u884c\u4e3a\u7684\u53ef\u9884\u6d4b\u6027\uff0c\u5e94\u8be5\u907f\u514d\u4fee\u6539 __proto__ \u5c5e\u6027\u3002 9.3 \u53ea\u5c06\u5b9e\u4f8b\u5bf9\u8c61\u5b58\u50a8\u4e8e\u5b9e\u4f8b\u5bf9\u8c61\u4e2d \u00b6 \u539f\u578b\u5bf9\u8c61\u4e0e\u5176\u5b9e\u4f8b\u4e4b\u95f4\u662f\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\u3002 \u4e00\u79cd\u9519\u8bef\u505a\u6cd5\u662f\u4e0d\u5c0f\u5fc3\u5c06\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u72b6\u6001\u5b58\u50a8\u5230\u4e86\u5176\u539f\u578b\u4e2d\u3002 \u4e3e\u4e2a\u6817\u5b50\uff1a function Tree(){} Tree.prototype = { children: [], // \u6b64\u5904\u5e94\u8be5\u4e3a\u5b9e\u4f8b\u72b6\u6001 addChild: function(x){ this.children.push(x); } } \u6784\u9020\u4e09\u68f5\u6811\uff1a // \u5de6\u5b50\u6811 var left = new Tree(); left.addChild(1); left.addChild(3); // \u53f3\u5b50\u6811 var right = new Tree(); right.addChild(1); right.addChild(3); // \u6839\u6811 var top = new Tree(); top.addChild(left); top.addChild(right); top.children; // [1, 3, 5, 7, left, right] \u4ee5\u4e0a\u7ed3\u679c\u663e\u7136\u975e\u6211\u4eec\u6240\u671f\u671b\uff0c\u660e\u663e\u4e09\u68f5\u6811\u5171\u7528\u4e86 Tree.prototype.children \u6570\u7ec4\u3002 \u6b63\u786e\u65b9\u5f0f\uff0c\u4e3a\u6bcf\u4e2a\u5b9e\u4f8b\u6700\u60f3\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684children\u6570\u7ec4\u3002 function Tree(){ this.children = [] // \u5b9e\u4f8b\u72b6\u6001 } Tree.prototype = { addChild: function(x){ this.children.push(x); } } \u8fd0\u884c\u76f8\u540c\u4f8b\u5b50\uff0c\u5f97\u5230\u671f\u671b\u7ed3\u679c\uff1a top.children; // [left, right] \u5bd3\u610f\uff1a \u5171\u4eab\u53ef\u53d8\u6570\u636e\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u56e0\u4e3a\u539f\u578b\u662f\u88ab\u6240\u6709\u7684\u5b9e\u4f8b\u5171\u4eab\u7684\u3002","title":"\u57fa\u7840\u77e5\u8bc6\u6742\u8bb0"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#1","text":"// question 1 for (var i = 0; i < 5; i++) { console.log(i); } // \u7acb\u5373 output: 0,1,2,3,4 // question 2 for (var i = 0; i < 5; i++) { setTimeout(function() { console.log(i); }, 1000 * i); } //\u5ef6\u8fdf output: 5,5,5,5,5 // question 3 for (var i = 0; i < 5; i++) { (function(i){ setTimeout(function() { console.log(i); }, 1000 * i); })(i) } //\u5ef6\u8fdf output: 0,1,2,3,4 // question 4 for (var i = 0; i < 5; i++) { (function() { setTimeout(function() { console.log(i); }, i * 1000); })(i); } //\u5ef6\u8fdf output: 5,5,5,5,5 // question 5 for (var i = 0; i < 5; i++) { setTimeout((function(i) { console.log(i); })(i), i * 1000); } //\u5ef6\u8fdf output: 5,5,5,5,5 \u2716\ufe0f //\u7acb\u5373 output: 0,1,2,3,4 \u2714\ufe0f \u89e3\u6790 \uff1a setTimeout \u4f20\u9012\u4e86\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u51fd\u6570\uff0c\u5373\u4e3aundefined\uff0c\u800c\u7acb\u5373\u6267\u884c\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u90a3\u4e48\u5e94\u8be5\u662f\u7acb\u9a6c\u8f93\u51fa\u7684\u3002 // question 6 setTimeout(function() { console.log(1); }, 0); new Promise(function executor(resolve) { console.log(2); for( var i=0 ; i<10000 ; i++ ) { i == 9999 && resolve(); } console.log(3); }).then(function() { console.log(4); }); console.log(5); //\u7acb\u5373output: 2, 3, 4, 5, 1 \u2716\ufe0f //\u7acb\u5373output: 2, 3, 5, 4, 1 \u2714\ufe0f \u89e3\u6790 \uff1aPromise \u7684 then \u5728\u5f53\u524d tick \u7684\u672b\u5c3e\u6267\u884c\uff0c\u56e0\u6b64\uff0c\u5f53\u524dtick\u5e94\u5f53\u5148\u8f93\u51fa 5\uff0c\u800c\u540e\u8f93\u51fa 4 \u3002 \u5230\u4e0b\u4e00\u4e2a tick\uff0c\u5c31\u662f 1 \u3002","title":"1. \u4e8b\u4ef6\u5faa\u73af\u673a\u5236"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#2-jsonp","text":"\u540c\u6e90\uff1a\u534f\u8bae\uff0cIP\uff0c\u7aef\u53e3\u4e09\u8005\u7686\u76f8\u540c\u8005\uff0c\u4e3a\u540c\u6e90\u3002\u4e0d\u540c\u6e90\u4e4b\u95f4\u4ea4\u4e92\u8005\u4e3a**\u8de8\u57df**\u3002 \u524d\u63d0\uff1a\u51e1\u662f\u62e5\u6709\u201csrc\u201d\u8fd9\u4e2a\u5c5e\u6027\u7684\u6807\u7b7e\u90fd\u62e5\u6709\u8de8\u57df\u7684\u80fd\u529b\uff0c\u5982 <script> \u3001 <img> \u3001 <iframe> \u3002 JSONP ( JSON with Padding )\uff0c\u4e00\u79cd\u975e\u6b63\u5f0f\u4f20\u8f93\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u7684\u4e00\u4e2a\u8981\u70b9\u5c31\u662f**\u5141\u8bb8\u7528\u6237\u4f20\u9012\u4e00\u4e2acallback\u53c2\u6570\u7ed9\u670d\u52a1\u7aef**\uff0c\u7136\u540e\u670d\u52a1\u7aef\u8fd4\u56de\u6570\u636e\u65f6\u4f1a\u5c06\u8fd9\u4e2acallback\u53c2\u6570\u4f5c\u4e3a\u51fd\u6570\u540d\u6765\u5305\u88f9\u4f4fJSON\u6570\u636e\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u968f\u610f\u5b9a\u5236\u81ea\u5df1\u7684\u51fd\u6570\u6765\u81ea\u52a8\u5904\u7406\u8fd4\u56de\u6570\u636e\u4e86\u3002","title":"2. \u8de8\u57df\u4e4b JSONP"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#3-storage","text":"cookie\uff1a \u6709\u8fc7\u671f\u65f6\u95f4\uff0c\u6700\u59274kb\uff1b localStorage\uff1a\u82e5\u4e0d\u624b\u52a8\u6e05\u9664\uff0c\u6c38\u4e0d\u6d88\u5931\uff0c\u53ef\u8fbe5M\u6216\u66f4\u5927\uff1b sessionStorage\uff1a\u5b58\u6d3b\u4e8e\u4e00\u4e2a\u4f1a\u8bdd\u671f\u95f4\uff0c\u6d4f\u89c8\u5668\u5173\u95ed\u5373\u6d88\u5931\uff0c\u53ef\u8fbe5M\u6216\u66f4\u5927\u3002","title":"3. \u5ba2\u6237\u7aef Storage"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#4","text":"\u89e3\u6790html\u4ee5\u6784\u5efadom\u6811 -> \u6784\u5efarender\u6811 -> \u5e03\u5c40render\u6811 -> \u7ed8\u5236render\u6811 \u6982\u5ff5\u89e3\u91ca\uff1a DOM Tree\uff1a\u6d4f\u89c8\u5668\u5c06HTML\u89e3\u6790\u6210\u6811\u5f62\u7684\u6570\u636e\u7ed3\u6784\u3002 CSS Rule Tree\uff1a\u6d4f\u89c8\u5668\u5c06CSS\u89e3\u6790\u6210\u6811\u5f62\u7684\u6570\u636e\u7ed3\u6784\u3002 Render Tree\uff1aDOM\u548cCSSOM\u5408\u5e76\u540e\u751f\u6210 Render Tree\u3002 Layout\uff1a\u6709\u4e86Render Tree\uff0c\u6d4f\u89c8\u5668\u5df2\u7ecf\u80fd\u77e5\u9053\u7f51\u9875\u4e2d\u6709\u54ea\u4e9b\u8282\u70b9\u3001\u5404\u4e2a\u8282\u70b9\u7684CSS\u5b9a\u4e49\u4ee5\u53ca\u4ed6\u4eec\u7684\u4ece\u5c5e\u5173\u7cfb\uff0c\u4ece\u800c\u53bb\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u8282\u70b9\u5728\u5c4f\u5e55\u4e2d\u7684\u4f4d\u7f6e\u3002 Painting\uff1a \u6309\u7167\u7b97\u51fa\u6765\u7684\u89c4\u5219\uff0c\u901a\u8fc7\u663e\u5361\uff0c\u628a\u5185\u5bb9\u753b\u5230\u5c4f\u5e55\u4e0a\u3002 Reflow\uff08\u56de\u6d41\uff09\uff1a\u5f53\u6d4f\u89c8\u5668\u53d1\u73b0\u67d0\u90e8\u5206\u53d1\u751f\u53d8\u5316\u5f71\u54cd\u5e03\u5c40\uff0c\u9700\u5012\u56de\u53bb\u91cd\u65b0\u6e32\u67d3\uff0c\u79f0\u4f5cReflow\u3002 Repaint\uff08\u91cd\u7ed8\uff09\uff1a\u6539\u53d8\u67d0\u5143\u7d20\u7684\u80cc\u666f\u8272\u3001\u6587\u5b57\u989c\u8272\u3001\u8fb9\u6846\u989c\u8272\u7b49\u4e0d\u5f71\u54cd\u5b83\u5468\u56f4\u6216\u5185\u90e8\u5e03\u5c40\u7684\u5c5e\u6027\u65f6\uff0c\u5c4f\u5e55\u7684\u4e00\u90e8\u5206\u8981\u91cd\u753b\uff0c\u4f46\u662f\u5143\u7d20\u7684\u51e0\u4f55\u5c3a\u5bf8\u6ca1\u6709\u53d8\u3002","title":"4. \u6d4f\u89c8\u5668\u6e32\u67d3"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#5-javascript","text":"","title":"5. Javascript \u7ee7\u627f"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#50","text":"function Animal(name) { this.name = name || 'Animal' } Animal.prototype.say = function(){ console.log(this.name+\" says Hi!\") }","title":"5.0 \u7236\u7c7b"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#51","text":"function Dog(){} Dog.prototype = new Animal('Dog') var dog = new Dog() dog.say() //'Dog says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true \u7f3a\u70b9\uff1a \u5b50\u7c7b\u5b9e\u4f8b\u521b\u5efa\uff0c\u4e0d\u80fd\u5411\u7236\u7c7b\u4f20\u9012\u53c2\u6570\u3002 \u6240\u6709\u5b50\u7c7b**\u5171\u4eab\u7236\u7c7b\u5b9e\u4f8b**\uff0c\u5982\u679c\u67d0\u4e00\u4e2a\u5b50\u7c7b\u4fee\u6539\u4e86\u7236\u7c7b\uff0c\u5176\u4ed6\u7684\u5b50\u7c7b\u5728\u7ee7\u627f\u7684\u65f6\u5019\uff0c\u4f1a\u9020\u6210\u610f\u60f3\u4e0d\u5230\u7684\u540e\u679c\u3002 \u4f8b\u5982\uff1a // ... dog.__proto__.name = 'HOT DOG'; var dog2 = new Dog() dog2.say() //HOT DOG says Hi!","title":"5.1 \u539f\u578b\u94fe\u7ee7\u627f"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#52","text":"\u601d\u60f3\uff1a\u5229\u7528 call() \u65b9\u6cd5\u590d\u5236\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\u7ed9\u5b50\u7c7b\u3002\u53efcall\u591a\u4e2a\u7236\u7c7b\u5bf9\u8c61\uff0c\u5b9e\u73b0\u591a\u7ee7\u627f\u3002 function Dog(name){ Animal.call(this, name) } var dog = new Dog('Dog') console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //false console.log(dog.name) //'Dog' \u7f3a\u70b9\uff1a \u80fd\u7ee7\u627f\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c \u4e0d\u80fd\u7ee7\u627f\u539f\u578b\u5c5e\u6027/\u65b9\u6cd5 \u3002 \u4f8b\u5982\uff1a dog.say() //Error: dog.say is not a function","title":"5.2 \u6784\u9020\u51fd\u6570\u7ee7\u627f"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#53","text":"\u601d\u60f3\uff1a\u6784\u9020\u51fd\u6570\u5f25\u8865\u5f15\u7528\u5c5e\u6027\u5171\u4eab\u95ee\u9898\uff0c\u4fdd\u7559\u4f20\u53c2\u4f18\u70b9\uff1b\u7136\u540e\uff0c\u4e3a\u5b50\u7c7b\u539f\u578b\u6307\u5411\u7236\u7c7b\u5b9e\u4f8b\uff0c\u5b9e\u73b0\u51fd\u6570\u590d\u7528\u3002 function Dog(name){ Animal.call(this, name) } Dog.prototype = new Animal('Dog') var dog = new Dog('NEW DOG') dog.say() //'NEW DOG says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true","title":"5.3 \u7ec4\u5408\u7ee7\u627f\uff08\u6784\u9020\u51fd\u6570+\u539f\u578b\u94fe\uff09"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#54","text":"\u601d\u60f3\uff1a \u5229\u7528 Object.create() \u65b9\u6cd5\u3002 function Dog(){ Animal.apply(this, arguments) } Dog.prototype = Object.create(Animal.prototype); Dog.prototype.constructor = Dog; var dog = new Dog('Dog') console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true dog.say() //'Dog says Hi!'","title":"5.4 \u539f\u578b\u5f0f\u7ee7\u627f"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#55-es6","text":"//\u7236\u7c7b class Animal{ constructor(props){ this.name = props || 'Animal' } say(){ console.log(this.name+\" says Hi!\") } } //\u5b50\u7c7b class Dog extends Animal{ constructor(props){ super(props) } } var dog = new Dog('DOG') dog.say() //'DOG says Hi!' console.log(dog instanceof Dog) //true console.log(dog instanceof Animal) //true","title":"5.5 ES6\u65b9\u5f0f\u7ee7\u627f"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#6-http","text":"\u6d88\u606f 100\uff08continue\uff09\uff0c\u5ba2\u6237\u7aef\u5e94\u5f53\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u3002\u8fd9\u4e2a\u4e34\u65f6\u54cd\u5e94\u662f\u7528\u6765\u901a\u77e5\u5ba2\u6237\u7aef\u5b83\u7684\u90e8\u5206\u8bf7\u6c42\u5df2\u7ecf\u88ab\u670d\u52a1\u5668\u63a5\u6536 \u6210\u529f 200\uff08OK\uff09\uff0c\u8868\u793a\u8bf7\u6c42\u6210\u529f\uff0c\u8bf7\u6c42\u6240\u5e0c\u671b\u7684\u54cd\u5e94\u5934\u6216\u6570\u636e\u4f53\u5c06\u968f\u6b64\u54cd\u5e94\u8fd4\u56de\u3002 202\uff08Accepted\uff09\uff0c\u670d\u52a1\u5668\u5df2\u63a5\u53d7\u8bf7\u6c42\uff0c\u4f46\u5c1a\u672a\u5904\u7406\u3002 204\uff08No-Content\uff09\uff0c\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4f46\u4e0d\u9700\u8981\u8fd4\u56de\u4efb\u4f55\u5b9e\u4f53\u5185\u5bb9 205\uff08Reset-Content\uff09\uff0c\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4e14\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u5185\u5bb9\u3002\u4f46\u662f\u4e0e204\u54cd\u5e94\u4e0d\u540c\uff0c\u8fd4\u56de\u6b64\u72b6\u6001\u7801\u7684\u54cd\u5e94\u8981\u6c42\u8bf7\u6c42\u8005\u91cd\u7f6e\u6587\u6863\u89c6\u56fe\u3002\u8be5\u54cd\u5e94\u4e3b\u8981\u662f\u88ab\u7528\u4e8e\u63a5\u53d7\u7528\u6237\u8f93\u5165\u540e\uff0c\u7acb\u5373\u91cd\u7f6e\u8868\u5355\uff0c\u4ee5\u4fbf\u7528\u6237\u80fd\u591f\u8f7b\u677e\u5730\u5f00\u59cb\u53e6\u4e00\u6b21\u8f93\u5165\u3002 206\uff08Partial-Content\uff09\uff0c\u670d\u52a1\u5668\u5df2\u7ecf\u6210\u529f\u5904\u7406\u4e86\u90e8\u5206 GET \u8bf7\u6c42\u3002 \u91cd\u5b9a\u5411 301\uff08Moved-Permanently\uff09\uff0c\u6c38\u4e45\u6027\u91cd\u5b9a\u5411 302\uff08Moved-Temporarily\uff09\uff0c\u6682\u65f6\u6027\u91cd\u5b9a\u5411 304\uff08Not-Modified\uff09\uff0c\u6d4f\u89c8\u5668\u7aef\u7f13\u5b58\u7684\u8d44\u6e90\u4f9d\u7136\u6709\u6548 \u5ba2\u6237\u7aef\u8bf7\u6c42\u9519\u8bef 400\uff08Bad-Reques\uff09\uff0c\u8bf7\u6c42\u6709\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u65e0\u6cd5\u88ab\u670d\u52a1\u5668\u7406\u89e3\u3002 401\uff08Unauthorized\uff09\uff0c\u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1\u3002 403\uff08Forbidden\uff09\uff0c\u670d\u52a1\u5668\u5df2\u7ecf\u7406\u89e3\u8bf7\u6c42\uff0c\u4f46\u662f\u62d2\u7edd\u6267\u884c\u5b83\u3002 404\uff08Not-Found\uff09\uff0c\u8bf7\u6c42\u7684\u8d44\u6e90\u6ca1\u6709\u88ab\u627e\u5230 \u670d\u52a1\u5668\u9519\u8bef 500\uff08Interval Server Error\uff09\uff0c\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef 502\uff08Bad GateWay\uff09\uff0c\u7f51\u5173\u51fa\u9519 503\uff08Service Unavailable\uff09\uff0c\u7531\u4e8e\u4e34\u65f6\u7684\u670d\u52a1\u5668\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u670d\u52a1\u5668\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002 504\uff08Gateway Timeout\uff09\uff0c\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u5de5\u4f5c\u7684\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u672a\u80fd\u53ca\u65f6\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\uff08URI\u6807\u8bc6\u51fa\u7684\u670d\u52a1\u5668\uff0c\u4f8b\u5982HTTP\u3001FTP\u3001LDAP\uff09\u6216\u8005\u8f85\u52a9\u670d\u52a1\u5668\uff08\u4f8b\u5982DNS\uff09\u6536\u5230\u54cd\u5e94\u3002","title":"6. HTTP \u72b6\u6001\u7801"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#7-javascript","text":"\u5c3d\u53ef\u80fd\u5730\u4f7f\u7528\u7eaf\u51fd\u6570\u3002 \u51fd\u6570\u5f0f\u7f16\u7a0b\u6709\u5982\u4e0b\u4f18\u70b9\uff1a \u65e0\u8bba\u5e94\u7528\u72b6\u6001\u5982\u4f55\uff0c\u90fd\u80fd\u4fdd\u8bc1\u76f8\u540c\u7684\u7ed3\u679c; \u5e94\u7528\u72b6\u6001\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u524d\u548c\u4e4b\u540e\u4fdd\u6301\u4e0d\u53d8\u3002 const arr = [ { name: 'first', value: 12 }, { name: 'second', value: 7 }, { name: 'first', value: 20 } ] // \u666e\u901a\u7248 const res = {} for (let i = 0; i < arr.length; i++) { const calculatedValue = arr[i].value * 10 if (calculatedValue > 100) { res[arr[i].name] = calculatedValue } } // \u9ad8\u5bcc\u5e05\u7248 const res = arr .map(elem => ({ name: elem.name, calculatedValue: elem.value * 10 })) .filter(elem => elem.calculatedValue > 100) .reduce((acc, elem) => ({ [elem.name]: elem.calculatedValue, ...acc }), {})","title":"7. Javascript \u4e4b\u51fd\u6570\u5f0f\u7f16\u7a0b"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#8-javascript","text":"\u53e4\u8bed\u6709\u4e91\uff1a The flatter, the better.","title":"8. Javascript \u4e4b\u6241\u5e73\u5316\u7f16\u7a0b"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#81","text":"\u7528\u6241\u5e73\u7684\u94fe\u5f0f\u7ed3\u6784\u53bb\u63cf\u8ff0\u5faa\u73af\u8bed\u53e5\uff0cforEach\uff0cmap\uff0cfilter\uff0creduce \u548c slice \u7b49\u3002 function foo(arr) { for (let i = 1; i < arr.length; i++) { arr[i] *= 2 if (arr[i] % 2 === 0) { doSomething(arr[i]) } } } \u91cd\u6784\u5982\u4e0b\uff1a function foo(arr) { const evenNumbers = n => n % 2 === 0 arr .slice(1) .map(v => v * 2) .filter(evenNumbers) .forEach(v => doSomething(v)) }","title":"8.1 \u5faa\u73af"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#82-if-else","text":"\u4f8b\u5b50\uff0c\u901a\u8fc7\u4e09\u6761\u89c4\u5219\u6765\u9a8c\u8bc1\u5bc6\u7801\u7684\u6709\u6548\u6027\u3002 import { passwordRegex as requiredChars } from 'regexes' import { getJson } from 'helpers' const validatePassword = async value => { if (value.length < 6) return false if (!requiredChars.test(value)) return false const forbidden = await getJson('/forbidden-passwords') if (forbidden.includes(value)) return false return value } validatePassword(someValue).then(persist) \u4e09\u6761\u9a8c\u8bc1\u8bed\u53ef\u7f6e\u4e8e 'validationRule' \u4e2d\uff0c\u91cd\u6784\u5982\u4e0b\uff1a import { minLength, matchesRegex, notBlacklisted } from 'validationRules' import { passwordRegex as requiredChars } from 'regexes' import { getJson } from 'helpers' const validatePassword = async value => { const result = Array.from(value) .filter(minLength(6)) .filter(matchesRegex(requiredChars)) .filter(await notBlacklisted('/forbidden-passwords')) .shift() if (result) return result throw new Error('something went wrong...') } validatePassword(someValue).then(persist)","title":"8.2 if else \u8bed\u53e5"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#83","text":"\u4e8b\u4ef6\u7684\u5904\u7406\u4e00\u5411\u96be\u4ee5\u6241\u5e73\u5316\u3002Promise \u5316\u53ef\u4ee5\u4fdd\u6301\u4e00\u79cd\u94fe\u5f0f\u7684\u3001\u6241\u5e73\u5316\u7684\u7f16\u7a0b\u98ce\u683c\uff0c\u4f46 Promise \u53ea\u80fd resolve \u4e00\u6b21\uff0c\u800c\u4e8b\u4ef6\u7edd\u5bf9\u4f1a\u591a\u6b21\u89e6\u53d1\u3002 import { apiCall } from 'helpers' class AutoComplete { constructor (options) { this._endpoint = options.endpoint this._threshold = options.threshold this._inputElement = options.inputElement this._containerElement = options.list this._inputElement.addEventListener('input', () => this._onInput()) } _onInput () { const value = this._inputElement.value if (value > this._options.threshold) { this._updateList(value) } } _updateList (value) { apiCall(this._endpoint, { value }) .then(items => this._render(items)) .then(html => this._containerElement = html) } _render (items) { let html = '' items.forEach(item => { html += `<a href=\"${ item.href }\">${ item.label }</a>` }) return html } } \u53ef\u4ee5\u501f\u9274\u4e00\u4e0b RxJS \u7684 observales\uff0c Observable \u53ef\u7b80\u5355\u7406\u89e3\u4e3a\u4e00\u4e2a\u80fd\u591f\u591a\u6b21 resolve \u7684 Promise\u3002\u5c06\u4e8b\u4ef6\u76d1\u542c\u5668\u8f6c\u6362\u6210 Observable\uff0c\u91cd\u6784\u5982\u4e0b\uff1a import { apiCall, listen } from 'helpers'; import { renderItems } from 'templates'; function AutoComplete ({ endpoint, threshold, input, container }) { listen(input, 'input') .map(e => e.target.value) .filter(value => value.length >= threshold) .forEach(value => apiCall(endpoint, { value })) .then(items => renderItems(items)) .then(html => container.innerHTML = html) } P.S. \u4ee5\u4e0a\u4f8b\u5b50\u7686\u6458\u81ea\u300a\u524d\u7aef\u65e9\u8bfb\u8bfe\u300b\uff0c\u7528\u4e8e\u53d1\u6563\u601d\u7ef4\u3002","title":"8.3 \u4e8b\u4ef6"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#9","text":"function C() {} var obj = new C() \u7c7b\u662f\u7531\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u548c\u4e00\u4e2a\u5173\u8054\u7684\u539f\u578b\u7ec4\u6210\u7684\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002","title":"9. \u539f\u578b\u548c\u5bf9\u8c61"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#91-prototypegetprototypeof-_proto_","text":"C.prototype \u7528\u4e8e\u7531 new C() \u521b\u5efa\u7684\u5bf9\u8c61\u7684\u539f\u578b\u3002 Object.getPrototypeOf(obj) \u662fES5\u4e2d\u7528\u6765\u83b7\u53d6obj\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u7684\u6807\u51c6\u65b9\u6cd5\u3002 obj.__proto__ \u662f\u83b7\u53d6obj\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u7684\u975e\u6807\u51c6\u65b9\u6cd5\u3002 // \u5728\u6807\u51c6\u7684 ES5 \u91cc\uff0c \u68c0\u6d4b\u5bf9\u8c61\u7684\u539f\u578b Object.getPrototypeOf(obj) === C.prototype; // true // \u67d0\u4e9b\u73af\u5883\u4e2d\u7684\u975e\u6807\u51c6\u65b9\u6cd5 obj.__prototype === C.prototype; // true \u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c Object.getPrototypeOf() \u63d0\u53d6\u5bf9\u8c61\u539f\u578b\u90fd\u662f\u6709\u6548\u7684\uff0c\u800c __proto__ \u5c5e\u6027\u4f1a\u6c61\u67d3\u6240\u6709\u5bf9\u8c61\uff0c\u56e0\u6b64\u5c3d\u53ef\u80fd\u7981\u6b62 __proto__ \u7684\u4f7f\u7528\u3002","title":"9.1 \u7406\u89e3prototype\u3001getPrototypeOf \u548c _proto_"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#92-_proto_","text":"__proto__ \u5c5e\u6027\u5f88\u7279\u6b8a\uff0c\u5b83\u63d0\u4f9b Object.getPrototypeOf() \u65b9\u6cd5\u6240\u4e0d\u5177\u5907\u7684\u80fd\u529b\uff0c\u5373\u4fee\u6539\u5bf9\u8c61\u539f\u578b\u94fe\u63a5\u7684\u80fd\u529b\u3002 \u4fee\u6539 __proto__ \u5c5e\u6027\u7684\u5371\u5bb3\uff1a \u53ef\u79fb\u690d\u6027\u95ee\u9898\uff0c\u56e0\u4e3a\u5e76\u975e\u6240\u6709\u5e73\u53f0\u90fd\u652f\u6301\u6539\u53d8\u5bf9\u8c61\u539f\u578b\u7684\u7279\u6027\uff0c\u6240\u4ee5\u65e0\u6cd5\u7f16\u5199\u53ef\u79fb\u690d\u4ee3\u7801\u3002 \u4fee\u6539 __proto__ \u5c5e\u6027\u5b9e\u9645\u4e0a\u662f\u6539\u53d8\u4e86\u7ee7\u627f\u7ed3\u6784\u672c\u8eab\uff0c\u8fd9\u79cd\u64cd\u4f5c\u6781\u5177\u7834\u574f\u6027\u3002 \u4e3a\u4e86\u4fdd\u6301\u884c\u4e3a\u7684\u53ef\u9884\u6d4b\u6027\uff0c\u5e94\u8be5\u907f\u514d\u4fee\u6539 __proto__ \u5c5e\u6027\u3002","title":"9.2 \u59cb\u7ec8\u4e0d\u8981\u4fee\u6539 _proto_ \u5c5e\u6027"},{"location":"history/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#93","text":"\u539f\u578b\u5bf9\u8c61\u4e0e\u5176\u5b9e\u4f8b\u4e4b\u95f4\u662f\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\u3002 \u4e00\u79cd\u9519\u8bef\u505a\u6cd5\u662f\u4e0d\u5c0f\u5fc3\u5c06\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u72b6\u6001\u5b58\u50a8\u5230\u4e86\u5176\u539f\u578b\u4e2d\u3002 \u4e3e\u4e2a\u6817\u5b50\uff1a function Tree(){} Tree.prototype = { children: [], // \u6b64\u5904\u5e94\u8be5\u4e3a\u5b9e\u4f8b\u72b6\u6001 addChild: function(x){ this.children.push(x); } } \u6784\u9020\u4e09\u68f5\u6811\uff1a // \u5de6\u5b50\u6811 var left = new Tree(); left.addChild(1); left.addChild(3); // \u53f3\u5b50\u6811 var right = new Tree(); right.addChild(1); right.addChild(3); // \u6839\u6811 var top = new Tree(); top.addChild(left); top.addChild(right); top.children; // [1, 3, 5, 7, left, right] \u4ee5\u4e0a\u7ed3\u679c\u663e\u7136\u975e\u6211\u4eec\u6240\u671f\u671b\uff0c\u660e\u663e\u4e09\u68f5\u6811\u5171\u7528\u4e86 Tree.prototype.children \u6570\u7ec4\u3002 \u6b63\u786e\u65b9\u5f0f\uff0c\u4e3a\u6bcf\u4e2a\u5b9e\u4f8b\u6700\u60f3\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684children\u6570\u7ec4\u3002 function Tree(){ this.children = [] // \u5b9e\u4f8b\u72b6\u6001 } Tree.prototype = { addChild: function(x){ this.children.push(x); } } \u8fd0\u884c\u76f8\u540c\u4f8b\u5b50\uff0c\u5f97\u5230\u671f\u671b\u7ed3\u679c\uff1a top.children; // [left, right] \u5bd3\u610f\uff1a \u5171\u4eab\u53ef\u53d8\u6570\u636e\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u56e0\u4e3a\u539f\u578b\u662f\u88ab\u6240\u6709\u7684\u5b9e\u4f8b\u5171\u4eab\u7684\u3002","title":"9.3 \u53ea\u5c06\u5b9e\u4f8b\u5bf9\u8c61\u5b58\u50a8\u4e8e\u5b9e\u4f8b\u5bf9\u8c61\u4e2d"},{"location":"kubernetes/etcd%20deploy/","text":"ETCD \u90e8\u7f72 \u3010\u65e0\u8bc1\u4e66\u3011 \u00b6 \u5b89\u88c5 $ yum install -y etcd \u914d\u7f6e $ vi /etc/etcd/etcd.conf # 1. etcd.conf [on centos-master-01] #[Member] ETCD_NAME=\"etcd1\" #ETCD_NAME=\"etcd2\" ETCD_HOST=\"192.168.10.101\" #ETCD_HOST=\"192.168.10.102\" ETCD_DATA_DIR=\"/var/lib/etcd/default.etcd\" # #[Clustering] ETCD_INITIAL_CLUSTER=\"etcd1=https://192.168.10.101:2380,etcd2=https://192.168.10.102:2380\" ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\" ETCD_INITIAL_CLUSTER_STATE=\"existing\" # #[Proxy] #ETCD_PROXY=\"off\" # #[Security] ETCD_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" ETCD_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" ETCD_PEER_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_PEER_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" ETCD_PEER_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" # #[Logging] #ETCD_DEBUG=\"false\" # #[Unsafe] #ETCD_FORCE_NEW_CLUSTER=\"false\" # #[Version] #ETCD_VERSION=\"false\" # #[Profiling] #ETCD_ENABLE_PPROF=\"false\" # #[Auth] #ETCD_AUTH_TOKEN=\"simple\" \u542f\u52a8 $ systemctl daemon-reload $ systemctl start etcd $ systemctl status etcd \u68c0\u67e5 $ etcdctl -version $ export ETCDCTL_API=3 $ etcdctl member list ETCD \u6dfb\u52a0\u8bc1\u4e66 \u00b6 $ cfssl print-defaults config > ca-config.json $ cfssl print-defaults csr > ca-csr.json cat > ca-config.json <<EOF { \"signing\": { \"default\": { \"expiry\": \"87600h\" }, \"profiles\": { \"www\": { \"expiry\": \"8760h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\" ] }, \"client\": { \"expiry\": \"8760h\", \"usages\": [ \"signing\", \"key encipherment\", \"client auth\" ] }, \"etcd\": { \"expiry\": \"87600h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\", \"client auth\" ] } } } } EOF cat > ca-csr.json <<EOF { \"CN\": \"etcd\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"BeiJing\", \"L\": \"BeiJing\", \"O\": \"k8s\", \"OU\": \"System\" } ], \"ca\": { \"expiry\": \"87600h\" } } EOF $ cfssl gencert -initca ca-csr.json | cfssljson -bare ca cat > etcd-csr.json <<EOF { \"CN\": \"etcd\", \"hosts\": [ \"localhost\", \"127.0.0.1\", \"192.168.10.101\", \"192.168.10.102\", \"centos-master-01\", \"centos-master-02\" ], \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"BeiJing\", \"L\": \"BeiJing\", \"O\": \"k8s\", \"OU\": \"System\" } ] } EOF $ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=etcd etcd-csr.json | cfssljson -bare etcd $ vi /usr/lib/systemd/system/etcd.service ExecStart=/usr/bin/etcd --data-dir=${ETCD_DATA_DIR} --name ${ETCD_NAME} \\ --initial-advertise-peer-urls https://${ETCD_HOST}:2380 --listen-peer-urls https://${ETCD_HOST}:2380 \\ --advertise-client-urls https://${ETCD_HOST}:2379 --listen-client-urls https://${ETCD_HOST}:2379,https://localhost:2379 \\ --initial-cluster ${ETCD_INITIAL_CLUSTER} \\ --initial-cluster-state ${ETCD_INITIAL_CLUSTER_STATE} --initial-cluster-token ${ETCD_INITIAL_CLUSTER_TOKEN} \\ --client-cert-auth \\ --ca-file=${ETCD_TRUSTED_CA_FILE} \\ --trusted-ca-file=${ETCD_TRUSTED_CA_FILE} \\ --cert-file=${ETCD_CERT_FILE} \\ --key-file=${ETCD_KEY_FILE} \\ --peer-client-cert-auth \\ --peer-trusted-ca-file=${ETCD_PEER_TRUSTED_CA_FILE} \\ --peer-cert-file=${ETCD_PEER_CERT_FILE} \\ --peer-key-file=${ETCD_PEER_KEY_FILE} $ vi /etc/etcd/etcd.conf #[Security] ETCD_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" #ETCD_CLIENT_CERT_AUTH=\"false\" ETCD_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" #ETCD_AUTO_TLS=\"false\" ETCD_PEER_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_PEER_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" #ETCD_PEER_CLIENT_CERT_AUTH=\"false\" ETCD_PEER_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" #ETCD_PEER_AUTO_TLS=\"false\" $ export ETCDCTL_API=3 $ etcdctl \\ --cacert=/etc/kubernetes/pki/etcd/ca.pem \\ --cert=/etc/kubernetes/pki/etcd/etcd.pem \\ --key=/etc/kubernetes/pki/etcd/etcd-key.pem \\ --write-out=table \\ member list Troubleshooting # start request repeated too quickly for etcd.service $ systemctl reset-failed etcd.service $ systemctl stop etcd.service $ journalctl -xe | grep etcd","title":"Etcd"},{"location":"kubernetes/etcd%20deploy/#etcd","text":"\u5b89\u88c5 $ yum install -y etcd \u914d\u7f6e $ vi /etc/etcd/etcd.conf # 1. etcd.conf [on centos-master-01] #[Member] ETCD_NAME=\"etcd1\" #ETCD_NAME=\"etcd2\" ETCD_HOST=\"192.168.10.101\" #ETCD_HOST=\"192.168.10.102\" ETCD_DATA_DIR=\"/var/lib/etcd/default.etcd\" # #[Clustering] ETCD_INITIAL_CLUSTER=\"etcd1=https://192.168.10.101:2380,etcd2=https://192.168.10.102:2380\" ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\" ETCD_INITIAL_CLUSTER_STATE=\"existing\" # #[Proxy] #ETCD_PROXY=\"off\" # #[Security] ETCD_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" ETCD_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" ETCD_PEER_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_PEER_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" ETCD_PEER_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" # #[Logging] #ETCD_DEBUG=\"false\" # #[Unsafe] #ETCD_FORCE_NEW_CLUSTER=\"false\" # #[Version] #ETCD_VERSION=\"false\" # #[Profiling] #ETCD_ENABLE_PPROF=\"false\" # #[Auth] #ETCD_AUTH_TOKEN=\"simple\" \u542f\u52a8 $ systemctl daemon-reload $ systemctl start etcd $ systemctl status etcd \u68c0\u67e5 $ etcdctl -version $ export ETCDCTL_API=3 $ etcdctl member list","title":"ETCD  \u90e8\u7f72 \u3010\u65e0\u8bc1\u4e66\u3011"},{"location":"kubernetes/etcd%20deploy/#etcd_1","text":"$ cfssl print-defaults config > ca-config.json $ cfssl print-defaults csr > ca-csr.json cat > ca-config.json <<EOF { \"signing\": { \"default\": { \"expiry\": \"87600h\" }, \"profiles\": { \"www\": { \"expiry\": \"8760h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\" ] }, \"client\": { \"expiry\": \"8760h\", \"usages\": [ \"signing\", \"key encipherment\", \"client auth\" ] }, \"etcd\": { \"expiry\": \"87600h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\", \"client auth\" ] } } } } EOF cat > ca-csr.json <<EOF { \"CN\": \"etcd\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"BeiJing\", \"L\": \"BeiJing\", \"O\": \"k8s\", \"OU\": \"System\" } ], \"ca\": { \"expiry\": \"87600h\" } } EOF $ cfssl gencert -initca ca-csr.json | cfssljson -bare ca cat > etcd-csr.json <<EOF { \"CN\": \"etcd\", \"hosts\": [ \"localhost\", \"127.0.0.1\", \"192.168.10.101\", \"192.168.10.102\", \"centos-master-01\", \"centos-master-02\" ], \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"BeiJing\", \"L\": \"BeiJing\", \"O\": \"k8s\", \"OU\": \"System\" } ] } EOF $ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=etcd etcd-csr.json | cfssljson -bare etcd $ vi /usr/lib/systemd/system/etcd.service ExecStart=/usr/bin/etcd --data-dir=${ETCD_DATA_DIR} --name ${ETCD_NAME} \\ --initial-advertise-peer-urls https://${ETCD_HOST}:2380 --listen-peer-urls https://${ETCD_HOST}:2380 \\ --advertise-client-urls https://${ETCD_HOST}:2379 --listen-client-urls https://${ETCD_HOST}:2379,https://localhost:2379 \\ --initial-cluster ${ETCD_INITIAL_CLUSTER} \\ --initial-cluster-state ${ETCD_INITIAL_CLUSTER_STATE} --initial-cluster-token ${ETCD_INITIAL_CLUSTER_TOKEN} \\ --client-cert-auth \\ --ca-file=${ETCD_TRUSTED_CA_FILE} \\ --trusted-ca-file=${ETCD_TRUSTED_CA_FILE} \\ --cert-file=${ETCD_CERT_FILE} \\ --key-file=${ETCD_KEY_FILE} \\ --peer-client-cert-auth \\ --peer-trusted-ca-file=${ETCD_PEER_TRUSTED_CA_FILE} \\ --peer-cert-file=${ETCD_PEER_CERT_FILE} \\ --peer-key-file=${ETCD_PEER_KEY_FILE} $ vi /etc/etcd/etcd.conf #[Security] ETCD_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" #ETCD_CLIENT_CERT_AUTH=\"false\" ETCD_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" #ETCD_AUTO_TLS=\"false\" ETCD_PEER_CERT_FILE=\"/etc/kubernetes/pki/etcd/etcd.pem\" ETCD_PEER_KEY_FILE=\"/etc/kubernetes/pki/etcd/etcd-key.pem\" #ETCD_PEER_CLIENT_CERT_AUTH=\"false\" ETCD_PEER_TRUSTED_CA_FILE=\"/etc/kubernetes/pki/etcd/ca.pem\" #ETCD_PEER_AUTO_TLS=\"false\" $ export ETCDCTL_API=3 $ etcdctl \\ --cacert=/etc/kubernetes/pki/etcd/ca.pem \\ --cert=/etc/kubernetes/pki/etcd/etcd.pem \\ --key=/etc/kubernetes/pki/etcd/etcd-key.pem \\ --write-out=table \\ member list Troubleshooting # start request repeated too quickly for etcd.service $ systemctl reset-failed etcd.service $ systemctl stop etcd.service $ journalctl -xe | grep etcd","title":"ETCD  \u6dfb\u52a0\u8bc1\u4e66"},{"location":"kubernetes/init-master-for-calico.sh/","text":"init-master.sh #!/bin/bash # \u53ea\u5728 master \u8282\u70b9\u6267\u884c # \u66ff\u6362 x.x.x.x \u4e3a master \u8282\u70b9\u5b9e\u9645 IP\uff08\u8bf7\u4f7f\u7528\u5185\u7f51 IP\uff09 # export \u547d\u4ee4\u53ea\u5728\u5f53\u524d shell \u4f1a\u8bdd\u4e2d\u6709\u6548\uff0c\u5f00\u542f\u65b0\u7684 shell \u7a97\u53e3\u540e\uff0c\u5982\u679c\u8981\u7ee7\u7eed\u5b89\u88c5\u8fc7\u7a0b\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\u6b64\u5904\u7684 export \u547d\u4ee4 export MASTER_IP=192.168.10.101 # \u66ff\u6362 apiserver.demo \u4e3a \u60a8\u60f3\u8981\u7684 dnsName # export APISERVER_NAME=apiserver.demo export APISERVER_NAME=192.168.10.100 # Kubernetes \u5bb9\u5668\u7ec4\u6240\u5728\u7684\u7f51\u6bb5\uff0c\u8be5\u7f51\u6bb5\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7531 kubernetes \u521b\u5efa\uff0c\u4e8b\u5148\u5e76\u4e0d\u5b58\u5728\u4e8e\u60a8\u7684\u7269\u7406\u7f51\u7edc\u4e2d # export POD_SUBNET=10.100.0.1/16 # for calico export POD_SUBNET=10.244.0.0/16 # for flannel echo \"${MASTER_IP} ${APISERVER_NAME}\" >> /etc/hosts curl -sSL https://kuboard.cn/install-script/v1.17.x/init_master.sh | sh -s 1.17.2 ## --- ## # \u811a\u672c\u51fa\u9519\u65f6\u7ec8\u6b62\u6267\u884c set -e if [ ${#POD_SUBNET} -eq 0 ] || [ ${#APISERVER_NAME} -eq 0 ]; then echo -e \"\\033[31;1m\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u8bbe\u7f6e\u4e86\u73af\u5883\u53d8\u91cf POD_SUBNET \u548c APISERVER_NAME \\033[0m\" echo \u5f53\u524dPOD_SUBNET=$POD_SUBNET echo \u5f53\u524dAPISERVER_NAME=$APISERVER_NAME exit 1 fi # \u67e5\u770b\u5b8c\u6574\u914d\u7f6e\u9009\u9879 https://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2 rm -f ./kubeadm-config.yaml cat <<EOF > ./kubeadm-config.yaml apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration localAPIEndpoint: advertiseAddress: \"${APISERVER_NAME}\" bindPort: 6443 nodeRegistration: taints: - effect: PreferNoSchedule key: node-role.kubernetes.io/master --- apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v1.17.2 imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers controlPlaneEndpoint: \"${APISERVER_NAME}:6443\" networking: serviceSubnet: \"10.97.0.0/16\" podSubnet: \"${POD_SUBNET}\" dnsDomain: \"cluster.local\" apiServer: certSANs: - 192.168.10.100 - 192.168.10.101 - 192.168.10.102 - 192.168.10.121 - 192.168.10.122 etcd: external: endpoints: - https://192.168.10.101:2379 - https://192.168.10.102:2379 caFile: /etc/kubernetes/pki/etcd/ca.pem certFile: /etc/kubernetes/pki/etcd/etcd.pem keyFile: /etc/kubernetes/pki/etcd/etcd-key.pem EOF # kubeadm init # \u6839\u636e\u60a8\u670d\u52a1\u5668\u7f51\u901f\u7684\u60c5\u51b5\uff0c\u60a8\u9700\u8981\u7b49\u5019 3 - 10 \u5206\u949f kubeadm init --config=kubeadm-config.yaml --upload-certs # \u914d\u7f6e kubectl rm -rf /root/.kube/ mkdir /root/.kube/ cp -i /etc/kubernetes/admin.conf /root/.kube/config # \u5b89\u88c5 calico \u7f51\u7edc\u63d2\u4ef6 # \u53c2\u8003\u6587\u6863 https://docs.projectcalico.org/v3.10/getting-started/kubernetes/ echo \"\u5b89\u88c5calico-3.10.2\" rm -f calico-3.10.2.yaml wget https://kuboard.cn/install-script/calico/calico-3.10.2.yaml sed -i \"s#192\\.168\\.0\\.0/16#${POD_SUBNET}#\" calico-3.10.2.yaml kubectl apply -f calico-3.10.2.yaml","title":"Calico"},{"location":"kubernetes/kube-addons/","text":"Helm \u00b6 # \u5b89\u88c5 $ curl -L https://git.io/get_helm.sh | bash # \u521b\u5efa\u670d\u52a1\u8d26\u53f7\u548c\u89d2\u8272\u7ed1\u5b9a $ cat <<EOF > ./rbac-config.yaml apiVersion: v1 kind: ServiceAccount metadata: name: tiller namespace: kube-system --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: tiller roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: tiller namespace: kube-system EOF $ kubectl create -f rbac-config.yaml # helm Chart \u4ed3\u5e93\u6539\u6210\u963f\u91cc\u4e91 Chart \u955c\u50cf\u4ed3\u5e93 $ helm repo remove stable $ helm repo add stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts # helm init \u521d\u59cb\u5316 $ helm init --service-account tiller -i registry.aliyuncs.com/google_containers/tiller:v2.14.3 # \u5b89\u88c5 $ helm init --upgrade -i registry.cn-hangzhou.aliyuncs.com/google_containers/tiller:v2.19.1 # \u5347\u7ea7\u7248\u672c # \u67e5\u770b\u5b89\u88c5\u6210\u529f $ helm version \u5176\u4ed6\u547d\u4ee4 $ helm repo add stable http://mirror.azure.cn/kubernetes/charts $ helm repo update $ helm repo list Ingress-nginx \u00b6 https://raw.githubusercontent.com/helm/charts/master/stable/nginx-ingress/values.yaml $ vi ingress-nginx-values.yaml \u4fee\u6539\uff1a # kind: Deployment => kind: DaemonSet # hostNetwork: false => hostNetwork: true # dnsPolicy: ClusterFirst => dnsPolicy: ClusterFirstWithHostNet # type: LoadBalancer => type: ClusterIP # \u5b89\u88c5 $ helm install stable/nginx-ingress --name nginx-ingress -f ingress-nginx-values.yaml --namespace ingress-nginx # \u62c9\u53d6\u955c\u50cf\u5931\u8d25 error\uff1a \u624b\u52a8\u62c9\u53d6 # \u5220\u9664 $ helm ls --all nginx-ingress $ helm del --purge nginx-ingress # \u9a8c\u8bc1\u90e8\u7f72\u6210\u529f $ curl http://192.168.10.100:80 (\u96c6\u7fa4\u5185\u4efb\u610fip) default backend - 404 Kubernetes dashboard \u00b6 # \u90e8\u7f72 $ kubectl apply -f kube-dashboard.yaml $ kubectl apply -f kube-dashboard-auth.yaml # \u9a8c\u8bc1\u90e8\u7f72\u6210\u529f(on master-01) $ kubectl proxy $ curl http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ # \u83b7\u53d6Bearer Token $ kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}') Ingress \u8bbf\u95ee kubernetes dashboard\uff08 HTTPS \u8bbf\u95ee\uff09 # \u751f\u6210\u81ea\u7b7e\u540d\u8bc1\u4e66 $ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout kube-dashboard.key -out kube-dashboard.crt -subj \"/CN=dashboard.kube.com/O=dashboard.kube.com\" # \u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\u521b\u5efa k8s Secret \u8d44\u6e90\uff0c\u4f9b Ingress \u5f15\u7528 $ kubectl create secret tls kube-dasboard-ssl --key kube-dashboard.key --cert kube-dashboard.crt -n kube-system # \u914d\u7f6e $ vi kube-dashboard-ingress.yml apiVersion: extensions/v1beta1 kind: Ingress metadata: name: ingress-kube-dashboard namespace: kubernetes-dashboard annotations: # use the shared ingress-nginx kubernetes.io/ingress.class: \"nginx\" nginx.ingress.kubernetes.io/backend-protocol: \"HTTPS\" spec: tls: - hosts: - dashboard.kube.com secretName: kube-dasboard-ssl rules: - host: dashboard.kube.com http: paths: - path: / backend: serviceName: kubernetes-dashboard servicePort: 443 # \u90e8\u7f72 $ kubectl kube-dashboard-ingress.yml # \u67e5\u770b ingress $ kubectl get ingress --all-namespaces -o wide metrics-server \u00b6 https://raw.githubusercontent.com/helm/charts/master/stable/metrics-server/values.yaml $ vi metrics-values.yaml \u4fee\u6539\uff1a args: - --logtostderr - --kubelet-insecure-tls - --kubelet-preferred-address-types=InternalIP # \u5b89\u88c5 $ helm install stable/metrics-server \\ -n metrics-server \\ --namespace kube-system \\ -f metrics-values.yaml # \u5378\u8f7d # helm del --purge metrics-server $ kubectl get --raw \"/apis/metrics.k8s.io/v1beta1/nodes\" $ kubectl top node Debug # 1. metrics-server-deployment.yaml \u6dfb\u52a0\u53c2\u6570 - --kubelet-insecure-tls # 2. kube-apiserver \u6dfb\u52a0\u53c2\u6570\uff0c\u914d\u7f6e Aggregation - --enable-aggregator-routing=true # 3. \u6dfb\u52a0hosts kubectl edit configmap coredns -n kube-system","title":"Kubernetes \u63d2\u4ef6"},{"location":"kubernetes/kube-addons/#helm","text":"# \u5b89\u88c5 $ curl -L https://git.io/get_helm.sh | bash # \u521b\u5efa\u670d\u52a1\u8d26\u53f7\u548c\u89d2\u8272\u7ed1\u5b9a $ cat <<EOF > ./rbac-config.yaml apiVersion: v1 kind: ServiceAccount metadata: name: tiller namespace: kube-system --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: tiller roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: tiller namespace: kube-system EOF $ kubectl create -f rbac-config.yaml # helm Chart \u4ed3\u5e93\u6539\u6210\u963f\u91cc\u4e91 Chart \u955c\u50cf\u4ed3\u5e93 $ helm repo remove stable $ helm repo add stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts # helm init \u521d\u59cb\u5316 $ helm init --service-account tiller -i registry.aliyuncs.com/google_containers/tiller:v2.14.3 # \u5b89\u88c5 $ helm init --upgrade -i registry.cn-hangzhou.aliyuncs.com/google_containers/tiller:v2.19.1 # \u5347\u7ea7\u7248\u672c # \u67e5\u770b\u5b89\u88c5\u6210\u529f $ helm version \u5176\u4ed6\u547d\u4ee4 $ helm repo add stable http://mirror.azure.cn/kubernetes/charts $ helm repo update $ helm repo list","title":"Helm"},{"location":"kubernetes/kube-addons/#ingress-nginx","text":"https://raw.githubusercontent.com/helm/charts/master/stable/nginx-ingress/values.yaml $ vi ingress-nginx-values.yaml \u4fee\u6539\uff1a # kind: Deployment => kind: DaemonSet # hostNetwork: false => hostNetwork: true # dnsPolicy: ClusterFirst => dnsPolicy: ClusterFirstWithHostNet # type: LoadBalancer => type: ClusterIP # \u5b89\u88c5 $ helm install stable/nginx-ingress --name nginx-ingress -f ingress-nginx-values.yaml --namespace ingress-nginx # \u62c9\u53d6\u955c\u50cf\u5931\u8d25 error\uff1a \u624b\u52a8\u62c9\u53d6 # \u5220\u9664 $ helm ls --all nginx-ingress $ helm del --purge nginx-ingress # \u9a8c\u8bc1\u90e8\u7f72\u6210\u529f $ curl http://192.168.10.100:80 (\u96c6\u7fa4\u5185\u4efb\u610fip) default backend - 404","title":"Ingress-nginx"},{"location":"kubernetes/kube-addons/#kubernetes-dashboard","text":"# \u90e8\u7f72 $ kubectl apply -f kube-dashboard.yaml $ kubectl apply -f kube-dashboard-auth.yaml # \u9a8c\u8bc1\u90e8\u7f72\u6210\u529f(on master-01) $ kubectl proxy $ curl http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ # \u83b7\u53d6Bearer Token $ kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}') Ingress \u8bbf\u95ee kubernetes dashboard\uff08 HTTPS \u8bbf\u95ee\uff09 # \u751f\u6210\u81ea\u7b7e\u540d\u8bc1\u4e66 $ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout kube-dashboard.key -out kube-dashboard.crt -subj \"/CN=dashboard.kube.com/O=dashboard.kube.com\" # \u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\u521b\u5efa k8s Secret \u8d44\u6e90\uff0c\u4f9b Ingress \u5f15\u7528 $ kubectl create secret tls kube-dasboard-ssl --key kube-dashboard.key --cert kube-dashboard.crt -n kube-system # \u914d\u7f6e $ vi kube-dashboard-ingress.yml apiVersion: extensions/v1beta1 kind: Ingress metadata: name: ingress-kube-dashboard namespace: kubernetes-dashboard annotations: # use the shared ingress-nginx kubernetes.io/ingress.class: \"nginx\" nginx.ingress.kubernetes.io/backend-protocol: \"HTTPS\" spec: tls: - hosts: - dashboard.kube.com secretName: kube-dasboard-ssl rules: - host: dashboard.kube.com http: paths: - path: / backend: serviceName: kubernetes-dashboard servicePort: 443 # \u90e8\u7f72 $ kubectl kube-dashboard-ingress.yml # \u67e5\u770b ingress $ kubectl get ingress --all-namespaces -o wide","title":"Kubernetes dashboard"},{"location":"kubernetes/kube-addons/#metrics-server","text":"https://raw.githubusercontent.com/helm/charts/master/stable/metrics-server/values.yaml $ vi metrics-values.yaml \u4fee\u6539\uff1a args: - --logtostderr - --kubelet-insecure-tls - --kubelet-preferred-address-types=InternalIP # \u5b89\u88c5 $ helm install stable/metrics-server \\ -n metrics-server \\ --namespace kube-system \\ -f metrics-values.yaml # \u5378\u8f7d # helm del --purge metrics-server $ kubectl get --raw \"/apis/metrics.k8s.io/v1beta1/nodes\" $ kubectl top node Debug # 1. metrics-server-deployment.yaml \u6dfb\u52a0\u53c2\u6570 - --kubelet-insecure-tls # 2. kube-apiserver \u6dfb\u52a0\u53c2\u6570\uff0c\u914d\u7f6e Aggregation - --enable-aggregator-routing=true # 3. \u6dfb\u52a0hosts kubectl edit configmap coredns -n kube-system","title":"metrics-server"},{"location":"kubernetes/kube-certs/","text":"# \u67e5\u770b\u8bc1\u4e66 \u8fc7\u671f\u65f6\u95f4 $ cd /etc/kubernetes/pki $ openssl x509 -in apiserver.crt -text -noout Validity Not Before: Feb 7 12:25:44 2020 GMT Not After : Feb 6 12:25:44 2021 GMT \u53d1\u73b0\uff1a\u65f6\u95f4\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u3002 \u73b0\u5728\u8981\u5ef6\u957f\u6709\u6548\u671f\u3002 \u65b9\u68481 kubeadm \u547d\u4ee4\u624b\u52a8\u66f4\u65b0\u3002 $ cd /workspace/kubernetes/configs/ $ kubeadm alpha certs renew all --config=./kubeadm-config.yaml \u65b9\u68482 go\u8bed\u8a00\u91cd\u65b0\u7f16\u8bd1 kubeadm \u4fee\u6539\u4e3a10\u5e74\u3002 https://github.com/kubernetes/kubeadm.git","title":"Kubernetes \u8bc1\u4e66"},{"location":"kubernetes/kube-istio/","text":"\u5b89\u88c5 # \u521b\u5efa\u547d\u540d\u7a7a\u95f4 $ kubectl create namespace istio-system # \u521d\u59cb\u5316\uff0c\u5b89\u88c5\u6240\u6709 CRDs $ helm template helm/istio-init --name my-istio-init --namespace istio-system > istio-init.yaml $ kubectl apply -f istio-init.yaml # \u5b89\u88c5\u7ec4\u4ef6 $ helm template helm/istio --name my-istio --namespace istio-system > istio.yaml $ kubectl apply -f istio.yaml kubectl -n istio-system get all -o wide Debug # CPU/MEMORY \u4e0d\u8db3 # \u67e5\u770b istio-pilot $ kubectl -n istio-system get pod/istio-pilot-847c86787b-cwb84 -o yaml | grep -E \"cpu|memory|limits|requests\" # \u67e5\u770b istio-telemetry $ kubectl -n istio-system get pod/istio-telemetry-7df546557f-7t59g -o yaml | grep -E \"cpu|memory|limits|requests\" # \u624b\u52a8\u8c03\u5c0f $ kubectl -n istio-system edit deployment.apps/istio-pilot $ kubectl -n istio-system edit deployment.apps/istio-telemetry Demo # default \u547d\u540d\u7a7a\u95f4\u6253\u4e0a\u6807\u7b7e istio-injection=enabled (\u9ed8\u8ba4\u81ea\u52a8\u6ce8\u5165 Sidecar) $ kubectl label namespace default istio-injection=enabled $ kubectl get namespaces --show-labels # \u90e8\u7f72\u5e94\u7528 $ kubectl apply -f bookinfo.yaml Error: istio\u81ea\u52a8\u6ce8\u5165\u5931\u8d25 $ kubectl describe replicaset.apps/details-v1-6657b8bdf # \u53d1\u73b0\u9519\u8bef \u89e3\u51b3\uff1a\u5b89\u88c5 metrics-server # \u5b9a\u4e49 Ingress \u7f51\u5173\uff1a $ kubectl apply -f bookinfo-gateway.yaml $ kubectl get gateway # \u8bbf\u95ee\u9a8c\u8bc1 export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"http2\")].nodePort}') export SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"https\")].nodePort}') export INGRESS_HOST=$(kubectl get po -l istio=ingressgateway -n istio-system -o jsonpath='{.items[0].status.hostIP}') $ env | grep INGRESS $ curl -s http://${INGRESS_HOST}:${INGRESS_PORT}/productpage | grep -o \"<title>.*</title>\" \u76d1\u63a7 # prometheus $ vi helm/istio/charts/prometheus/values.yaml # enable ingress\uff0c\u4fee\u6539hosts\uff0c\u91cd\u65b0\u751f\u6210\u6a21\u677f # grafana $ vi helm/istio/values.yaml $ vi helm/istio/charts/grafana/values.yaml \u7f51\u683c\u53ef\u89c6\u5316\uff08Kiali\uff09 # \u521b\u5efa secret $ KIALI_USERNAME=$(read -p 'Kiali Username: ' uval && echo -n $uval | base64) $ KIALI_PASSPHRASE=$(read -sp 'Kiali Passphrase: ' pval && echo -n $pval | base64) $ NAMESPACE=istio-system $ cat <<EOF | kubectl apply -f - apiVersion: v1 kind: Secret metadata: name: kiali namespace: $NAMESPACE labels: app: kiali type: Opaque data: username: $KIALI_USERNAME passphrase: $KIALI_PASSPHRASE EOF admin/kiali12345 # kiali $ vi helm/istio/values.yaml # enale kiali $ vi helm/istio/charts/kiali/values.yaml # enale ingress # \u91cd\u65b0\u751f\u6210\u6a21\u677f, apply \u4e00\u4e0b Tracing # tracing $ vi helm/istio/values.yaml # enable tracing $ vi helm/istio/charts/tracing/values.yaml # enable ingress # \u5b89\u88c5\u7ec4\u4ef6 $ helm template helm/istio --name my-istio --namespace istio-system > istio.yaml $ kubectl apply -f istio.yaml","title":"Istio"},{"location":"kubernetes/kube-knative/","text":"\u5b89\u88c5 Serving # Install CRDs $ kubectl apply --filename serving-crds.yaml # Install core $ kubectl apply --filename serving-core.yaml # Install Knative Istio controlle $ kubectl apply --filename net-istio-release.yaml \u9a8c\u8bc1 Serving # \u90e8\u7f72 demo $ kubectl apply -f hello-world.yaml # \u8bbf\u95ee export INGRESS_HOST=$(kubectl get po -l istio=ingressgateway -n istio-system -o jsonpath='{.items[0].status.hostIP}') export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"http2\")].nodePort}') $ curl -H 'Host: helloworld-nodejs.default.example.com' http://192.168.10.121:31380 Troubleshooting $ kubectl describe revision.serving.knative.dev/helloworld-go-2 Get https://hub.chenleileicode.com:8080/v2/ : http: server gave HTTP response to HTTPS client $ kubectl -n knative-serving edit configmap config-deployment ... registriesSkippingTagResolving: \"ko.local,dev.local,hub.chenleileicode.com:8080\" \u5b89\u88c5 Eventing # Install CRDs $ kubectl apply --filename eventing-crds.yaml # Install core $ kubectl apply --filename eventing-core.yaml # install Channel layer for messaging $ kubectl apply -f in-memory-channel.yaml # Install a Broker $ kubectl apply --filename channel-broker.yaml \u5b89\u88c5 monitoring\uff08\u53ef\u89c6\u5316\u63d2\u4ef6\uff09 # Install core kubectl apply --filename monitoring-core.yaml # Prometheus $ kubectl apply -f monitoring-metrics-prometheus.yaml # ELK $ kubectl apply -f monitoring-logs-elasticsearch.yaml # Jaeger $ kubectl apply -f monitoring-tracing-jaeger-in-mem.yaml # Zipkin $ monitoring-tracing-zipkin-in-mem.yaml \u5b89\u88c5 tekton \u6784\u5efa\u5de5\u5177\uff0c\u72ec\u7acb\u4e8e\u4ee5\u4e0aknative\u6838\u5fc3\u6a21\u5757\u3002","title":"knative"},{"location":"kubernetes/kube-openfaas-cloud/","text":"Get ofc-bootstrap \u00b6 $ git clone https://github.com/openfaas-incubator/ofc-bootstrap $ curl -sLSf https://raw.githubusercontent.com/openfaas-incubator/ofc-bootstrap/master/get.sh | \\ sudo sh Create your own init.yaml \u00b6 $ cat ~/.docker/config.json export SERVER=\"docker-registry.qiyi.virtual\" export DOCKER_USERNAME=\"xxxx\" export DOCKER_PASSWORD=\"xxxx\" kubectl create secret docker-registry registry-secret \\ --docker-username=$DOCKER_USERNAME \\ --docker-password=$DOCKER_PASSWORD \\ --docker-server=$SERVER \\ --dry-run -o jsonpath=\"{.data.\\.dockerconfigjson}\" | base64 -d > ~/.docker/config.json # gitlab personal_access_tokens for OpenFaaS Cloud ktb3vhnx3MhdZ8ofznsF # \u5b89\u88c5 $ ofc-bootstrap apply --file init.yaml # \u5378\u8f7d $ ./scripts/reset.sh","title":"openfaas-cloud"},{"location":"kubernetes/kube-openfaas-cloud/#get-ofc-bootstrap","text":"$ git clone https://github.com/openfaas-incubator/ofc-bootstrap $ curl -sLSf https://raw.githubusercontent.com/openfaas-incubator/ofc-bootstrap/master/get.sh | \\ sudo sh","title":"Get ofc-bootstrap"},{"location":"kubernetes/kube-openfaas-cloud/#create-your-own-inityaml","text":"$ cat ~/.docker/config.json export SERVER=\"docker-registry.qiyi.virtual\" export DOCKER_USERNAME=\"xxxx\" export DOCKER_PASSWORD=\"xxxx\" kubectl create secret docker-registry registry-secret \\ --docker-username=$DOCKER_USERNAME \\ --docker-password=$DOCKER_PASSWORD \\ --docker-server=$SERVER \\ --dry-run -o jsonpath=\"{.data.\\.dockerconfigjson}\" | base64 -d > ~/.docker/config.json # gitlab personal_access_tokens for OpenFaaS Cloud ktb3vhnx3MhdZ8ofznsF # \u5b89\u88c5 $ ofc-bootstrap apply --file init.yaml # \u5378\u8f7d $ ./scripts/reset.sh","title":"Create your own init.yaml"},{"location":"kubernetes/kube-openfaas/","text":"\u5b89\u88c5 OpenFaaS on K8s $ git clone https://github.com/openfaas/faas-netes # \u547d\u540d\u7a7a\u95f4 $ cd faas-netes && \\ $ kubectl apply -f namespaces.yml # Create a password for the gateway $ kubectl -n openfaas create secret generic basic-auth \\ --from-literal=basic-auth-user=admin \\ --from-literal=basic-auth-password=admin # deploy OpenFaaS $ kubectl apply -f ./yaml # ingress openfaas gateway $ vi ./yaml/gateway-svc.yml ... --- apiVersion: extensions/v1beta1 kind: Ingress metadata: name: ingress-gateway namespace: openfaas annotations: kubernetes.io/ingress.class: \"nginx\" spec: rules: - host: openfaas.kube.com http: paths: - path: / backend: serviceName: gateway servicePort: 8080 \u5b89\u88c5 faas-cli \u5de5\u5177 $ curl -sL https://cli.openfaas.com | sudo sh \u8fd0\u884c OpenFaaS Function # \u521b\u5efa hello-world function $ faas-cli new --lang dockerfile hello-world --prefix=hub.chenleileicode.com # \u521b\u5efa hello-world-2 function $ faas-cli new --lang node hello-world-2 --prefix=hub.chenleileicode.com:8080/serverless # \u767b\u9646 $ faas-cli login -g openfaas.chenleileicode.com:8080 -u admin -p admin # \u90e8\u7f72 $ faas-cli up --yaml hello-world.yml # \u540c\u4e0a\uff08\u5206\u6b65\u6267\u884c\uff09 $ faas-cli build -f ./hello-world.yml $ faas-cli push -f ./hello-world.yml $ faas-cli deploy -f ./hello-world.yml $ faas-cli remove -f ./hello-world.yml Troubleshooting Error : rpc error: code = Unknown desc = Error response from daemon: pull access denied for hub.chenleileicode.com **Answer: **If you try to deploy using faas-cli deploy it will fail because the Kubernetes kubelet component will not have credentials to authorize the docker image pull request. export DOCKER_USERNAME=xxx export DOCKER_PASSWORD=xxx export DOCKER_EMAIL=xxx export DOCKER_SERVER=hub.chenleileicode.com export DOCKER_SERVER2=hub.chenleileicode.com:8080 $ kubectl create secret docker-registry my-private-repo2 \\ --docker-username=$DOCKER_USERNAME \\ --docker-password=$DOCKER_PASSWORD \\ --docker-email=$DOCKER_EMAIL \\ --docker-server=$DOCKER_SERVER2 \\ --namespace openfaas-fn $ kubectl edit serviceaccount default -n openfaas-fn ... imagePullSecrets: - name: my-private-repo # for hub.chenleileicode.com - name: my-private-repo2 # for hub.chenleileicode.com:9090 \u9a8c\u8bc1 $ faas-cli list --gateway openfaas.chenleileicode.com:8080 $ faas-cli invoke hello-world --gateway openfaas.chenleileicode.com:8080 \u6b64\u5916 # generate command creates kubernetes CRD YAML file for functions $ faas-cli generate --help ... Examples: faas-cli generate --api=openfaas.com/v1alpha2 --yaml stack.yml | kubectl apply -f - faas-cli generate --api=openfaas.com/v1alpha2 -f stack.yml faas-cli generate --api=serving.knative.dev/v1alpha1 -f stack.yml faas-cli generate --api=openfaas.com/v1alpha2 --namespace openfaas-fn -f stack.yml faas-cli generate --api=openfaas.com/v1alpha2 -f stack.yml --tag branch -n openfaas-fn","title":"openfaas"},{"location":"kubernetes/kube-prometheus/","text":"Prometheus \u00b6 https://github.com/helm/charts/tree/master/stable/prometheus-operator \u90e8\u7f72 # \u5b89\u88c5 $ cd /workspace/kubernetes/addons/prometheus $ helm install ./prometheus-operator/ --name my-prome --namespace monitoring # \u5220\u9664 $ helm delete --purge my-prome # \u5220\u9664crd\u8d44\u6e90 $ kubectl get crd | grep monitoring kubectl delete crd prometheuses.monitoring.coreos.com kubectl delete crd prometheusrules.monitoring.coreos.com kubectl delete crd servicemonitors.monitoring.coreos.com kubectl delete crd podmonitors.monitoring.coreos.com kubectl delete crd alertmanagers.monitoring.coreos.com kubectl delete crd thanosrulers.monitoring.coreos.com # \u66f4\u65b0 helm upgrade my-prome ./prometheus-operator/ -f ./prometheus-operator/charts/prometheus-node-exporter/values.yaml # \u83b7\u53d6 grafana \u767b\u9646\u5bc6\u7801 $ kubectl -n monitoring get secret my-prome-grafana -o yaml $ echo cHJvbS1vcGVyYXRvcg== | base64 -d prom-operator $ echo YWRtaW4= | base64 -d admin \u5e38\u7528\u547d\u4ee4 # \u67e5\u770b\u955c\u50cf $ find prometheus-operator/ | grep values.yaml | xargs grep image: # \u67e5\u770b $ kubectl -n monitoring get all -o wide Debug # \u4fee\u6539\u76d1\u542c target: etcd # 1. \u4fee\u6539endpoints # 2. http => https # 3.\u6dfb\u52a0\u8bc1\u4e66 $ kubectl create secret generic etcd-certs -n monitoring --from-file=/etc/kubernetes/pki/etcd/ca.pem --from-file=/etc/kubernetes/pki/etcd/etcd.pem --from-file=/etc/kubernetes/pki/etcd/etcd-key.pem # 4. upgrade \u914d\u7f6e $ helm upgrade my-prome ./prometheus-operator/ -f ./prometheus-operator/values.yaml # \u4fee\u6539\u76d1\u542c target: kube-proxy $ netstat -ntlp | grep kube-proxy $ kubectl -n kube-system edit cm kube-proxy # ... kind: KubeProxyConfiguration # metricsBindAddress: 127.0.0.1:10249 metricsBindAddress: 0.0.0.0:10249 # ... # \u91cd\u542fkubelet\u3001docker\u670d\u52a1\uff0c\u518dnetstat -ntlp | grep kube-proxy\u67e5\u770b","title":"prometheus"},{"location":"kubernetes/kube-prometheus/#prometheus","text":"https://github.com/helm/charts/tree/master/stable/prometheus-operator \u90e8\u7f72 # \u5b89\u88c5 $ cd /workspace/kubernetes/addons/prometheus $ helm install ./prometheus-operator/ --name my-prome --namespace monitoring # \u5220\u9664 $ helm delete --purge my-prome # \u5220\u9664crd\u8d44\u6e90 $ kubectl get crd | grep monitoring kubectl delete crd prometheuses.monitoring.coreos.com kubectl delete crd prometheusrules.monitoring.coreos.com kubectl delete crd servicemonitors.monitoring.coreos.com kubectl delete crd podmonitors.monitoring.coreos.com kubectl delete crd alertmanagers.monitoring.coreos.com kubectl delete crd thanosrulers.monitoring.coreos.com # \u66f4\u65b0 helm upgrade my-prome ./prometheus-operator/ -f ./prometheus-operator/charts/prometheus-node-exporter/values.yaml # \u83b7\u53d6 grafana \u767b\u9646\u5bc6\u7801 $ kubectl -n monitoring get secret my-prome-grafana -o yaml $ echo cHJvbS1vcGVyYXRvcg== | base64 -d prom-operator $ echo YWRtaW4= | base64 -d admin \u5e38\u7528\u547d\u4ee4 # \u67e5\u770b\u955c\u50cf $ find prometheus-operator/ | grep values.yaml | xargs grep image: # \u67e5\u770b $ kubectl -n monitoring get all -o wide Debug # \u4fee\u6539\u76d1\u542c target: etcd # 1. \u4fee\u6539endpoints # 2. http => https # 3.\u6dfb\u52a0\u8bc1\u4e66 $ kubectl create secret generic etcd-certs -n monitoring --from-file=/etc/kubernetes/pki/etcd/ca.pem --from-file=/etc/kubernetes/pki/etcd/etcd.pem --from-file=/etc/kubernetes/pki/etcd/etcd-key.pem # 4. upgrade \u914d\u7f6e $ helm upgrade my-prome ./prometheus-operator/ -f ./prometheus-operator/values.yaml # \u4fee\u6539\u76d1\u542c target: kube-proxy $ netstat -ntlp | grep kube-proxy $ kubectl -n kube-system edit cm kube-proxy # ... kind: KubeProxyConfiguration # metricsBindAddress: 127.0.0.1:10249 metricsBindAddress: 0.0.0.0:10249 # ... # \u91cd\u542fkubelet\u3001docker\u670d\u52a1\uff0c\u518dnetstat -ntlp | grep kube-proxy\u67e5\u770b","title":"Prometheus"},{"location":"kubernetes/kube-storage/","text":"NFS \u5b58\u50a8 \u00b6 NFS \u670d\u52a1 # *on nfs-server* # \u542f\u52a8\u670d\u52a1 $ systemctl start nfs $ systemctl status nfs # \u521b\u5efa\u76ee\u5f55 $ mkdir -p /workspace/data/nfs0 # \u4fee\u6539\u914d\u7f6e $ vi /etc/exports /workspace/data/nfs0 *(rw,sync,insecure,no_subtree_check,no_root_squash) # \u751f\u6548 $ exportfs -r # \u91cd\u542frpcbind\u3001nfs\u670d\u52a1 $ systemctl restart rpcbind && systemctl restart nfs # Error\u5904\u7406\uff1a $ systemctl status rpcbind.socket $ netstat -ntlp | grep 111 # \u67e5\u770b\u751f\u6548 $ showmount -e localhost Export list for localhost: /workspace/data/nfs0 * # *on any client* # \u67e5\u770b\u751f\u6548 $ showmount -e 192.168.10.101 Export list for 192.168.10.101: /workspace/data/nfs0 * NFS \u90e8\u7f72 on kubernetes Reference: https://github.com/kubernetes-incubator/external-storage/tree/master/nfs-client # 1. rbac # \u589e\u52a0 namespace: nfs\uff0c\u5e76\u7f16\u8f91\u76f8\u5173\u914d\u7f6e $ vi nfs-rbac.yaml $ kubectl apply -f nfs-rbac.yaml # 2. deployment $ vi nfs-deployment.yaml $ kubectl apply -f nfs-deployment.yaml # 3. storage-class & pvc # storageclass $ vi nfs-storage-class.yaml $ kubectl apply -f nfs-storage-class.yaml # pvc $ vi nfs-pvc.yaml $ kubectl apply -f nfs-pvc-test.yaml glusterfs-kubernetes \u5b58\u50a8 \u00b6 \u73af\u5883\u4f9d\u8d56 # \u589e\u52a0\u88f8\u76d8 /dev/sdb $ fdisk -l # \u73af\u5883 modprobe dm_snapshot modprobe dm_mirror modprobe dm_thin_pool # \u4f9d\u8d56 yum install centos-release-gluster yum install -y glusterfs glusterfs-server glusterfs-fuse glusterfs \u90e8\u7f72 # \u6253\u4e0a glusterfs \u6807\u7b7e $ kubectl label nodes --all storagenode=glusterfs $ kubectl get nodes --show-labels # \u5220\u9664 label (\u547d\u4ee4\u884c\u6307\u5b9aLabelName\u4e0e\u51cf\u53f7\u76f8\u8fde) $ kubectl label node centos-master-02 LabelName- # \u90e8\u7f72 glusterfs $ kubectl apply -f glusterfs-daemonset.yaml heketi \u90e8\u7f72\u53ca\u914d\u7f6e # \u5efa\u7acb ServiceAccount \u5e76\u8d4b\u4e88\u6743\u9650 $ kubectl apply -f heketi-security.yaml # \u90e8\u7f72 heketi (\u5229\u7528 nodeSeletor \u90e8\u7f72\u5728 master-02 \u4e0a) $ kubectl apply -f heketi-deploy.yaml # \u8fdb\u5165 heketi \u5bb9\u5668 $ docker exec -it ${heketi_container_id} bash # ---- \u4ee5\u4e0b\u662f\u5728\u5bb9\u5668\u5185\u90e8 ---- # $ export HEKETI_CLI_SERVER=http://localhost:8080 $ vi topology.json # \u6309\u7167\u5b98\u65b9sample \u4fee\u6539 # \u90e8\u7f72 $ heketi-cli -s $HEKETI_CLI_SERVER --user admin --secret 'My Secret' topology load --json=topology.json # \u67e5\u770b $ heketi-cli --user admin --secret 'My Secret' topology info # \u53ef\u67e5\u770b/\u4fee\u6539\u5bc6\u7801 $ vi /etc/heketi/heketi.json $ heketi-cli --user admin --secret 'My Secret' cluster list $ heketi-cli --user admin --secret 'My Secret' cluster delete ${cluster_id} # \u8fdb\u5165 gluster \u5bb9\u5668 $ docker exec -it ${gluster_container_id} bash # --- \u5bb9\u5668\u5185\u90e8 --- # # \u9a8c\u8bc1 gluster connected $ gluster peer status $ gluster volume info abort & reset # abort for gk-deploy \u90e8\u7f72 $ ./gk-deploy --abort -y -n glusterfs -g --user-key=userkey --admin-key=adminkey $ kubectl delete ns glusterfs # \u4e0b\u9762\u547d\u4ee4\u662f\u6bcf\u4e2aglusterfs\u96c6\u7fa4\u9700\u505a\u7684 rm -rf /etc/glusterfs/ rm -rf /var/log/glusterfs/ rm -rf /var/lib/glusterd/ rm -rf /var/lib/heketi/ # \u5220\u9664 heketi \u6570\u636e\u5e93(on master-02) rm -rf /workspace/data/heketi-data # \u5220\u9664 Device Mapper dmsetup status dmsetup remove_all # \u683c\u5f0f\u5316 /dev/sdb dd if=/dev/zero of=/dev/sdb bs=512k count=1 StorageClass & PVC # Storageclass \u90e8\u7f72 $ kubectl -n glusterfs describe svc/heketi | grep \"Endpoints:\" | awk '{print $2}' $ vi glusterfs-storageclass.yaml # \u4fee\u6539 heketi_service \u8bbf\u95ee\u5730\u5740 $ kubectl apply -f glusterfs-storage-class.yaml # PVC \u90e8\u7f72 $ kubectl apply -f glusterfs-pvc-test.yaml kubectl get all --all-namespaces -o wide | grep heketi","title":"storage"},{"location":"kubernetes/kube-storage/#nfs","text":"NFS \u670d\u52a1 # *on nfs-server* # \u542f\u52a8\u670d\u52a1 $ systemctl start nfs $ systemctl status nfs # \u521b\u5efa\u76ee\u5f55 $ mkdir -p /workspace/data/nfs0 # \u4fee\u6539\u914d\u7f6e $ vi /etc/exports /workspace/data/nfs0 *(rw,sync,insecure,no_subtree_check,no_root_squash) # \u751f\u6548 $ exportfs -r # \u91cd\u542frpcbind\u3001nfs\u670d\u52a1 $ systemctl restart rpcbind && systemctl restart nfs # Error\u5904\u7406\uff1a $ systemctl status rpcbind.socket $ netstat -ntlp | grep 111 # \u67e5\u770b\u751f\u6548 $ showmount -e localhost Export list for localhost: /workspace/data/nfs0 * # *on any client* # \u67e5\u770b\u751f\u6548 $ showmount -e 192.168.10.101 Export list for 192.168.10.101: /workspace/data/nfs0 * NFS \u90e8\u7f72 on kubernetes Reference: https://github.com/kubernetes-incubator/external-storage/tree/master/nfs-client # 1. rbac # \u589e\u52a0 namespace: nfs\uff0c\u5e76\u7f16\u8f91\u76f8\u5173\u914d\u7f6e $ vi nfs-rbac.yaml $ kubectl apply -f nfs-rbac.yaml # 2. deployment $ vi nfs-deployment.yaml $ kubectl apply -f nfs-deployment.yaml # 3. storage-class & pvc # storageclass $ vi nfs-storage-class.yaml $ kubectl apply -f nfs-storage-class.yaml # pvc $ vi nfs-pvc.yaml $ kubectl apply -f nfs-pvc-test.yaml","title":"NFS \u5b58\u50a8"},{"location":"kubernetes/kube-storage/#glusterfs-kubernetes","text":"\u73af\u5883\u4f9d\u8d56 # \u589e\u52a0\u88f8\u76d8 /dev/sdb $ fdisk -l # \u73af\u5883 modprobe dm_snapshot modprobe dm_mirror modprobe dm_thin_pool # \u4f9d\u8d56 yum install centos-release-gluster yum install -y glusterfs glusterfs-server glusterfs-fuse glusterfs \u90e8\u7f72 # \u6253\u4e0a glusterfs \u6807\u7b7e $ kubectl label nodes --all storagenode=glusterfs $ kubectl get nodes --show-labels # \u5220\u9664 label (\u547d\u4ee4\u884c\u6307\u5b9aLabelName\u4e0e\u51cf\u53f7\u76f8\u8fde) $ kubectl label node centos-master-02 LabelName- # \u90e8\u7f72 glusterfs $ kubectl apply -f glusterfs-daemonset.yaml heketi \u90e8\u7f72\u53ca\u914d\u7f6e # \u5efa\u7acb ServiceAccount \u5e76\u8d4b\u4e88\u6743\u9650 $ kubectl apply -f heketi-security.yaml # \u90e8\u7f72 heketi (\u5229\u7528 nodeSeletor \u90e8\u7f72\u5728 master-02 \u4e0a) $ kubectl apply -f heketi-deploy.yaml # \u8fdb\u5165 heketi \u5bb9\u5668 $ docker exec -it ${heketi_container_id} bash # ---- \u4ee5\u4e0b\u662f\u5728\u5bb9\u5668\u5185\u90e8 ---- # $ export HEKETI_CLI_SERVER=http://localhost:8080 $ vi topology.json # \u6309\u7167\u5b98\u65b9sample \u4fee\u6539 # \u90e8\u7f72 $ heketi-cli -s $HEKETI_CLI_SERVER --user admin --secret 'My Secret' topology load --json=topology.json # \u67e5\u770b $ heketi-cli --user admin --secret 'My Secret' topology info # \u53ef\u67e5\u770b/\u4fee\u6539\u5bc6\u7801 $ vi /etc/heketi/heketi.json $ heketi-cli --user admin --secret 'My Secret' cluster list $ heketi-cli --user admin --secret 'My Secret' cluster delete ${cluster_id} # \u8fdb\u5165 gluster \u5bb9\u5668 $ docker exec -it ${gluster_container_id} bash # --- \u5bb9\u5668\u5185\u90e8 --- # # \u9a8c\u8bc1 gluster connected $ gluster peer status $ gluster volume info abort & reset # abort for gk-deploy \u90e8\u7f72 $ ./gk-deploy --abort -y -n glusterfs -g --user-key=userkey --admin-key=adminkey $ kubectl delete ns glusterfs # \u4e0b\u9762\u547d\u4ee4\u662f\u6bcf\u4e2aglusterfs\u96c6\u7fa4\u9700\u505a\u7684 rm -rf /etc/glusterfs/ rm -rf /var/log/glusterfs/ rm -rf /var/lib/glusterd/ rm -rf /var/lib/heketi/ # \u5220\u9664 heketi \u6570\u636e\u5e93(on master-02) rm -rf /workspace/data/heketi-data # \u5220\u9664 Device Mapper dmsetup status dmsetup remove_all # \u683c\u5f0f\u5316 /dev/sdb dd if=/dev/zero of=/dev/sdb bs=512k count=1 StorageClass & PVC # Storageclass \u90e8\u7f72 $ kubectl -n glusterfs describe svc/heketi | grep \"Endpoints:\" | awk '{print $2}' $ vi glusterfs-storageclass.yaml # \u4fee\u6539 heketi_service \u8bbf\u95ee\u5730\u5740 $ kubectl apply -f glusterfs-storage-class.yaml # PVC \u90e8\u7f72 $ kubectl apply -f glusterfs-pvc-test.yaml kubectl get all --all-namespaces -o wide | grep heketi","title":"glusterfs-kubernetes \u5b58\u50a8"},{"location":"kubernetes/kube-tekton/","text":"Install \u00b6 \u5b89\u88c5 Tekton Pipelines Core $ kubectl apply -f tekton-core-release.yaml # Set up the CLI $ tar xvzf tkn_0.9.0_Linux_x86_64.tar.gz -C /usr/local/bin/ tkn \u5b89\u88c5 Tekton Triggers $ kubectl apply -f tekton-triggers-release.yaml $ kubectl get all -n tekton-pipelines $ kubectl api-resources | grep tekton \u5b89\u88c5 Tekton Dashboard # install dashboard $ kubectl apply -f tekton-dashboard-release.yaml # \u6539\u6210 nodePort \u6a21\u5f0f $ curl http://10.62.250.33:25955 Tekton CRDs \u00b6 $ kubectl api-resources | grep tekton Tekton Trigger TriggerTemplate : \u521b\u5efa\u8d44\u6e90\u7684\u6a21\u677f(\u6bd4\u5982\u7528\u6765\u521b\u5efa PipelineResource \u548c PipelineRun)\uff1b TriggerBinding : \u6821\u9a8c\u4e8b\u4ef6\uff0c\u63d0\u53d6\u8d1f\u8f7d\u5b57\u6bb5\uff1b EventListener : \u8fde\u63a5 TriggerBinding \u548c TriggerTemplate \u5230\u53ef\u5bfb\u5740\u7684\u7aef\u70b9(\u4e8b\u4ef6\u63a5\u6536\u5668)\u3002\u4f7f\u7528\u4ece\u5404\u4e2a TriggerBinding \u4e2d\u63d0\u53d6\u7684\u53c2\u6570\u6765\u521b\u5efa TriggerTemplate \u4e2d\u6307\u5b9a\u7684 resources. \u540c\u6837\u901a\u8fc7 interceptor \u5b57\u6bb5\u6765\u6307\u5b9a\u5916\u90e8\u670d\u52a1\u6765\u5bf9\u4e8b\u4ef6\u8d1f\u8f7d\u8fdb\u884c\u9884\u5904\u7406\uff1b ClusterTriggerBinding : cluster\u7ea7\u522b\u7684 TriggerBinding \u3002 Examples \u00b6 Task Demo # task demo $ kubectl apply -f task-demo.yaml # run task $ tkn task start echo # either $ kubectl apply -f taskrun-demo.yaml # or # see the logs $ kubectl get pod $ tkn taskrun describe taskrun-demo $ tkn taskrun logs -f taskrun-demo Pipeline Demo # Kaniko Config $ vi config.json {\"auths\":{\"docker.io\":{\"username\":\"siverbulllet\",\"password\":\"cool19900926\"},\"registry.cn-hangzhou.aliyuncs.com\":{\"username\":\"leonardochen10@163.com\",\"password\":\"cool19900926\"}}} $ kubectl create configmap docker-config --from-file=config.json # \u5e38\u7528\u547d\u4ee4 $ tkn pipelinerun logs --last -f $ kubectl proxy --port=8001 # curl localhost:8001 # nginx \u4ee3\u7406\u4e00\u4e0b 8001 => 8009\uff1a http://10.62.252.160:8009/ $ curl http://localhost:8001/api/v1/namespaces/[namespace-name]/services/[service-name]/proxy --- apiVersion: triggers.tekton.dev/v1alpha1 kind: EventListener metadata: name: github-listener-interceptor spec: serviceAccountName: tekton-triggers-github-sa triggers: - name: github-listener interceptors: - github: secretRef: secretName: github-secret secretKey: secretToken eventTypes: - pull_request bindings: - ref: github-binding template: name: github-template URL=\"https://github.com/silverbulllet/myapp-demo\" # The URL of your fork of CatApp ROUTE_HOST=\"http://trigger-test.kube.com\" curl -v \\ -H 'X-GitHub-Event: pull_request' \\ -H 'Content-Type: application/json' \\ -d '{ \"repository\": {\"clone_url\": \"'\"${URL}\"'\"}, \"pull_request\": {\"head\": {\"sha\": \"master\"}} }' \\ ${ROUTE_HOST}","title":"tekton"},{"location":"kubernetes/kube-tekton/#install","text":"\u5b89\u88c5 Tekton Pipelines Core $ kubectl apply -f tekton-core-release.yaml # Set up the CLI $ tar xvzf tkn_0.9.0_Linux_x86_64.tar.gz -C /usr/local/bin/ tkn \u5b89\u88c5 Tekton Triggers $ kubectl apply -f tekton-triggers-release.yaml $ kubectl get all -n tekton-pipelines $ kubectl api-resources | grep tekton \u5b89\u88c5 Tekton Dashboard # install dashboard $ kubectl apply -f tekton-dashboard-release.yaml # \u6539\u6210 nodePort \u6a21\u5f0f $ curl http://10.62.250.33:25955","title":"Install"},{"location":"kubernetes/kube-tekton/#tekton-crds","text":"$ kubectl api-resources | grep tekton Tekton Trigger TriggerTemplate : \u521b\u5efa\u8d44\u6e90\u7684\u6a21\u677f(\u6bd4\u5982\u7528\u6765\u521b\u5efa PipelineResource \u548c PipelineRun)\uff1b TriggerBinding : \u6821\u9a8c\u4e8b\u4ef6\uff0c\u63d0\u53d6\u8d1f\u8f7d\u5b57\u6bb5\uff1b EventListener : \u8fde\u63a5 TriggerBinding \u548c TriggerTemplate \u5230\u53ef\u5bfb\u5740\u7684\u7aef\u70b9(\u4e8b\u4ef6\u63a5\u6536\u5668)\u3002\u4f7f\u7528\u4ece\u5404\u4e2a TriggerBinding \u4e2d\u63d0\u53d6\u7684\u53c2\u6570\u6765\u521b\u5efa TriggerTemplate \u4e2d\u6307\u5b9a\u7684 resources. \u540c\u6837\u901a\u8fc7 interceptor \u5b57\u6bb5\u6765\u6307\u5b9a\u5916\u90e8\u670d\u52a1\u6765\u5bf9\u4e8b\u4ef6\u8d1f\u8f7d\u8fdb\u884c\u9884\u5904\u7406\uff1b ClusterTriggerBinding : cluster\u7ea7\u522b\u7684 TriggerBinding \u3002","title":"Tekton CRDs"},{"location":"kubernetes/kube-tekton/#examples","text":"Task Demo # task demo $ kubectl apply -f task-demo.yaml # run task $ tkn task start echo # either $ kubectl apply -f taskrun-demo.yaml # or # see the logs $ kubectl get pod $ tkn taskrun describe taskrun-demo $ tkn taskrun logs -f taskrun-demo Pipeline Demo # Kaniko Config $ vi config.json {\"auths\":{\"docker.io\":{\"username\":\"siverbulllet\",\"password\":\"cool19900926\"},\"registry.cn-hangzhou.aliyuncs.com\":{\"username\":\"leonardochen10@163.com\",\"password\":\"cool19900926\"}}} $ kubectl create configmap docker-config --from-file=config.json # \u5e38\u7528\u547d\u4ee4 $ tkn pipelinerun logs --last -f $ kubectl proxy --port=8001 # curl localhost:8001 # nginx \u4ee3\u7406\u4e00\u4e0b 8001 => 8009\uff1a http://10.62.252.160:8009/ $ curl http://localhost:8001/api/v1/namespaces/[namespace-name]/services/[service-name]/proxy --- apiVersion: triggers.tekton.dev/v1alpha1 kind: EventListener metadata: name: github-listener-interceptor spec: serviceAccountName: tekton-triggers-github-sa triggers: - name: github-listener interceptors: - github: secretRef: secretName: github-secret secretKey: secretToken eventTypes: - pull_request bindings: - ref: github-binding template: name: github-template URL=\"https://github.com/silverbulllet/myapp-demo\" # The URL of your fork of CatApp ROUTE_HOST=\"http://trigger-test.kube.com\" curl -v \\ -H 'X-GitHub-Event: pull_request' \\ -H 'Content-Type: application/json' \\ -d '{ \"repository\": {\"clone_url\": \"'\"${URL}\"'\"}, \"pull_request\": {\"head\": {\"sha\": \"master\"}} }' \\ ${ROUTE_HOST}","title":"Examples"},{"location":"kubernetes/kubeadm-deployment/","text":"\u73af\u5883\u51c6\u5907 \u00b6 \u5b89\u88c5\u4f9d\u8d56 # \u66f4\u65b0yum $ yum update -y # \u5b89\u88c5\u4f9d\u8d56\u5305 $ yum install -y conntrack ipvsadm ipset jq sysstat curl iptables libseccomp bind-utils lvm2 # \u5b89\u88c5 docker $ yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo $ yum install -y docker-ce # \u8bbe\u7f6edocker\u542f\u52a8\u53c2\u6570\uff08\u53ef\u9009\uff09 $ cat <<EOF > /etc/docker/daemon.json { \"exec-opts\": [\"native.cgroupdriver=systemd\"] } EOF # \u542f\u52a8docker\u670d\u52a1 $ service docker restart # \u914d\u7f6eyum\u6e90\uff08\u79d1\u5b66\u4e0a\u7f51\u7684\u540c\u5b66\u53ef\u4ee5\u628a\"mirrors.aliyun.com\"\u66ff\u6362\u4e3a\"packages.cloud.google.com\"\uff09 $ cat <<EOF > /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # \u627e\u5230\u8981\u5b89\u88c5\u7684\u7248\u672c\u53f7 $ yum list kubeadm --showduplicates | sort -r # \u5b89\u88c5\u5de5\u5177 $ yum install -y kubeadm kubelet kubectl --disableexcludes=kubernetes \u5173\u95ed\u9632\u706b\u5899\u3001swap\u3001selinux\u3001dnsmasq\u3001\u91cd\u7f6eiptables # \u5173\u95ed\u9632\u706b\u5899 $ systemctl stop firewalld && systemctl disable firewalld # \u91cd\u7f6eiptables $ iptables -F && iptables -X && iptables -F -t nat && iptables -X -t nat && iptables -P FORWARD ACCEPT # \u67e5\u770b $ iptables -L -n $ iptables-save # \u5173\u95edswap $ swapoff -a $ sed -i '/swap/s/^\\(.*\\)$/#\\1/g' /etc/fstab # \u5173\u95edselinux $ setenforce 0 $ getenforce # \u67e5\u770b\u72b6\u6001 $ vi /etc/sysconfig/selinux # \u6539\u4e3adisabled # \u5173\u95eddnsmasq(\u5426\u5219\u53ef\u80fd\u5bfc\u81f4docker\u5bb9\u5668\u65e0\u6cd5\u89e3\u6790\u57df\u540d) $ service dnsmasq stop && systemctl disable dnsmasq \u5f00\u542fipvs # \u5f00\u542fipvs\u6a21\u5f0f(\u9700\u8981\u6ce8\u610f\u7684\u662f\u8981\u6dfb\u52a0ip_vs\u76f8\u5173\u6a21\u5757) cat > /etc/sysconfig/modules/ipvs.modules <<EOF #!/bin/bash modprobe -- ip_vs modprobe -- ip_vs_rr modprobe -- ip_vs_wrr modprobe -- ip_vs_sh modprobe -- nf_conntrack_ipv4 modprobe br_netfilter EOF # \u751f\u6548 chmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4 # \u5236\u4f5c\u914d\u7f6e\u6587\u4ef6 $ cat > /etc/sysctl.d/kubernetes.conf <<EOF net.bridge.bridge-nf-call-iptables=1 net.bridge.bridge-nf-call-ip6tables=1 net.ipv4.ip_forward=1 net.ipv4.tcp_tw_recycle=1 # \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_keepalive_time=600 # \u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u6ca1\u6709\u6570\u636e\u4f20\u8f93\uff0c\u5c31\u5f00\u59cb\u53d1\u9001\u5b58\u6d3b\u63a2\u6d4b\u5305 net.ipv4.tcp_keepalive_intvl=15 # keepalive\u63a2\u6d4b\u5305\u7684\u53d1\u9001\u95f4\u9694 net.ipv4.tcp_keepalive_probes=3 # \u5982\u679c\u5bf9\u65b9\u4e0d\u4e88\u5e94\u7b54\uff0c\u63a2\u6d4b\u5305\u7684\u53d1\u9001\u6b21\u6570 vm.swappiness=0 # \u7981\u6b62\u4f7f\u7528 swap \u7a7a\u95f4\uff0c\u53ea\u6709\u5f53\u7cfb\u7edf OOM \u65f6\u624d\u5141\u8bb8\u4f7f\u7528\u5b83 vm.overcommit_memory=1 # \u4e0d\u68c0\u67e5\u7269\u7406\u5185\u5b58\u662f\u5426\u591f\u7528 vm.panic_on_oom=0 # \u5f00\u542f OOM fs.inotify.max_user_instances=8192 fs.inotify.max_user_watches=1048576 fs.file-max=52706963 fs.nr_open=52706963 net.ipv6.conf.all.disable_ipv6=1 net.netfilter.nf_conntrack_max=2310720 EOF # \u751f\u6548\u6587\u4ef6 $ sysctl -p /etc/sysctl.d/kubernetes.conf - \u5176\u4ed6 # \u8c03\u6574\u7cfb\u7edf TimeZone $ timedatectl set-timezone Asia/Shanghai # \u5c06\u5f53\u524d\u7684 UTC \u65f6\u95f4\u5199\u5165\u786c\u4ef6\u65f6\u949f $ timedatectl set-local-rtc 0 # \u91cd\u542f\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u65f6\u95f4\u7684\u670d\u52a1 $ systemctl restart rsyslog && systemctl restart crond # \u5173\u95ed\u65e0\u5173\u7684\u670d\u52a1 $ systemctl stop postfix && systemctl disable postfix \u9ad8\u53ef\u7528 HA \u00b6 keepalived # vip: 192.168.10.100 # master-01: 192.168.10.101 (\u4e3b) # master-02: 192.168.10.102 \uff08\u5907\uff09 # \u5b89\u88c5 $ yum install -y keepalived # \u914d\u7f6e\uff08\u67e5\u770b\u6587\u6863\uff09 $ vi /etc/keepalived/keepalived.conf # \u542f\u52a8 $ systemctl enable keepalived && systemctl start keepalived # \u68c0\u67e5 $ ip a $ ping 192.168.10.100 # ping \u4e0d\u901a \u53ef\u80fd\u4e0e\u9632\u706b\u5899\u6709\u5173(firewalld | selinux) \u96c6\u7fa4\u914d\u7f6e \u00b6 master-01 # \u67e5\u770b\u9ed8\u8ba4\u914d\u7f6e $ kubeadm config print init-defaults $ cd /workspace/kubernetes/configs/ # \u751f\u6210\u914d\u7f6e\u6587\u4ef6 export APISERVER_NAME=192.168.10.100 # export POD_SUBNET=10.100.0.1/16 # for calico export POD_SUBNET=10.244.0.0/16 # for flannel cat <<EOF > ./kubeadm-config.yaml apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration localAPIEndpoint: advertiseAddress: \"${APISERVER_NAME}\" bindPort: 6443 nodeRegistration: taints: - effect: PreferNoSchedule key: node-role.kubernetes.io/master --- apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v1.17.2 imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers controlPlaneEndpoint: \"${APISERVER_NAME}:6443\" networking: serviceSubnet: \"10.97.0.0/16\" podSubnet: \"${POD_SUBNET}\" dnsDomain: \"cluster.local\" apiServer: certSANs: - 192.168.10.100 - 192.168.10.101 - 192.168.10.102 - 192.168.10.121 - 192.168.10.122 etcd: external: endpoints: - https://192.168.10.101:2379 - https://192.168.10.102:2379 caFile: /etc/kubernetes/pki/etcd/ca.pem certFile: /etc/kubernetes/pki/etcd/etcd.pem keyFile: /etc/kubernetes/pki/etcd/etcd-key.pem EOF # \u521d\u59cb\u5316\u96c6\u7fa4 kubeadm init --config=kubeadm-config.yaml --upload-certs # api-server $ echo \"export KUBECONFIG=/etc/kubernetes/admin.conf\" >> ~/.bash_profile $ source ~/.bash_profile \u5b89\u88c5flannel\u7f51\u7edc\u63d2\u4ef6 (on master-01) $ cd /workspace/kubernetes/configs/ # \u4e0b\u8f7d\u6587\u4ef6\uff08\u5e76\u4fee\u6539 image \u6e90\uff09 $ curl -O https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml /workspace/kubernetes/configs/ # \u5b89\u88c5 $ kubectl apply -f kube-flannel.yml for vagrant: eth0 \u7f51\u5361\uff1a nat \u8f6c\u53d1\u8bbf\u95ee\u516c\u7f51\uff08\u9ed8\u8ba4\uff09\uff1b eth1 \u7f51\u5361\uff1a\u4e3b\u673a\u771f\u6b63\u7684 IP\uff0ccluster \u5185\u90e8\u901a\u4fe1\u3002 vi /workspace/kubernetes/configs/kube-flannel.yml ... - --kube-subnet-mgr - --iface=eth1 // \u6dfb\u52a0\u6b64\u884c \u4fee\u6539kube-proxy \u7684 mode \u4e3a ipvs (on master-01) $ kubectl edit cm kube-proxy -n kube-system ... kind: KubeProxyConfiguration mode: \"ipvs\" // \u4fee\u6539\u6b64\u5904 kubectl get pod -n kube-system | grep kube-proxy |awk '{system(\"kubectl delete pod \"$1\" -n kube-system\")}' master-02 $ kubeadm join 192.168.10.100:6443 --token cwn7o6.65gr67a36hdn992i \\ --discovery-token-ca-cert-hash sha256:c021540697fc731ffec34d0a18681f89562ca29a808f1ff9ad941a364b400281 \\ --control-plane --certificate-key 85b550cf7e1c6bfa3cdb626615722f6efe39cbe24e9f1f37da985685a8a3c643 etcd health error kubectl exec -it etcd-centos-master-01 sh -n kube-system ETCDCTL_API=3 alias etcdctl='etcdctl --endpoints= https://192.168.10.101:2379 --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key' ETCDCTL_API=3 etcdctl member list worker # \u67e5\u770b\u52a0\u5165 worker kubeadm token create --print-join-command # \u52a0\u5165\u96c6\u7fa4 $ kubeadm join 192.168.10.100:6443 --token 7zwmn0.k1m7i5docr5rkv49 \\ --discovery-token-ca-cert-hash sha256:c021540697fc731ffec34d0a18681f89562ca29a808f1ff9ad941a364b400281 \u5e38\u7528\u547d\u4ee4 \u00b6 # \u91cd\u7f6e kubeadm reset rm -rf /var/lib/etcd/* rm -rf /etc/cni/ rm -rf /var/lib/cni/ ifconfig cni0 down ip link delete cni0 ifconfig flannel.1 down ip link delete flannel.1 ifconfig kube-ipvs0 down ip link delete kube-ipvs0 # etcd \u8bc1\u4e66 mkdir /etc/kubernetes/pki/etcd/ cp /workspace/kubernetes/ssl/*.pem /etc/kubernetes/pki/etcd/ # \u67e5\u770b kubectl get nodes -o wide kubectl get ep kubernetes kubectl get all --all-namespaces -o wide # \u5185\u5bb9 kubectl -n kube-system describe pod/coredns-667f964f9b-qngl5 # \u65e5\u5fd7 kubectl -n kube-system logs pod/coredns-667f964f9b-qngl5 TO-DO-LIST \u00b6 centos 7.x \u5185\u6838\u7248\u672c 3.10.x \u5b58\u5728bugs, \u4f1a\u5bfc\u81f4 Docker\uff0cKubernetes \u8fd0\u884c\u4e0d\u7a33\u5b9a\u3002 \u9700\u8981\u5347\u7ea7\u5230 4.44 \u7248\u672c\u3002 # \u67e5\u770b\u5185\u6838\u7248\u672c $ uname -r Kubeadm \u8bc1\u4e66\u9ed8\u8ba4\u6709\u6548\u671f\u4e00\u5e74\uff0c\u9700\u8981\u5ef6\u957f\u3002 \u9ad8\u53ef\u7528\u67b6\u6784\u65b9\u6848\u5347\u7ea7\u3002 Keepalived + HAProxy","title":"kubeadm deployment"},{"location":"kubernetes/kubeadm-deployment/#_1","text":"\u5b89\u88c5\u4f9d\u8d56 # \u66f4\u65b0yum $ yum update -y # \u5b89\u88c5\u4f9d\u8d56\u5305 $ yum install -y conntrack ipvsadm ipset jq sysstat curl iptables libseccomp bind-utils lvm2 # \u5b89\u88c5 docker $ yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo $ yum install -y docker-ce # \u8bbe\u7f6edocker\u542f\u52a8\u53c2\u6570\uff08\u53ef\u9009\uff09 $ cat <<EOF > /etc/docker/daemon.json { \"exec-opts\": [\"native.cgroupdriver=systemd\"] } EOF # \u542f\u52a8docker\u670d\u52a1 $ service docker restart # \u914d\u7f6eyum\u6e90\uff08\u79d1\u5b66\u4e0a\u7f51\u7684\u540c\u5b66\u53ef\u4ee5\u628a\"mirrors.aliyun.com\"\u66ff\u6362\u4e3a\"packages.cloud.google.com\"\uff09 $ cat <<EOF > /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # \u627e\u5230\u8981\u5b89\u88c5\u7684\u7248\u672c\u53f7 $ yum list kubeadm --showduplicates | sort -r # \u5b89\u88c5\u5de5\u5177 $ yum install -y kubeadm kubelet kubectl --disableexcludes=kubernetes \u5173\u95ed\u9632\u706b\u5899\u3001swap\u3001selinux\u3001dnsmasq\u3001\u91cd\u7f6eiptables # \u5173\u95ed\u9632\u706b\u5899 $ systemctl stop firewalld && systemctl disable firewalld # \u91cd\u7f6eiptables $ iptables -F && iptables -X && iptables -F -t nat && iptables -X -t nat && iptables -P FORWARD ACCEPT # \u67e5\u770b $ iptables -L -n $ iptables-save # \u5173\u95edswap $ swapoff -a $ sed -i '/swap/s/^\\(.*\\)$/#\\1/g' /etc/fstab # \u5173\u95edselinux $ setenforce 0 $ getenforce # \u67e5\u770b\u72b6\u6001 $ vi /etc/sysconfig/selinux # \u6539\u4e3adisabled # \u5173\u95eddnsmasq(\u5426\u5219\u53ef\u80fd\u5bfc\u81f4docker\u5bb9\u5668\u65e0\u6cd5\u89e3\u6790\u57df\u540d) $ service dnsmasq stop && systemctl disable dnsmasq \u5f00\u542fipvs # \u5f00\u542fipvs\u6a21\u5f0f(\u9700\u8981\u6ce8\u610f\u7684\u662f\u8981\u6dfb\u52a0ip_vs\u76f8\u5173\u6a21\u5757) cat > /etc/sysconfig/modules/ipvs.modules <<EOF #!/bin/bash modprobe -- ip_vs modprobe -- ip_vs_rr modprobe -- ip_vs_wrr modprobe -- ip_vs_sh modprobe -- nf_conntrack_ipv4 modprobe br_netfilter EOF # \u751f\u6548 chmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4 # \u5236\u4f5c\u914d\u7f6e\u6587\u4ef6 $ cat > /etc/sysctl.d/kubernetes.conf <<EOF net.bridge.bridge-nf-call-iptables=1 net.bridge.bridge-nf-call-ip6tables=1 net.ipv4.ip_forward=1 net.ipv4.tcp_tw_recycle=1 # \u8868\u793a\u5f00\u542fTCP\u8fde\u63a5\u4e2dTIME-WAIT sockets\u7684\u5feb\u901f\u56de\u6536\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5173\u95ed\u3002 net.ipv4.tcp_keepalive_time=600 # \u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u6ca1\u6709\u6570\u636e\u4f20\u8f93\uff0c\u5c31\u5f00\u59cb\u53d1\u9001\u5b58\u6d3b\u63a2\u6d4b\u5305 net.ipv4.tcp_keepalive_intvl=15 # keepalive\u63a2\u6d4b\u5305\u7684\u53d1\u9001\u95f4\u9694 net.ipv4.tcp_keepalive_probes=3 # \u5982\u679c\u5bf9\u65b9\u4e0d\u4e88\u5e94\u7b54\uff0c\u63a2\u6d4b\u5305\u7684\u53d1\u9001\u6b21\u6570 vm.swappiness=0 # \u7981\u6b62\u4f7f\u7528 swap \u7a7a\u95f4\uff0c\u53ea\u6709\u5f53\u7cfb\u7edf OOM \u65f6\u624d\u5141\u8bb8\u4f7f\u7528\u5b83 vm.overcommit_memory=1 # \u4e0d\u68c0\u67e5\u7269\u7406\u5185\u5b58\u662f\u5426\u591f\u7528 vm.panic_on_oom=0 # \u5f00\u542f OOM fs.inotify.max_user_instances=8192 fs.inotify.max_user_watches=1048576 fs.file-max=52706963 fs.nr_open=52706963 net.ipv6.conf.all.disable_ipv6=1 net.netfilter.nf_conntrack_max=2310720 EOF # \u751f\u6548\u6587\u4ef6 $ sysctl -p /etc/sysctl.d/kubernetes.conf - \u5176\u4ed6 # \u8c03\u6574\u7cfb\u7edf TimeZone $ timedatectl set-timezone Asia/Shanghai # \u5c06\u5f53\u524d\u7684 UTC \u65f6\u95f4\u5199\u5165\u786c\u4ef6\u65f6\u949f $ timedatectl set-local-rtc 0 # \u91cd\u542f\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u65f6\u95f4\u7684\u670d\u52a1 $ systemctl restart rsyslog && systemctl restart crond # \u5173\u95ed\u65e0\u5173\u7684\u670d\u52a1 $ systemctl stop postfix && systemctl disable postfix","title":"\u73af\u5883\u51c6\u5907"},{"location":"kubernetes/kubeadm-deployment/#ha","text":"keepalived # vip: 192.168.10.100 # master-01: 192.168.10.101 (\u4e3b) # master-02: 192.168.10.102 \uff08\u5907\uff09 # \u5b89\u88c5 $ yum install -y keepalived # \u914d\u7f6e\uff08\u67e5\u770b\u6587\u6863\uff09 $ vi /etc/keepalived/keepalived.conf # \u542f\u52a8 $ systemctl enable keepalived && systemctl start keepalived # \u68c0\u67e5 $ ip a $ ping 192.168.10.100 # ping \u4e0d\u901a \u53ef\u80fd\u4e0e\u9632\u706b\u5899\u6709\u5173(firewalld | selinux)","title":"\u9ad8\u53ef\u7528 HA"},{"location":"kubernetes/kubeadm-deployment/#_2","text":"master-01 # \u67e5\u770b\u9ed8\u8ba4\u914d\u7f6e $ kubeadm config print init-defaults $ cd /workspace/kubernetes/configs/ # \u751f\u6210\u914d\u7f6e\u6587\u4ef6 export APISERVER_NAME=192.168.10.100 # export POD_SUBNET=10.100.0.1/16 # for calico export POD_SUBNET=10.244.0.0/16 # for flannel cat <<EOF > ./kubeadm-config.yaml apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration localAPIEndpoint: advertiseAddress: \"${APISERVER_NAME}\" bindPort: 6443 nodeRegistration: taints: - effect: PreferNoSchedule key: node-role.kubernetes.io/master --- apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v1.17.2 imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers controlPlaneEndpoint: \"${APISERVER_NAME}:6443\" networking: serviceSubnet: \"10.97.0.0/16\" podSubnet: \"${POD_SUBNET}\" dnsDomain: \"cluster.local\" apiServer: certSANs: - 192.168.10.100 - 192.168.10.101 - 192.168.10.102 - 192.168.10.121 - 192.168.10.122 etcd: external: endpoints: - https://192.168.10.101:2379 - https://192.168.10.102:2379 caFile: /etc/kubernetes/pki/etcd/ca.pem certFile: /etc/kubernetes/pki/etcd/etcd.pem keyFile: /etc/kubernetes/pki/etcd/etcd-key.pem EOF # \u521d\u59cb\u5316\u96c6\u7fa4 kubeadm init --config=kubeadm-config.yaml --upload-certs # api-server $ echo \"export KUBECONFIG=/etc/kubernetes/admin.conf\" >> ~/.bash_profile $ source ~/.bash_profile \u5b89\u88c5flannel\u7f51\u7edc\u63d2\u4ef6 (on master-01) $ cd /workspace/kubernetes/configs/ # \u4e0b\u8f7d\u6587\u4ef6\uff08\u5e76\u4fee\u6539 image \u6e90\uff09 $ curl -O https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml /workspace/kubernetes/configs/ # \u5b89\u88c5 $ kubectl apply -f kube-flannel.yml for vagrant: eth0 \u7f51\u5361\uff1a nat \u8f6c\u53d1\u8bbf\u95ee\u516c\u7f51\uff08\u9ed8\u8ba4\uff09\uff1b eth1 \u7f51\u5361\uff1a\u4e3b\u673a\u771f\u6b63\u7684 IP\uff0ccluster \u5185\u90e8\u901a\u4fe1\u3002 vi /workspace/kubernetes/configs/kube-flannel.yml ... - --kube-subnet-mgr - --iface=eth1 // \u6dfb\u52a0\u6b64\u884c \u4fee\u6539kube-proxy \u7684 mode \u4e3a ipvs (on master-01) $ kubectl edit cm kube-proxy -n kube-system ... kind: KubeProxyConfiguration mode: \"ipvs\" // \u4fee\u6539\u6b64\u5904 kubectl get pod -n kube-system | grep kube-proxy |awk '{system(\"kubectl delete pod \"$1\" -n kube-system\")}' master-02 $ kubeadm join 192.168.10.100:6443 --token cwn7o6.65gr67a36hdn992i \\ --discovery-token-ca-cert-hash sha256:c021540697fc731ffec34d0a18681f89562ca29a808f1ff9ad941a364b400281 \\ --control-plane --certificate-key 85b550cf7e1c6bfa3cdb626615722f6efe39cbe24e9f1f37da985685a8a3c643 etcd health error kubectl exec -it etcd-centos-master-01 sh -n kube-system ETCDCTL_API=3 alias etcdctl='etcdctl --endpoints= https://192.168.10.101:2379 --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key' ETCDCTL_API=3 etcdctl member list worker # \u67e5\u770b\u52a0\u5165 worker kubeadm token create --print-join-command # \u52a0\u5165\u96c6\u7fa4 $ kubeadm join 192.168.10.100:6443 --token 7zwmn0.k1m7i5docr5rkv49 \\ --discovery-token-ca-cert-hash sha256:c021540697fc731ffec34d0a18681f89562ca29a808f1ff9ad941a364b400281","title":"\u96c6\u7fa4\u914d\u7f6e"},{"location":"kubernetes/kubeadm-deployment/#_3","text":"# \u91cd\u7f6e kubeadm reset rm -rf /var/lib/etcd/* rm -rf /etc/cni/ rm -rf /var/lib/cni/ ifconfig cni0 down ip link delete cni0 ifconfig flannel.1 down ip link delete flannel.1 ifconfig kube-ipvs0 down ip link delete kube-ipvs0 # etcd \u8bc1\u4e66 mkdir /etc/kubernetes/pki/etcd/ cp /workspace/kubernetes/ssl/*.pem /etc/kubernetes/pki/etcd/ # \u67e5\u770b kubectl get nodes -o wide kubectl get ep kubernetes kubectl get all --all-namespaces -o wide # \u5185\u5bb9 kubectl -n kube-system describe pod/coredns-667f964f9b-qngl5 # \u65e5\u5fd7 kubectl -n kube-system logs pod/coredns-667f964f9b-qngl5","title":"\u5e38\u7528\u547d\u4ee4"},{"location":"kubernetes/kubeadm-deployment/#to-do-list","text":"centos 7.x \u5185\u6838\u7248\u672c 3.10.x \u5b58\u5728bugs, \u4f1a\u5bfc\u81f4 Docker\uff0cKubernetes \u8fd0\u884c\u4e0d\u7a33\u5b9a\u3002 \u9700\u8981\u5347\u7ea7\u5230 4.44 \u7248\u672c\u3002 # \u67e5\u770b\u5185\u6838\u7248\u672c $ uname -r Kubeadm \u8bc1\u4e66\u9ed8\u8ba4\u6709\u6548\u671f\u4e00\u5e74\uff0c\u9700\u8981\u5ef6\u957f\u3002 \u9ad8\u53ef\u7528\u67b6\u6784\u65b9\u6848\u5347\u7ea7\u3002 Keepalived + HAProxy","title":"TO-DO-LIST"},{"location":"kubernetes/tmp%20notes/","text":"\u5e38\u7528 $ docker rm $(docker ps -q -f status=exited)","title":"Tmp notes"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","text":"\u524d\u63d0 \u00b6 \u9762\u5411\u5bf9\u8c61 \u7ee7\u627f\uff0c\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b \u5c01\u88c5\uff0c\u6570\u636e\u7684\u5c40\u9650\u548c\u4fdd\u62a4 \u591a\u6001\uff0c\u7edf\u4e00\u63a5\u53e3\u4e0d\u540c\u5b9e\u73b0 \u9762\u5411\u5bf9\u8c61\u4e3e\u4f8b class jQuery { constructor(selecor) { let slice = Array.prototype.slice; let dom = slice.call(document.querySelectorAll(selecor)) let len = dom ? dom.length : 0; for(let i = 0; i <= len - 1; i ++) { this[i] = dom[i]; } this.length = len; this.selecor = selecor || ''; } append(node) {} addClass(name) {} html(data) {} // ... } window.$ = function(selecor) { // \u5de5\u5382\u6a21\u5f0f return new jQuery(selecor); } UML \u7c7b\u56fe UML\uff1a\u7edf\u4e00\u5efa\u6a21\u8bed\u8a00(Unified Modeling Language) \u7c7b\u56fe\uff1a\u5c5e\u6027\uff0c\u65b9\u6cd5 \u5173\u7cfb \u6cdb\u5316\uff0c\u8868\u793a\u7ee7\u627f \u5173\u8054\uff0c\u8868\u793a\u5f15\u7528 \u8bbe\u8ba1\u539f\u5219 \u00b6 \u4f55\u4e3a\u8bbe\u8ba1 \u00b6 < > \u51c6\u5219 \u5c0f\u5373\u662f\u7f8e \u8ba9\u6bcf\u4e2a\u7a0b\u5e8f\u53ea\u505a\u597d\u4e00\u4ef6\u4e8b \u5feb\u901f\u5efa\u7acb\u539f\u578b \u820d\u5f03\u9ad8\u6548\u7387\u800c\u53d6\u53ef\u79fb\u690d\u6027 \u91c7\u7528\u7eaf\u6587\u672c\u6765\u5b58\u50a8\u6570\u636e \u5145\u5206\u5229\u7528\u8f6f\u4ef6\u7684\u6760\u6746\u6548\u5e94(\u8f6f\u4ef6\u590d\u7528) \u4f7f\u7528 shell \u811a\u672c\u6765\u63d0\u9ad8\u6760\u6746\u6548\u5e94\u548c\u53ef\u79fb\u690d\u6027 \u907f\u514d\u5f3a\u5236\u6027\u7684\u7528\u6237\u754c\u9762 \u8ba9\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u79f0\u4e3a\u8fc7\u6ee4\u5668 \u8bbe\u8ba1\u539f\u5219 \u00b6 SOLID \u4e94\u5927\u8bbe\u8ba1\u539f\u5219 S - \u5355\u4e00\u6307\u8d23\u539f\u5219 O - \u5f00\u653e\u5c01\u95ed\u539f\u5219 L - \u91cc\u6c0f\u7f6e\u6362\u539f\u5219 I - \u63a5\u53e3\u72ec\u7acb\u539f\u5219 D - \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u5355\u4e00\u6307\u8d23\u539f\u5219 \u4e00\u4e2a\u7a0b\u5e8f\u53ea\u505a\u597d\u4e00\u4ef6\u4e8b\u60c5 \u5982\u679c\u529f\u80fd\u8fc7\u4e8e\u590d\u6742\u5c31\u62c6\u5206\uff0c\u6bcf\u4e2a\u90e8\u5206\u4fdd\u6301\u72ec\u7acb \u5f00\u653e\u5c01\u95ed\u539f\u5219 \u5bf9\u6269\u5c55\u5f00\u53d1\uff0c\u5bf9\u4fee\u6539\u5c01\u95ed \u589e\u52a0\u9700\u6c42\u65f6\uff0c\u6269\u5c55\u65b0\u4ee3\u7801\uff0c\u800c\u975e\u4fee\u6539\u5df2\u6709\u4ee3\u7801 \u8fd9\u662f\u8f6f\u4ef6\u8bbe\u8ba1\u7684\u7ec8\u6781\u76ee\u6807 \u91cc\u6c0f\u7f6e\u6362\u539f\u5219 \u5b50\u7c7b\u80fd\u8986\u76d6\u7236\u7c7b \u7236\u7c7b\u80fd\u51fa\u73b0\u7684\u5730\u65b9\u5b50\u7c7b\u5c31\u80fd\u51fa\u73b0 \u63a5\u53e3\u72ec\u7acb\u539f\u5219 \u4fdd\u6301\u63a5\u53e3\u7684\u5355\u4e00\u72ec\u7acb\uff0c\u907f\u514d\u51fa\u73b0\u201c\u80d6\u201d\u63a5\u53e3 typescript \u6709\u63a5\u53e3 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u9762\u5411\u63a5\u53e3\uff08\u62bd\u8c61\uff09\u7f16\u7a0b\uff0c\u4f9d\u8d56\u4e8e\u62bd\u8c61\u800c\u975e\u5177\u4f53 \u4f7f\u7528\u65b9\u53ea\u5173\u6ce8\u63a5\u53e3\uff0c\u800c\u4e0d\u5173\u6ce8\u5177\u4f53\u7c7b\u7684\u5b9e\u73b0 \u8bbe\u8ba1\u6a21\u5f0f \u00b6 \u5de5\u5382\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u5c06 new \u64cd\u4f5c\u5355\u72ec\u5c01\u88c5 \u9047\u5f97 new \u65f6\uff0c\u5c31\u8981\u8003\u8651\u662f\u5426\u4f7f\u7528\u5de5\u5382\u6a21\u5f0f UML\u7c7b\u56fe \u4ee3\u7801 class Product { constructor(name) { this.name = name; } init() {} fn1() {} fn2() {} } class Creator { create(name) { return new Product(name); } } export default Creator; \u573a\u666f jQuery - $('p') React.createElement class Vnode(tag, attrs, children) { /*... */ } React.createElement = function(tag, attrs, children) { //... return new Vnode(tag, attrs, children); } Vue \u5f02\u6b65\u7ec4\u4ef6 \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u6784\u9020\u51fd\u6570\u548c\u521b\u5efa\u8005\u5206\u79bb \u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219 \u5355\u4f8b\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u7cfb\u7edf\u4e2d\u88ab\u552f\u4e00\u4f7f\u7528 \u4e00\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b \u9700\u8981\u7528\u5230 java/typescript \u7684\u7279\u6027 (private)\uff0c\u6216\u901a\u8fc7 IIFE \u548c\u95ed\u5305\u5b9e\u73b0 \u4ee3\u7801 class SingleObject { login() { console.log('login'); } }; SingleObject.getInstance = (function() { let instance = null; return function() { if (!instance) { instance = new SingleObject(); } return instance; }; })(); \u573a\u666f jQuery \u53ea\u6709\u4e00\u4e2a\u5168\u5c40\u51fd\u6570 $ \u767b\u9646\u7a97 vuex \u4e2d\u7684 store \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u7b26\u5408\u5355\u4e00\u6307\u8d23\u539f\u5219\uff0c\u5b9e\u529b\u5316\u552f\u4e00\u5bf9\u8c61 \u9002\u914d\u5668\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u65e7\u63a5\u53e3\u4e0e\u4f7f\u7528\u8005\u683c\u5f0f\u4e0d\u517c\u5bb9 \u4e2d\u95f4\u52a0\u4e00\u4e2a\u9002\u914d\u5668\u8f6c\u6362\u63a5\u53e3 UML \u7c7b\u56fe \u4ee3\u7801 // \u65e7\u63a5\u53e3 class Adaptee { specificRequst() { return '\u65e5\u672c\u63d2\u5934'; } } // \u9002\u914d\u5668 export class Target { constructor() { this.adaptee = new Adaptee(); } request() { const info = this.adaptee.specificRequst(); return `${info} - \u8f6c\u6362\u5668 - \u4e2d\u56fd\u63d2\u5934`; } } // \u4f7f\u7528\u8005 export class Client { constructor(target) { this.target = target; } do() { const info = this.target.request(); console.log('\u9002\u914d\u5668\u6a21\u5f0f\uff1a', info); } } \u573a\u666f Vue.computed() \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u5c06\u65e7\u63a5\u53e3\u548c\u4f7f\u7528\u8005\u8fdb\u884c\u5206\u79bb \u7b26\u5408\u5f00\u53d1\u5c01\u95ed\u539f\u5219 \u88c5\u9970\u5668\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u529f\u80fd \u4e0d\u6539\u53d8\u5176\u539f\u6709\u7684\u7ed3\u6784\u548c\u529f\u80fd UML \u7c7b\u56fe \u4ee3\u7801 class Circle { draw() { console.log('draw a circle'); } } class Decorator { constructor(circle) { this.circle = circle; } draw() { this.circle.draw(); this.setRedBoarder(); } setRedBoarder() { console.log('set red border'); } } \u573a\u666f ES7 \u88c5\u9970\u5668 // \u88c5\u9970\u7c7b @testDec class Demo { /*...*/ } function testDec(target) { target.isDec = true; } console.log(Demo.isDec); // \u88c5\u9970\u5c5e\u6027 // ... ``` // \u88c5\u9970\u65b9\u6cd5 // ... function readonly(target, name, decriptor) { decriptor.writable = false; return decriptor; } // ... function log(target, name, decriptor) { var oldVal = decriptor.value; decriptor.value = function() { console.log( Calling ${name} ); return oldVal.apply(this, arguments); } return decriptor; } ``` core-decorator \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u4ee3\u7406\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u4f7f\u7528\u8005\u65e0\u6743\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61 \u4e2d\u95f4\u52a0\u4ee3\u7406\uff0c\u901a\u8fc7\u4ee3\u7406\u505a\u6388\u6743\u548c\u63a7\u5236 UML \u7c7b\u56fe \u4ee3\u7801 class RealImage { constructor(filename) { this.filename = filename; this.loadFromDisk() } loadFromDisk() { console.log('loading...' + this.filename); } display() { console.log('display: ' + this.filename); } } class ProxyImage { constructor(filename) { this.realImage = new RealImage(filename); } display() { this.realImage.display(); } } \u573a\u666f \u7f51\u9875\u4e8b\u4ef6\u4ee3\u7406 JQuery $.proxy ES6 Proxy // \u660e\u661f const star = { name: '\u8521\u5f90\u5764', age: 23, phone: 1861234567 }; // \u7ecf\u7eaa\u4eba const agent = new Proxy(star , { get: function(target, key) { if(key === 'phone') { return 'agent phone: 1351234567' } if (key === 'price') { return 8000; } return target[key]; }, set: function(target, key, val) { if (key === 'customPrice') { if (val < 6000) { throw new Error('\u4ef7\u683c\u592a\u4f4e'); } else { target[key] = val; return true; } } } }); \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u4ee3\u7406\u7c7b\u4e0e\u76ee\u6807\u7c7b\u5206\u79bb\uff0c\u9694\u79bb\u5f00\u76ee\u6807\u7c7b\u548c\u4f7f\u7528\u8005 \u7b26\u5408\u5f00\u53d1\u5c01\u95ed\u539f\u5219 \u5916\u89c2\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u4e3a\u5b50\u7cfb\u7edf\u7684\u4e00\u7ec4\u7edf\u4e00\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3 \u4f7f\u7528\u8005\u4f7f\u7528\u8fd9\u4e2a\u9ad8\u5c42\u63a5\u53e3 UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u4e0d\u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219\u548c\u5f00\u653e\u5c01\u95ed\u539f\u5219\uff0c\u6545\u8c28\u614e\u4f7f\u7528\uff0c\u4e0d\u53ef\u6ee5\u7528 \u89c2\u5bdf\u8005\u6a21\u5f0f \u00b6 \u4ecb\u7ecd \u53d1\u5e03 & \u8ba2\u9605 \u4e00\u5bf9\u591a UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u8fed\u4ee3\u5668\u6a21\u5f0f \u00b6 \u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u72b6\u6001\u6a21\u5f0f \u00b6 \u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u804c\u8d23\u94fe\u6a21\u5f0f \u00b6 \u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"Javascript \u8bbe\u8ba1\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_1","text":"\u9762\u5411\u5bf9\u8c61 \u7ee7\u627f\uff0c\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b \u5c01\u88c5\uff0c\u6570\u636e\u7684\u5c40\u9650\u548c\u4fdd\u62a4 \u591a\u6001\uff0c\u7edf\u4e00\u63a5\u53e3\u4e0d\u540c\u5b9e\u73b0 \u9762\u5411\u5bf9\u8c61\u4e3e\u4f8b class jQuery { constructor(selecor) { let slice = Array.prototype.slice; let dom = slice.call(document.querySelectorAll(selecor)) let len = dom ? dom.length : 0; for(let i = 0; i <= len - 1; i ++) { this[i] = dom[i]; } this.length = len; this.selecor = selecor || ''; } append(node) {} addClass(name) {} html(data) {} // ... } window.$ = function(selecor) { // \u5de5\u5382\u6a21\u5f0f return new jQuery(selecor); } UML \u7c7b\u56fe UML\uff1a\u7edf\u4e00\u5efa\u6a21\u8bed\u8a00(Unified Modeling Language) \u7c7b\u56fe\uff1a\u5c5e\u6027\uff0c\u65b9\u6cd5 \u5173\u7cfb \u6cdb\u5316\uff0c\u8868\u793a\u7ee7\u627f \u5173\u8054\uff0c\u8868\u793a\u5f15\u7528","title":"\u524d\u63d0"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_2","text":"","title":"\u8bbe\u8ba1\u539f\u5219"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_3","text":"< > \u51c6\u5219 \u5c0f\u5373\u662f\u7f8e \u8ba9\u6bcf\u4e2a\u7a0b\u5e8f\u53ea\u505a\u597d\u4e00\u4ef6\u4e8b \u5feb\u901f\u5efa\u7acb\u539f\u578b \u820d\u5f03\u9ad8\u6548\u7387\u800c\u53d6\u53ef\u79fb\u690d\u6027 \u91c7\u7528\u7eaf\u6587\u672c\u6765\u5b58\u50a8\u6570\u636e \u5145\u5206\u5229\u7528\u8f6f\u4ef6\u7684\u6760\u6746\u6548\u5e94(\u8f6f\u4ef6\u590d\u7528) \u4f7f\u7528 shell \u811a\u672c\u6765\u63d0\u9ad8\u6760\u6746\u6548\u5e94\u548c\u53ef\u79fb\u690d\u6027 \u907f\u514d\u5f3a\u5236\u6027\u7684\u7528\u6237\u754c\u9762 \u8ba9\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u79f0\u4e3a\u8fc7\u6ee4\u5668","title":"\u4f55\u4e3a\u8bbe\u8ba1"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_4","text":"SOLID \u4e94\u5927\u8bbe\u8ba1\u539f\u5219 S - \u5355\u4e00\u6307\u8d23\u539f\u5219 O - \u5f00\u653e\u5c01\u95ed\u539f\u5219 L - \u91cc\u6c0f\u7f6e\u6362\u539f\u5219 I - \u63a5\u53e3\u72ec\u7acb\u539f\u5219 D - \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u5355\u4e00\u6307\u8d23\u539f\u5219 \u4e00\u4e2a\u7a0b\u5e8f\u53ea\u505a\u597d\u4e00\u4ef6\u4e8b\u60c5 \u5982\u679c\u529f\u80fd\u8fc7\u4e8e\u590d\u6742\u5c31\u62c6\u5206\uff0c\u6bcf\u4e2a\u90e8\u5206\u4fdd\u6301\u72ec\u7acb \u5f00\u653e\u5c01\u95ed\u539f\u5219 \u5bf9\u6269\u5c55\u5f00\u53d1\uff0c\u5bf9\u4fee\u6539\u5c01\u95ed \u589e\u52a0\u9700\u6c42\u65f6\uff0c\u6269\u5c55\u65b0\u4ee3\u7801\uff0c\u800c\u975e\u4fee\u6539\u5df2\u6709\u4ee3\u7801 \u8fd9\u662f\u8f6f\u4ef6\u8bbe\u8ba1\u7684\u7ec8\u6781\u76ee\u6807 \u91cc\u6c0f\u7f6e\u6362\u539f\u5219 \u5b50\u7c7b\u80fd\u8986\u76d6\u7236\u7c7b \u7236\u7c7b\u80fd\u51fa\u73b0\u7684\u5730\u65b9\u5b50\u7c7b\u5c31\u80fd\u51fa\u73b0 \u63a5\u53e3\u72ec\u7acb\u539f\u5219 \u4fdd\u6301\u63a5\u53e3\u7684\u5355\u4e00\u72ec\u7acb\uff0c\u907f\u514d\u51fa\u73b0\u201c\u80d6\u201d\u63a5\u53e3 typescript \u6709\u63a5\u53e3 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u9762\u5411\u63a5\u53e3\uff08\u62bd\u8c61\uff09\u7f16\u7a0b\uff0c\u4f9d\u8d56\u4e8e\u62bd\u8c61\u800c\u975e\u5177\u4f53 \u4f7f\u7528\u65b9\u53ea\u5173\u6ce8\u63a5\u53e3\uff0c\u800c\u4e0d\u5173\u6ce8\u5177\u4f53\u7c7b\u7684\u5b9e\u73b0","title":"\u8bbe\u8ba1\u539f\u5219"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_5","text":"","title":"\u8bbe\u8ba1\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_6","text":"\u4ecb\u7ecd \u5c06 new \u64cd\u4f5c\u5355\u72ec\u5c01\u88c5 \u9047\u5f97 new \u65f6\uff0c\u5c31\u8981\u8003\u8651\u662f\u5426\u4f7f\u7528\u5de5\u5382\u6a21\u5f0f UML\u7c7b\u56fe \u4ee3\u7801 class Product { constructor(name) { this.name = name; } init() {} fn1() {} fn2() {} } class Creator { create(name) { return new Product(name); } } export default Creator; \u573a\u666f jQuery - $('p') React.createElement class Vnode(tag, attrs, children) { /*... */ } React.createElement = function(tag, attrs, children) { //... return new Vnode(tag, attrs, children); } Vue \u5f02\u6b65\u7ec4\u4ef6 \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u6784\u9020\u51fd\u6570\u548c\u521b\u5efa\u8005\u5206\u79bb \u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219","title":"\u5de5\u5382\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_7","text":"\u4ecb\u7ecd \u7cfb\u7edf\u4e2d\u88ab\u552f\u4e00\u4f7f\u7528 \u4e00\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b \u9700\u8981\u7528\u5230 java/typescript \u7684\u7279\u6027 (private)\uff0c\u6216\u901a\u8fc7 IIFE \u548c\u95ed\u5305\u5b9e\u73b0 \u4ee3\u7801 class SingleObject { login() { console.log('login'); } }; SingleObject.getInstance = (function() { let instance = null; return function() { if (!instance) { instance = new SingleObject(); } return instance; }; })(); \u573a\u666f jQuery \u53ea\u6709\u4e00\u4e2a\u5168\u5c40\u51fd\u6570 $ \u767b\u9646\u7a97 vuex \u4e2d\u7684 store \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u7b26\u5408\u5355\u4e00\u6307\u8d23\u539f\u5219\uff0c\u5b9e\u529b\u5316\u552f\u4e00\u5bf9\u8c61","title":"\u5355\u4f8b\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_8","text":"\u4ecb\u7ecd \u65e7\u63a5\u53e3\u4e0e\u4f7f\u7528\u8005\u683c\u5f0f\u4e0d\u517c\u5bb9 \u4e2d\u95f4\u52a0\u4e00\u4e2a\u9002\u914d\u5668\u8f6c\u6362\u63a5\u53e3 UML \u7c7b\u56fe \u4ee3\u7801 // \u65e7\u63a5\u53e3 class Adaptee { specificRequst() { return '\u65e5\u672c\u63d2\u5934'; } } // \u9002\u914d\u5668 export class Target { constructor() { this.adaptee = new Adaptee(); } request() { const info = this.adaptee.specificRequst(); return `${info} - \u8f6c\u6362\u5668 - \u4e2d\u56fd\u63d2\u5934`; } } // \u4f7f\u7528\u8005 export class Client { constructor(target) { this.target = target; } do() { const info = this.target.request(); console.log('\u9002\u914d\u5668\u6a21\u5f0f\uff1a', info); } } \u573a\u666f Vue.computed() \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u5c06\u65e7\u63a5\u53e3\u548c\u4f7f\u7528\u8005\u8fdb\u884c\u5206\u79bb \u7b26\u5408\u5f00\u53d1\u5c01\u95ed\u539f\u5219","title":"\u9002\u914d\u5668\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_9","text":"\u4ecb\u7ecd \u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u529f\u80fd \u4e0d\u6539\u53d8\u5176\u539f\u6709\u7684\u7ed3\u6784\u548c\u529f\u80fd UML \u7c7b\u56fe \u4ee3\u7801 class Circle { draw() { console.log('draw a circle'); } } class Decorator { constructor(circle) { this.circle = circle; } draw() { this.circle.draw(); this.setRedBoarder(); } setRedBoarder() { console.log('set red border'); } } \u573a\u666f ES7 \u88c5\u9970\u5668 // \u88c5\u9970\u7c7b @testDec class Demo { /*...*/ } function testDec(target) { target.isDec = true; } console.log(Demo.isDec); // \u88c5\u9970\u5c5e\u6027 // ... ``` // \u88c5\u9970\u65b9\u6cd5 // ... function readonly(target, name, decriptor) { decriptor.writable = false; return decriptor; } // ... function log(target, name, decriptor) { var oldVal = decriptor.value; decriptor.value = function() { console.log( Calling ${name} ); return oldVal.apply(this, arguments); } return decriptor; } ``` core-decorator \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"\u88c5\u9970\u5668\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_10","text":"\u4ecb\u7ecd \u4f7f\u7528\u8005\u65e0\u6743\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61 \u4e2d\u95f4\u52a0\u4ee3\u7406\uff0c\u901a\u8fc7\u4ee3\u7406\u505a\u6388\u6743\u548c\u63a7\u5236 UML \u7c7b\u56fe \u4ee3\u7801 class RealImage { constructor(filename) { this.filename = filename; this.loadFromDisk() } loadFromDisk() { console.log('loading...' + this.filename); } display() { console.log('display: ' + this.filename); } } class ProxyImage { constructor(filename) { this.realImage = new RealImage(filename); } display() { this.realImage.display(); } } \u573a\u666f \u7f51\u9875\u4e8b\u4ef6\u4ee3\u7406 JQuery $.proxy ES6 Proxy // \u660e\u661f const star = { name: '\u8521\u5f90\u5764', age: 23, phone: 1861234567 }; // \u7ecf\u7eaa\u4eba const agent = new Proxy(star , { get: function(target, key) { if(key === 'phone') { return 'agent phone: 1351234567' } if (key === 'price') { return 8000; } return target[key]; }, set: function(target, key, val) { if (key === 'customPrice') { if (val < 6000) { throw new Error('\u4ef7\u683c\u592a\u4f4e'); } else { target[key] = val; return true; } } } }); \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u4ee3\u7406\u7c7b\u4e0e\u76ee\u6807\u7c7b\u5206\u79bb\uff0c\u9694\u79bb\u5f00\u76ee\u6807\u7c7b\u548c\u4f7f\u7528\u8005 \u7b26\u5408\u5f00\u53d1\u5c01\u95ed\u539f\u5219","title":"\u4ee3\u7406\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_11","text":"\u4ecb\u7ecd \u4e3a\u5b50\u7cfb\u7edf\u7684\u4e00\u7ec4\u7edf\u4e00\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3 \u4f7f\u7528\u8005\u4f7f\u7528\u8fd9\u4e2a\u9ad8\u5c42\u63a5\u53e3 UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1 \u4e0d\u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219\u548c\u5f00\u653e\u5c01\u95ed\u539f\u5219\uff0c\u6545\u8c28\u614e\u4f7f\u7528\uff0c\u4e0d\u53ef\u6ee5\u7528","title":"\u5916\u89c2\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_12","text":"\u4ecb\u7ecd \u53d1\u5e03 & \u8ba2\u9605 \u4e00\u5bf9\u591a UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_13","text":"\u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"\u8fed\u4ee3\u5668\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_14","text":"\u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"\u72b6\u6001\u6a21\u5f0f"},{"location":"learning%20notes/Javascript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_15","text":"\u4ecb\u7ecd UML \u7c7b\u56fe \u4ee3\u7801 \u573a\u666f \u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1","title":"\u804c\u8d23\u94fe\u6a21\u5f0f"},{"location":"learning%20notes/Koa%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","text":"","title":"Koa\u6e90\u7801\u89e3\u6790"},{"location":"learning%20notes/Typescript%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"Typescript \u5b66\u4e60\u7b14\u8bb0"},{"location":"learning%20notes/Webpack%205%20%E6%8E%A2%E7%B4%A2/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"Webpack 5 \u63a2\u7d22"},{"location":"learning%20notes/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E7%BA%BF%E6%96%87/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"\u4f5c\u7528\u57df\u94fe\u4e0e\u6267\u884c\u4e0a\u7ebf\u6587"},{"location":"learning%20notes/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"\u539f\u578b\u94fe\u4e0e\u7ee7\u627f"},{"location":"learning%20notes/%E6%89%8B%E6%92%B8%20Promise/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"\u624b\u64b8 Promise"},{"location":"learning%20notes/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"\u6d4f\u89c8\u5668\u5185\u6838\u6a21\u5757"},{"location":"learning%20notes/%E9%97%AD%E5%8C%85/","text":"\u7b14\u8bb0\u6563\u4e71\uff0c\u5c1a\u672a\u6574\u7406","title":"\u95ed\u5305"},{"location":"serverless/concept/","text":"\u76ee\u5f55 \u00b6 Why Cloud Native Cloud Native \u5386\u53f2 \u4ec0\u4e48\u662f Serverless \u5bf9\u6bd4 Serverful IaaS/PaaS/Caas/FaaS \u7b49\u540d\u8bcd \u4ec0\u4e48\u4e0d\u662f Serverless \u4e00\u4e2a\u4f8b\u5b50 Serverless \u7684\u6280\u672f\u7279\u70b9 Serverless \u7684\u4f18\u52bf Serverless \u7684\u5c40\u9650\u6027 Serverless \u5e94\u7528\u573a\u666f Serverless \u5f00\u6e90\u6846\u67b6 CNCF Serverless WG \u6b63\u6587 \u00b6 Why Cloud Native \u00b6 Break up monolith \u63d0\u5347\u8d44\u6e90\u5229\u7528\u7387 \u8282\u7701\u6210\u672c Abstraction of Infrastructure \u4e2a\u4eba\uff1a\u5f00\u53d1\u8005\u5173\u6ce8 Code \u800c\u975e Infrastructure \u516c\u53f8\uff1a\u66f4\u5feb\u7684\u5f00\u62d3\u5e02\u573a\uff08Money\uff09 Cloud Native \u5386\u53f2 \u00b6 \u56e0\u6b64\uff0c Serverless \u662f\u4e91\u539f\u751f\u6280\u672f\u53d1\u5c55\u7684\u9ad8\u7ea7\u9636\u6bb5\u3002 \u4e0a\u4e00\u5bb6\u5355\u4f4d\u8fd8\u5904\u5728 Data Centre \u9636\u6bb5\uff0c\u800c\u4eca\u6211\u5728\u7814\u7a76 Serverless, \u770b\u6765\u6211\u8fdb\u5316\u4e86\u3002 \u4ec0\u4e48\u662f Serverless \u00b6 \u5f00\u53d1\u8005\u4e0d\u5173\u6ce8\u670d\u52a1\u5668\uff0c\u53ea\u5173\u6ce8\u4ee3\u7801\u53ca\u4e1a\u52a1\u903b\u8f91\u3002 Serverless \u6307\u7684\u662f\u670d\u52a1\u7aef\u903b\u8f91\u7531\u5f00\u53d1\u8005\u5b9e\u73b0\uff0c\u8fd0\u884c\u5728\u65e0\u72b6\u6001\u7684\u8ba1\u7b97\u5bb9\u5668\u4e2d\uff0c\u7531\u4e8b\u4ef6\u89e6\u53d1\uff0c\u5b8c\u5168\u88ab\u7b2c\u4e09\u65b9\u7ba1\u7406\uff0c\u800c\u4e1a\u52a1\u5c42\u9762\u7684\u72b6\u6001\u5219\u8bb0\u5f55\u5728\u6570\u636e\u5e93\u6216\u5b58\u50a8\u8d44\u6e90\u4e2d\u3002 \u5173\u952e\u8bcd\uff1ano server\uff0cstateless\uff0cevent-driven \u5bf9\u6bd4 Serverful \u00b6 \u5f31\u5316\u4e86\u5b58\u50a8\u548c\u8ba1\u7b97\u4e4b\u95f4\u7684\u8054\u7cfb \u4ee3\u7801\u7684\u6267\u884c\u4e0d\u518d\u9700\u8981\u624b\u52a8\u5206\u914d\u8d44\u6e90 \u6309\u4f7f\u7528\u91cf\u8ba1\u8d39 IaaS/PaaS/Caas/FaaS \u7b49\u540d\u8bcd \u00b6 IaaS\uff1aInfrastructure as a Service PaaS\uff1aPlatform as a Service CaaS\uff1aContainer as a Service Faas\uff1a Function as a Service AaaS ... \u4ec0\u4e48\u4e0d\u662f Serverless \u00b6 \u5982\u679c\u4f60\u7684PaaS\u53ef\u4ee5\u5c06\u4ee5\u524d\u534a\u79d2\u542f\u52a8\u7684\u5e94\u7528\u572820ms\u5185\u542f\u52a8\uff0c\u5c31\u53eb\u5b83Serverless\u3002\u2014\u2014Adrian Cockcroft \u5927\u90e8\u5206 PaaS \u5e94\u7528\u4e0d\u4f1a\u4e3a\u4e86\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u542f\u52a8\u5e76\u7ed3\u675f\u6574\u4e2a\u5e94\u7528\uff0c\u800c this is what FaaS does\u3002 Serverless \u2260 FaaS \u00b6 \u4ece\u5916\u5ef6\u6765\u770b\uff0cServerless \u6bd4 FaaS \u7684\u5916\u5ef6\u8981\u5e7f\uff0cFaaS \u4e3b\u8981\u89e3\u51b3\u7684\u662f\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u4ee3\u7801\u903b\u8f91\u5982\u4f55\u505a\u5230 Serverless\uff0c\u53ef\u4ee5\u53eb\u505a Serverless Compute\u3002 \u6709\u5f20\u8001\u56fe\u627e\u4e0d\u5230\u4e86\uff0c\u4e0b\u8fb9\u627e\u4e86\u4e00\u5f20 Spring Serverless \u5b98\u7f51\u4ecb\u7ecd\u9875\u7684\u56fe\u4ee3\u66ff\uff0c\u610f\u601d\u5dee\u4e0d\u591a\u3002 \u76ee\u524d\u4e1a\u754c\u7684\u5404\u7c7b Serverless \u5b9e\u73b0\u6309\u529f\u80fd\u800c\u8a00\uff0c\u4e3b\u8981\u4e3a\u5e94\u7528\u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4e2a\u65b9\u9762\u7684\u652f\u6301\uff1a\u51fd\u6570\u5373\u670d\u52a1\uff08Function as a Service\uff0cFaaS\uff09\u4ee5\u53ca\u540e\u53f0\u5373\u670d\u52a1\uff08Backend as a Service\uff0cBaaS\uff09\u3002 FaaS : FaaS \u63d0\u4f9b\u4e86\u4e00\u4e2a\u8ba1\u7b97\u5e73\u53f0\uff0c\u5728\u8fd9\u4e2a\u5e73\u53f0\u4e0a\uff0c\u5e94\u7528\u4ee5\u4e00\u4e2a\u6216\u591a\u4e2a\u51fd\u6570\u7684\u5f62\u5f0f\u5f00\u53d1\u3001\u8fd0\u884c\u548c\u7ba1\u7406\u3002 Faas \u7684\u4e3b\u8981\u6982\u5ff5\u662f\uff0c\u5c06\u4f7f\u7528\u4e91\u670d\u52a1\u7684\u8fc7\u7a0b\u53d8\u5f97\u548c\u4f20\u7edf\u7f16\u7a0b\u4e00\u6837\uff1a\u4e00\u4e2a\u5e94\u7528\u7531\u5f88\u591a\u4e2a\u51fd\u6570\u7ec4\u6210\uff0c\u6bcf\u4e2a\u51fd\u6570\u6709\u8f93\u5165\u8f93\u51fa\uff0c\u5728\u51fd\u6570\u5185\u5b8c\u6210\u5fc5\u8981\u7684\u903b\u8f91\u3002\u5f00\u53d1\u8005\u53ea\u9700\u8981\u7f16\u5199\u597d\u51fd\u6570\u4ee3\u7801\uff0c\u5c06\u4ee3\u7801\u6ce8\u518c\u5230\u4e91\u7aef\uff0c\u5c06\u8fd9\u4e9b\u51fd\u6570\u7ec4\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5e94\u7528\u5373\u53ef\u3002 BaaS : \u901a\u8fc7 BaaS \u5e73\u53f0\u5c06\u5e94\u7528\u6240\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\uff0c\u5982\u6570\u636e\u5e93\u3001\u6d88\u606f\u961f\u5217\u53ca\u5b58\u50a8\u7b49\u670d\u52a1\u5316\u5e76\u53d1\u5e03\u51fa\u6765\uff0c\u7528\u6237\u901a\u8fc7\u5411 BaaS \u5e73\u53f0\u7533\u8bf7\u6240\u9700\u8981\u7684\u670d\u52a1\u8fdb\u884c\u6d88\u8d39\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u8fd9\u4e9b\u670d\u52a1\u7684\u5177\u4f53\u8fd0\u7ef4\u3002 \u4e00\u4e2a\u4f8b\u5b50 \u00b6 \u4e00\u4e2a\u4f20\u7edf\u7684\u4e09\u5c42 C/S \u67b6\u6784 \u6539\u9020\u6210 Serverless \u67b6\u6784 1. \u4e00\u4e2a\u7b2c\u4e09\u65b9\u7684 BaaS \u670d\u52a1\uff0c\u8eab\u4efd\u9a8c\u8bc1\u903b\u8f91 2. \u53e6\u4e00\u4e2a BaaS \u793a\u4f8b\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u4e00\u90e8\u5206\u6570\u636e\u5e93\u5185\u5bb9 3. \u5148\u524d\u670d\u52a1\u5668\u7aef\u7684\u90e8\u5206\u903b\u8f91\u5df2\u7ecf\u8f6c\u79fb\u5230\u4e86\u5ba2\u6237\u7aef 4. \u670d\u52a1\u7aef\uff0c\u641c\u7d22\u529f\u80fd\u53ef\u4ee5\u4ece\u6301\u7eed\u8fd0\u884c\u7684\u670d\u52a1\u7aef\u4e2d\u62c6\u5206\u51fa\u6765\uff0c\u4ee5 FaaS \u7684\u65b9\u5f0f\u5b9e\u73b0 5. \u670d\u52a1\u7aef\uff0c\u8d2d\u4e70\u529f\u80fd\u6539\u5199\u4e3a\u53e6\u4e00\u4e2a FaaS \u51fd\u6570 Serverless \u7684\u6280\u672f\u7279\u70b9 \u00b6 \u6309\u9700\u52a0\u8f7d \u4e8b\u4ef6\u9a71\u52a8 \u72b6\u6001\u975e\u672c\u5730\u6301\u4e45\u5316 \u975e\u4f1a\u8bdd\u4fdd\u6301 \u81ea\u52a8\u5f39\u6027\u4f38\u7f29 \u5e94\u7528\u51fd\u6570\u5316 Serverless \u7684\u4f18\u52bf \u00b6 \u63d0\u5347\u4eba\u529b\u6210\u672c \u964d\u4f4e\u98ce\u9669 \u51cf\u5c11\u8d44\u6e90\u5f00\u9500 \u589e\u52a0\u7f29\u653e\u7684\u7075\u6d3b\u6027 \u7f29\u77ed\u521b\u65b0\u5468\u671f Serverless \u7684\u5c40\u9650\u6027 \u00b6 \u72b6\u6001\u7ba1\u7406 \u51b7\u542f\u52a8\u5ef6\u8fdf \u672c\u5730\u6d4b\u8bd5 Serverless \u5e94\u7528\u573a\u666f \u00b6 Serverless \u7684\u4f18\u52bf\u548c\u5c40\u9650\u6027\u51b3\u5b9a\uff0c\u9002\u5408\u4ee5\u4e0b\u573a\u666f\uff1a \u5f02\u6b65\u7684\u5e76\u53d1\uff0c\u7ec4\u4ef6\u53ef\u72ec\u7acb\u90e8\u7f72\u548c\u6269\u5c55 \u5e94\u5bf9\u7a81\u53d1\u6216\u670d\u52a1\u4f7f\u7528\u91cf\u4e0d\u53ef\u9884\u6d4b\uff08\u4e3b\u8981\u662f\u4e3a\u4e86\u8282\u7ea6\u6210\u672c\uff0c\u56e0\u4e3a Serverless \u5e94\u7528\u5728\u4e0d\u8fd0\u884c\u65f6\u4e0d\u6536\u8d39\uff09 \u77ed\u6682\u3001\u65e0\u72b6\u6001\u7684\u5e94\u7528\uff0c\u5bf9\u51b7\u542f\u52a8\u65f6\u95f4\u4e0d\u654f\u611f \u9700\u8981\u5feb\u901f\u5f00\u53d1\u8fed\u4ee3\u7684\u4e1a\u52a1\uff08\u56e0\u4e3a\u65e0\u9700\u63d0\u524d\u7533\u8bf7\u8d44\u6e90\uff0c\u56e0\u6b64\u53ef\u4ee5\u52a0\u5feb\u4e1a\u52a1\u4e0a\u7ebf\u901f\u5ea6\uff09 \u793a\u4f8b\uff1a ETL \u673a\u5668\u5b66\u4e60\u53ca AI \u6a21\u578b\u5904\u7406 \u56fe\u7247\u5904\u7406 IoT \u4f20\u611f\u5668\u6570\u636e\u5206\u6790 \u6d41\u5904\u7406 \u804a\u5929\u673a\u5668\u4eba Serverless \u5f00\u6e90\u6846\u67b6 \u00b6 OpenFaas: \u6210\u719f\u6613\u7528\uff0c\u6838\u5fc3\u9879\u76ee\u4e0d\u591f\u6d3b\u8dc3\uff1b Knative: \u8d77\u6b65\u8f83\u665a\uff0cGoogle & IBM \u5927\u5382\u652f\u6301, \u65b0\u9c9c\uff0c\u771f\u9999\u3002 CNCF Serverless WG \u00b6 CloudEvents \u89c4\u8303 \uff1a\u5b9a\u4e49\u6700\u5c0f\u5316\u7684\u4e8b\u4ef6\u901a\u7528\u5c5e\u6027\u3002 Workflow \u89c4\u8303 \uff1a\u51fd\u6570\u7f16\u6392\u3002 Whitepaper","title":"Concept"},{"location":"serverless/concept/#_1","text":"Why Cloud Native Cloud Native \u5386\u53f2 \u4ec0\u4e48\u662f Serverless \u5bf9\u6bd4 Serverful IaaS/PaaS/Caas/FaaS \u7b49\u540d\u8bcd \u4ec0\u4e48\u4e0d\u662f Serverless \u4e00\u4e2a\u4f8b\u5b50 Serverless \u7684\u6280\u672f\u7279\u70b9 Serverless \u7684\u4f18\u52bf Serverless \u7684\u5c40\u9650\u6027 Serverless \u5e94\u7528\u573a\u666f Serverless \u5f00\u6e90\u6846\u67b6 CNCF Serverless WG","title":"\u76ee\u5f55"},{"location":"serverless/concept/#_2","text":"","title":"\u6b63\u6587"},{"location":"serverless/concept/#why-cloud-native","text":"Break up monolith \u63d0\u5347\u8d44\u6e90\u5229\u7528\u7387 \u8282\u7701\u6210\u672c Abstraction of Infrastructure \u4e2a\u4eba\uff1a\u5f00\u53d1\u8005\u5173\u6ce8 Code \u800c\u975e Infrastructure \u516c\u53f8\uff1a\u66f4\u5feb\u7684\u5f00\u62d3\u5e02\u573a\uff08Money\uff09","title":"Why Cloud Native"},{"location":"serverless/concept/#cloud-native","text":"\u56e0\u6b64\uff0c Serverless \u662f\u4e91\u539f\u751f\u6280\u672f\u53d1\u5c55\u7684\u9ad8\u7ea7\u9636\u6bb5\u3002 \u4e0a\u4e00\u5bb6\u5355\u4f4d\u8fd8\u5904\u5728 Data Centre \u9636\u6bb5\uff0c\u800c\u4eca\u6211\u5728\u7814\u7a76 Serverless, \u770b\u6765\u6211\u8fdb\u5316\u4e86\u3002","title":"Cloud Native \u5386\u53f2"},{"location":"serverless/concept/#serverless","text":"\u5f00\u53d1\u8005\u4e0d\u5173\u6ce8\u670d\u52a1\u5668\uff0c\u53ea\u5173\u6ce8\u4ee3\u7801\u53ca\u4e1a\u52a1\u903b\u8f91\u3002 Serverless \u6307\u7684\u662f\u670d\u52a1\u7aef\u903b\u8f91\u7531\u5f00\u53d1\u8005\u5b9e\u73b0\uff0c\u8fd0\u884c\u5728\u65e0\u72b6\u6001\u7684\u8ba1\u7b97\u5bb9\u5668\u4e2d\uff0c\u7531\u4e8b\u4ef6\u89e6\u53d1\uff0c\u5b8c\u5168\u88ab\u7b2c\u4e09\u65b9\u7ba1\u7406\uff0c\u800c\u4e1a\u52a1\u5c42\u9762\u7684\u72b6\u6001\u5219\u8bb0\u5f55\u5728\u6570\u636e\u5e93\u6216\u5b58\u50a8\u8d44\u6e90\u4e2d\u3002 \u5173\u952e\u8bcd\uff1ano server\uff0cstateless\uff0cevent-driven","title":"\u4ec0\u4e48\u662f Serverless"},{"location":"serverless/concept/#serverful","text":"\u5f31\u5316\u4e86\u5b58\u50a8\u548c\u8ba1\u7b97\u4e4b\u95f4\u7684\u8054\u7cfb \u4ee3\u7801\u7684\u6267\u884c\u4e0d\u518d\u9700\u8981\u624b\u52a8\u5206\u914d\u8d44\u6e90 \u6309\u4f7f\u7528\u91cf\u8ba1\u8d39","title":"\u5bf9\u6bd4 Serverful"},{"location":"serverless/concept/#iaaspaascaasfaas","text":"IaaS\uff1aInfrastructure as a Service PaaS\uff1aPlatform as a Service CaaS\uff1aContainer as a Service Faas\uff1a Function as a Service AaaS ...","title":"IaaS/PaaS/Caas/FaaS \u7b49\u540d\u8bcd"},{"location":"serverless/concept/#serverless_1","text":"\u5982\u679c\u4f60\u7684PaaS\u53ef\u4ee5\u5c06\u4ee5\u524d\u534a\u79d2\u542f\u52a8\u7684\u5e94\u7528\u572820ms\u5185\u542f\u52a8\uff0c\u5c31\u53eb\u5b83Serverless\u3002\u2014\u2014Adrian Cockcroft \u5927\u90e8\u5206 PaaS \u5e94\u7528\u4e0d\u4f1a\u4e3a\u4e86\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u542f\u52a8\u5e76\u7ed3\u675f\u6574\u4e2a\u5e94\u7528\uff0c\u800c this is what FaaS does\u3002","title":"\u4ec0\u4e48\u4e0d\u662f Serverless"},{"location":"serverless/concept/#serverless-faas","text":"\u4ece\u5916\u5ef6\u6765\u770b\uff0cServerless \u6bd4 FaaS \u7684\u5916\u5ef6\u8981\u5e7f\uff0cFaaS \u4e3b\u8981\u89e3\u51b3\u7684\u662f\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u4ee3\u7801\u903b\u8f91\u5982\u4f55\u505a\u5230 Serverless\uff0c\u53ef\u4ee5\u53eb\u505a Serverless Compute\u3002 \u6709\u5f20\u8001\u56fe\u627e\u4e0d\u5230\u4e86\uff0c\u4e0b\u8fb9\u627e\u4e86\u4e00\u5f20 Spring Serverless \u5b98\u7f51\u4ecb\u7ecd\u9875\u7684\u56fe\u4ee3\u66ff\uff0c\u610f\u601d\u5dee\u4e0d\u591a\u3002 \u76ee\u524d\u4e1a\u754c\u7684\u5404\u7c7b Serverless \u5b9e\u73b0\u6309\u529f\u80fd\u800c\u8a00\uff0c\u4e3b\u8981\u4e3a\u5e94\u7528\u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4e2a\u65b9\u9762\u7684\u652f\u6301\uff1a\u51fd\u6570\u5373\u670d\u52a1\uff08Function as a Service\uff0cFaaS\uff09\u4ee5\u53ca\u540e\u53f0\u5373\u670d\u52a1\uff08Backend as a Service\uff0cBaaS\uff09\u3002 FaaS : FaaS \u63d0\u4f9b\u4e86\u4e00\u4e2a\u8ba1\u7b97\u5e73\u53f0\uff0c\u5728\u8fd9\u4e2a\u5e73\u53f0\u4e0a\uff0c\u5e94\u7528\u4ee5\u4e00\u4e2a\u6216\u591a\u4e2a\u51fd\u6570\u7684\u5f62\u5f0f\u5f00\u53d1\u3001\u8fd0\u884c\u548c\u7ba1\u7406\u3002 Faas \u7684\u4e3b\u8981\u6982\u5ff5\u662f\uff0c\u5c06\u4f7f\u7528\u4e91\u670d\u52a1\u7684\u8fc7\u7a0b\u53d8\u5f97\u548c\u4f20\u7edf\u7f16\u7a0b\u4e00\u6837\uff1a\u4e00\u4e2a\u5e94\u7528\u7531\u5f88\u591a\u4e2a\u51fd\u6570\u7ec4\u6210\uff0c\u6bcf\u4e2a\u51fd\u6570\u6709\u8f93\u5165\u8f93\u51fa\uff0c\u5728\u51fd\u6570\u5185\u5b8c\u6210\u5fc5\u8981\u7684\u903b\u8f91\u3002\u5f00\u53d1\u8005\u53ea\u9700\u8981\u7f16\u5199\u597d\u51fd\u6570\u4ee3\u7801\uff0c\u5c06\u4ee3\u7801\u6ce8\u518c\u5230\u4e91\u7aef\uff0c\u5c06\u8fd9\u4e9b\u51fd\u6570\u7ec4\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5e94\u7528\u5373\u53ef\u3002 BaaS : \u901a\u8fc7 BaaS \u5e73\u53f0\u5c06\u5e94\u7528\u6240\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\uff0c\u5982\u6570\u636e\u5e93\u3001\u6d88\u606f\u961f\u5217\u53ca\u5b58\u50a8\u7b49\u670d\u52a1\u5316\u5e76\u53d1\u5e03\u51fa\u6765\uff0c\u7528\u6237\u901a\u8fc7\u5411 BaaS \u5e73\u53f0\u7533\u8bf7\u6240\u9700\u8981\u7684\u670d\u52a1\u8fdb\u884c\u6d88\u8d39\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u8fd9\u4e9b\u670d\u52a1\u7684\u5177\u4f53\u8fd0\u7ef4\u3002","title":"Serverless \u2260 FaaS"},{"location":"serverless/concept/#_3","text":"\u4e00\u4e2a\u4f20\u7edf\u7684\u4e09\u5c42 C/S \u67b6\u6784 \u6539\u9020\u6210 Serverless \u67b6\u6784 1. \u4e00\u4e2a\u7b2c\u4e09\u65b9\u7684 BaaS \u670d\u52a1\uff0c\u8eab\u4efd\u9a8c\u8bc1\u903b\u8f91 2. \u53e6\u4e00\u4e2a BaaS \u793a\u4f8b\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u4e00\u90e8\u5206\u6570\u636e\u5e93\u5185\u5bb9 3. \u5148\u524d\u670d\u52a1\u5668\u7aef\u7684\u90e8\u5206\u903b\u8f91\u5df2\u7ecf\u8f6c\u79fb\u5230\u4e86\u5ba2\u6237\u7aef 4. \u670d\u52a1\u7aef\uff0c\u641c\u7d22\u529f\u80fd\u53ef\u4ee5\u4ece\u6301\u7eed\u8fd0\u884c\u7684\u670d\u52a1\u7aef\u4e2d\u62c6\u5206\u51fa\u6765\uff0c\u4ee5 FaaS \u7684\u65b9\u5f0f\u5b9e\u73b0 5. \u670d\u52a1\u7aef\uff0c\u8d2d\u4e70\u529f\u80fd\u6539\u5199\u4e3a\u53e6\u4e00\u4e2a FaaS \u51fd\u6570","title":"\u4e00\u4e2a\u4f8b\u5b50"},{"location":"serverless/concept/#serverless_2","text":"\u6309\u9700\u52a0\u8f7d \u4e8b\u4ef6\u9a71\u52a8 \u72b6\u6001\u975e\u672c\u5730\u6301\u4e45\u5316 \u975e\u4f1a\u8bdd\u4fdd\u6301 \u81ea\u52a8\u5f39\u6027\u4f38\u7f29 \u5e94\u7528\u51fd\u6570\u5316","title":"Serverless \u7684\u6280\u672f\u7279\u70b9"},{"location":"serverless/concept/#serverless_3","text":"\u63d0\u5347\u4eba\u529b\u6210\u672c \u964d\u4f4e\u98ce\u9669 \u51cf\u5c11\u8d44\u6e90\u5f00\u9500 \u589e\u52a0\u7f29\u653e\u7684\u7075\u6d3b\u6027 \u7f29\u77ed\u521b\u65b0\u5468\u671f","title":"Serverless \u7684\u4f18\u52bf"},{"location":"serverless/concept/#serverless_4","text":"\u72b6\u6001\u7ba1\u7406 \u51b7\u542f\u52a8\u5ef6\u8fdf \u672c\u5730\u6d4b\u8bd5","title":"Serverless \u7684\u5c40\u9650\u6027"},{"location":"serverless/concept/#serverless_5","text":"Serverless \u7684\u4f18\u52bf\u548c\u5c40\u9650\u6027\u51b3\u5b9a\uff0c\u9002\u5408\u4ee5\u4e0b\u573a\u666f\uff1a \u5f02\u6b65\u7684\u5e76\u53d1\uff0c\u7ec4\u4ef6\u53ef\u72ec\u7acb\u90e8\u7f72\u548c\u6269\u5c55 \u5e94\u5bf9\u7a81\u53d1\u6216\u670d\u52a1\u4f7f\u7528\u91cf\u4e0d\u53ef\u9884\u6d4b\uff08\u4e3b\u8981\u662f\u4e3a\u4e86\u8282\u7ea6\u6210\u672c\uff0c\u56e0\u4e3a Serverless \u5e94\u7528\u5728\u4e0d\u8fd0\u884c\u65f6\u4e0d\u6536\u8d39\uff09 \u77ed\u6682\u3001\u65e0\u72b6\u6001\u7684\u5e94\u7528\uff0c\u5bf9\u51b7\u542f\u52a8\u65f6\u95f4\u4e0d\u654f\u611f \u9700\u8981\u5feb\u901f\u5f00\u53d1\u8fed\u4ee3\u7684\u4e1a\u52a1\uff08\u56e0\u4e3a\u65e0\u9700\u63d0\u524d\u7533\u8bf7\u8d44\u6e90\uff0c\u56e0\u6b64\u53ef\u4ee5\u52a0\u5feb\u4e1a\u52a1\u4e0a\u7ebf\u901f\u5ea6\uff09 \u793a\u4f8b\uff1a ETL \u673a\u5668\u5b66\u4e60\u53ca AI \u6a21\u578b\u5904\u7406 \u56fe\u7247\u5904\u7406 IoT \u4f20\u611f\u5668\u6570\u636e\u5206\u6790 \u6d41\u5904\u7406 \u804a\u5929\u673a\u5668\u4eba","title":"Serverless \u5e94\u7528\u573a\u666f"},{"location":"serverless/concept/#serverless_6","text":"OpenFaas: \u6210\u719f\u6613\u7528\uff0c\u6838\u5fc3\u9879\u76ee\u4e0d\u591f\u6d3b\u8dc3\uff1b Knative: \u8d77\u6b65\u8f83\u665a\uff0cGoogle & IBM \u5927\u5382\u652f\u6301, \u65b0\u9c9c\uff0c\u771f\u9999\u3002","title":"Serverless \u5f00\u6e90\u6846\u67b6"},{"location":"serverless/concept/#cncf-serverless-wg","text":"CloudEvents \u89c4\u8303 \uff1a\u5b9a\u4e49\u6700\u5c0f\u5316\u7684\u4e8b\u4ef6\u901a\u7528\u5c5e\u6027\u3002 Workflow \u89c4\u8303 \uff1a\u51fd\u6570\u7f16\u6392\u3002 Whitepaper","title":"CNCF Serverless WG"},{"location":"serverless/knative/","text":"\u76ee\u5f55 \u00b6 Why Not Kubernetes Why Knative Serving (Core) Serving \u6a21\u578b Serving \u8d44\u6e90 Serving \u67b6\u6784 \u81ea\u52a8\u6269\u7f29\u5bb9 \u4e00\u4e2a service Eventing (Core) Eventing \u5b9e\u73b0\u7684\u529f\u80fd Eventing \u8d44\u6e90 Source Sink Eventing \u6a21\u578b \u7b80\u5355\u6295\u9012 \u901a\u9053\u4e0e\u8ba2\u9605 \u5e8f\u5217 \u5e76\u5217 \u9ed1\u76d2\u6a21\u578b Observability Build Tekton Pipeline Core Tekton Pipeline CRDs \u4e00\u4e2a Pipeline \u6d41\u7a0b DevOps \u603b\u7ed3 \u6b63\u6587 \u00b6 Why Not Kubernetes \u00b6 Most popular Container Management project today, Deloy and manage your containerized application. Components Apiserver Proxy Etcd Kubelet Controller Sheduler CNI Resources Pod Node Namespace Service Volume PersistentVolume Deployment Secret StatefulSet DaemonSet ServiceAccount ReplicationController ReplicaSet Job CronJob SecurityContext ResourceQuota LimitRange HorizontalPodAutoscaling Ingress ConfigMap Label CustomResourceDefinition Role ClusterRole Tools Yaml Spec helm Kubectl istio promethus ... \u5982\u679c\u4f60\u60f3\u6258\u7ba1\u4f60\u5f00\u53d1\u7684 app\uff0c\u4f60\u5f97\u6210\u4e3a\u4e00\u4e2a\u57fa\u7840\u8bbe\u65bd\u4e13\u5bb6\u3002\u4e8b\u4e0e\u613f\u8fdd\u3002 Why Knative \u00b6 \u7b80\u5316\u7684 application/container \u7ba1\u7406 \u8ba9\u5f00\u53d1\u8005\u5173\u6ce8 coding \u63d0\u4f9b PaaS \u548c Severless \u6982\u5ff5\u7684\u62bd\u8c61 Kubernetes \u7684\u6269\u5c55 Kubernetes \u4f5c\u4e3a\u5e95\u5c42 \u968f\u65f6\u53ef\u7528 Kubernetes \u539f\u751f\u80fd\u529b Knative \u7684\u53d7\u4f17 \u00b6 Knative \u8ddf Istio \u7684\u5173\u7cfb\uff1a \u8d77\u521d\uff0cIstio \u5728 Knative \u4e0b\u8fb9\uff1b \u540e\u6765\uff0cKnative \u5728 Istio \u4e0a\u8fb9 \u5982\u4eca\uff0c\u6ca1\u6709 Istio\u3002 Knative \u7ec4\u4ef6\u4ecb\u7ecd \u00b6 \u6838\u5fc3\u7ec4\u4ef6 Serving \u670d\u52a1\u7cfb\u7edf\uff0c\u7528\u6765\u914d\u7f6e\u5e94\u7528\u7684\u8def\u7531\u3001\u5347\u7ea7\u7b56\u7565\u3001\u81ea\u52a8\u6269\u7f29\u5bb9\u7b49\u529f\u80fd\u3002 \u6838\u5fc3\u7ec4\u4ef6 Eventing \u4e8b\u4ef6\u7cfb\u7edf\uff0c\u7528\u6765\u81ea\u52a8\u5b8c\u6210\u4e8b\u4ef6\u7684\u7ed1\u5b9a\u548c\u89e6\u53d1 Observability \u53ef\u89c6\u5316\u63d2\u4ef6 Prometheus& Grafana\uff0cELK\uff0cJaeger/Zipkin \u7b49\u3002 Build Teton\uff0c\u6784\u5efa\u7cfb\u7edf\uff0c\u4ece Knative \u9879\u76ee\u72ec\u7acb\u51fa\u53bb\u3002\u4e3b\u8981\u5b8c\u6210\u4e24\u6b65\uff1a source \u5230 image\uff0cdeploy on Knative\u3002 Serving (Core) \u00b6 Serving \u6a21\u578b \u00b6 \u90e8\u7f72 app as Pod/Revision \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u5efa\u7acb\u7f51\u7edc\uff0c\u66b4\u9732 endpoint Revision \u81ea\u52a8\u6269\u7f29\u5bb9\uff08\u53ef\u4ee5 scale to 0\uff09 \u5f53\u66f4\u65b0 Revision \u65f6\uff0c\u81ea\u52a8\u8fc1\u79fb\u5230\u65b0\u7684 Traffice Splitting, \u6d41\u91cf\u6839\u636e\u914d\u7f6e\u5206\u53d1\u5230\u67d0\u4e2aRevision\u3002 \u4e13\u7528 URLs \u9488\u5bf9 Revision Serving \u8d44\u6e90 \u00b6 Service : service.serving.knative.dev \u7ba1\u7406\u670d\u52a1\u7684\u751f\u547d\u5468\u671f\u3002\u786e\u4fdd\u6bcf\u6b21\u521b\u5efa\u90fd\u6709 Route, Configuration \u548c Revision\u3002 Route : route.serving.knative.dev \u5b9a\u4e49\u7f51\u7edc\u7aef\u53e3\uff0c\u6620\u5c04\u5230\u4e00\u4e2a\u6216\u591a\u4e2aRevision\uff0c\u63d0\u4f9b\u6d41\u91cf\u5206\u53d1\u7ba1\u7406\u3002 Configuration : configuration.serving.knative.dev \u7ef4\u62a4 deployment \u7684\u671f\u671b\u72b6\u6001\uff0c\u5e76\u53d1\u6570, Min/Max/Target Scale \u7b49\u3002 \u4fee\u6539 Configuration \u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a Revision\u3002 Revision : revision.serving.knative.dev \u6bcf\u6b21\u4fee\u6539\u4ee3\u7801\u548c\u914d\u7f6e\u7684\u5feb\u7167\u3002Revisions \u4e0d\u53ef\u66f4\u6539\uff0c\u4e14\u6839\u636e\u6d41\u91cf\u81ea\u52a8\u6269\u7f29\u3002 Serving \u67b6\u6784 \u00b6 $ kubectl apply -f serving-core.yaml\uff0c serving \u7684\u6838\u5fc3\u7ec4\u4ef6\u5982\u56fe\u3002 \u53ef\u4ee5\u770b\u5230 \u518d namespace knative-serving \u4e0b\uff0c\u6709 controller \u3001webhook \u3001autoscaler\u3001activator \u8fd9\u56db\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1b \u5176\u5b9e\uff0c\u8fd8\u6709\u4e00\u4e2a queue, \u8fd0\u884c\u5728\u6bcf\u4e2a\u5e94\u7528\u7684 pod \u91cc\uff0c\u4f5c\u4e3a sidecar \u5b58\u5728\u3002 Controller \u8d1f\u8f7d Service \u6574\u4e2a\u751f\u547d\u5468\u671f\u7684\u7ba1\u7406\uff0c\u6d89\u53ca\u3001Configuration\u3001Route\u3001Revision \u7b49\u7684 CURD\u3002 Webhook \u4e3b\u8981\u8d1f\u8d23\u521b\u5efa\u548c\u66f4\u65b0\u7684\u53c2\u6570\u6821\u9a8c\u3002 Autoscaler \u6839\u636e\u5e94\u7528\u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u5bf9\u5e94\u7528\u6269\u7f29\u5bb9\u3002 Activator \u8d1f\u8d23\u4ece 0 \u5230 1\u3002\u5728\u5e94\u7528\u7f29\u5bb9\u5230 0 \u540e\uff0c\u62e6\u622a\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u901a\u77e5 autoscaler \u542f\u52a8\u76f8\u5e94\u5e94\u7528\u5b9e\u4f8b\uff0c\u7b49\u5f85\u542f\u52a8\u540e\u5c06\u8bf7\u6c42\u8f6c\u53d1\u3002 Queue \u8d1f\u8f7d\u62e6\u622a\u8f6c\u53d1\u7ed9 Pod \u7684\u8bf7\u6c42\uff0c\u7528\u4e8e\u7edf\u8ba1 Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u7b49\uff0cautoscaler \u4f1a\u8bbf\u95ee queue \u83b7\u53d6\u76f8\u5e94\u6570\u636e\u5bf9\u5e94\u7528\u6269\u7f29\u5bb9\u3002 \u81ea\u52a8\u6269\u7f29\u5bb9 \u00b6 \u5982\u4f55\u53d1\u751f 1 -> n\uff1a\u4efb\u4f55\u8bbf\u95ee\u5e94\u7528\u7684\u8bf7\u6c42\u5728\u8fdb\u5165 Pod \u540e\u90fd\u4f1a\u88ab Queue \u62e6\u622a\uff0c\u7edf\u8ba1\u5f53\u524d Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u6570\uff0c\u540c\u65f6 Queue \u4f1a\u5f00\u653e\u4e00\u4e2a metric \u63a5\u53e3\uff0cautoscalor \u901a\u8fc7\u8bbf\u95ee\u8be5\u7aef\u53e3\u53bb\u83b7\u53d6 Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u5e76\u8ba1\u7b97\u662f\u5426\u9700\u8981\u6269\u7f29\u5bb9\u3002\u5f53\u9700\u8981\u6269\u7f29\u5bb9\u65f6\uff0cautoscalor \u4f1a\u901a\u8fc7\u4fee\u6539 Revision \u4e0b\u7684 deployment \u7684\u5b9e\u4f8b\u4e2a\u6570\u8fbe\u5230\u6269\u7f29\u5bb9\u7684\u6548\u679c\u3002 0 -> 1\uff1a\u5728\u5e94\u7528\u957f\u65f6\u95f4\u65e0\u8bf7\u6c42\u8bbf\u95ee\u65f6\uff0c\u5b9e\u4f8b\u4f1a\u7f29\u51cf\u5230 0\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u8bbf\u95ee\u5e94\u7528\u7684\u8bf7\u6c42\u4f1a\u88ab\u8f6c\u53d1\u5230 activator\uff0c\u5e76\u5728\u8bf7\u6c42\u5728\u8f6c\u53d1\u5230 activator \u4e4b\u524d\u4f1a\u88ab\u6807\u8bb0\u8bf7\u6c42\u8bbf\u95ee\u7684 Revision \u4fe1\u606f\uff08\u7531 controller \u4fee\u6539 VirtualService \u5b9e\u73b0\uff09\u3002activator \u63a5\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u5c06\u6539 Revision \u7684\u5e76\u53d1\u91cf\u52a0 1\uff0c\u5e76\u5c06 metric \u63a8\u9001\u7ed9 autoscalor\uff0c\u542f\u52a8 Pod\u3002\u540c\u65f6\uff0cactivator \u76d1\u63a7 Revision \u7684\u542f\u52a8\u72b6\u6001\uff0cRevision \u6b63\u5e38\u542f\u52a8\u540e\uff0c\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u76f8\u5e94\u7684 Pod\u3002 \u5f53\u7136\uff0c\u5728 Revision \u6b63\u5e38\u542f\u52a8\u540e\uff0c\u5e94\u7528\u7684\u8bf7\u6c42\u5c06\u4e0d\u4f1a\u518d\u53d1\u9001\u5230 activator\uff0c\u800c\u4e14\u76f4\u63a5\u53d1\u9001\u81f3\u5e94\u7528\u7684 Pod\uff08\u7531 controller \u4fee\u6539 VirtualService \u5b9e\u73b0\uff09\u3002 \u76d1\u63a7\u6307\u6807 KPA \u6839\u636e\u5e76\u53d1\u6570\u8fdb\u884c\u4f38\u7f29\uff0c kpa.autoscaling.knative.dev \u3002 HPA \u6839\u636e\u5236CPU\u8fdb\u884c\u4f38\u7f29\uff0c hpa.autoscaling.knative.dev \uff0c\u76f4\u63a5\u5229\u7528 k8s \u7684HPA\u80fd\u529b\u3002 \u4e00\u4e2a service \u00b6 # helloworld-go.yaml apiVersion : serving.knative.dev/v1 # Current version of Knative kind : Service metadata : name : helloworld-go namespace : default spec : template : metadata : name : helloworld-go-1 spec : containers : - image : gcr.io/knative-samples/helloworld-go env : - name : TARGET value : \"Go Sample v1\" kubectl apply -f helloworld-go.yaml \u4e00\u4e0b\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002 Service | -> Route | -> Configuration -> Revision Revision | -> Deployment / PodAutoscaler | -> ServerlessService Route -> ClusterIngress -> VitualService(istio) Traffic-spitting apiVersion : serving.knative.dev/v1 # Current version of Knative kind : Service metadata : name : helloworld-go namespace : default spec : template : metadata : name : helloworld-go-2 spec : containers : - image : gcr.io/knative-samples/helloworld-go env : - name : TARGET value : \"Go Sample v2\" traffic : - tag : current revisionName : helloworld-go-1 percent : 50 - tag : candidate revisionName : helloworld-go-2 percent : 50 - tag : latest latestRevision : true percent : 0 Eventing (Core) \u00b6 Knative Eventing is a system that is designed to address a common need for cloud native development and provides composable primitives to enable late-binding event sources and event consumers. Eventing \u5b9e\u73b0\u7684\u529f\u80fd \u00b6 \u53ef\u9760\u7684\u6d88\u606f\u901a\u9053 \u8ba2\u9605\u8f6c\u53d1\u673a\u5236 Eventing \u8d44\u6e90 \u00b6 Event Source\uff1a\u628a\u65f6\u95f4\u751f\u4ea7\u8005\u63a5\u5165 Knative Eventing \u5e73\u53f0\uff0c\u5e76\u628a\u4e8b\u4ef6\u4f20\u5230\u6d88\u8d39\u8005\u3002 Channel\uff1a \u5b9e\u73b0\u4e8b\u4ef6\u8f6c\u53d1\u548c\u5b58\u50a8\uff0c\u652f\u6301 Kafka \u548c NATS Streaming Subscription\uff1a\u4e8b\u4ef6\u8ba2\u9605\u8005\u3002 Squence: \u4e8b\u4ef6\u4f9d\u6b21\u8f6c\u53d1\u7ed9\u591a\u4e2a\u8ba2\u9605\u8005\u7684\u4e00\u79cd\u673a\u5236 Parallel\uff1a\u4e8b\u4ef6\u540c\u65f6\u8f6c\u53d1\u7ed9\u591a\u4e2a\u8ba2\u9605\u8005\u7684\u4e00\u79cd\u673a\u5236 Broker\uff1a\u63a5\u53d7\u4e8b\u4ef6\uff0c\u5e76\u5c06\u4e8b\u4ef6\u8f6c\u53d1\u5230\u8ba2\u9605\u8005\u3002 Trigger\uff1a\u4e8b\u4ef6\u8ba2\u9605\u3002 Event Registry \u6ce8\u518c\u4e2d\u5fc3\uff0c\u4e8b\u4ef6\u7c7b\u578b\u7684\u96c6\u5408\uff0c\u53ef\u67e5\u770b\u3002 ### Source Knative \u4e2d\u6709\u4e2a\u8d44\u6e90\u53eb EventSource\u3002\u7528\u4e8e\u628a\u4e8b\u4ef6\u751f\u4ea7\u8005\u63a5\u5165 Knative \u4e8b\u4ef6\u5e73\u53f0\u3002 \u4e8b\u4ef6\u751f\u4ea7\u8005\u5728 Knative \u4e8b\u4ef6\u5e73\u53f0\u7684\u62bd\u8c61 Spec \u53c2\u6570 Sink Knative \u4e2d\u5df2\u6709\u7684\u9884\u5b9a\u4e49\u8d44\u6e90\u7c7b\u578b\uff1a APIServerSource GithubSource AwsSource ContainerSource CronJobSource ... Sink \u00b6 Sink \u8868\u793a\u4e8b\u4ef6\u6d88\u606f\u4f20\u9001\u7684\u76ee\u7684\u5730\uff0c\u66b4\u9732\u4e00\u4e2a HTTP \u7aef\u53e3\u3002\u4e0d\u662f\u4e00\u4e2a\u5177\u4f53\u8d44\u6e90\u3002 \u5728 Kubernets\uff0c\u53ea\u8981\u5e26\u7740\u5c5e\u6027\uff1astatus.address.hostname \u7684\u90fd\u53ef\u4ee5\u770b\u4f5c sink\u3002 \u4e24\u79cd\u7c7b\u578b\uff1a Addressable: \u66b4\u9732\u4e00\u4e2aHTTP \u7aef\u53e3\uff0c\u63a5\u53d7\u6d88\u606f\uff0c\u8fd4\u56de\u6210\u529f\u6216\u5931\u8d25\u3002 Callable: \u66b4\u9732\u4e00\u4e2aHTTP \u7aef\u53e3\uff0c\u63a5\u53d7\u6d88\u606f\uff0c\u8fd4\u56de 0 \u5230 1 \u4e2a\u65b0\u4e8b\u4ef6\u3002 Knative \u4e2d\u7684 Sink \u7c7b\u578b\u7684\u8d44\u6e90\uff1a Service, Channel, Broker, Parallel \u53ca Sequence Eventing Models \u00b6 \u6a21\u578b\u4e00 \u00b6 Simple Dlivery \u7b80\u5355\u6295\u9012 \u5b9a\u4e49\u4e8b\u4ef6\u6e90 \u901a\u8fc7 Sink \u6307\u5b9a\u6d88\u8d39\u8005\u5730\u5740 # event-source.yaml apiVersion: sources.knative.dev/v1alpha2 kind: CronJobSource metadata: name: test-heartbeats spec: template: spec: containers: - image: <heartbeats_image_uri> name: heartbeats args: - --period=1 env: - name: POD_NAME value: \"mypod\" - name: POD_NAMESPACE value: \"event-test\" sink: ref: apiVersion: serving.knative.dev/v1 kind: Service name: event-display \u6a21\u578b\u4e8c \u00b6 Channel & Subscription \u901a\u9053\u4e0e\u8ba2\u9605 \u901a\u9053 Channel, \u4ee3\u8868\u4e8b\u4ef6\u7684\u8f6c\u53d1\u548c\u6301\u4e45\u5316\u3002 \u8ba2\u9605\u63cf\u8ff0\u901a\u9053\u4e0e\u6d88\u8d39\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4e5f\u80fd\u8fde\u63a5\u6d88\u8d39\u8005\u4e0e\u7b2c\u4e8c\u4e2a\u901a\u9053\uff0c\u7528\u4e8e\u5904\u7406\u6d88\u8d39\u8005\u8fd4\u56de\u7684\u4e8b\u4ef6\u3002 \u8ba2\u9605 Subscription\uff0c\u652f\u6301\u4e0d\u540c\u6280\u672f\u7684\u901a\u9053\uff0c\u5982 Kafka, NATS Streaming \u7b49\u3002 \u901a\u9053\u4e0e\u8ba2\u9605\uff0c\u4e00\u5bf9\u591a\u3002 # channel.yaml apiVersion: messaging.knative.dev/v1alpha1 kind: Channel metadata: name: my-channel # event-source.yaml ... spec: ... sink: apiVersion: messaging.knative.dev/v1 Kind: Channel name: my-channel # subscription.yaml apiVersion: eventing.knative.dev/v1alpha2 kind: Subscription metadata: name: test-subscription spec: channel: apiVersion: messaging.knative.dev/v1 kind: Channel name: my-channel subscriber: apiVersion: serving.knative.dev/v1 kind: Service name: event-display \u6a21\u578b\u4e09 \u00b6 Sequence \u5e8f\u5217 Sequence \u5b9a\u4e49\u4e00\u7cfb\u5217\u4f9d\u6b21\u6267\u884c\u4e8b\u4ef6 \u4e8b\u4ef6\u53d1\u9001\u7ed9\u670d\u52a1 \u670d\u52a1\u53ef\u4ee5\u4fee\u6539 or \u521b\u5efa\u65b0\u7684\u4e8b\u4ef6 # event-source.yaml ... spec: ... sink: apiVersion: messaging.knative.dev/v1 Kind: Sequence name: my-sequence # sequence.yaml apiVersion: eventing.knative.dev/v1alpha2 kind: Sequence metadata: name: my-sequence spec: steps: - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-1 - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-2 - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-3 \u6a21\u578b\u56db \u00b6 Parallel \u5e76\u5217 Parallel \u5b9a\u4e49\u4e00\u7cfb\u5217\u5e76\u884c\u4e8b\u4ef6 \u6bcf\u4e2a\u670d\u52a1\u63a5\u53d7\u5230\u540c\u4e00\u4e8b\u4ef6 \u6bcf\u4e2a\u5206\u652f\u5b9a\u4e49 filter # event-source.yaml ... spec : ... sink : apiVersion : messaging.knative.dev/v1 Kind : Parallel name : my-parallel # parallel.yaml apiVersion : eventing.knative.dev/v1alpha2 kind : Parallel metadata : name : my-parallel spec : branches : - filter ref : apiVersion : serving.knative.dev/v1 kind : Service name : filter-1 subscriber : ref : apiVersion : serving.knative.dev/v1 kind : Service name : mysevice-1 - filter ref : apiVersion : serving.knative.dev/v1 kind : Service name : filter-2 subscriber : ref : apiVersion : serving.knative.dev/v1 kind : Service name : mysevice-2 \u6a21\u578b\u4e94 \u00b6 Tigger & Broker \u9ed1\u76d2\u6a21\u578b \u642d\u5efa\u9ed1\u76d2\uff0c\u9690\u85cf\u5177\u4f53\u5b9e\u73b0\uff0c\u7528\u6237\u4e0d\u5173\u5fc3 Broker \u4e8b\u4ef6\u6876\uff0c\u63a5\u5165\u5404\u79cd\u4e8b\u4ef6\uff0c\u4e8b\u4ef6\u5177\u6709\u5404\u79cd\u5c5e\u6027\u7528\u6765\u533a\u5206 Tigger \u8fc7\u6ee4\u5668\uff0c\u53ea\u6709\u901a\u8fc7\u8fc7\u6ee4\u5668\u7684\u6761\u4ef6\u624d\u80fd\u4f20\u7ed9\u6d88\u8d39\u8005 # Broker: knative \u81ea\u5df1\u5b9e\u73b0\uff0c\u5b89\u88c5\u5373\u53ef\u3002 broker-filter broker-ingress # Trigger.yaml apiVersion : eventing.knative.dev/v1beta1 kind : Trigger metadata : name : my-trigger spec : filter : attributes : type : dev.knative.sources.ping subscriber : ref : apiVersion : serving.knative.dev/v1beta1 kind : Service name : event-display Observability \u00b6 Logging: ELK Monitoring: Promethus & Grafana Tracing: Jaeger/Zipkin Build \u00b6 Tekton Pipeline Core \u00b6 pipeline-controller Pipeline-webhook Tekton Pipeline CRDs \u00b6 Tekton \u4e3a Kubernetes \u63d0\u4f9b\u4e86\u591a\u79cd CRD \u8d44\u6e90\u5bf9\u8c61\uff0c\u53ef\u7528\u4e8e\u5b9a\u4e49\u6211\u4eec\u7684\u6d41\u6c34\u7ebf\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u4e2a\u8d44\u6e90\u5bf9\u8c61\uff1a Task\uff1a\u5b9a\u4e49\u4e86\u4e00\u7ec4\u6784\u5efa\u6b65\u9aa4\uff0c\u5982\u7f16\u8bd1\u4ee3\u7801\u3001\u8fd0\u884c\u6d4b\u8bd5\u4ee5\u53ca\u6784\u5efa\u548c\u90e8\u7f72\u955c\u50cf\u3002\u8868\u793a\u6267\u884c\u547d\u4ee4\u7684\u4e00\u7cfb\u5217\u6b65\u9aa4\uff0ctask \u91cc\u53ef\u4ee5\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684 steps\uff0c\u4f8b\u5982\u7f16\u8bd1\u4ee3\u7801\u3001\u6784\u5efa\u955c\u50cf\u3001\u63a8\u9001\u955c\u50cf\u7b49\uff0c\u6bcf\u4e2a step \u5b9e\u9645\u7531\u4e00\u4e2a Pod \u6267\u884c\u3002 TaskRun\uff1atask \u53ea\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6a21\u7248\uff0ctaskRun \u624d\u771f\u6b63\u4ee3\u8868\u4e86\u4e00\u6b21\u5b9e\u9645\u7684\u8fd0\u884c\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5df1\u624b\u52a8\u521b\u5efa\u4e00\u4e2a taskRun\uff0ctaskRun \u521b\u5efa\u51fa\u6765\u4e4b\u540e\uff0c\u5c31\u4f1a\u81ea\u52a8\u89e6\u53d1 task \u63cf\u8ff0\u7684\u6784\u5efa\u4efb\u52a1\u3002 Pipeline\uff1a\u5b9a\u4e49\u4e86\u6784\u6210\u6d41\u6c34\u7ebf\u7684 Tasks \u3002\u4e00\u7ec4\u4efb\u52a1\uff0c\u8868\u793a\u4e00\u4e2a\u6216\u591a\u4e2a task\u3001PipelineResource \u4ee5\u53ca\u5404\u79cd\u5b9a\u4e49\u53c2\u6570\u7684\u96c6\u5408\u3002 PipelineRun\uff1a\u5b9a\u4e49\u4e86\u6d41\u6c34\u7ebf\u7684\u6267\u884c\u3002\u5b83\u5f15\u7528\u8981\u8fd0\u884c\u7684 Pipeline \u4ee5\u53ca\u8981\u7528\u4f5c\u8f93\u5165\u548c\u8f93\u51fa\u7684 PipelineResources \u3002\u7c7b\u4f3c task \u548c taskRun \u7684\u5173\u7cfb\uff0cpipelineRun \u4e5f\u8868\u793a\u67d0\u4e00\u6b21\u5b9e\u9645\u8fd0\u884c\u7684 pipeline\uff0c\u4e0b\u53d1\u4e00\u4e2a pipelineRun CRD \u5b9e\u4f8b\u5230 Kubernetes\u540e\uff0c\u540c\u6837\u4e5f\u4f1a\u89e6\u53d1\u4e00\u6b21 pipeline \u7684\u6784\u5efa\u3002 PipelineResource\uff1a\u6d41\u6c34\u7ebf\u7684\u8f93\u5165\uff08\u4f8b\u5982 git \u5b58\u50a8\u5e93\uff09\u6216\u8f93\u51fa\uff08\u4f8b\u5982 docker \u955c\u50cf\uff09\u3002\u8868\u793a pipeline \u8f93\u5165\u8d44\u6e90\uff0c\u6bd4\u5982 github \u4e0a\u7684\u6e90\u7801\uff0c\u6216\u8005 pipeline \u8f93\u51fa\u8d44\u6e90\uff0c\u4f8b\u5982\u4e00\u4e2a\u5bb9\u5668\u955c\u50cf\u6216\u8005\u6784\u5efa\u751f\u6210\u7684 jar \u5305\u7b49\u3002 \u4e00\u4e2a Pipeline \u6d41\u7a0b \u00b6 DevOps \u00b6 \u603b\u7ed3 \u00b6 Cloud Native/Serverless/Faas \u6982\u5ff5 Stack: Kubernetes, Istio, microservices, logging/monitoring/tracing, OpenFaas \u548c Knative","title":"Knative"},{"location":"serverless/knative/#_1","text":"Why Not Kubernetes Why Knative Serving (Core) Serving \u6a21\u578b Serving \u8d44\u6e90 Serving \u67b6\u6784 \u81ea\u52a8\u6269\u7f29\u5bb9 \u4e00\u4e2a service Eventing (Core) Eventing \u5b9e\u73b0\u7684\u529f\u80fd Eventing \u8d44\u6e90 Source Sink Eventing \u6a21\u578b \u7b80\u5355\u6295\u9012 \u901a\u9053\u4e0e\u8ba2\u9605 \u5e8f\u5217 \u5e76\u5217 \u9ed1\u76d2\u6a21\u578b Observability Build Tekton Pipeline Core Tekton Pipeline CRDs \u4e00\u4e2a Pipeline \u6d41\u7a0b DevOps \u603b\u7ed3","title":"\u76ee\u5f55"},{"location":"serverless/knative/#_2","text":"","title":"\u6b63\u6587"},{"location":"serverless/knative/#why-not-kubernetes","text":"Most popular Container Management project today, Deloy and manage your containerized application. Components Apiserver Proxy Etcd Kubelet Controller Sheduler CNI Resources Pod Node Namespace Service Volume PersistentVolume Deployment Secret StatefulSet DaemonSet ServiceAccount ReplicationController ReplicaSet Job CronJob SecurityContext ResourceQuota LimitRange HorizontalPodAutoscaling Ingress ConfigMap Label CustomResourceDefinition Role ClusterRole Tools Yaml Spec helm Kubectl istio promethus ... \u5982\u679c\u4f60\u60f3\u6258\u7ba1\u4f60\u5f00\u53d1\u7684 app\uff0c\u4f60\u5f97\u6210\u4e3a\u4e00\u4e2a\u57fa\u7840\u8bbe\u65bd\u4e13\u5bb6\u3002\u4e8b\u4e0e\u613f\u8fdd\u3002","title":"Why Not Kubernetes"},{"location":"serverless/knative/#why-knative","text":"\u7b80\u5316\u7684 application/container \u7ba1\u7406 \u8ba9\u5f00\u53d1\u8005\u5173\u6ce8 coding \u63d0\u4f9b PaaS \u548c Severless \u6982\u5ff5\u7684\u62bd\u8c61 Kubernetes \u7684\u6269\u5c55 Kubernetes \u4f5c\u4e3a\u5e95\u5c42 \u968f\u65f6\u53ef\u7528 Kubernetes \u539f\u751f\u80fd\u529b","title":"Why Knative"},{"location":"serverless/knative/#knative","text":"Knative \u8ddf Istio \u7684\u5173\u7cfb\uff1a \u8d77\u521d\uff0cIstio \u5728 Knative \u4e0b\u8fb9\uff1b \u540e\u6765\uff0cKnative \u5728 Istio \u4e0a\u8fb9 \u5982\u4eca\uff0c\u6ca1\u6709 Istio\u3002","title":"Knative \u7684\u53d7\u4f17"},{"location":"serverless/knative/#knative_1","text":"\u6838\u5fc3\u7ec4\u4ef6 Serving \u670d\u52a1\u7cfb\u7edf\uff0c\u7528\u6765\u914d\u7f6e\u5e94\u7528\u7684\u8def\u7531\u3001\u5347\u7ea7\u7b56\u7565\u3001\u81ea\u52a8\u6269\u7f29\u5bb9\u7b49\u529f\u80fd\u3002 \u6838\u5fc3\u7ec4\u4ef6 Eventing \u4e8b\u4ef6\u7cfb\u7edf\uff0c\u7528\u6765\u81ea\u52a8\u5b8c\u6210\u4e8b\u4ef6\u7684\u7ed1\u5b9a\u548c\u89e6\u53d1 Observability \u53ef\u89c6\u5316\u63d2\u4ef6 Prometheus& Grafana\uff0cELK\uff0cJaeger/Zipkin \u7b49\u3002 Build Teton\uff0c\u6784\u5efa\u7cfb\u7edf\uff0c\u4ece Knative \u9879\u76ee\u72ec\u7acb\u51fa\u53bb\u3002\u4e3b\u8981\u5b8c\u6210\u4e24\u6b65\uff1a source \u5230 image\uff0cdeploy on Knative\u3002","title":"Knative \u7ec4\u4ef6\u4ecb\u7ecd"},{"location":"serverless/knative/#serving-core","text":"","title":"Serving (Core)"},{"location":"serverless/knative/#serving","text":"\u90e8\u7f72 app as Pod/Revision \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u5efa\u7acb\u7f51\u7edc\uff0c\u66b4\u9732 endpoint Revision \u81ea\u52a8\u6269\u7f29\u5bb9\uff08\u53ef\u4ee5 scale to 0\uff09 \u5f53\u66f4\u65b0 Revision \u65f6\uff0c\u81ea\u52a8\u8fc1\u79fb\u5230\u65b0\u7684 Traffice Splitting, \u6d41\u91cf\u6839\u636e\u914d\u7f6e\u5206\u53d1\u5230\u67d0\u4e2aRevision\u3002 \u4e13\u7528 URLs \u9488\u5bf9 Revision","title":"Serving \u6a21\u578b"},{"location":"serverless/knative/#serving_1","text":"Service : service.serving.knative.dev \u7ba1\u7406\u670d\u52a1\u7684\u751f\u547d\u5468\u671f\u3002\u786e\u4fdd\u6bcf\u6b21\u521b\u5efa\u90fd\u6709 Route, Configuration \u548c Revision\u3002 Route : route.serving.knative.dev \u5b9a\u4e49\u7f51\u7edc\u7aef\u53e3\uff0c\u6620\u5c04\u5230\u4e00\u4e2a\u6216\u591a\u4e2aRevision\uff0c\u63d0\u4f9b\u6d41\u91cf\u5206\u53d1\u7ba1\u7406\u3002 Configuration : configuration.serving.knative.dev \u7ef4\u62a4 deployment \u7684\u671f\u671b\u72b6\u6001\uff0c\u5e76\u53d1\u6570, Min/Max/Target Scale \u7b49\u3002 \u4fee\u6539 Configuration \u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a Revision\u3002 Revision : revision.serving.knative.dev \u6bcf\u6b21\u4fee\u6539\u4ee3\u7801\u548c\u914d\u7f6e\u7684\u5feb\u7167\u3002Revisions \u4e0d\u53ef\u66f4\u6539\uff0c\u4e14\u6839\u636e\u6d41\u91cf\u81ea\u52a8\u6269\u7f29\u3002","title":"Serving \u8d44\u6e90"},{"location":"serverless/knative/#serving_2","text":"$ kubectl apply -f serving-core.yaml\uff0c serving \u7684\u6838\u5fc3\u7ec4\u4ef6\u5982\u56fe\u3002 \u53ef\u4ee5\u770b\u5230 \u518d namespace knative-serving \u4e0b\uff0c\u6709 controller \u3001webhook \u3001autoscaler\u3001activator \u8fd9\u56db\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1b \u5176\u5b9e\uff0c\u8fd8\u6709\u4e00\u4e2a queue, \u8fd0\u884c\u5728\u6bcf\u4e2a\u5e94\u7528\u7684 pod \u91cc\uff0c\u4f5c\u4e3a sidecar \u5b58\u5728\u3002 Controller \u8d1f\u8f7d Service \u6574\u4e2a\u751f\u547d\u5468\u671f\u7684\u7ba1\u7406\uff0c\u6d89\u53ca\u3001Configuration\u3001Route\u3001Revision \u7b49\u7684 CURD\u3002 Webhook \u4e3b\u8981\u8d1f\u8d23\u521b\u5efa\u548c\u66f4\u65b0\u7684\u53c2\u6570\u6821\u9a8c\u3002 Autoscaler \u6839\u636e\u5e94\u7528\u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u5bf9\u5e94\u7528\u6269\u7f29\u5bb9\u3002 Activator \u8d1f\u8d23\u4ece 0 \u5230 1\u3002\u5728\u5e94\u7528\u7f29\u5bb9\u5230 0 \u540e\uff0c\u62e6\u622a\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u901a\u77e5 autoscaler \u542f\u52a8\u76f8\u5e94\u5e94\u7528\u5b9e\u4f8b\uff0c\u7b49\u5f85\u542f\u52a8\u540e\u5c06\u8bf7\u6c42\u8f6c\u53d1\u3002 Queue \u8d1f\u8f7d\u62e6\u622a\u8f6c\u53d1\u7ed9 Pod \u7684\u8bf7\u6c42\uff0c\u7528\u4e8e\u7edf\u8ba1 Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u7b49\uff0cautoscaler \u4f1a\u8bbf\u95ee queue \u83b7\u53d6\u76f8\u5e94\u6570\u636e\u5bf9\u5e94\u7528\u6269\u7f29\u5bb9\u3002","title":"Serving \u67b6\u6784"},{"location":"serverless/knative/#_3","text":"\u5982\u4f55\u53d1\u751f 1 -> n\uff1a\u4efb\u4f55\u8bbf\u95ee\u5e94\u7528\u7684\u8bf7\u6c42\u5728\u8fdb\u5165 Pod \u540e\u90fd\u4f1a\u88ab Queue \u62e6\u622a\uff0c\u7edf\u8ba1\u5f53\u524d Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u6570\uff0c\u540c\u65f6 Queue \u4f1a\u5f00\u653e\u4e00\u4e2a metric \u63a5\u53e3\uff0cautoscalor \u901a\u8fc7\u8bbf\u95ee\u8be5\u7aef\u53e3\u53bb\u83b7\u53d6 Pod \u7684\u8bf7\u6c42\u5e76\u53d1\u91cf\u5e76\u8ba1\u7b97\u662f\u5426\u9700\u8981\u6269\u7f29\u5bb9\u3002\u5f53\u9700\u8981\u6269\u7f29\u5bb9\u65f6\uff0cautoscalor \u4f1a\u901a\u8fc7\u4fee\u6539 Revision \u4e0b\u7684 deployment \u7684\u5b9e\u4f8b\u4e2a\u6570\u8fbe\u5230\u6269\u7f29\u5bb9\u7684\u6548\u679c\u3002 0 -> 1\uff1a\u5728\u5e94\u7528\u957f\u65f6\u95f4\u65e0\u8bf7\u6c42\u8bbf\u95ee\u65f6\uff0c\u5b9e\u4f8b\u4f1a\u7f29\u51cf\u5230 0\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u8bbf\u95ee\u5e94\u7528\u7684\u8bf7\u6c42\u4f1a\u88ab\u8f6c\u53d1\u5230 activator\uff0c\u5e76\u5728\u8bf7\u6c42\u5728\u8f6c\u53d1\u5230 activator \u4e4b\u524d\u4f1a\u88ab\u6807\u8bb0\u8bf7\u6c42\u8bbf\u95ee\u7684 Revision \u4fe1\u606f\uff08\u7531 controller \u4fee\u6539 VirtualService \u5b9e\u73b0\uff09\u3002activator \u63a5\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u5c06\u6539 Revision \u7684\u5e76\u53d1\u91cf\u52a0 1\uff0c\u5e76\u5c06 metric \u63a8\u9001\u7ed9 autoscalor\uff0c\u542f\u52a8 Pod\u3002\u540c\u65f6\uff0cactivator \u76d1\u63a7 Revision \u7684\u542f\u52a8\u72b6\u6001\uff0cRevision \u6b63\u5e38\u542f\u52a8\u540e\uff0c\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u76f8\u5e94\u7684 Pod\u3002 \u5f53\u7136\uff0c\u5728 Revision \u6b63\u5e38\u542f\u52a8\u540e\uff0c\u5e94\u7528\u7684\u8bf7\u6c42\u5c06\u4e0d\u4f1a\u518d\u53d1\u9001\u5230 activator\uff0c\u800c\u4e14\u76f4\u63a5\u53d1\u9001\u81f3\u5e94\u7528\u7684 Pod\uff08\u7531 controller \u4fee\u6539 VirtualService \u5b9e\u73b0\uff09\u3002 \u76d1\u63a7\u6307\u6807 KPA \u6839\u636e\u5e76\u53d1\u6570\u8fdb\u884c\u4f38\u7f29\uff0c kpa.autoscaling.knative.dev \u3002 HPA \u6839\u636e\u5236CPU\u8fdb\u884c\u4f38\u7f29\uff0c hpa.autoscaling.knative.dev \uff0c\u76f4\u63a5\u5229\u7528 k8s \u7684HPA\u80fd\u529b\u3002","title":"\u81ea\u52a8\u6269\u7f29\u5bb9"},{"location":"serverless/knative/#service","text":"# helloworld-go.yaml apiVersion : serving.knative.dev/v1 # Current version of Knative kind : Service metadata : name : helloworld-go namespace : default spec : template : metadata : name : helloworld-go-1 spec : containers : - image : gcr.io/knative-samples/helloworld-go env : - name : TARGET value : \"Go Sample v1\" kubectl apply -f helloworld-go.yaml \u4e00\u4e0b\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002 Service | -> Route | -> Configuration -> Revision Revision | -> Deployment / PodAutoscaler | -> ServerlessService Route -> ClusterIngress -> VitualService(istio) Traffic-spitting apiVersion : serving.knative.dev/v1 # Current version of Knative kind : Service metadata : name : helloworld-go namespace : default spec : template : metadata : name : helloworld-go-2 spec : containers : - image : gcr.io/knative-samples/helloworld-go env : - name : TARGET value : \"Go Sample v2\" traffic : - tag : current revisionName : helloworld-go-1 percent : 50 - tag : candidate revisionName : helloworld-go-2 percent : 50 - tag : latest latestRevision : true percent : 0","title":"\u4e00\u4e2a service"},{"location":"serverless/knative/#eventing-core","text":"Knative Eventing is a system that is designed to address a common need for cloud native development and provides composable primitives to enable late-binding event sources and event consumers.","title":"Eventing (Core)"},{"location":"serverless/knative/#eventing","text":"\u53ef\u9760\u7684\u6d88\u606f\u901a\u9053 \u8ba2\u9605\u8f6c\u53d1\u673a\u5236","title":"Eventing \u5b9e\u73b0\u7684\u529f\u80fd"},{"location":"serverless/knative/#eventing_1","text":"Event Source\uff1a\u628a\u65f6\u95f4\u751f\u4ea7\u8005\u63a5\u5165 Knative Eventing \u5e73\u53f0\uff0c\u5e76\u628a\u4e8b\u4ef6\u4f20\u5230\u6d88\u8d39\u8005\u3002 Channel\uff1a \u5b9e\u73b0\u4e8b\u4ef6\u8f6c\u53d1\u548c\u5b58\u50a8\uff0c\u652f\u6301 Kafka \u548c NATS Streaming Subscription\uff1a\u4e8b\u4ef6\u8ba2\u9605\u8005\u3002 Squence: \u4e8b\u4ef6\u4f9d\u6b21\u8f6c\u53d1\u7ed9\u591a\u4e2a\u8ba2\u9605\u8005\u7684\u4e00\u79cd\u673a\u5236 Parallel\uff1a\u4e8b\u4ef6\u540c\u65f6\u8f6c\u53d1\u7ed9\u591a\u4e2a\u8ba2\u9605\u8005\u7684\u4e00\u79cd\u673a\u5236 Broker\uff1a\u63a5\u53d7\u4e8b\u4ef6\uff0c\u5e76\u5c06\u4e8b\u4ef6\u8f6c\u53d1\u5230\u8ba2\u9605\u8005\u3002 Trigger\uff1a\u4e8b\u4ef6\u8ba2\u9605\u3002 Event Registry \u6ce8\u518c\u4e2d\u5fc3\uff0c\u4e8b\u4ef6\u7c7b\u578b\u7684\u96c6\u5408\uff0c\u53ef\u67e5\u770b\u3002 ### Source Knative \u4e2d\u6709\u4e2a\u8d44\u6e90\u53eb EventSource\u3002\u7528\u4e8e\u628a\u4e8b\u4ef6\u751f\u4ea7\u8005\u63a5\u5165 Knative \u4e8b\u4ef6\u5e73\u53f0\u3002 \u4e8b\u4ef6\u751f\u4ea7\u8005\u5728 Knative \u4e8b\u4ef6\u5e73\u53f0\u7684\u62bd\u8c61 Spec \u53c2\u6570 Sink Knative \u4e2d\u5df2\u6709\u7684\u9884\u5b9a\u4e49\u8d44\u6e90\u7c7b\u578b\uff1a APIServerSource GithubSource AwsSource ContainerSource CronJobSource ...","title":"Eventing \u8d44\u6e90"},{"location":"serverless/knative/#sink","text":"Sink \u8868\u793a\u4e8b\u4ef6\u6d88\u606f\u4f20\u9001\u7684\u76ee\u7684\u5730\uff0c\u66b4\u9732\u4e00\u4e2a HTTP \u7aef\u53e3\u3002\u4e0d\u662f\u4e00\u4e2a\u5177\u4f53\u8d44\u6e90\u3002 \u5728 Kubernets\uff0c\u53ea\u8981\u5e26\u7740\u5c5e\u6027\uff1astatus.address.hostname \u7684\u90fd\u53ef\u4ee5\u770b\u4f5c sink\u3002 \u4e24\u79cd\u7c7b\u578b\uff1a Addressable: \u66b4\u9732\u4e00\u4e2aHTTP \u7aef\u53e3\uff0c\u63a5\u53d7\u6d88\u606f\uff0c\u8fd4\u56de\u6210\u529f\u6216\u5931\u8d25\u3002 Callable: \u66b4\u9732\u4e00\u4e2aHTTP \u7aef\u53e3\uff0c\u63a5\u53d7\u6d88\u606f\uff0c\u8fd4\u56de 0 \u5230 1 \u4e2a\u65b0\u4e8b\u4ef6\u3002 Knative \u4e2d\u7684 Sink \u7c7b\u578b\u7684\u8d44\u6e90\uff1a Service, Channel, Broker, Parallel \u53ca Sequence","title":"Sink"},{"location":"serverless/knative/#eventing-models","text":"","title":"Eventing Models"},{"location":"serverless/knative/#_4","text":"Simple Dlivery \u7b80\u5355\u6295\u9012 \u5b9a\u4e49\u4e8b\u4ef6\u6e90 \u901a\u8fc7 Sink \u6307\u5b9a\u6d88\u8d39\u8005\u5730\u5740 # event-source.yaml apiVersion: sources.knative.dev/v1alpha2 kind: CronJobSource metadata: name: test-heartbeats spec: template: spec: containers: - image: <heartbeats_image_uri> name: heartbeats args: - --period=1 env: - name: POD_NAME value: \"mypod\" - name: POD_NAMESPACE value: \"event-test\" sink: ref: apiVersion: serving.knative.dev/v1 kind: Service name: event-display","title":"\u6a21\u578b\u4e00"},{"location":"serverless/knative/#_5","text":"Channel & Subscription \u901a\u9053\u4e0e\u8ba2\u9605 \u901a\u9053 Channel, \u4ee3\u8868\u4e8b\u4ef6\u7684\u8f6c\u53d1\u548c\u6301\u4e45\u5316\u3002 \u8ba2\u9605\u63cf\u8ff0\u901a\u9053\u4e0e\u6d88\u8d39\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4e5f\u80fd\u8fde\u63a5\u6d88\u8d39\u8005\u4e0e\u7b2c\u4e8c\u4e2a\u901a\u9053\uff0c\u7528\u4e8e\u5904\u7406\u6d88\u8d39\u8005\u8fd4\u56de\u7684\u4e8b\u4ef6\u3002 \u8ba2\u9605 Subscription\uff0c\u652f\u6301\u4e0d\u540c\u6280\u672f\u7684\u901a\u9053\uff0c\u5982 Kafka, NATS Streaming \u7b49\u3002 \u901a\u9053\u4e0e\u8ba2\u9605\uff0c\u4e00\u5bf9\u591a\u3002 # channel.yaml apiVersion: messaging.knative.dev/v1alpha1 kind: Channel metadata: name: my-channel # event-source.yaml ... spec: ... sink: apiVersion: messaging.knative.dev/v1 Kind: Channel name: my-channel # subscription.yaml apiVersion: eventing.knative.dev/v1alpha2 kind: Subscription metadata: name: test-subscription spec: channel: apiVersion: messaging.knative.dev/v1 kind: Channel name: my-channel subscriber: apiVersion: serving.knative.dev/v1 kind: Service name: event-display","title":"\u6a21\u578b\u4e8c"},{"location":"serverless/knative/#_6","text":"Sequence \u5e8f\u5217 Sequence \u5b9a\u4e49\u4e00\u7cfb\u5217\u4f9d\u6b21\u6267\u884c\u4e8b\u4ef6 \u4e8b\u4ef6\u53d1\u9001\u7ed9\u670d\u52a1 \u670d\u52a1\u53ef\u4ee5\u4fee\u6539 or \u521b\u5efa\u65b0\u7684\u4e8b\u4ef6 # event-source.yaml ... spec: ... sink: apiVersion: messaging.knative.dev/v1 Kind: Sequence name: my-sequence # sequence.yaml apiVersion: eventing.knative.dev/v1alpha2 kind: Sequence metadata: name: my-sequence spec: steps: - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-1 - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-2 - ref: apiVersion: serving.knative.dev/v1 kind: Service name: step-3","title":"\u6a21\u578b\u4e09"},{"location":"serverless/knative/#_7","text":"Parallel \u5e76\u5217 Parallel \u5b9a\u4e49\u4e00\u7cfb\u5217\u5e76\u884c\u4e8b\u4ef6 \u6bcf\u4e2a\u670d\u52a1\u63a5\u53d7\u5230\u540c\u4e00\u4e8b\u4ef6 \u6bcf\u4e2a\u5206\u652f\u5b9a\u4e49 filter # event-source.yaml ... spec : ... sink : apiVersion : messaging.knative.dev/v1 Kind : Parallel name : my-parallel # parallel.yaml apiVersion : eventing.knative.dev/v1alpha2 kind : Parallel metadata : name : my-parallel spec : branches : - filter ref : apiVersion : serving.knative.dev/v1 kind : Service name : filter-1 subscriber : ref : apiVersion : serving.knative.dev/v1 kind : Service name : mysevice-1 - filter ref : apiVersion : serving.knative.dev/v1 kind : Service name : filter-2 subscriber : ref : apiVersion : serving.knative.dev/v1 kind : Service name : mysevice-2","title":"\u6a21\u578b\u56db"},{"location":"serverless/knative/#_8","text":"Tigger & Broker \u9ed1\u76d2\u6a21\u578b \u642d\u5efa\u9ed1\u76d2\uff0c\u9690\u85cf\u5177\u4f53\u5b9e\u73b0\uff0c\u7528\u6237\u4e0d\u5173\u5fc3 Broker \u4e8b\u4ef6\u6876\uff0c\u63a5\u5165\u5404\u79cd\u4e8b\u4ef6\uff0c\u4e8b\u4ef6\u5177\u6709\u5404\u79cd\u5c5e\u6027\u7528\u6765\u533a\u5206 Tigger \u8fc7\u6ee4\u5668\uff0c\u53ea\u6709\u901a\u8fc7\u8fc7\u6ee4\u5668\u7684\u6761\u4ef6\u624d\u80fd\u4f20\u7ed9\u6d88\u8d39\u8005 # Broker: knative \u81ea\u5df1\u5b9e\u73b0\uff0c\u5b89\u88c5\u5373\u53ef\u3002 broker-filter broker-ingress # Trigger.yaml apiVersion : eventing.knative.dev/v1beta1 kind : Trigger metadata : name : my-trigger spec : filter : attributes : type : dev.knative.sources.ping subscriber : ref : apiVersion : serving.knative.dev/v1beta1 kind : Service name : event-display","title":"\u6a21\u578b\u4e94"},{"location":"serverless/knative/#observability","text":"Logging: ELK Monitoring: Promethus & Grafana Tracing: Jaeger/Zipkin","title":"Observability"},{"location":"serverless/knative/#build","text":"","title":"Build"},{"location":"serverless/knative/#tekton-pipeline-core","text":"pipeline-controller Pipeline-webhook","title":"Tekton Pipeline Core"},{"location":"serverless/knative/#tekton-pipeline-crds","text":"Tekton \u4e3a Kubernetes \u63d0\u4f9b\u4e86\u591a\u79cd CRD \u8d44\u6e90\u5bf9\u8c61\uff0c\u53ef\u7528\u4e8e\u5b9a\u4e49\u6211\u4eec\u7684\u6d41\u6c34\u7ebf\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u4e2a\u8d44\u6e90\u5bf9\u8c61\uff1a Task\uff1a\u5b9a\u4e49\u4e86\u4e00\u7ec4\u6784\u5efa\u6b65\u9aa4\uff0c\u5982\u7f16\u8bd1\u4ee3\u7801\u3001\u8fd0\u884c\u6d4b\u8bd5\u4ee5\u53ca\u6784\u5efa\u548c\u90e8\u7f72\u955c\u50cf\u3002\u8868\u793a\u6267\u884c\u547d\u4ee4\u7684\u4e00\u7cfb\u5217\u6b65\u9aa4\uff0ctask \u91cc\u53ef\u4ee5\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684 steps\uff0c\u4f8b\u5982\u7f16\u8bd1\u4ee3\u7801\u3001\u6784\u5efa\u955c\u50cf\u3001\u63a8\u9001\u955c\u50cf\u7b49\uff0c\u6bcf\u4e2a step \u5b9e\u9645\u7531\u4e00\u4e2a Pod \u6267\u884c\u3002 TaskRun\uff1atask \u53ea\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6a21\u7248\uff0ctaskRun \u624d\u771f\u6b63\u4ee3\u8868\u4e86\u4e00\u6b21\u5b9e\u9645\u7684\u8fd0\u884c\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5df1\u624b\u52a8\u521b\u5efa\u4e00\u4e2a taskRun\uff0ctaskRun \u521b\u5efa\u51fa\u6765\u4e4b\u540e\uff0c\u5c31\u4f1a\u81ea\u52a8\u89e6\u53d1 task \u63cf\u8ff0\u7684\u6784\u5efa\u4efb\u52a1\u3002 Pipeline\uff1a\u5b9a\u4e49\u4e86\u6784\u6210\u6d41\u6c34\u7ebf\u7684 Tasks \u3002\u4e00\u7ec4\u4efb\u52a1\uff0c\u8868\u793a\u4e00\u4e2a\u6216\u591a\u4e2a task\u3001PipelineResource \u4ee5\u53ca\u5404\u79cd\u5b9a\u4e49\u53c2\u6570\u7684\u96c6\u5408\u3002 PipelineRun\uff1a\u5b9a\u4e49\u4e86\u6d41\u6c34\u7ebf\u7684\u6267\u884c\u3002\u5b83\u5f15\u7528\u8981\u8fd0\u884c\u7684 Pipeline \u4ee5\u53ca\u8981\u7528\u4f5c\u8f93\u5165\u548c\u8f93\u51fa\u7684 PipelineResources \u3002\u7c7b\u4f3c task \u548c taskRun \u7684\u5173\u7cfb\uff0cpipelineRun \u4e5f\u8868\u793a\u67d0\u4e00\u6b21\u5b9e\u9645\u8fd0\u884c\u7684 pipeline\uff0c\u4e0b\u53d1\u4e00\u4e2a pipelineRun CRD \u5b9e\u4f8b\u5230 Kubernetes\u540e\uff0c\u540c\u6837\u4e5f\u4f1a\u89e6\u53d1\u4e00\u6b21 pipeline \u7684\u6784\u5efa\u3002 PipelineResource\uff1a\u6d41\u6c34\u7ebf\u7684\u8f93\u5165\uff08\u4f8b\u5982 git \u5b58\u50a8\u5e93\uff09\u6216\u8f93\u51fa\uff08\u4f8b\u5982 docker \u955c\u50cf\uff09\u3002\u8868\u793a pipeline \u8f93\u5165\u8d44\u6e90\uff0c\u6bd4\u5982 github \u4e0a\u7684\u6e90\u7801\uff0c\u6216\u8005 pipeline \u8f93\u51fa\u8d44\u6e90\uff0c\u4f8b\u5982\u4e00\u4e2a\u5bb9\u5668\u955c\u50cf\u6216\u8005\u6784\u5efa\u751f\u6210\u7684 jar \u5305\u7b49\u3002","title":"Tekton Pipeline CRDs"},{"location":"serverless/knative/#pipeline","text":"","title":"\u4e00\u4e2a Pipeline \u6d41\u7a0b"},{"location":"serverless/knative/#devops","text":"","title":"DevOps"},{"location":"serverless/knative/#_9","text":"Cloud Native/Serverless/Faas \u6982\u5ff5 Stack: Kubernetes, Istio, microservices, logging/monitoring/tracing, OpenFaas \u548c Knative","title":"\u603b\u7ed3"},{"location":"serverless/openfaas/","text":"OpenFaas \u00b6 \u5185\u5bb9\u5bfc\u822a \u00b6 OpenFaaS Stack HightLights OpenFaaS Architecture \u793a\u4f8b\u6f14\u793a \u57fa\u7840\u7ec4\u4ef6 Gateway Provider Watchdog Queue-Worker & NATS Promethus & AlertManager & Faas-idler Gateway \u6e90\u7801\u5206\u6790 Provider \u6e90\u7801\u5206\u6790 Watchdog \u6e90\u7801\u5206\u6790 \u603b\u7ed3 Landscape 2.0 OpenFaaS Stack \u00b6 HightLights \u00b6 UI \u652f\u6301 \u591a\u79cd\u7f16\u7a0b\u8bed\u8a00 Faas-cli\uff0c\u4e30\u5bcc\u7684 CLI \u547d\u4ee4 YAML \u914d\u7f6e \u6309\u9700\u81ea\u52a8\u4f38\u7f29 \u51fd\u6570\u5546\u5e97 \u53e6\u5916\uff1a\u652f\u6301 CRD \u5982\u4eca\u770b\u6765\uff0c\u8fd9\u4e9b hightlights \u5176\u5b9e\u662f serverless \u6846\u67b6\u7684\u6807\u914d\u3002\u4f46\u5176\u67b6\u6784\uff0c\u4e5f\u503c\u5f97\u7814\u7a76\u3002 OpenFaaS Architecture \u00b6 \u793a\u4f8b\u6f14\u793a \u00b6 Hello-world. \u770b\u4e00\u4e0b templates \u91cc\u7684 Dockerfile \u57fa\u7840\u7ec4\u4ef6 \u00b6 Gateway \u00b6 \u4e3a\u51fd\u6570\u8c03\u7528\u63d0\u4f9b\u8def\u7531\uff0c\u8d77\u5230\u4e00\u4e2a\u57fa\u7840\u8f6c\u53d1\u7684\u529f\u80fd Promethus \u6536\u96c6\u76d1\u63a7\u6307\u6807 \u63a5\u53d7AlterManager\u901a\u77e5\uff0c\u81ea\u52a8\u6269\u7f29\u5bb9 \u5185\u7f6e UI \u754c\u9762 \u56fe\u4e2d\uff0c \u7528\u6237\u901a\u8fc7 faas-cli \u3001UI \u6216 REST API \u8bf7\u6c42\u8bbf\u95ee Gateway\u7f51\u5173; /function/ \u8bf7\u6c42\u4f1a\u88ab\u8f6c\u53d1\u5230 Provider\uff0cProvider \u8c03\u7528\u51fd\u6570\uff08\u901a\u8fc7Watchdog\u8c03\u7528 forked process\uff09\uff1b Prometheus \u901a\u8fc7 /metrics \u6536\u96c6\u76d1\u63a7\u6570\u636e\uff1b AlertManager \u6839\u636e\u8bbe\u7f6e\u7684\u62a5\u8b66\u89c4\u5219\uff0c\u901a\u77e5 Gateway /system/alert \u81ea\u52a8\u6269\u7f29\u5bb9\u3002 Provider \u00b6 \u63d0\u4f9b\u51fd\u6570\u7684 CRUD API \u80fd\u529b \u63d0\u4f9b\u51fd\u6570\u7684 invoke \u80fd\u529b \u8bbe\u7f6e/\u83b7\u53d6\u51fd\u6570\u526f\u672c\u6570 Watchdog \u00b6 \u96c6\u6210\u5230\u6bcf\u4e2a\u5bb9\u5668\uff0cresponsible for starting and monitoring functions in OpenFaaS. Classic Watchdog\uff0c\u5982\u4e0b\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u4f1afork\u4e00\u4e2a\u51fd\u6570\u8fdb\u7a0b\u6267\u884c\u3002 \u65b0\u7684 of-watchdog \u9879\u76ee\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u9ed8\u8ba4http\u3002 \u6709\u70b9\u50cf\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6982\u5ff5\uff0cThe primary difference is the ability to keep the function process warm between invocations\u3002ame process can be re-used repeatedly to offset the latency of forking. Queue-Worker & NATS \u00b6 Queue-worker \u7ec4\u4ef6\u63d0\u4f9b\u6d88\u606f\u961f\u5217\u670d\u52a1\uff0c\u7528\u4e8e \u5f02\u6b65 \u5730\u5904\u7406\u4e8b\u4ef6\u3002 nats\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\uff0c\u4e91\u539f\u751f\u7684\u6d88\u606f\u7cfb\u7edf\u3002\u4f7f\u7a0b\u5e8f\u53ef\u4ee5\u8f7b\u677e\u5730\u8de8\u4e0d\u540c\u73af\u5883\uff0c\u8bed\u8a00\uff0c\u4e91\u63d0\u4f9b\u5546\u548c\u5185\u90e8\u90e8\u7f72\u7cfb\u7edf\u8fdb\u884c\u901a\u4fe1\u3002 Promethus & AlertManager & Faas-idler \u00b6 Promethus \u6536\u96c6\u76d1\u63a7\u6307\u6807\uff1b \u63a5\u53d7AlterManager\u901a\u77e5\uff0c\u81ea\u52a8\u6269\u7f29\u5bb9\u3002 Faas-idler\uff1a \u76d1\u63a7Prometheus \u6307\u6807\uff0c\u51b3\u5b9a\u662f\u5426\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u88ab scaled to zero. Gateway \u6e90\u7801\u5206\u6790 \u00b6 https://github.com/openfaas/faas https://github.com/openfaas/nats-queue-worker gateway/main.go ReadConfig (\u8bfb\u53d6\u73af\u5883\u914d\u7f6e\u4fe1\u606f) BasicAuthCredentials (\u57fa\u672c\u7684\u8eab\u4efd\u8ba4\u8bc1) MakeForwardingProxyHandler (\u548c\u51fd\u6570\u76f8\u5173\u7684\u4ee3\u7406\u8f6c\u53d1\uff0cnet/http\u4e0a\u62bd\u8c61\u4e86\u4e00\u5c42) List: faasHandlers.ListFunctions Deploy: faasHandlers.DeployFunction Delete: faasHandlers.DeleteFunction Update: faasHandlers.UpdateFunction Query: faasHandlers.QueryFunction Info\uff1afaasHandlers.InfoHandler Secret\uff1afaasHandlers.SecretHandler Namespace: faasHandlers.NamespaceListerHandler if ScaleFromZero : NewFunctionCache \uff08\u53c2\u8003 zero-scale \uff09 If UseNATS : CreateNATSQueue (\u5f02\u6b65\u51fd\u6570\u542f\u7528NATS\uff0c\u6d88\u606f\u53d1\u5e03\u8005\u89d2\u8272) NewPrometheusQuery\uff08\u8bbe\u7f6ePrometheus\u76d1\u63a7\uff09 Scale\uff1afaasHandlers.ScaleFunction\uff08\u8bbe\u7f6e\u81ea\u52a8\u6269\u7f29\u5bb9\uff09 mux.NewRouter()\uff08\u6ce8\u518c\u5404\u79cd\u8def\u7531\uff09 go runMetricsServer()\uff08\u542f\u52a8Prometheus\u6307\u6807\u6536\u96c6\uff09 &http.Server{} => ListenAndServe \uff08\u542f\u52a8\u670d\u52a1\uff09 \u53ef\u89c1\uff0cGateway \u662f OpenFaaS \u6700\u4e3a\u91cd\u8981\u7684\u4e00\u4e2a\u7ec4\u4ef6\u3002\u6574\u4e2a\u9879\u76ee\u7684\u57fa\u672c\u8109\u7edc\u90fd\u5728\u8fd9\u4e2a\u7ec4\u4ef6\u4e2d\uff0c\u4e3b\u8981\u5c31\u662f\u4ee3\u7406\u8f6c\u53d1\u3002 Provider \u6e90\u7801\u5206\u6790 \u00b6 https://github.com/openfaas/faas-provider serve.go r = mux.NewRouter() \uff08\u6ce8\u518c\u5404\u79cd\u8def\u7531\uff09 Serve if EnableBasicAuth: handlers.FunctionReader = auth.DecorateWithBasicAuth (\u9274\u6743) r.HandleFunc(\"/system/***\") (\u5904\u7406 HTTP \u8bf7\u6c42\u7b49\u8def\u7531) r.HandleFunc(\"/function/***\") r.HandleFunc(\"/healthz/***\") ListenAndServe() types/serve.go type FaaSHandlers struct { // FunctionProxy provides the function invocation proxy logic. Use proxy.NewHandlerFunc to // use the standard OpenFaaS proxy implementation or provide completely custom proxy logic. FunctionProxy http.HandlerFunc FunctionReader http.HandlerFunc DeployHandler http.HandlerFunc DeleteHandler http.HandlerFunc ReplicaReader http.HandlerFunc ReplicaUpdater http.HandlerFunc SecretHandler http.HandlerFunc // LogHandler provides streaming json logs of functions LogHandler http.HandlerFunc // UpdateHandler an existing function/service UpdateHandler http.HandlerFunc // HealthHandler defines the default health endpoint bound to \"/healthz // If the handler is not set, then the \"/healthz\" path will not be configured HealthHandler http.HandlerFunc InfoHandler http.HandlerFunc ListNamespaceHandler http.HandlerFunc } \u58f0\u660e\u5404\u79cd handler \u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u5e73\u53f0\uff08kubernetes or DockerSwarm\uff09\u90fd\u5177\u5907\u4e86FaaS Provider \u7684\u80fd\u529b\u3002 proxy/proxy.go // proxyRequest \u5904\u7406\u8c03\u7528\u51fd\u6570\u670d\u52a1\u7684\u5b9e\u9645\u8bf7\u6c42 func proxyRequest(...) { ... proxyReq = buildProxyRequest(originalReq, functionAddr, pathVars[\"params\"]) } // \u62fc\u88c5 Watchdog \u7684 Url\uff0c\u5e76\u4ee3\u7406\u8fc7\u53bb func buildProxyRequest(...) { f baseURL.Port() == \"\" { host = baseURL.Host + \":\" + watchdogPort } url := url.URL{ Scheme: baseURL.Scheme, Host: host, Path: extraPath, RawQuery: originalReq.URL.RawQuery, } upstreamReq, err := http.NewRequest(originalReq.Method, url.String(), nil) if err != nil { return nil, err } ... return upstreamReq } https://github.com/openfaas/faas-netes main.go main() { if !operator { runController(kubeconfig, masterURL) // \u8fd0\u884c k8s \u7684\u6838\u5fc3\u63a7\u5236\u5668 } else { runOperator(kubeconfig, masterURL) // \u64cd\u4f5c k8s \u7684CRD \u8d44\u6e90\uff0c\u65b0\u589e\u80fd\u529b } } // masterURL\uff1a address of the Kubernetes API server // operator\uff1aUse the operator mode instead of faas-netes The faas-netes controller for OpenFaaS is the most mature, well tested and supported. You may also use the OpenFaaS Operator if you would like to use a Function CRD. If you are not sure which to use, then use faas-netes. See also: faas-netes , openfaas-operator . func runController(kubeconfig, masterURL string) { // 1. k8s namespace functionNamespace := \"default\" // 2. \u83b7\u53d6 k8s, \u63a2\u9488\uff0c\u955c\u50cf\u62c9\u53d6\u7b56\u7565\u7b49\u914d\u7f6e\u4fe1\u606f deployConfig := k8s.DeploymentConfig{} // 3. k8s \u5ba2\u6237\u7aef factory := k8s.NewFunctionFactory(clientset, deployConfig) // 4. \u6838\u5fc3\uff1a k8s \u64cd\u4f5c\u53e5\u67c4 bootstrapHandlers := providertypes.FaaSHandlers{ FunctionProxy: proxy.NewHandlerFunc(cfg.FaaSConfig, functionLookup), DeleteHandler: handlers.MakeDeleteHandler(functionNamespace, clientset), DeployHandler: handlers.MakeDeployHandler(functionNamespace, factory), FunctionReader: handlers.MakeFunctionReader(functionNamespace, clientset), ReplicaReader: handlers.MakeReplicaReader(functionNamespace, clientset), ReplicaUpdater: handlers.MakeReplicaUpdater(functionNamespace, clientset), UpdateHandler: handlers.MakeUpdateHandler(functionNamespace, factory), HealthHandler: handlers.MakeHealthHandler(), InfoHandler: handlers.MakeInfoHandler(version.BuildVersion(), version.GitCommit), SecretHandler: handlers.MakeSecretHandler(functionNamespace, clientset), LogHandler: logs.NewLogHandlerFunc(k8s.NewLogRequestor(clientset, functionNamespace), cfg.FaaSConfig.WriteTimeout), ListNamespaceHandler: handlers.MakeNamespacesLister(functionNamespace, clientset), } // 5. \u8fd0\u884c\u670d\u52a1\u5668 faasProvider.Serve(&bootstrapHandlers, &cfg.FaaSConfig) } handlers/delete.go // \u8fd4\u56de delete handler func MakeDeleteHandler() { return func{ // ... deployment, findDeployErr := clientset.AppsV1(). Deployments(lookupNamespace). Get(request.FunctionName, getOpts) if isFunction(deployment) { err := deleteFunction(lookupNamespace, clientset, request, w) } // ... } } // \u6267\u884c\u5220\u9664 func deleteFunction(..., clientset *kubernetes.Clientset, ...) { // \u5220\u9664 deploy clientset.AppsV1().Deployments(functionNamespace). Delete(request.FunctionName, opts) // \u5220\u9664 service clientset.CoreV1(). Services(functionNamespace). Delete(request.FunctionName, opts); } handles/replica.go // \u8c03\u7528 Kubernetes API \u8fdb\u884c\u7684\u6269\u7f29\u5bb9\uff0c\u4ee3\u7801\u90fd\u5dee\u4e0d\u591a\uff0c\u4e0d\u518d\u8d58\u8ff0 \u56e0\u6b64\uff0cprovider \u505a\u4e86\u4e24\u4ef6\u4e8b\uff0c \u4ee3\u7406\u8f6c\u53d1\u8bf7\u6c42\u5230 watchdog \u64cd\u4f5c Kubernetes Watchdog \u6e90\u7801\u5206\u6790 \u00b6 https://github.com/openfaas/faas watchdog/main.go func main() { // 1. \u8bfb\u53d6\u914d\u7f6e readConfig := ReadConfig{} config := readConfig.Read(osEnv) // 2. \u5904\u7406\u8bf7\u6c42 http.HandleFunc(\"/_/health\", makeHealthHandler()) // \u6838\u5fc3 makeRequestHandler http.HandleFunc(\"/\", metrics.InstrumentHandler(makeRequestHandler(&config), httpMetrics)) // 3. Promethus \u670d\u52a1 go metricsServer.Serve(cancel) // 4. \u51fd\u6570\u670d\u52a1 listenUntilShutdown(shutdownTimeout, s, config.suppressLock) } // listen for HTTP \u76f4\u5230\u542c\u5230\u4fe1\u53f7 SIGTERM \u4e14\u7b49\u5f85\u8d85\u65f6\u540e func listenUntilShutdown() { // Run the HTTP server in a separate go-routine. go func() { if err := s.ListenAndServe(); err != http.ErrServerClosed { log.Printf(\"Error ListenAndServe: %v\", err) close(idleConnsClosed) } }() } watchdog/handler.go // \u5904\u7406 Http \u8bf7\u6c42 func makeRequestHandler(config *WatchdogConfig) http.HandlerFunc { switch r.Method { case http.MethodPost, http.MethodPut, http.MethodPatch, http.MethodDelete, http.MethodGet: pipeRequest(config, w, r, r.Method) break } } // \u6838\u5fc3\uff1apipeRequest // \u4e3a\u6bcf\u4e2a\u8bf7\u6c42 Fork \u4e00\u4e2a fprocess func pipeRequest() { // ... parts := strings.Split(config.faasProcess, \" \") // faasProcess: \"node index.js\" // ... targetCmd := exec.Command(parts[0], parts[1:]...) // \u6267\u884c\u51fd\u6570 // ... requestBody, buildInputErr = buildFunctionInput(config, r) // ... } // \u683c\u5f0f\u5316\u8f93\u5165 buildFunctionInput(config *WatchdogConfig, r *http.Request) { //... return res, err } watchdog/readconfig.go func (ReadConfig) Read(hasEnv HasEnv) WatchdogConfig { // ... cfg.faasProcess = hasEnv.Getenv(\"fprocess\") // ... } \u603b\u7ed3 \u00b6 \u901a\u8fc7 faas-cli \u5982\u4f55\u7ef4\u62a4\u4e00\u4e2a Serveless \u5e94\u7528 \u770b Templetes \u7684 Dockerfile \u77e5\u9053\u8fd9\u4e2a\u955c\u50cf\u662f\u600e\u4e48\u6784\u5efa \u8bfb\u6e90\u7801\u77e5\u9053 openFaas \u90fd\u505a\u4e86\u4ec0\u4e48\uff0c\u5982\u4f55\u4f7f\u7528 kubernets \u7684\u80fd\u529b \u6b64\u5916\uff0c\u8bfb\u5185\u7f6eUI \u6e90\u7801\u53ef\u5b9a\u5236\u5316\u53ca\u5f00\u53d1\u516c\u53f8UI\u53ca\u5185\u90e8\u5546\u5e97\u7b49\u3002 ... Landscape 2.0 \u00b6","title":"Openfaas"},{"location":"serverless/openfaas/#openfaas","text":"","title":"OpenFaas"},{"location":"serverless/openfaas/#_1","text":"OpenFaaS Stack HightLights OpenFaaS Architecture \u793a\u4f8b\u6f14\u793a \u57fa\u7840\u7ec4\u4ef6 Gateway Provider Watchdog Queue-Worker & NATS Promethus & AlertManager & Faas-idler Gateway \u6e90\u7801\u5206\u6790 Provider \u6e90\u7801\u5206\u6790 Watchdog \u6e90\u7801\u5206\u6790 \u603b\u7ed3 Landscape 2.0","title":"\u5185\u5bb9\u5bfc\u822a"},{"location":"serverless/openfaas/#openfaas-stack","text":"","title":"OpenFaaS Stack"},{"location":"serverless/openfaas/#hightlights","text":"UI \u652f\u6301 \u591a\u79cd\u7f16\u7a0b\u8bed\u8a00 Faas-cli\uff0c\u4e30\u5bcc\u7684 CLI \u547d\u4ee4 YAML \u914d\u7f6e \u6309\u9700\u81ea\u52a8\u4f38\u7f29 \u51fd\u6570\u5546\u5e97 \u53e6\u5916\uff1a\u652f\u6301 CRD \u5982\u4eca\u770b\u6765\uff0c\u8fd9\u4e9b hightlights \u5176\u5b9e\u662f serverless \u6846\u67b6\u7684\u6807\u914d\u3002\u4f46\u5176\u67b6\u6784\uff0c\u4e5f\u503c\u5f97\u7814\u7a76\u3002","title":"HightLights"},{"location":"serverless/openfaas/#openfaas-architecture","text":"","title":"OpenFaaS Architecture"},{"location":"serverless/openfaas/#_2","text":"Hello-world. \u770b\u4e00\u4e0b templates \u91cc\u7684 Dockerfile","title":"\u793a\u4f8b\u6f14\u793a"},{"location":"serverless/openfaas/#_3","text":"","title":"\u57fa\u7840\u7ec4\u4ef6"},{"location":"serverless/openfaas/#gateway","text":"\u4e3a\u51fd\u6570\u8c03\u7528\u63d0\u4f9b\u8def\u7531\uff0c\u8d77\u5230\u4e00\u4e2a\u57fa\u7840\u8f6c\u53d1\u7684\u529f\u80fd Promethus \u6536\u96c6\u76d1\u63a7\u6307\u6807 \u63a5\u53d7AlterManager\u901a\u77e5\uff0c\u81ea\u52a8\u6269\u7f29\u5bb9 \u5185\u7f6e UI \u754c\u9762 \u56fe\u4e2d\uff0c \u7528\u6237\u901a\u8fc7 faas-cli \u3001UI \u6216 REST API \u8bf7\u6c42\u8bbf\u95ee Gateway\u7f51\u5173; /function/ \u8bf7\u6c42\u4f1a\u88ab\u8f6c\u53d1\u5230 Provider\uff0cProvider \u8c03\u7528\u51fd\u6570\uff08\u901a\u8fc7Watchdog\u8c03\u7528 forked process\uff09\uff1b Prometheus \u901a\u8fc7 /metrics \u6536\u96c6\u76d1\u63a7\u6570\u636e\uff1b AlertManager \u6839\u636e\u8bbe\u7f6e\u7684\u62a5\u8b66\u89c4\u5219\uff0c\u901a\u77e5 Gateway /system/alert \u81ea\u52a8\u6269\u7f29\u5bb9\u3002","title":"Gateway"},{"location":"serverless/openfaas/#provider","text":"\u63d0\u4f9b\u51fd\u6570\u7684 CRUD API \u80fd\u529b \u63d0\u4f9b\u51fd\u6570\u7684 invoke \u80fd\u529b \u8bbe\u7f6e/\u83b7\u53d6\u51fd\u6570\u526f\u672c\u6570","title":"Provider"},{"location":"serverless/openfaas/#watchdog","text":"\u96c6\u6210\u5230\u6bcf\u4e2a\u5bb9\u5668\uff0cresponsible for starting and monitoring functions in OpenFaaS. Classic Watchdog\uff0c\u5982\u4e0b\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u4f1afork\u4e00\u4e2a\u51fd\u6570\u8fdb\u7a0b\u6267\u884c\u3002 \u65b0\u7684 of-watchdog \u9879\u76ee\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u9ed8\u8ba4http\u3002 \u6709\u70b9\u50cf\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6982\u5ff5\uff0cThe primary difference is the ability to keep the function process warm between invocations\u3002ame process can be re-used repeatedly to offset the latency of forking.","title":"Watchdog"},{"location":"serverless/openfaas/#queue-worker-nats","text":"Queue-worker \u7ec4\u4ef6\u63d0\u4f9b\u6d88\u606f\u961f\u5217\u670d\u52a1\uff0c\u7528\u4e8e \u5f02\u6b65 \u5730\u5904\u7406\u4e8b\u4ef6\u3002 nats\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\uff0c\u4e91\u539f\u751f\u7684\u6d88\u606f\u7cfb\u7edf\u3002\u4f7f\u7a0b\u5e8f\u53ef\u4ee5\u8f7b\u677e\u5730\u8de8\u4e0d\u540c\u73af\u5883\uff0c\u8bed\u8a00\uff0c\u4e91\u63d0\u4f9b\u5546\u548c\u5185\u90e8\u90e8\u7f72\u7cfb\u7edf\u8fdb\u884c\u901a\u4fe1\u3002","title":"Queue-Worker &amp; NATS"},{"location":"serverless/openfaas/#promethus-alertmanager-faas-idler","text":"Promethus \u6536\u96c6\u76d1\u63a7\u6307\u6807\uff1b \u63a5\u53d7AlterManager\u901a\u77e5\uff0c\u81ea\u52a8\u6269\u7f29\u5bb9\u3002 Faas-idler\uff1a \u76d1\u63a7Prometheus \u6307\u6807\uff0c\u51b3\u5b9a\u662f\u5426\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u88ab scaled to zero.","title":"Promethus &amp; AlertManager &amp; Faas-idler"},{"location":"serverless/openfaas/#gateway_1","text":"https://github.com/openfaas/faas https://github.com/openfaas/nats-queue-worker gateway/main.go ReadConfig (\u8bfb\u53d6\u73af\u5883\u914d\u7f6e\u4fe1\u606f) BasicAuthCredentials (\u57fa\u672c\u7684\u8eab\u4efd\u8ba4\u8bc1) MakeForwardingProxyHandler (\u548c\u51fd\u6570\u76f8\u5173\u7684\u4ee3\u7406\u8f6c\u53d1\uff0cnet/http\u4e0a\u62bd\u8c61\u4e86\u4e00\u5c42) List: faasHandlers.ListFunctions Deploy: faasHandlers.DeployFunction Delete: faasHandlers.DeleteFunction Update: faasHandlers.UpdateFunction Query: faasHandlers.QueryFunction Info\uff1afaasHandlers.InfoHandler Secret\uff1afaasHandlers.SecretHandler Namespace: faasHandlers.NamespaceListerHandler if ScaleFromZero : NewFunctionCache \uff08\u53c2\u8003 zero-scale \uff09 If UseNATS : CreateNATSQueue (\u5f02\u6b65\u51fd\u6570\u542f\u7528NATS\uff0c\u6d88\u606f\u53d1\u5e03\u8005\u89d2\u8272) NewPrometheusQuery\uff08\u8bbe\u7f6ePrometheus\u76d1\u63a7\uff09 Scale\uff1afaasHandlers.ScaleFunction\uff08\u8bbe\u7f6e\u81ea\u52a8\u6269\u7f29\u5bb9\uff09 mux.NewRouter()\uff08\u6ce8\u518c\u5404\u79cd\u8def\u7531\uff09 go runMetricsServer()\uff08\u542f\u52a8Prometheus\u6307\u6807\u6536\u96c6\uff09 &http.Server{} => ListenAndServe \uff08\u542f\u52a8\u670d\u52a1\uff09 \u53ef\u89c1\uff0cGateway \u662f OpenFaaS \u6700\u4e3a\u91cd\u8981\u7684\u4e00\u4e2a\u7ec4\u4ef6\u3002\u6574\u4e2a\u9879\u76ee\u7684\u57fa\u672c\u8109\u7edc\u90fd\u5728\u8fd9\u4e2a\u7ec4\u4ef6\u4e2d\uff0c\u4e3b\u8981\u5c31\u662f\u4ee3\u7406\u8f6c\u53d1\u3002","title":"Gateway \u6e90\u7801\u5206\u6790"},{"location":"serverless/openfaas/#provider_1","text":"https://github.com/openfaas/faas-provider serve.go r = mux.NewRouter() \uff08\u6ce8\u518c\u5404\u79cd\u8def\u7531\uff09 Serve if EnableBasicAuth: handlers.FunctionReader = auth.DecorateWithBasicAuth (\u9274\u6743) r.HandleFunc(\"/system/***\") (\u5904\u7406 HTTP \u8bf7\u6c42\u7b49\u8def\u7531) r.HandleFunc(\"/function/***\") r.HandleFunc(\"/healthz/***\") ListenAndServe() types/serve.go type FaaSHandlers struct { // FunctionProxy provides the function invocation proxy logic. Use proxy.NewHandlerFunc to // use the standard OpenFaaS proxy implementation or provide completely custom proxy logic. FunctionProxy http.HandlerFunc FunctionReader http.HandlerFunc DeployHandler http.HandlerFunc DeleteHandler http.HandlerFunc ReplicaReader http.HandlerFunc ReplicaUpdater http.HandlerFunc SecretHandler http.HandlerFunc // LogHandler provides streaming json logs of functions LogHandler http.HandlerFunc // UpdateHandler an existing function/service UpdateHandler http.HandlerFunc // HealthHandler defines the default health endpoint bound to \"/healthz // If the handler is not set, then the \"/healthz\" path will not be configured HealthHandler http.HandlerFunc InfoHandler http.HandlerFunc ListNamespaceHandler http.HandlerFunc } \u58f0\u660e\u5404\u79cd handler \u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u5e73\u53f0\uff08kubernetes or DockerSwarm\uff09\u90fd\u5177\u5907\u4e86FaaS Provider \u7684\u80fd\u529b\u3002 proxy/proxy.go // proxyRequest \u5904\u7406\u8c03\u7528\u51fd\u6570\u670d\u52a1\u7684\u5b9e\u9645\u8bf7\u6c42 func proxyRequest(...) { ... proxyReq = buildProxyRequest(originalReq, functionAddr, pathVars[\"params\"]) } // \u62fc\u88c5 Watchdog \u7684 Url\uff0c\u5e76\u4ee3\u7406\u8fc7\u53bb func buildProxyRequest(...) { f baseURL.Port() == \"\" { host = baseURL.Host + \":\" + watchdogPort } url := url.URL{ Scheme: baseURL.Scheme, Host: host, Path: extraPath, RawQuery: originalReq.URL.RawQuery, } upstreamReq, err := http.NewRequest(originalReq.Method, url.String(), nil) if err != nil { return nil, err } ... return upstreamReq } https://github.com/openfaas/faas-netes main.go main() { if !operator { runController(kubeconfig, masterURL) // \u8fd0\u884c k8s \u7684\u6838\u5fc3\u63a7\u5236\u5668 } else { runOperator(kubeconfig, masterURL) // \u64cd\u4f5c k8s \u7684CRD \u8d44\u6e90\uff0c\u65b0\u589e\u80fd\u529b } } // masterURL\uff1a address of the Kubernetes API server // operator\uff1aUse the operator mode instead of faas-netes The faas-netes controller for OpenFaaS is the most mature, well tested and supported. You may also use the OpenFaaS Operator if you would like to use a Function CRD. If you are not sure which to use, then use faas-netes. See also: faas-netes , openfaas-operator . func runController(kubeconfig, masterURL string) { // 1. k8s namespace functionNamespace := \"default\" // 2. \u83b7\u53d6 k8s, \u63a2\u9488\uff0c\u955c\u50cf\u62c9\u53d6\u7b56\u7565\u7b49\u914d\u7f6e\u4fe1\u606f deployConfig := k8s.DeploymentConfig{} // 3. k8s \u5ba2\u6237\u7aef factory := k8s.NewFunctionFactory(clientset, deployConfig) // 4. \u6838\u5fc3\uff1a k8s \u64cd\u4f5c\u53e5\u67c4 bootstrapHandlers := providertypes.FaaSHandlers{ FunctionProxy: proxy.NewHandlerFunc(cfg.FaaSConfig, functionLookup), DeleteHandler: handlers.MakeDeleteHandler(functionNamespace, clientset), DeployHandler: handlers.MakeDeployHandler(functionNamespace, factory), FunctionReader: handlers.MakeFunctionReader(functionNamespace, clientset), ReplicaReader: handlers.MakeReplicaReader(functionNamespace, clientset), ReplicaUpdater: handlers.MakeReplicaUpdater(functionNamespace, clientset), UpdateHandler: handlers.MakeUpdateHandler(functionNamespace, factory), HealthHandler: handlers.MakeHealthHandler(), InfoHandler: handlers.MakeInfoHandler(version.BuildVersion(), version.GitCommit), SecretHandler: handlers.MakeSecretHandler(functionNamespace, clientset), LogHandler: logs.NewLogHandlerFunc(k8s.NewLogRequestor(clientset, functionNamespace), cfg.FaaSConfig.WriteTimeout), ListNamespaceHandler: handlers.MakeNamespacesLister(functionNamespace, clientset), } // 5. \u8fd0\u884c\u670d\u52a1\u5668 faasProvider.Serve(&bootstrapHandlers, &cfg.FaaSConfig) } handlers/delete.go // \u8fd4\u56de delete handler func MakeDeleteHandler() { return func{ // ... deployment, findDeployErr := clientset.AppsV1(). Deployments(lookupNamespace). Get(request.FunctionName, getOpts) if isFunction(deployment) { err := deleteFunction(lookupNamespace, clientset, request, w) } // ... } } // \u6267\u884c\u5220\u9664 func deleteFunction(..., clientset *kubernetes.Clientset, ...) { // \u5220\u9664 deploy clientset.AppsV1().Deployments(functionNamespace). Delete(request.FunctionName, opts) // \u5220\u9664 service clientset.CoreV1(). Services(functionNamespace). Delete(request.FunctionName, opts); } handles/replica.go // \u8c03\u7528 Kubernetes API \u8fdb\u884c\u7684\u6269\u7f29\u5bb9\uff0c\u4ee3\u7801\u90fd\u5dee\u4e0d\u591a\uff0c\u4e0d\u518d\u8d58\u8ff0 \u56e0\u6b64\uff0cprovider \u505a\u4e86\u4e24\u4ef6\u4e8b\uff0c \u4ee3\u7406\u8f6c\u53d1\u8bf7\u6c42\u5230 watchdog \u64cd\u4f5c Kubernetes","title":"Provider \u6e90\u7801\u5206\u6790"},{"location":"serverless/openfaas/#watchdog_1","text":"https://github.com/openfaas/faas watchdog/main.go func main() { // 1. \u8bfb\u53d6\u914d\u7f6e readConfig := ReadConfig{} config := readConfig.Read(osEnv) // 2. \u5904\u7406\u8bf7\u6c42 http.HandleFunc(\"/_/health\", makeHealthHandler()) // \u6838\u5fc3 makeRequestHandler http.HandleFunc(\"/\", metrics.InstrumentHandler(makeRequestHandler(&config), httpMetrics)) // 3. Promethus \u670d\u52a1 go metricsServer.Serve(cancel) // 4. \u51fd\u6570\u670d\u52a1 listenUntilShutdown(shutdownTimeout, s, config.suppressLock) } // listen for HTTP \u76f4\u5230\u542c\u5230\u4fe1\u53f7 SIGTERM \u4e14\u7b49\u5f85\u8d85\u65f6\u540e func listenUntilShutdown() { // Run the HTTP server in a separate go-routine. go func() { if err := s.ListenAndServe(); err != http.ErrServerClosed { log.Printf(\"Error ListenAndServe: %v\", err) close(idleConnsClosed) } }() } watchdog/handler.go // \u5904\u7406 Http \u8bf7\u6c42 func makeRequestHandler(config *WatchdogConfig) http.HandlerFunc { switch r.Method { case http.MethodPost, http.MethodPut, http.MethodPatch, http.MethodDelete, http.MethodGet: pipeRequest(config, w, r, r.Method) break } } // \u6838\u5fc3\uff1apipeRequest // \u4e3a\u6bcf\u4e2a\u8bf7\u6c42 Fork \u4e00\u4e2a fprocess func pipeRequest() { // ... parts := strings.Split(config.faasProcess, \" \") // faasProcess: \"node index.js\" // ... targetCmd := exec.Command(parts[0], parts[1:]...) // \u6267\u884c\u51fd\u6570 // ... requestBody, buildInputErr = buildFunctionInput(config, r) // ... } // \u683c\u5f0f\u5316\u8f93\u5165 buildFunctionInput(config *WatchdogConfig, r *http.Request) { //... return res, err } watchdog/readconfig.go func (ReadConfig) Read(hasEnv HasEnv) WatchdogConfig { // ... cfg.faasProcess = hasEnv.Getenv(\"fprocess\") // ... }","title":"Watchdog \u6e90\u7801\u5206\u6790"},{"location":"serverless/openfaas/#_4","text":"\u901a\u8fc7 faas-cli \u5982\u4f55\u7ef4\u62a4\u4e00\u4e2a Serveless \u5e94\u7528 \u770b Templetes \u7684 Dockerfile \u77e5\u9053\u8fd9\u4e2a\u955c\u50cf\u662f\u600e\u4e48\u6784\u5efa \u8bfb\u6e90\u7801\u77e5\u9053 openFaas \u90fd\u505a\u4e86\u4ec0\u4e48\uff0c\u5982\u4f55\u4f7f\u7528 kubernets \u7684\u80fd\u529b \u6b64\u5916\uff0c\u8bfb\u5185\u7f6eUI \u6e90\u7801\u53ef\u5b9a\u5236\u5316\u53ca\u5f00\u53d1\u516c\u53f8UI\u53ca\u5185\u90e8\u5546\u5e97\u7b49\u3002 ...","title":"\u603b\u7ed3"},{"location":"serverless/openfaas/#landscape-20","text":"","title":"Landscape 2.0"},{"location":"serverless/serverless-docs%20tmp%20notes/","text":"serverless \u6280\u672f\u5206\u4eab \u00b6 \u7b2c\u4e00\u6b21\u5206\u4eab \u00b6 2020-04-29 \u5927\u5bb6\u597d \u6211\u662flego\u524d\u7aef\u7684\u9648\u78ca\u78ca\uff0c\u6b22\u8fce\u5927\u5bb6\u6765\u5230 lego \u524d\u7aef\u7ec4\u7684 Serverless \u5165\u5751\uff0c\u4e0d\u5bf9\uff0c\u5165\u95e8\u5206\u4eab\u3002 \u4e0a\u5348\u8fd8\u5728\u6539\u4e50\u9ad84.0\u7684\u524d\u7aef\u8868\u5355bug\uff0c\u8bf4\u597d\u7684\u4e0b\u53486\u70b99\u4eba\u5f00\u9ed1\uff0c\u7a81\u7136\u53d8\u6210\u591a\u4eba\u8fd0\u52a8\u3002 \u6709\u70b9\u731d\u4e0d\u53ca\u9632\uff0c\u51c6\u5907\u4e0d\u8db3\uff0c\u4e00\u4e0b\u5b50\u8981\u5f15\u8bf1\u8fd9\u4e48\u591a\u4eba\u5584\u826f\u65e0\u8f9c\u7684\u540c\u5b66\u5165\u5751\uff0c\u6709\u4e9b\u538b\u529b\u7d27\u5f20\u3002 \u4f46\u5148\u8bf4\u4e00\u53e5\uff0c\u5165\u5751\u4e0d\u4e8f\u3002\u4ee5\u540e\u5927\u5bb6\u90fd\u662f\u8981\u7ad9\u5728\u5f00\u53d1\u8fd0\u7ef4\u8005\u9876\u7aef\u7684\u4eba\u554a\u3002 \u6240\u4ee5\uff0c\u6211\u5c31\u5f00\u59cb\u80e1\u8bf4\u516b\u9053\u4e86\u3002\u540c\u948a\u4e0a\u5348\u8ddf\u6211\u627f\u8bfa\u8fc7\uff0c\u6709\u4ed6\u5728\uff0c\u5c3d\u7ba1\u8bf4\u3002 \u800c\u4e14\u5927\u5bb6\u90fd\u662f\u81ea\u5df1\u4eba\uff0c\u90a3\u6211\u5c31\u6709\u6043\u65e0\u6050\u4e86\u3002 \u95f2\u8bdd\u5c11\u53d9\uff0c\u8a00\u5f52\u6b63\u4f20\u3002 \u7b2c\u4e8c\u6b21\u5206\u4eab \u00b6 2020-05-13 Hello \u5927\u5bb6\u597d\uff0c\u8fd9\u6b21\u5206\u4eab\u8fd8\u662f\u6211\u3002 \u4e0a\u6b21\u5206\u4eab\u7684\u6548\u679c\u4e0d\u592a\u597d\uff0c\u6240\u4ee5serverless\u5174\u8da3\u7ec4\u4e00\u81f4\u51b3\u5b9a\uff1a\u518d\u7ed9\u6211\u673a\u4f1a\uff0c\u8ba9\u6211\u518d\u641e\u7838\u4e00\u6b21\u3002\u4ee5\u6b64\u6765\u8bc1\u660e\uff0c\u6211\u7a76\u7adf\u662f\u6709\u591a\u4e0d\u884c\u3002 \u4e66\u63a5\u4e0a\u6587\uff0c\u8bf4\u5230\u4e0a\u6b21\u7684\u8d25\u7b14\u5462\uff0c\u5c31\u662f\u5f53\u8c08\u4e00\u4e2a\u6982\u5ff5\u7684\u5165\u95e8\uff0c\u4e00\u4e0a\u6765\u5c31\u8bfb openfaas \u6e90\u7801\u6709\u7684\u4e0d\u5408\u65f6\u5b9c\u3002\u5176\u5b9e\uff0c\u5982\u679c\u6211\u4f1a\u65f6\u95f4\u7ba1\u7406\u7684\u8bdd\uff0c\u5e26\u5927\u5bb6\u770b\u5b8c\u6e90\u7801\uff0c\u5c31\u662f\u4e3a\u4e86\u8bf4\u660e\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\uff1a \u725b\u903c\u7a0b\u5e8f\u5458\u5199\u5f97\u4ee3\u7801\u6709\u591a\u6613\u8bfb\uff0c\u5c31\u8fde\u6211\u4e00\u4e2a\u524d\u7aef\u540c\u5b66\u90fd\u80fd\u770b\u61c2\u3002 \u7b80\u5355\u5230\u4ec0\u4e48\u7a0b\u5ea6\u5462\uff0c\u6bd4\u6211\u548c\u662d\u8f89\u5929\u5929\u52a0\u73ed \u534a\u7eaf\u624b\u5de5\u6253\u9020\u7684IVP\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\u8fd8\u8981\u7b80\u5355\u6613\u61c2\u3002\u534a\u7eaf\u624b\u5de5\u6253\u9020\u8fd9\u91cc\u89e3\u91ca\u4e00\u4e0b\uff0c\u5c31\u662f**\u624b\u5de5\u5b9e\u73b0\u7684\u6d41\u7a0b\u56fe\u6838\u5fc3\u7b97\u6cd5 +\u624b\u52a8\u6253\u9020\u7684\u4e8b\u4ef6\u6ce8\u518c\u8ba2\u9605\u673a\u5236 + \u5f53\u65f6\u534a\u6210\u54c1\u7684\u963f\u91ccantv/g6 3.x\u6e32\u67d3\u5f15\u64ce**\u3002 \u5f53\u65f6antv/g6\u521a\u5347\u7ea7\u5230 3.x\uff0c\u5f88\u591a\u529f\u80fd\u548c\u6587\u6863\u90fd\u4e0d\u5b8c\u5584\uff0c\u8981\u8bfb\u6e90\u7801\u8981\u81ea\u5df1\u5f00\u53d1\u3002\u624d\u53d1\u73b0\u9650\u5236\u81ea\u5df1\u7684\u74f6\u9888\u662f\u5e73\u9762\u51e0\u4f55\u6570\u5b66\uff0c\u7b97\u51e0\u9875\u8349\u7a3f\u7eb8\uff0c\u8fde\u4e00\u4e2a\u5f27\u7ebf\u7684\u5207\u7ebf\u89d2\u90fd\u7b97\u4e0d\u4e0a\u6765\uff0c\u8fd8\u662f\u9e4f\u98de\u5e2e\u6211\u89e3\u56f4\uff0c\u8bf4\u8fd9\u662f\u4e00\u6b3e\u4ea7\u54c1\u4e0d\u662f\u8003\u8bd5\u9898\uff0c\u5c31\u8fd9\u6837\u5427\u3002\u6094\u4e0d\u5f53\u521d\u5927\u5b66\u7814\u7a76\u751f\u5c31\u77e5\u9053\u5403\u559d\u73a9\u4e50\uff0c\u7ec8\u4e8e\u6210\u4e86\u4e00\u4e2a\u5bf9\u793e\u4f1a\u65e0\u7528\u4e4b\u4eba\u3002 \u5bf9\u5427\uff0c\u6bd4\u8d77OpenFaaS\u6846\u67b6\uff0cIVP\u90a3\u4e48\u7b80\u5355\u4e00\u4e2a\u5e73\u53f0\uff0c\u5199\u7684\u4ee3\u7801\u7ec4\u5185\u81ea\u5df1\u4eba\u8bfb\u8d77\u6765\u90fd\u8d39\u52b2\uff0c\u53ef\u89c1\u4ee3\u7801\u5199\u5f97\u6709\u591a\u7cdf\u7cd5\u3002\u6240\u4ee5\uff0c\u6211\u7ecf\u5e38\u8ddf\u662d\u8f89\u8bf4\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u5458\u8d8a\u725b\u903c\uff0c\u4ed6\u5199\u7684\u4ee3\u7801\u8d8a\u7b80\u5355\u6613\u61c2\uff0c\u5f3a\u5c31\u5f3a\u5728\u80fd\u5a34\u719f\u7684\u8fd0\u7528\u4e00\u4e9b\u597d\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5f53\u7136\uff0c\u662d\u8f89\u5f00\u53d1\u7684\u90a3\u90e8\u5206\u4ee3\u7801\u8fd8\u662f\u76f8\u5f53\u8d4f\u5fc3\u60a6\u76ee\u7684\uff0c\u8bf4\u660e\u662d\u8f89\u6280\u672f\u8fd8\u662f\u6bd4\u6211\u5f3a\u3002 \u5440\u804a\u504f\u4e86\uff0c\u8fd9IVP\u5e7f\u544a\u690d\u5165\u76f8\u5f53\u751f\u786c\u554a\u3002 \u771f\u7684\uff0c\u60f3\u5165\u5751\u7684\u540c\u5b66\uff0c\u5efa\u8bae\u5927\u5bb6\u8bfb\u4e00\u8bfb\uff0c\u4e3b\u8981\u770b\u770b\u4eba\u5bb6\u7684\u8bbe\u8ba1\u601d\u60f3\u3002\u8bfb\u5b8c\u5c31\u6709\u4fe1\u5fc3\u4e86\uff0c\u5bf9\u5427\uff0c\u6211\u8fdeserverless\u6846\u67b6\u6e90\u7801\u90fd\u8bfb\u8fc7\u4e86\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u5728\u522b\u4eba\u7684\u6846\u67b6\u4e0a\u505a\u9002\u5408\u516c\u53f8\u4e1a\u52a1\u7684\u4e8c\u6b21\u5f00\u53d1\uff0c\u751a\u81f3\u81ea\u5df1\u5b9e\u73b0\u4e00\u5957serverlss\u6846\u67b6\u539f\u578b\u3002 \u597d\u4e86\uff0c\u53c8\u626f\u8fdc\u4e86\u3002\u540c\u948a\u540c\u5b66\u4e5f\u4e0d\u6253\u65ad\u4e00\u4e0b\u6211\u3002 \u95f2\u8bdd\u5c11\u53d9\uff0c\u8a00\u5f52\u6b63\u4f20\u3002\u8fd8\u662f\u91cd\u70b9\u6765\u770bknative\u5427\u3002 \u7a81\u7136\u89c9\u5f97knative\u6709\u70b9\u6e23\uff0c\u770b\u770b\u524d\u8fb9\u5c55\u793a\u7684landscape 2.0\uff0c\u8fd8\u4e0e openfaas \u6697\u901a\u6b3e\u66f2\u3002\u770b\u6765\u5b9e\u9524\u4e86\uff0c\u786e\u5b9e\u6e23\uff0c\u5bf9\u4e0d\u5bf9\u3002 \u8fd9\u4e2a\u6846\u67b6\u8fd9\u4e48\u6e23\uff0c\u6211\u4eec\u90fd\u662f\u4e09\u89c2\u90fd\u5f88\u6b63\u7684\u540c\u5b66\uff0c\u6211\u4eec\u8be5\u7814\u7a76\u5b83\u5417\u3002 \u6309\u7167\u4e00\u6761\u4e0d\u6210\u6587\u7684\uff0c\u5927\u5bb6\u90fd\u770b\u7834\u4e0d\u8bf4\u7834\u7684\u793e\u4f1a\u6cd5\u5219\uff0c\u4e00\u822c\u6bd4\u8f83\u6e23\u7684\uff0c\u90fd\u5177\u6709\u62e5\u6709\u6bd4\u8f83\u591a\u7684\u793e\u4f1a\u8d44\u6e90\u7684\u80fd\u529b\u6216\u6f5c\u529b\u3002 \u6240\u4ee5\uff0c\u4ece\u8fd9\u70b9\u6765\u8bf4\uff0cknative\u8fd8\u86ee\u5389\u5bb3\uff0c\u503c\u5f97\u7814\u7a76\u3002\u4f46\u7814\u7a76\u7684\u540c\u65f6\uff0c\u8b66\u60d5\u4e09\u89c2\u4e0d\u8981\u88ab\u5e26\u8dd1\u504f\u3002 Serving, Eventing \u8fd9\u540d\u5b57\u8ba9\u6211\u60f3\u4e86\u534a\u5929\uff0cgoogle,ibm \u7a0b\u5e8f\u733f\u7684\u8bed\u6587\u6c34\u5e73\u6709\u9650\u4e48\uff1f \u540e\u6765\u60f3\u660e\u767d\u4e86\uff0c\u6709\u70b9\u50cf\u8fd0\u884c\u65f6\u7684\u6982\u5ff5\uff0c\u4f60\u7528\u5b83\u5462\u4ed6\u5c31\u8fd0\u884c\uff0c\u4e0d\u7528\u5462\u5c31\u6ca1\u4e86\u3002\u8fd9\u5c31\u662fserverless\u3002 \u55ef \u8fd9\u540d\u5b57\u8fd8\u633a\u8bb2\u7a76\uff0c\u4e00\u4e2a\u597d\u7684\u547d\u540d\uff0c\u5176\u597d\u5904\uff0c\u786e\u5b9e\u503c\u5f97\u5927\u4e66\u7279\u4e66\u3002 \u4e3a\u4ec0\u4e48\u8981\u63d0\u8fd9\u4e2a\u547d\u540d\u5462\uff0c\u540e\u8fb9\u4e5f\u4f1a\u8bf4\u5230\u8fd9\u4e00\u70b9\u3002 tekton \u4e3a\u5565\u88ab\u72ec\u7acb\u51fa\u6765\uff0c\u770b\u540d\u5b57\uff0cserving, eventing, monitoring, build,\u3002\u3002\u3002 \u662f\u4e0d\u662f\uff0c\u4e0d\u5408\u7fa4\u5457\u3002\u6ca1\u6709ing \u5c0f\u5c3e\u5df4\u3002 \u5341\u516b\u76f8\u9001\u4e00\u6c34\u9ed1\uff0c\u7edd\u5bf9\u7684\u5e84\u4e25\u8083\u7a46\uff0c\u7edd\u5bf9\u7684\u6c14\u52bf\u5982\u8679\uff0c\u642d\u7075\u5802\uff0c\u9001\u7eb8\u94b1\uff0c\u4e27\u846c\u670d\u52a1\u4e00\u6761\u9f99\uff0c\u4e00\u6761\u9f99\u3002 knative \u770b\u529f\u80fd\u8fd8\u662f\u633a\u5f3a\u5927\u7684\uff0c\u5b83\u76ee\u6807\u5c31\u4f1a\u4e0d\u7528\u5728\u8003\u8651 paas/caas/faas \u8fd9\u4e9b\u6982\u5ff5\uff0c\u73b0\u5728\u4e5f\u505a\u5230\u4e86\u8fd9\u4e9b\u3002 \u60f3\u8d77 knative \u6846\u67b6\u7684\u5f00\u53d1\u8005\u63a8\u5e7f\u65f6\u8bf4\u7684\u7b2c\u4e00\u53e5\u8bdd\u5c31\u662f\uff0cStop call me serverless! \u6211\u8981\u662f\u5728\u73b0\u573a\uff0c\u5c31\u4e00\u53e5\u8bdd\u603c\u56de\u53bb\uff1a\u5478\uff0c\u6e23\u7537\u3002\u8bc1\u636e\u5462\uff0c\u7785\u7785\u4f60\u7684Eventing,Serving \u8fd9\u4e9b\u540d\u5b57\uff0c\u524d\u5973\u53cbServerless\u7559\u4e0b\u7684\u7099\u70ed\u70d9\u5370\u8fd8\u6ca1\u51c9\u51c9\u5462\u3002\u501f\u7740\u522b\u4eba\u4e0a\u4f4d\uff0c\u73b0\u5728\u5c31\u6025\u7740\u8ddf\u4eba\u6487\u6e05\u5173\u7cfb\uff0c\u771f\u6e23\uff0c\u5bf9\u5427\u771f\u6e23\u3002 \u4f46\u540c\u65f6\u5fc3\u7406\u6697\u6697\u8bf4\uff0c\u55ef\uff0c\u725b\u903c\uff0c\u54e5\u4eec\u513f\u725b\u903c\u3002\u771f\u9999\u3002 \u4e2a\u4eba\u8fd8\u6bd4\u8f83\u770b\u597d\u8fd9\u4e2a\u6846\u67b6\u7684\uff0c\u5927\u5382\u51fa\u54c1\uff0c\u76f2\u76ee\u5d07\u62dc\u3002 \u8fd9\u4e5f\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6280\u672f\u5b85\u7684\u597d\u6076\uff0c\u5c31\u662f\u76f2\u76ee\uff0c\u6ca1\u4ec0\u4e48\u9053\u7406\u53ef\u8bb2\u3002\u5c31\u50cf IVP\uff0c\u624d\u62ff\u5230\u9879\u76ee\u65f6\uff0c\u5f88\u6709\u6311\u6218\u6027\uff0c\u771f\u9999\uff1b\u540e\u6765\uff0c\u6ca1\u6210\u4e3a\u4e00\u6b3e\u597d\u7684\u4ea7\u54c1\uff0c\u518d\u770b\u5b83\uff0c\u54a6\u9e45\uff0c\u5144\u53f0\uff0c\u4f60\u54ea\u4f4d\u554a\uff1f\uff01 \u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u5f00\u53d1\u8005\u7684\u8d23\u4efb\uff0c\u4f46\u4f5c\u4e3a\u5f00\u53d1\u8005\u4f60\u80fd\u505a\u5230\u7684\u4e8b\u60c5\u4e5f\u662f\u6709\u9650\u7684\uff0c\u5927\u5bb6\u90fd\u662f\u7814\u53d1\uff0c\u5e94\u8be5\u6df1\u6709\u540c\u611f\u3002 \u5443\uff0c\u53c8\u8dd1\u504f\u4e86\u3002\u603b\u7ed3\u4e00\u4e0b\u5462\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u662f\u5f88\u4e0d\u9519\u7684\uff0c\u503c\u5f97\u7814\u7a76\uff0c\u5165\u5751\u4e0d\u4e8f\u3002\u4f46\u9002\u4e0d\u9002\u5408\u843d\u5730\u5462\uff0c\u5c31\u7531\u5bf9\u516c\u53f8\u4e1a\u52a1\u66f4\u52a0\u719f\u6089\u7684\u5176\u4ed6\u540c\u5b66\u7684\u6743\u8861\u5427\u3002","title":"\u6280\u672f\u5206\u4eab\u8349\u7a3f"},{"location":"serverless/serverless-docs%20tmp%20notes/#serverless","text":"","title":"serverless \u6280\u672f\u5206\u4eab"},{"location":"serverless/serverless-docs%20tmp%20notes/#_1","text":"2020-04-29 \u5927\u5bb6\u597d \u6211\u662flego\u524d\u7aef\u7684\u9648\u78ca\u78ca\uff0c\u6b22\u8fce\u5927\u5bb6\u6765\u5230 lego \u524d\u7aef\u7ec4\u7684 Serverless \u5165\u5751\uff0c\u4e0d\u5bf9\uff0c\u5165\u95e8\u5206\u4eab\u3002 \u4e0a\u5348\u8fd8\u5728\u6539\u4e50\u9ad84.0\u7684\u524d\u7aef\u8868\u5355bug\uff0c\u8bf4\u597d\u7684\u4e0b\u53486\u70b99\u4eba\u5f00\u9ed1\uff0c\u7a81\u7136\u53d8\u6210\u591a\u4eba\u8fd0\u52a8\u3002 \u6709\u70b9\u731d\u4e0d\u53ca\u9632\uff0c\u51c6\u5907\u4e0d\u8db3\uff0c\u4e00\u4e0b\u5b50\u8981\u5f15\u8bf1\u8fd9\u4e48\u591a\u4eba\u5584\u826f\u65e0\u8f9c\u7684\u540c\u5b66\u5165\u5751\uff0c\u6709\u4e9b\u538b\u529b\u7d27\u5f20\u3002 \u4f46\u5148\u8bf4\u4e00\u53e5\uff0c\u5165\u5751\u4e0d\u4e8f\u3002\u4ee5\u540e\u5927\u5bb6\u90fd\u662f\u8981\u7ad9\u5728\u5f00\u53d1\u8fd0\u7ef4\u8005\u9876\u7aef\u7684\u4eba\u554a\u3002 \u6240\u4ee5\uff0c\u6211\u5c31\u5f00\u59cb\u80e1\u8bf4\u516b\u9053\u4e86\u3002\u540c\u948a\u4e0a\u5348\u8ddf\u6211\u627f\u8bfa\u8fc7\uff0c\u6709\u4ed6\u5728\uff0c\u5c3d\u7ba1\u8bf4\u3002 \u800c\u4e14\u5927\u5bb6\u90fd\u662f\u81ea\u5df1\u4eba\uff0c\u90a3\u6211\u5c31\u6709\u6043\u65e0\u6050\u4e86\u3002 \u95f2\u8bdd\u5c11\u53d9\uff0c\u8a00\u5f52\u6b63\u4f20\u3002","title":"\u7b2c\u4e00\u6b21\u5206\u4eab"},{"location":"serverless/serverless-docs%20tmp%20notes/#_2","text":"2020-05-13 Hello \u5927\u5bb6\u597d\uff0c\u8fd9\u6b21\u5206\u4eab\u8fd8\u662f\u6211\u3002 \u4e0a\u6b21\u5206\u4eab\u7684\u6548\u679c\u4e0d\u592a\u597d\uff0c\u6240\u4ee5serverless\u5174\u8da3\u7ec4\u4e00\u81f4\u51b3\u5b9a\uff1a\u518d\u7ed9\u6211\u673a\u4f1a\uff0c\u8ba9\u6211\u518d\u641e\u7838\u4e00\u6b21\u3002\u4ee5\u6b64\u6765\u8bc1\u660e\uff0c\u6211\u7a76\u7adf\u662f\u6709\u591a\u4e0d\u884c\u3002 \u4e66\u63a5\u4e0a\u6587\uff0c\u8bf4\u5230\u4e0a\u6b21\u7684\u8d25\u7b14\u5462\uff0c\u5c31\u662f\u5f53\u8c08\u4e00\u4e2a\u6982\u5ff5\u7684\u5165\u95e8\uff0c\u4e00\u4e0a\u6765\u5c31\u8bfb openfaas \u6e90\u7801\u6709\u7684\u4e0d\u5408\u65f6\u5b9c\u3002\u5176\u5b9e\uff0c\u5982\u679c\u6211\u4f1a\u65f6\u95f4\u7ba1\u7406\u7684\u8bdd\uff0c\u5e26\u5927\u5bb6\u770b\u5b8c\u6e90\u7801\uff0c\u5c31\u662f\u4e3a\u4e86\u8bf4\u660e\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\uff1a \u725b\u903c\u7a0b\u5e8f\u5458\u5199\u5f97\u4ee3\u7801\u6709\u591a\u6613\u8bfb\uff0c\u5c31\u8fde\u6211\u4e00\u4e2a\u524d\u7aef\u540c\u5b66\u90fd\u80fd\u770b\u61c2\u3002 \u7b80\u5355\u5230\u4ec0\u4e48\u7a0b\u5ea6\u5462\uff0c\u6bd4\u6211\u548c\u662d\u8f89\u5929\u5929\u52a0\u73ed \u534a\u7eaf\u624b\u5de5\u6253\u9020\u7684IVP\u4e92\u52a8\u89c6\u9891\u5236\u4f5c\u5e73\u53f0\u8fd8\u8981\u7b80\u5355\u6613\u61c2\u3002\u534a\u7eaf\u624b\u5de5\u6253\u9020\u8fd9\u91cc\u89e3\u91ca\u4e00\u4e0b\uff0c\u5c31\u662f**\u624b\u5de5\u5b9e\u73b0\u7684\u6d41\u7a0b\u56fe\u6838\u5fc3\u7b97\u6cd5 +\u624b\u52a8\u6253\u9020\u7684\u4e8b\u4ef6\u6ce8\u518c\u8ba2\u9605\u673a\u5236 + \u5f53\u65f6\u534a\u6210\u54c1\u7684\u963f\u91ccantv/g6 3.x\u6e32\u67d3\u5f15\u64ce**\u3002 \u5f53\u65f6antv/g6\u521a\u5347\u7ea7\u5230 3.x\uff0c\u5f88\u591a\u529f\u80fd\u548c\u6587\u6863\u90fd\u4e0d\u5b8c\u5584\uff0c\u8981\u8bfb\u6e90\u7801\u8981\u81ea\u5df1\u5f00\u53d1\u3002\u624d\u53d1\u73b0\u9650\u5236\u81ea\u5df1\u7684\u74f6\u9888\u662f\u5e73\u9762\u51e0\u4f55\u6570\u5b66\uff0c\u7b97\u51e0\u9875\u8349\u7a3f\u7eb8\uff0c\u8fde\u4e00\u4e2a\u5f27\u7ebf\u7684\u5207\u7ebf\u89d2\u90fd\u7b97\u4e0d\u4e0a\u6765\uff0c\u8fd8\u662f\u9e4f\u98de\u5e2e\u6211\u89e3\u56f4\uff0c\u8bf4\u8fd9\u662f\u4e00\u6b3e\u4ea7\u54c1\u4e0d\u662f\u8003\u8bd5\u9898\uff0c\u5c31\u8fd9\u6837\u5427\u3002\u6094\u4e0d\u5f53\u521d\u5927\u5b66\u7814\u7a76\u751f\u5c31\u77e5\u9053\u5403\u559d\u73a9\u4e50\uff0c\u7ec8\u4e8e\u6210\u4e86\u4e00\u4e2a\u5bf9\u793e\u4f1a\u65e0\u7528\u4e4b\u4eba\u3002 \u5bf9\u5427\uff0c\u6bd4\u8d77OpenFaaS\u6846\u67b6\uff0cIVP\u90a3\u4e48\u7b80\u5355\u4e00\u4e2a\u5e73\u53f0\uff0c\u5199\u7684\u4ee3\u7801\u7ec4\u5185\u81ea\u5df1\u4eba\u8bfb\u8d77\u6765\u90fd\u8d39\u52b2\uff0c\u53ef\u89c1\u4ee3\u7801\u5199\u5f97\u6709\u591a\u7cdf\u7cd5\u3002\u6240\u4ee5\uff0c\u6211\u7ecf\u5e38\u8ddf\u662d\u8f89\u8bf4\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u5458\u8d8a\u725b\u903c\uff0c\u4ed6\u5199\u7684\u4ee3\u7801\u8d8a\u7b80\u5355\u6613\u61c2\uff0c\u5f3a\u5c31\u5f3a\u5728\u80fd\u5a34\u719f\u7684\u8fd0\u7528\u4e00\u4e9b\u597d\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5f53\u7136\uff0c\u662d\u8f89\u5f00\u53d1\u7684\u90a3\u90e8\u5206\u4ee3\u7801\u8fd8\u662f\u76f8\u5f53\u8d4f\u5fc3\u60a6\u76ee\u7684\uff0c\u8bf4\u660e\u662d\u8f89\u6280\u672f\u8fd8\u662f\u6bd4\u6211\u5f3a\u3002 \u5440\u804a\u504f\u4e86\uff0c\u8fd9IVP\u5e7f\u544a\u690d\u5165\u76f8\u5f53\u751f\u786c\u554a\u3002 \u771f\u7684\uff0c\u60f3\u5165\u5751\u7684\u540c\u5b66\uff0c\u5efa\u8bae\u5927\u5bb6\u8bfb\u4e00\u8bfb\uff0c\u4e3b\u8981\u770b\u770b\u4eba\u5bb6\u7684\u8bbe\u8ba1\u601d\u60f3\u3002\u8bfb\u5b8c\u5c31\u6709\u4fe1\u5fc3\u4e86\uff0c\u5bf9\u5427\uff0c\u6211\u8fdeserverless\u6846\u67b6\u6e90\u7801\u90fd\u8bfb\u8fc7\u4e86\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u5728\u522b\u4eba\u7684\u6846\u67b6\u4e0a\u505a\u9002\u5408\u516c\u53f8\u4e1a\u52a1\u7684\u4e8c\u6b21\u5f00\u53d1\uff0c\u751a\u81f3\u81ea\u5df1\u5b9e\u73b0\u4e00\u5957serverlss\u6846\u67b6\u539f\u578b\u3002 \u597d\u4e86\uff0c\u53c8\u626f\u8fdc\u4e86\u3002\u540c\u948a\u540c\u5b66\u4e5f\u4e0d\u6253\u65ad\u4e00\u4e0b\u6211\u3002 \u95f2\u8bdd\u5c11\u53d9\uff0c\u8a00\u5f52\u6b63\u4f20\u3002\u8fd8\u662f\u91cd\u70b9\u6765\u770bknative\u5427\u3002 \u7a81\u7136\u89c9\u5f97knative\u6709\u70b9\u6e23\uff0c\u770b\u770b\u524d\u8fb9\u5c55\u793a\u7684landscape 2.0\uff0c\u8fd8\u4e0e openfaas \u6697\u901a\u6b3e\u66f2\u3002\u770b\u6765\u5b9e\u9524\u4e86\uff0c\u786e\u5b9e\u6e23\uff0c\u5bf9\u4e0d\u5bf9\u3002 \u8fd9\u4e2a\u6846\u67b6\u8fd9\u4e48\u6e23\uff0c\u6211\u4eec\u90fd\u662f\u4e09\u89c2\u90fd\u5f88\u6b63\u7684\u540c\u5b66\uff0c\u6211\u4eec\u8be5\u7814\u7a76\u5b83\u5417\u3002 \u6309\u7167\u4e00\u6761\u4e0d\u6210\u6587\u7684\uff0c\u5927\u5bb6\u90fd\u770b\u7834\u4e0d\u8bf4\u7834\u7684\u793e\u4f1a\u6cd5\u5219\uff0c\u4e00\u822c\u6bd4\u8f83\u6e23\u7684\uff0c\u90fd\u5177\u6709\u62e5\u6709\u6bd4\u8f83\u591a\u7684\u793e\u4f1a\u8d44\u6e90\u7684\u80fd\u529b\u6216\u6f5c\u529b\u3002 \u6240\u4ee5\uff0c\u4ece\u8fd9\u70b9\u6765\u8bf4\uff0cknative\u8fd8\u86ee\u5389\u5bb3\uff0c\u503c\u5f97\u7814\u7a76\u3002\u4f46\u7814\u7a76\u7684\u540c\u65f6\uff0c\u8b66\u60d5\u4e09\u89c2\u4e0d\u8981\u88ab\u5e26\u8dd1\u504f\u3002 Serving, Eventing \u8fd9\u540d\u5b57\u8ba9\u6211\u60f3\u4e86\u534a\u5929\uff0cgoogle,ibm \u7a0b\u5e8f\u733f\u7684\u8bed\u6587\u6c34\u5e73\u6709\u9650\u4e48\uff1f \u540e\u6765\u60f3\u660e\u767d\u4e86\uff0c\u6709\u70b9\u50cf\u8fd0\u884c\u65f6\u7684\u6982\u5ff5\uff0c\u4f60\u7528\u5b83\u5462\u4ed6\u5c31\u8fd0\u884c\uff0c\u4e0d\u7528\u5462\u5c31\u6ca1\u4e86\u3002\u8fd9\u5c31\u662fserverless\u3002 \u55ef \u8fd9\u540d\u5b57\u8fd8\u633a\u8bb2\u7a76\uff0c\u4e00\u4e2a\u597d\u7684\u547d\u540d\uff0c\u5176\u597d\u5904\uff0c\u786e\u5b9e\u503c\u5f97\u5927\u4e66\u7279\u4e66\u3002 \u4e3a\u4ec0\u4e48\u8981\u63d0\u8fd9\u4e2a\u547d\u540d\u5462\uff0c\u540e\u8fb9\u4e5f\u4f1a\u8bf4\u5230\u8fd9\u4e00\u70b9\u3002 tekton \u4e3a\u5565\u88ab\u72ec\u7acb\u51fa\u6765\uff0c\u770b\u540d\u5b57\uff0cserving, eventing, monitoring, build,\u3002\u3002\u3002 \u662f\u4e0d\u662f\uff0c\u4e0d\u5408\u7fa4\u5457\u3002\u6ca1\u6709ing \u5c0f\u5c3e\u5df4\u3002 \u5341\u516b\u76f8\u9001\u4e00\u6c34\u9ed1\uff0c\u7edd\u5bf9\u7684\u5e84\u4e25\u8083\u7a46\uff0c\u7edd\u5bf9\u7684\u6c14\u52bf\u5982\u8679\uff0c\u642d\u7075\u5802\uff0c\u9001\u7eb8\u94b1\uff0c\u4e27\u846c\u670d\u52a1\u4e00\u6761\u9f99\uff0c\u4e00\u6761\u9f99\u3002 knative \u770b\u529f\u80fd\u8fd8\u662f\u633a\u5f3a\u5927\u7684\uff0c\u5b83\u76ee\u6807\u5c31\u4f1a\u4e0d\u7528\u5728\u8003\u8651 paas/caas/faas \u8fd9\u4e9b\u6982\u5ff5\uff0c\u73b0\u5728\u4e5f\u505a\u5230\u4e86\u8fd9\u4e9b\u3002 \u60f3\u8d77 knative \u6846\u67b6\u7684\u5f00\u53d1\u8005\u63a8\u5e7f\u65f6\u8bf4\u7684\u7b2c\u4e00\u53e5\u8bdd\u5c31\u662f\uff0cStop call me serverless! \u6211\u8981\u662f\u5728\u73b0\u573a\uff0c\u5c31\u4e00\u53e5\u8bdd\u603c\u56de\u53bb\uff1a\u5478\uff0c\u6e23\u7537\u3002\u8bc1\u636e\u5462\uff0c\u7785\u7785\u4f60\u7684Eventing,Serving \u8fd9\u4e9b\u540d\u5b57\uff0c\u524d\u5973\u53cbServerless\u7559\u4e0b\u7684\u7099\u70ed\u70d9\u5370\u8fd8\u6ca1\u51c9\u51c9\u5462\u3002\u501f\u7740\u522b\u4eba\u4e0a\u4f4d\uff0c\u73b0\u5728\u5c31\u6025\u7740\u8ddf\u4eba\u6487\u6e05\u5173\u7cfb\uff0c\u771f\u6e23\uff0c\u5bf9\u5427\u771f\u6e23\u3002 \u4f46\u540c\u65f6\u5fc3\u7406\u6697\u6697\u8bf4\uff0c\u55ef\uff0c\u725b\u903c\uff0c\u54e5\u4eec\u513f\u725b\u903c\u3002\u771f\u9999\u3002 \u4e2a\u4eba\u8fd8\u6bd4\u8f83\u770b\u597d\u8fd9\u4e2a\u6846\u67b6\u7684\uff0c\u5927\u5382\u51fa\u54c1\uff0c\u76f2\u76ee\u5d07\u62dc\u3002 \u8fd9\u4e5f\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6280\u672f\u5b85\u7684\u597d\u6076\uff0c\u5c31\u662f\u76f2\u76ee\uff0c\u6ca1\u4ec0\u4e48\u9053\u7406\u53ef\u8bb2\u3002\u5c31\u50cf IVP\uff0c\u624d\u62ff\u5230\u9879\u76ee\u65f6\uff0c\u5f88\u6709\u6311\u6218\u6027\uff0c\u771f\u9999\uff1b\u540e\u6765\uff0c\u6ca1\u6210\u4e3a\u4e00\u6b3e\u597d\u7684\u4ea7\u54c1\uff0c\u518d\u770b\u5b83\uff0c\u54a6\u9e45\uff0c\u5144\u53f0\uff0c\u4f60\u54ea\u4f4d\u554a\uff1f\uff01 \u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u5f00\u53d1\u8005\u7684\u8d23\u4efb\uff0c\u4f46\u4f5c\u4e3a\u5f00\u53d1\u8005\u4f60\u80fd\u505a\u5230\u7684\u4e8b\u60c5\u4e5f\u662f\u6709\u9650\u7684\uff0c\u5927\u5bb6\u90fd\u662f\u7814\u53d1\uff0c\u5e94\u8be5\u6df1\u6709\u540c\u611f\u3002 \u5443\uff0c\u53c8\u8dd1\u504f\u4e86\u3002\u603b\u7ed3\u4e00\u4e0b\u5462\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u662f\u5f88\u4e0d\u9519\u7684\uff0c\u503c\u5f97\u7814\u7a76\uff0c\u5165\u5751\u4e0d\u4e8f\u3002\u4f46\u9002\u4e0d\u9002\u5408\u843d\u5730\u5462\uff0c\u5c31\u7531\u5bf9\u516c\u53f8\u4e1a\u52a1\u66f4\u52a0\u719f\u6089\u7684\u5176\u4ed6\u540c\u5b66\u7684\u6743\u8861\u5427\u3002","title":"\u7b2c\u4e8c\u6b21\u5206\u4eab"}]}